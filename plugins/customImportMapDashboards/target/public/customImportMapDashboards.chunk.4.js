(window["customImportMapDashboards_bundle_jsonpfunction"]=window["customImportMapDashboards_bundle_jsonpfunction"]||[]).push([[4,12],{1061:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);var _typeof=__webpack_require__(8);Object.defineProperty(exports,"__esModule",{value:true});exports.default=QueryBarTopRow;var _slicedToArray2=_interopRequireDefault(__webpack_require__(17));var _datemath=_interopRequireDefault(__webpack_require__(48));var _classnames=_interopRequireDefault(__webpack_require__(44));var _react=_interopRequireWildcard(__webpack_require__(5));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(13);var _react2=__webpack_require__(27);var _public=__webpack_require__(24);var _query_string_input=_interopRequireDefault(__webpack_require__(1062));var _common=__webpack_require__(10);var _query=__webpack_require__(134);var _no_data_popover=__webpack_require__(1098);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var QueryStringInput=(0,_public.withOpenSearchDashboards)(_query_string_input.default);function QueryBarTopRow(props){var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2.default)(_useState,2),isDateRangeInvalid=_useState2[0],setIsDateRangeInvalid=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2.default)(_useState3,2),isQueryInputFocused=_useState4[0],setIsQueryInputFocused=_useState4[1];var opensearchDashboards=(0,_public.useOpenSearchDashboards)();var _opensearchDashboards=opensearchDashboards.services,uiSettings=_opensearchDashboards.uiSettings,notifications=_opensearchDashboards.notifications,storage=_opensearchDashboards.storage,appName=_opensearchDashboards.appName,docLinks=_opensearchDashboards.docLinks;var osdDQLDocs=docLinks.links.opensearchDashboards.dql.base;var queryLanguage=props.query&&props.query.language;var persistedLog=_react.default.useMemo((function(){return queryLanguage&&uiSettings&&storage&&appName?(0,_query.getQueryLog)(uiSettings,storage,appName,queryLanguage):undefined}),[appName,queryLanguage,uiSettings,storage]);function onClickSubmitButton(event){if(persistedLog&&props.query){persistedLog.add(props.query.query)}event.preventDefault();onSubmit({query:props.query,dateRange:getDateRange()})}function getDateRange(){var defaultTimeSetting=uiSettings.get(_common.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS);return{from:props.dateRangeFrom||defaultTimeSetting.from,to:props.dateRangeTo||defaultTimeSetting.to}}function onQueryChange(query){props.onChange({query:query,dateRange:getDateRange()})}function onChangeQueryInputFocus(isFocused){setIsQueryInputFocused(isFocused)}function onTimeChange(_ref){var start=_ref.start,end=_ref.end,isInvalid=_ref.isInvalid,isQuickSelection=_ref.isQuickSelection;setIsDateRangeInvalid(isInvalid);var retVal={query:props.query,dateRange:{from:start,to:end}};if(isQuickSelection){props.onSubmit(retVal)}else{props.onChange(retVal)}}function onRefresh(_ref2){var start=_ref2.start,end=_ref2.end;var retVal={dateRange:{from:start,to:end}};if(props.onRefresh){props.onRefresh(retVal)}}function onSubmit(_ref3){var query=_ref3.query,dateRange=_ref3.dateRange;handleLuceneSyntaxWarning();if(props.timeHistory){props.timeHistory.add(dateRange)}props.onSubmit({query:query,dateRange:dateRange})}function onInputSubmit(query){onSubmit({query:query,dateRange:getDateRange()})}function toAbsoluteString(value){var roundUp=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var valueAsMoment=_datemath.default.parse(value,{roundUp:roundUp});if(!valueAsMoment){return value}return valueAsMoment.toISOString()}function renderQueryInput(){if(!shouldRenderQueryInput())return;return _react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(QueryStringInput,{disableAutoFocus:props.disableAutoFocus,indexPatterns:props.indexPatterns,prepend:props.prepend,query:props.query,screenTitle:props.screenTitle,onChange:onQueryChange,onChangeQueryInputFocus:onChangeQueryInputFocus,onSubmit:onInputSubmit,persistedLog:persistedLog,dataTestSubj:props.dataTestSubj}))}function renderSharingMetaFields(){var _getDateRange=getDateRange(),from=_getDateRange.from,to=_getDateRange.to;var dateRangePretty=(0,_eui.prettyDuration)(toAbsoluteString(from),toAbsoluteString(to),[],uiSettings.get("dateFormat"));return _react.default.createElement("div",{"data-shared-timefilter-duration":dateRangePretty,"data-test-subj":"dataSharedTimefilterDuration"})}function shouldRenderDatePicker(){return Boolean(props.showDatePicker||props.showAutoRefreshOnly)}function shouldRenderQueryInput(){return Boolean(props.showQueryInput&&props.indexPatterns&&props.query&&storage)}function renderUpdateButton(){var button=props.customSubmitButton?_react.default.cloneElement(props.customSubmitButton,{onClick:onClickSubmitButton}):_react.default.createElement(_eui.EuiSuperUpdateButton,{needsUpdate:props.isDirty,isDisabled:isDateRangeInvalid,isLoading:props.isLoading,onClick:onClickSubmitButton,"data-test-subj":"querySubmitButton"});if(!shouldRenderDatePicker()){return button}return _react.default.createElement(_no_data_popover.NoDataPopover,{storage:storage,showNoDataPopover:props.indicateNoData},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},renderDatePicker(),_react.default.createElement(_eui.EuiFlexItem,{grow:false},button)))}function renderDatePicker(){if(!shouldRenderDatePicker()){return null}var recentlyUsedRanges;if(props.timeHistory){recentlyUsedRanges=props.timeHistory.get().map((function(_ref4){var from=_ref4.from,to=_ref4.to;return{start:from,end:to}}))}var commonlyUsedRanges=uiSettings.get(_common.UI_SETTINGS.TIMEPICKER_QUICK_RANGES).map((function(_ref5){var from=_ref5.from,to=_ref5.to,display=_ref5.display;return{start:from,end:to,label:display}}));var wrapperClasses=(0,_classnames.default)("osdQueryBar__datePickerWrapper",{"osdQueryBar__datePickerWrapper-isHidden":isQueryInputFocused});return _react.default.createElement(_eui.EuiFlexItem,{className:wrapperClasses},_react.default.createElement(_eui.EuiSuperDatePicker,{start:props.dateRangeFrom,end:props.dateRangeTo,isPaused:props.isRefreshPaused,refreshInterval:props.refreshInterval,onTimeChange:onTimeChange,onRefresh:onRefresh,onRefreshChange:props.onRefreshChange,showUpdateButton:false,recentlyUsedRanges:recentlyUsedRanges,commonlyUsedRanges:commonlyUsedRanges,dateFormat:uiSettings.get("dateFormat"),isAutoRefreshOnly:props.showAutoRefreshOnly,className:"osdQueryBar__datePicker"}))}function handleLuceneSyntaxWarning(){if(!props.query)return;var _props$query=props.query,query=_props$query.query,language=_props$query.language;if(language==="kuery"&&typeof query==="string"&&(!storage||!storage.get("opensearchDashboards.luceneSyntaxWarningOptOut"))&&(0,_common.doesKueryExpressionHaveLuceneSyntaxError)(query)){var toast=notifications.toasts.addWarning({title:_i18n.i18n.translate("data.query.queryBar.luceneSyntaxWarningTitle",{defaultMessage:"Lucene syntax warning"}),text:(0,_public.toMountPoint)(_react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.luceneSyntaxWarningMessage",defaultMessage:"It looks like you may be trying to use Lucene query syntax, although you have opensearchDashboards Query Language (DQL) selected. Please review the DQL docs {link}.",values:{link:_react.default.createElement(_eui.EuiLink,{href:osdDQLDocs,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsDescription.docsLinkText",defaultMessage:"here"}))}})),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return onLuceneSyntaxWarningOptOut(toast)}},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.luceneSyntaxWarningOptOutText",defaultMessage:"Don't show again"}))))))})}}function onLuceneSyntaxWarningOptOut(toast){if(!storage)return;storage.set("opensearchDashboards.luceneSyntaxWarningOptOut",true);notifications.toasts.remove(toast)}var classes=(0,_classnames.default)("osdQueryBar",{"osdQueryBar--withDatePicker":props.showDatePicker});return _react.default.createElement(_eui.EuiFlexGroup,{className:classes,responsive:!!props.showDatePicker,gutterSize:"s",justifyContent:"flexEnd"},renderQueryInput(),renderSharingMetaFields(),_react.default.createElement(_eui.EuiFlexItem,{grow:false},renderUpdateButton()))}QueryBarTopRow.defaultProps={showQueryInput:true,showDatePicker:true,showAutoRefreshOnly:false};module.exports=exports.default},1074:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);var _typeof=__webpack_require__(8);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(14));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(15));var _classCallCheck2=_interopRequireDefault(__webpack_require__(3));var _createClass2=_interopRequireDefault(__webpack_require__(4));var _assertThisInitialized2=_interopRequireDefault(__webpack_require__(16));var _inherits2=_interopRequireDefault(__webpack_require__(11));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(12));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9));var _defineProperty2=_interopRequireDefault(__webpack_require__(1));var _lodash=__webpack_require__(7);var _react=__webpack_require__(27);var _classnames=_interopRequireDefault(__webpack_require__(44));var _react2=_interopRequireWildcard(__webpack_require__(5));var _resizeObserverPolyfill=_interopRequireDefault(__webpack_require__(324));var _public=__webpack_require__(24);var _query_bar_top_row=_interopRequireDefault(__webpack_require__(1061));var _filter_bar=__webpack_require__(1298);var _saved_query_form=__webpack_require__(1305);var _saved_query_management=__webpack_require__(1307);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2.default)(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}var SearchBarUI=function(_Component){(0,_inherits2.default)(SearchBarUI,_Component);var _super=_createSuper(SearchBarUI);function SearchBarUI(){var _this;(0,_classCallCheck2.default)(this,SearchBarUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"services",_this.props.opensearchDashboards.services);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"savedQueryService",_this.services.data.query.savedQueries);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"filterBarRef",null);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"filterBarWrapperRef",null);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"state",{isFiltersVisible:true,showSaveQueryModal:false,showSaveNewQueryModal:false,showSavedQueryPopover:false,currentProps:_this.props,query:_this.props.query?_objectSpread({},_this.props.query):undefined,dateRangeFrom:(0,_lodash.get)(_this.props,"dateRangeFrom","now-15m"),dateRangeTo:(0,_lodash.get)(_this.props,"dateRangeTo","now")});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"isDirty",(function(){if(!_this.props.showDatePicker&&_this.state.query&&_this.props.query){return _this.state.query.query!==_this.props.query.query}return _this.state.query&&_this.props.query&&_this.state.query.query!==_this.props.query.query||_this.state.dateRangeFrom!==_this.props.dateRangeFrom||_this.state.dateRangeTo!==_this.props.dateRangeTo}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"setFilterBarHeight",(function(){requestAnimationFrame((function(){var height=_this.filterBarRef&&_this.state.isFiltersVisible?_this.filterBarRef.clientHeight:0;if(_this.filterBarWrapperRef){_this.filterBarWrapperRef.setAttribute("style","height: ".concat(height,"px"))}}))}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"ro",new _resizeObserverPolyfill.default(_this.setFilterBarHeight));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onSave",function(){var _ref=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(savedQueryMeta){var saveAsNew,savedQueryAttributes,response,_args=arguments;return _regenerator.default.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:saveAsNew=_args.length>1&&_args[1]!==undefined?_args[1]:false;if(_this.state.query){_context.next=3;break}return _context.abrupt("return");case 3:savedQueryAttributes={title:savedQueryMeta.title,description:savedQueryMeta.description,query:_this.state.query};if(savedQueryMeta.shouldIncludeFilters){savedQueryAttributes.filters=_this.props.filters}if(savedQueryMeta.shouldIncludeTimefilter&&_this.state.dateRangeTo!==undefined&&_this.state.dateRangeFrom!==undefined&&_this.props.refreshInterval!==undefined&&_this.props.isRefreshPaused!==undefined){savedQueryAttributes.timefilter={from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo,refreshInterval:{value:_this.props.refreshInterval,pause:_this.props.isRefreshPaused}}}_context.prev=6;if(!(_this.props.savedQuery&&!saveAsNew)){_context.next=13;break}_context.next=10;return _this.savedQueryService.saveQuery(savedQueryAttributes,{overwrite:true});case 10:response=_context.sent;_context.next=16;break;case 13:_context.next=15;return _this.savedQueryService.saveQuery(savedQueryAttributes);case 15:response=_context.sent;case 16:_this.services.notifications.toasts.addSuccess('Your query "'.concat(response.attributes.title,'" was saved'));_this.setState({showSaveQueryModal:false,showSaveNewQueryModal:false});if(_this.props.onSaved){_this.props.onSaved(response)}_context.next=25;break;case 21:_context.prev=21;_context.t0=_context["catch"](6);_this.services.notifications.toasts.addDanger("An error occured while saving your query: ".concat(_context.t0.message));throw _context.t0;case 25:case"end":return _context.stop()}}}),_callee,null,[[6,21]])})));return function(_x){return _ref.apply(this,arguments)}}());(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onInitiateSave",(function(){_this.setState({showSaveQueryModal:true})}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onInitiateSaveNew",(function(){_this.setState({showSaveNewQueryModal:true})}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onQueryBarChange",(function(queryAndDateRange){_this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange.from,dateRangeTo:queryAndDateRange.dateRange.to});if(_this.props.onQueryChange){_this.props.onQueryChange(queryAndDateRange)}}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onQueryBarSubmit",(function(queryAndDateRange){_this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.from||_this.state.dateRangeFrom,dateRangeTo:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.to||_this.state.dateRangeTo},(function(){if(_this.props.onQuerySubmit){_this.props.onQuerySubmit({query:_this.state.query,dateRange:{from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo}})}}))}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onLoadSavedQuery",(function(savedQuery){var dateRangeFrom=(0,_lodash.get)(savedQuery,"attributes.timefilter.from",_this.state.dateRangeFrom);var dateRangeTo=(0,_lodash.get)(savedQuery,"attributes.timefilter.to",_this.state.dateRangeTo);_this.setState({query:savedQuery.attributes.query,dateRangeFrom:dateRangeFrom,dateRangeTo:dateRangeTo});if(_this.props.onSavedQueryUpdated){_this.props.onSavedQueryUpdated(savedQuery)}}));return _this}(0,_createClass2.default)(SearchBarUI,[{key:"shouldRenderQueryBar",value:function shouldRenderQueryBar(){var showDatePicker=this.props.showDatePicker||this.props.showAutoRefreshOnly;var showQueryInput=this.props.showQueryInput&&this.props.indexPatterns&&this.state.query;return this.props.showQueryBar&&(showDatePicker||showQueryInput)}},{key:"shouldRenderFilterBar",value:function shouldRenderFilterBar(){return this.props.showFilterBar&&this.props.filters&&this.props.indexPatterns&&(0,_lodash.compact)(this.props.indexPatterns).length>0}},{key:"shouldRenderTimeFilterInSavedQueryForm",value:function shouldRenderTimeFilterInSavedQueryForm(){var _this$props=this.props,dateRangeFrom=_this$props.dateRangeFrom,dateRangeTo=_this$props.dateRangeTo,showDatePicker=_this$props.showDatePicker;return showDatePicker||!showDatePicker&&dateRangeFrom!==undefined&&dateRangeTo!==undefined}},{key:"componentDidMount",value:function componentDidMount(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.observe(this.filterBarRef)}}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.unobserve(this.filterBarRef)}}},{key:"render",value:function render(){var _this2=this;var savedQueryManagement=this.state.query&&this.props.onClearSavedQuery&&_react2.default.createElement(_saved_query_management.SavedQueryManagementComponent,{showSaveQuery:this.props.showSaveQuery,loadedSavedQuery:this.props.savedQuery,onSave:this.onInitiateSave,onSaveAsNew:this.onInitiateSaveNew,onLoad:this.onLoadSavedQuery,savedQueryService:this.savedQueryService,onClearSavedQuery:this.props.onClearSavedQuery});var queryBar;if(this.shouldRenderQueryBar()){queryBar=_react2.default.createElement(_query_bar_top_row.default,{timeHistory:this.props.timeHistory,query:this.state.query,screenTitle:this.props.screenTitle,onSubmit:this.onQueryBarSubmit,indexPatterns:this.props.indexPatterns,isLoading:this.props.isLoading,prepend:this.props.showFilterBar?savedQueryManagement:undefined,showDatePicker:this.props.showDatePicker,dateRangeFrom:this.state.dateRangeFrom,dateRangeTo:this.state.dateRangeTo,isRefreshPaused:this.props.isRefreshPaused,refreshInterval:this.props.refreshInterval,showAutoRefreshOnly:this.props.showAutoRefreshOnly,showQueryInput:this.props.showQueryInput,onRefresh:this.props.onRefresh,onRefreshChange:this.props.onRefreshChange,onChange:this.onQueryBarChange,isDirty:this.isDirty(),customSubmitButton:this.props.customSubmitButton?this.props.customSubmitButton:undefined,dataTestSubj:this.props.dataTestSubj,indicateNoData:this.props.indicateNoData})}var filterBar;if(this.shouldRenderFilterBar()){var filterGroupClasses=(0,_classnames.default)("globalFilterGroup__wrapper",{"globalFilterGroup__wrapper-isVisible":this.state.isFiltersVisible});filterBar=_react2.default.createElement("div",{id:"GlobalFilterGroup",ref:function ref(node){_this2.filterBarWrapperRef=node},className:filterGroupClasses},_react2.default.createElement("div",{ref:function ref(node){_this2.filterBarRef=node}},_react2.default.createElement(_filter_bar.FilterBar,{className:"globalFilterGroup__filterBar",filters:this.props.filters,onFiltersUpdated:this.props.onFiltersUpdated,indexPatterns:this.props.indexPatterns})))}return _react2.default.createElement("div",{className:"globalQueryBar","data-test-subj":"globalQueryBar"},queryBar,filterBar,this.state.showSaveQueryModal?_react2.default.createElement(_saved_query_form.SaveQueryForm,{savedQuery:this.props.savedQuery?this.props.savedQuery.attributes:undefined,savedQueryService:this.savedQueryService,onSave:this.onSave,onClose:function onClose(){return _this2.setState({showSaveQueryModal:false})},showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.shouldRenderTimeFilterInSavedQueryForm()}):null,this.state.showSaveNewQueryModal?_react2.default.createElement(_saved_query_form.SaveQueryForm,{savedQueryService:this.savedQueryService,onSave:function onSave(savedQueryMeta){return _this2.onSave(savedQueryMeta,true)},onClose:function onClose(){return _this2.setState({showSaveNewQueryModal:false})},showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.shouldRenderTimeFilterInSavedQueryForm()}):null)}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if((0,_lodash.isEqual)(prevState.currentProps,nextProps)){return null}var nextQuery=null;if(nextProps.query&&nextProps.query.query!==(0,_lodash.get)(prevState,"currentProps.query.query")){nextQuery={query:nextProps.query.query,language:nextProps.query.language}}else if(nextProps.query&&prevState.query&&nextProps.query.language!==prevState.query.language){nextQuery={query:"",language:nextProps.query.language}}var nextDateRange=null;if(nextProps.dateRangeFrom!==(0,_lodash.get)(prevState,"currentProps.dateRangeFrom")||nextProps.dateRangeTo!==(0,_lodash.get)(prevState,"currentProps.dateRangeTo")){nextDateRange={dateRangeFrom:nextProps.dateRangeFrom,dateRangeTo:nextProps.dateRangeTo}}var nextState={currentProps:nextProps};if(nextQuery){nextState.query=nextQuery}if(nextDateRange){nextState.dateRangeFrom=nextDateRange.dateRangeFrom;nextState.dateRangeTo=nextDateRange.dateRangeTo}return nextState}}]);return SearchBarUI}(_react2.Component);(0,_defineProperty2.default)(SearchBarUI,"defaultProps",{showQueryBar:true,showFilterBar:true,showDatePicker:true,showAutoRefreshOnly:false});var _default=(0,_react.injectI18n)((0,_public.withOpenSearchDashboards)(SearchBarUI));exports.default=_default;module.exports=exports.default},1097:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isOperator=exports.isOneOfOperator=exports.isNotOperator=exports.isNotOneOfOperator=exports.isNotBetweenOperator=exports.isBetweenOperator=exports.existsOperator=exports.doesNotExistOperator=exports.FILTER_OPERATORS=void 0;var _i18n=__webpack_require__(2);var _filters=__webpack_require__(41);var isOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isOperatorOptionLabel",{defaultMessage:"is"}),type:_filters.FILTERS.PHRASE,negate:false};exports.isOperator=isOperator;var isNotOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotOperatorOptionLabel",{defaultMessage:"is not"}),type:_filters.FILTERS.PHRASE,negate:true};exports.isNotOperator=isNotOperator;var isOneOfOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isOneOfOperatorOptionLabel",{defaultMessage:"is one of"}),type:_filters.FILTERS.PHRASES,negate:false,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};exports.isOneOfOperator=isOneOfOperator;var isNotOneOfOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotOneOfOperatorOptionLabel",{defaultMessage:"is not one of"}),type:_filters.FILTERS.PHRASES,negate:true,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};exports.isNotOneOfOperator=isNotOneOfOperator;var isBetweenOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isBetweenOperatorOptionLabel",{defaultMessage:"is between"}),type:_filters.FILTERS.RANGE,negate:false,fieldTypes:["number","date","ip"]};exports.isBetweenOperator=isBetweenOperator;var isNotBetweenOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotBetweenOperatorOptionLabel",{defaultMessage:"is not between"}),type:_filters.FILTERS.RANGE,negate:true,fieldTypes:["number","date","ip"]};exports.isNotBetweenOperator=isNotBetweenOperator;var existsOperator={message:_i18n.i18n.translate("data.filter.filterEditor.existsOperatorOptionLabel",{defaultMessage:"exists"}),type:_filters.FILTERS.EXISTS,negate:false};exports.existsOperator=existsOperator;var doesNotExistOperator={message:_i18n.i18n.translate("data.filter.filterEditor.doesNotExistOperatorOptionLabel",{defaultMessage:"does not exist"}),type:_filters.FILTERS.EXISTS,negate:true};exports.doesNotExistOperator=doesNotExistOperator;var FILTER_OPERATORS=[isOperator,isNotOperator,isOneOfOperator,isNotOneOfOperator,isBetweenOperator,isNotBetweenOperator,existsOperator,doesNotExistOperator];exports.FILTER_OPERATORS=FILTER_OPERATORS},1098:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);var _typeof=__webpack_require__(8);Object.defineProperty(exports,"__esModule",{value:true});exports.NoDataPopover=NoDataPopover;var _slicedToArray2=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(13);var _i18n=__webpack_require__(2);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var NO_DATA_POPOVER_STORAGE_KEY="data.noDataPopover";function NoDataPopover(_ref){var showNoDataPopover=_ref.showNoDataPopover,storage=_ref.storage,children=_ref.children;var _useState=(0,_react.useState)((function(){return Boolean(storage.get(NO_DATA_POPOVER_STORAGE_KEY))})),_useState2=(0,_slicedToArray2.default)(_useState,2),noDataPopoverDismissed=_useState2[0],setNoDataPopoverDismissed=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2.default)(_useState3,2),noDataPopoverVisible=_useState4[0],setNoDataPopoverVisible=_useState4[1];(0,_react.useEffect)((function(){if(showNoDataPopover&&!noDataPopoverDismissed){setNoDataPopoverVisible(true)}}),[noDataPopoverDismissed,showNoDataPopover]);return _react.default.createElement(_eui.EuiTourStep,{onFinish:function onFinish(){},closePopover:function closePopover(){setNoDataPopoverVisible(false)},content:_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement("p",{style:{maxWidth:300}},_i18n.i18n.translate("data.noDataPopover.content",{defaultMessage:"This time range doesn't contain any data. Increase or adjust the time range to see more fields and create charts."}))),minWidth:300,anchorPosition:"downCenter",anchorClassName:"eui-displayBlock",step:1,stepsTotal:1,isStepOpen:noDataPopoverVisible,subtitle:_i18n.i18n.translate("data.noDataPopover.subtitle",{defaultMessage:"Tip"}),title:_i18n.i18n.translate("data.noDataPopover.title",{defaultMessage:"Empty dataset"}),footerAction:_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",flush:"right",color:"text","data-test-subj":"noDataPopoverDismissButton",onClick:function onClick(){storage.set(NO_DATA_POPOVER_STORAGE_KEY,true);setNoDataPopoverDismissed(true);setNoDataPopoverVisible(false)}},_i18n.i18n.translate("data.noDataPopover.dismissAction",{defaultMessage:"Don't show again"}))},_react.default.createElement("div",{onFocus:function onFocus(){setNoDataPopoverVisible(false)}},children))}},1099:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.GenericComboBox=GenericComboBox;var _extends2=_interopRequireDefault(__webpack_require__(32));var _objectWithoutProperties2=_interopRequireDefault(__webpack_require__(20));var _eui=__webpack_require__(13);var _react=_interopRequireDefault(__webpack_require__(5));var _excluded=["options","selectedOptions","getLabel","onChange"];function GenericComboBox(props){var options=props.options,selectedOptions=props.selectedOptions,getLabel=props.getLabel,onChange=props.onChange,otherProps=(0,_objectWithoutProperties2.default)(props,_excluded);var labels=options.map(getLabel);var euiOptions=labels.map((function(label){return{label:label}}));var selectedEuiOptions=selectedOptions.filter((function(option){return options.indexOf(option)!==-1})).map((function(option){return euiOptions[options.indexOf(option)]}));var onComboBoxChange=function onComboBoxChange(newOptions){var newValues=newOptions.map((function(_ref){var label=_ref.label;return options[labels.indexOf(label)]}));onChange(newValues)};return _react.default.createElement(_eui.EuiComboBox,(0,_extends2.default)({options:euiOptions,selectedOptions:selectedEuiOptions,onChange:onComboBoxChange,sortMatchesBy:"startsWith"},otherProps))}},1117:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);var _typeof=__webpack_require__(8);Object.defineProperty(exports,"__esModule",{value:true});exports.FilterEditor=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(17));var _classCallCheck2=_interopRequireDefault(__webpack_require__(3));var _createClass2=_interopRequireDefault(__webpack_require__(4));var _assertThisInitialized2=_interopRequireDefault(__webpack_require__(16));var _inherits2=_interopRequireDefault(__webpack_require__(11));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(12));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9));var _defineProperty2=_interopRequireDefault(__webpack_require__(1));var _eui=__webpack_require__(13);var _i18n=__webpack_require__(2);var _react=__webpack_require__(27);var _lodash=__webpack_require__(7);var _react2=_interopRequireWildcard(__webpack_require__(5));var _generic_combo_box=__webpack_require__(1099);var _filter_editor_utils=__webpack_require__(1118);var _phrase_value_input=__webpack_require__(1299);var _phrases_values_input=__webpack_require__(1300);var _range_value_input=__webpack_require__(1301);var _common=__webpack_require__(10);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2.default)(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}var FilterEditorUI=function(_Component){(0,_inherits2.default)(FilterEditorUI,_Component);var _super=_createSuper(FilterEditorUI);function FilterEditorUI(props){var _this;(0,_classCallCheck2.default)(this,FilterEditorUI);_this=_super.call(this,props);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"toggleCustomEditor",(function(){var isCustomEditorOpen=!_this.state.isCustomEditorOpen;_this.setState({isCustomEditorOpen:isCustomEditorOpen})}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onIndexPatternChange",(function(_ref){var _ref2=(0,_slicedToArray2.default)(_ref,1),selectedIndexPattern=_ref2[0];var selectedField=undefined;var selectedOperator=undefined;var params=undefined;_this.setState({selectedIndexPattern:selectedIndexPattern,selectedField:selectedField,selectedOperator:selectedOperator,params:params})}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onFieldChange",(function(_ref3){var _ref4=(0,_slicedToArray2.default)(_ref3,1),selectedField=_ref4[0];var selectedOperator=undefined;var params=undefined;_this.setState({selectedField:selectedField,selectedOperator:selectedOperator,params:params})}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onOperatorChange",(function(_ref5){var _ref6=(0,_slicedToArray2.default)(_ref5,1),selectedOperator=_ref6[0];var params=(0,_lodash.get)(_this.state.selectedOperator,"type")===(0,_lodash.get)(selectedOperator,"type")?_this.state.params:undefined;_this.setState({selectedOperator:selectedOperator,params:params})}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onCustomLabelSwitchChange",(function(event){var useCustomLabel=event.target.checked;var customLabel=event.target.checked?"":null;_this.setState({useCustomLabel:useCustomLabel,customLabel:customLabel})}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onCustomLabelChange",(function(event){var customLabel=event.target.value;_this.setState({customLabel:customLabel})}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onParamsChange",(function(params){_this.setState({params:params})}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onQueryDslChange",(function(queryDsl){_this.setState({queryDsl:queryDsl})}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onSubmit",(function(){var _this$state=_this.state,indexPattern=_this$state.selectedIndexPattern,field=_this$state.selectedField,operator=_this$state.selectedOperator,params=_this$state.params,useCustomLabel=_this$state.useCustomLabel,customLabel=_this$state.customLabel,isCustomEditorOpen=_this$state.isCustomEditorOpen,queryDsl=_this$state.queryDsl;var $state=_this.props.filter.$state;if(!$state||!$state.store){return}var alias=useCustomLabel?customLabel:null;if(isCustomEditorOpen){var _this$props$filter$me=_this.props.filter.meta,index=_this$props$filter$me.index,disabled=_this$props$filter$me.disabled,negate=_this$props$filter$me.negate;var newIndex=index||_this.props.indexPatterns[0].id;var body=JSON.parse(queryDsl);var _filter=(0,_common.buildCustomFilter)(newIndex,body,disabled,negate,alias,$state.store);_this.props.onSubmit(_filter)}else if(indexPattern&&field&&operator){var _filter2=(0,_common.buildFilter)(indexPattern,field,operator.type,operator.negate,_this.props.filter.meta.disabled,params!==null&&params!==void 0?params:"",alias,$state.store);_this.props.onSubmit(_filter2)}}));_this.state={selectedIndexPattern:_this.getIndexPatternFromFilter(),selectedField:_this.getFieldFromFilter(),selectedOperator:_this.getSelectedOperator(),params:(0,_common.getFilterParams)(props.filter),useCustomLabel:props.filter.meta.alias!==null,customLabel:props.filter.meta.alias,queryDsl:JSON.stringify((0,_common.cleanFilter)(props.filter),null,2),isCustomEditorOpen:_this.isUnknownFilterType()};return _this}(0,_createClass2.default)(FilterEditorUI,[{key:"render",value:function render(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editFilterPopupTitle",defaultMessage:"Edit filter"})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"filterEditor__hiddenItem"}),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs","data-test-subj":"editQueryDSL",onClick:this.toggleCustomEditor},this.state.isCustomEditorOpen?_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editFilterValuesButtonLabel",defaultMessage:"Edit filter values"}):_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editQueryDslButtonLabel",defaultMessage:"Edit as Query DSL"}))))),_react2.default.createElement("div",{className:"globalFilterItem__editorForm"},_react2.default.createElement(_eui.EuiForm,null,this.renderIndexPatternInput(),this.state.isCustomEditorOpen?this.renderCustomEditor():this.renderRegularEditor(),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiSwitch,{id:"filterEditorCustomLabelSwitch","data-test-subj":"createCustomLabel",label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelSwitchLabel",defaultMessage:"Create custom label?"}),checked:this.state.useCustomLabel,onChange:this.onCustomLabelSwitchChange}),this.state.useCustomLabel&&_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelInputLabel",defaultMessage:"Custom label"})},_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,value:"".concat(this.state.customLabel),onChange:this.onCustomLabelChange}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{direction:"rowReverse",alignItems:"center",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:this.onSubmit,isDisabled:!this.isFilterValid(),"data-test-subj":"saveFilter"},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.saveButtonLabel",defaultMessage:"Save"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{flush:"right",onClick:this.props.onCancel,"data-test-subj":"cancelSaveFilter"},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.cancelButtonLabel",defaultMessage:"Cancel"}))),_react2.default.createElement(_eui.EuiFlexItem,null)))))}},{key:"renderIndexPatternInput",value:function renderIndexPatternInput(){var _this2=this;if(this.props.indexPatterns.length<=1&&this.props.indexPatterns.find((function(indexPattern){return indexPattern===_this2.getIndexPatternFromFilter()}))){return""}var selectedIndexPattern=this.state.selectedIndexPattern;return _react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.indexPatternSelectLabel",defaultMessage:"Index Pattern"})},_react2.default.createElement(IndexPatternComboBox,{placeholder:this.props.intl.formatMessage({id:"data.filter.filterBar.indexPatternSelectPlaceholder",defaultMessage:"Select an index pattern"}),options:this.props.indexPatterns,selectedOptions:selectedIndexPattern?[selectedIndexPattern]:[],getLabel:function getLabel(indexPattern){return indexPattern.title},onChange:this.onIndexPatternChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterIndexPatternsSelect"}))))}},{key:"renderRegularEditor",value:function renderRegularEditor(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:2},this.renderFieldInput()),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,style:{flexBasis:160}},this.renderOperatorInput())),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement("div",{"data-test-subj":"filterParams"},this.renderParamsEditor()))}},{key:"renderFieldInput",value:function renderFieldInput(){var _this$state2=this.state,selectedIndexPattern=_this$state2.selectedIndexPattern,selectedField=_this$state2.selectedField;var fields=selectedIndexPattern?(0,_filter_editor_utils.getFilterableFields)(selectedIndexPattern):[];return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectLabel",defaultMessage:"Field"})},_react2.default.createElement(FieldComboBox,{id:"fieldInput",fullWidth:true,isDisabled:!selectedIndexPattern,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectPlaceholder",defaultMessage:"Select a field first"}),options:fields,selectedOptions:selectedField?[selectedField]:[],getLabel:function getLabel(field){return field.name},onChange:this.onFieldChange,singleSelection:{asPlainText:true},isClearable:false,className:"globalFilterEditor__fieldInput","data-test-subj":"filterFieldSuggestionList"}))}},{key:"renderOperatorInput",value:function renderOperatorInput(){var _this$state3=this.state,selectedField=_this$state3.selectedField,selectedOperator=_this$state3.selectedOperator;var operators=selectedField?(0,_filter_editor_utils.getOperatorOptions)(selectedField):[];return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectLabel",defaultMessage:"Operator"})},_react2.default.createElement(OperatorComboBox,{isDisabled:!selectedField,placeholder:selectedField?this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderSelect",defaultMessage:"Select"}):this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderWaiting",defaultMessage:"Waiting"}),options:operators,selectedOptions:selectedOperator?[selectedOperator]:[],getLabel:function getLabel(_ref7){var message=_ref7.message;return message},onChange:this.onOperatorChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterOperatorList"}))}},{key:"renderCustomEditor",value:function renderCustomEditor(){return _react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.filter.filterEditor.queryDslLabel",{defaultMessage:"OpenSearch Query DSL"}),fullWidth:true},_react2.default.createElement(_eui.EuiCodeEditor,{value:this.state.queryDsl,onChange:this.onQueryDslChange,mode:"json",width:"100%",height:"250px"}))}},{key:"renderParamsEditor",value:function renderParamsEditor(){var indexPattern=this.state.selectedIndexPattern;if(!indexPattern||!this.state.selectedOperator){return""}switch(this.state.selectedOperator.type){case"exists":return"";case"phrase":return _react2.default.createElement(_phrase_value_input.PhraseValueInput,{indexPattern:indexPattern,field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,"data-test-subj":"phraseValueInput"});case"phrases":return _react2.default.createElement(_phrases_values_input.PhrasesValuesInput,{indexPattern:indexPattern,field:this.state.selectedField,values:this.state.params,onChange:this.onParamsChange});case"range":return _react2.default.createElement(_range_value_input.RangeValueInput,{field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange})}}},{key:"isUnknownFilterType",value:function isUnknownFilterType(){var type=this.props.filter.meta.type;return!!type&&!["phrase","phrases","range","exists"].includes(type)}},{key:"getIndexPatternFromFilter",value:function getIndexPatternFromFilter(){return(0,_common.getIndexPatternFromFilter)(this.props.filter,this.props.indexPatterns)}},{key:"getFieldFromFilter",value:function getFieldFromFilter(){var indexPattern=this.getIndexPatternFromFilter();return indexPattern&&(0,_filter_editor_utils.getFieldFromFilter)(this.props.filter,indexPattern)}},{key:"getSelectedOperator",value:function getSelectedOperator(){return(0,_filter_editor_utils.getOperatorFromFilter)(this.props.filter)}},{key:"isFilterValid",value:function isFilterValid(){var _this$state4=this.state,isCustomEditorOpen=_this$state4.isCustomEditorOpen,queryDsl=_this$state4.queryDsl,indexPattern=_this$state4.selectedIndexPattern,field=_this$state4.selectedField,operator=_this$state4.selectedOperator,params=_this$state4.params;if(isCustomEditorOpen){try{return Boolean(JSON.parse(queryDsl))}catch(e){return false}}return(0,_filter_editor_utils.isFilterValid)(indexPattern,field,operator,params)}}]);return FilterEditorUI}(_react2.Component);function IndexPatternComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}function FieldComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}function OperatorComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var FilterEditor=(0,_react.injectI18n)(FilterEditorUI);exports.FilterEditor=FilterEditor},1118:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.getFieldFromFilter=getFieldFromFilter;exports.getFilterableFields=getFilterableFields;exports.getOperatorFromFilter=getOperatorFromFilter;exports.getOperatorOptions=getOperatorOptions;exports.isFilterValid=isFilterValid;exports.validateParams=validateParams;var _typeof2=_interopRequireDefault(__webpack_require__(8));var _datemath=_interopRequireDefault(__webpack_require__(48));var _filter_operators=__webpack_require__(1097);var _common=__webpack_require__(10);function getFieldFromFilter(filter,indexPattern){return indexPattern.fields.find((function(field){return field.name===filter.meta.key}))}function getOperatorFromFilter(filter){return _filter_operators.FILTER_OPERATORS.find((function(operator){return filter.meta.type===operator.type&&filter.meta.negate===operator.negate}))}function getFilterableFields(indexPattern){return indexPattern.fields.filter(_common.isFilterable)}function getOperatorOptions(field){return _filter_operators.FILTER_OPERATORS.filter((function(operator){return!operator.fieldTypes||operator.fieldTypes.includes(field.type)}))}function validateParams(params,type){switch(type){case"date":var moment=typeof params==="string"?_datemath.default.parse(params):null;return Boolean(typeof params==="string"&&moment&&moment.isValid());case"ip":try{return params.includes("/")?Boolean(new _common.CidrMask(params)):Boolean(new _common.Ipv4Address(params))}catch(e){return false}default:return true}}function isFilterValid(indexPattern,field,operator,params){if(!indexPattern||!field||!operator){return false}switch(operator.type){case"phrase":return validateParams(params,field.type);case"phrases":if(!Array.isArray(params)||!params.length){return false}return params.every((function(phrase){return validateParams(phrase,field.type)}));case"range":if((0,_typeof2.default)(params)!=="object"){return false}return(!params.from||validateParams(params.from,field.type))&&(!params.to||validateParams(params.to,field.type));case"exists":return true;default:throw new Error("Unknown operator type: ".concat(operator.type))}}},1119:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseSuggestorUI=exports.PhraseSuggestor=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(14));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(15));var _classCallCheck2=_interopRequireDefault(__webpack_require__(3));var _createClass2=_interopRequireDefault(__webpack_require__(4));var _assertThisInitialized2=_interopRequireDefault(__webpack_require__(16));var _inherits2=_interopRequireDefault(__webpack_require__(11));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(12));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9));var _defineProperty2=_interopRequireDefault(__webpack_require__(1));var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=__webpack_require__(7);var _public=__webpack_require__(24);var _common=__webpack_require__(10);function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2.default)(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}var PhraseSuggestorUI=function(_React$Component){(0,_inherits2.default)(PhraseSuggestorUI,_React$Component);var _super=_createSuper(PhraseSuggestorUI);function PhraseSuggestorUI(){var _this;(0,_classCallCheck2.default)(this,PhraseSuggestorUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"services",_this.props.opensearchDashboards.services);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"abortController",void 0);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"state",{suggestions:[],isLoading:false});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onSearchChange",(function(value){_this.updateSuggestions("".concat(value))}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"updateSuggestions",(0,_lodash.debounce)((0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(){var query,_ref2,indexPattern,field,suggestions,_args=arguments;return _regenerator.default.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:query=_args.length>0&&_args[0]!==undefined?_args[0]:"";if(_this.abortController)_this.abortController.abort();_this.abortController=new AbortController;_ref2=_this.props,indexPattern=_ref2.indexPattern,field=_ref2.field;if(!(!field||!_this.isSuggestingValues())){_context.next=6;break}return _context.abrupt("return");case 6:_this.setState({isLoading:true});_context.next=9;return _this.services.data.autocomplete.getValueSuggestions({indexPattern:indexPattern,field:field,query:query,signal:_this.abortController.signal});case 9:suggestions=_context.sent;_this.setState({suggestions:suggestions,isLoading:false});case 11:case"end":return _context.stop()}}}),_callee)}))),500));return _this}(0,_createClass2.default)(PhraseSuggestorUI,[{key:"componentDidMount",value:function componentDidMount(){this.updateSuggestions()}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.abortController)this.abortController.abort()}},{key:"isSuggestingValues",value:function isSuggestingValues(){var shouldSuggestValues=this.services.uiSettings.get(_common.UI_SETTINGS.FILTERS_EDITOR_SUGGEST_VALUES);var field=this.props.field;return shouldSuggestValues&&field&&field.aggregatable&&field.type==="string"}}]);return PhraseSuggestorUI}(_react.default.Component);exports.PhraseSuggestorUI=PhraseSuggestorUI;var PhraseSuggestor=(0,_public.withOpenSearchDashboards)(PhraseSuggestorUI);exports.PhraseSuggestor=PhraseSuggestor},1120:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);var _typeof=__webpack_require__(8);Object.defineProperty(exports,"__esModule",{value:true});exports.ValueInputType=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(3));var _createClass2=_interopRequireDefault(__webpack_require__(4));var _assertThisInitialized2=_interopRequireDefault(__webpack_require__(16));var _inherits2=_interopRequireDefault(__webpack_require__(11));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(12));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9));var _defineProperty2=_interopRequireDefault(__webpack_require__(1));var _eui=__webpack_require__(13);var _react=__webpack_require__(27);var _lodash=__webpack_require__(7);var _react2=_interopRequireWildcard(__webpack_require__(5));var _filter_editor_utils=__webpack_require__(1118);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2.default)(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}var ValueInputTypeUI=function(_Component){(0,_inherits2.default)(ValueInputTypeUI,_Component);var _super=_createSuper(ValueInputTypeUI);function ValueInputTypeUI(){var _this;(0,_classCallCheck2.default)(this,ValueInputTypeUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onBoolChange",(function(event){var boolValue=event.target.value==="true";_this.props.onChange(boolValue)}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onChange",(function(event){var params=event.target.value;_this.props.onChange(params)}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onBlur",(function(event){if(_this.props.onBlur){var params=event.target.value;_this.props.onBlur(params)}}));return _this}(0,_createClass2.default)(ValueInputTypeUI,[{key:"render",value:function render(){var value=this.props.value;var inputElement;switch(this.props.type){case"string":inputElement=_react2.default.createElement(_eui.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:value,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"number":inputElement=_react2.default.createElement(_eui.EuiFieldNumber,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:typeof value==="string"?parseFloat(value):value,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"date":inputElement=_react2.default.createElement(_eui.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:value,onChange:this.onChange,onBlur:this.onBlur,isInvalid:!(0,_lodash.isEmpty)(value)&&!(0,_filter_editor_utils.validateParams)(value,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"ip":inputElement=_react2.default.createElement(_eui.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:value,onChange:this.onChange,isInvalid:!(0,_lodash.isEmpty)(value)&&!(0,_filter_editor_utils.validateParams)(value,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"boolean":inputElement=_react2.default.createElement(_eui.EuiSelect,{fullWidth:this.props.fullWidth,options:[{value:undefined,text:this.props.placeholder},{value:"true",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.trueOptionLabel",defaultMessage:"true"})},{value:"false",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.falseOptionLabel",defaultMessage:"false"})}],value:value,onChange:this.onBoolChange,className:this.props.className});break;default:break}return inputElement}}]);return ValueInputTypeUI}(_react2.Component);var ValueInputType=(0,_react.injectI18n)(ValueInputTypeUI);exports.ValueInputType=ValueInputType},1298:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);var _typeof=__webpack_require__(8);Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBar=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(19));var _slicedToArray2=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(13);var _react=__webpack_require__(27);var _classnames=_interopRequireDefault(__webpack_require__(44));var _react2=_interopRequireWildcard(__webpack_require__(5));var _filter_editor=__webpack_require__(1117);var _filter_item=__webpack_require__(1302);var _filter_options=__webpack_require__(1304);var _public=__webpack_require__(24);var _common=__webpack_require__(10);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var maxFilterWidth=600;function FilterBarUI(props){var _useState=(0,_react2.useState)(false),_useState2=(0,_slicedToArray2.default)(_useState,2),isAddFilterPopoverOpen=_useState2[0],setIsAddFilterPopoverOpen=_useState2[1];var opensearchDashboards=(0,_public.useOpenSearchDashboards)();var _useState3=(0,_react2.useState)(maxFilterWidth),_useState4=(0,_slicedToArray2.default)(_useState3,2),filterWidth=_useState4[0],setFilterWidth=_useState4[1];var uiSettings=opensearchDashboards.services.uiSettings;if(!uiSettings)return null;function onFiltersUpdated(filters){if(props.onFiltersUpdated){props.onFiltersUpdated(filters)}}function renderItems(){return props.filters.map((function(filter,i){return _react2.default.createElement(_eui.EuiFlexItem,{key:i,grow:false,className:"globalFilterBar__flexItem"},_react2.default.createElement(_filter_item.FilterItem,{id:"".concat(i),intl:props.intl,filter:filter,onUpdate:function onUpdate(newFilter){return _onUpdate(i,newFilter)},onRemove:function onRemove(){return _onRemove(i)},indexPatterns:props.indexPatterns,uiSettings:uiSettings}))}))}function onResize(dimensions){setFilterWidth(dimensions.width)}function renderAddFilter(){var isPinned=uiSettings.get(_common.UI_SETTINGS.FILTERS_PINNED_BY_DEFAULT);var _props$indexPatterns=(0,_slicedToArray2.default)(props.indexPatterns,1),indexPattern=_props$indexPatterns[0];var index=indexPattern&&indexPattern.id;var newFilter=(0,_common.buildEmptyFilter)(isPinned,index);var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){return setIsAddFilterPopoverOpen(true)},"data-test-subj":"addFilter",className:"globalFilterBar__addButton"},"+"," ",_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterBar.addFilterButtonLabel",defaultMessage:"Add filter"}));return _react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiPopover,{id:"addFilterPopover",button:button,isOpen:isAddFilterPopoverOpen,closePopover:function closePopover(){return setIsAddFilterPopoverOpen(false)},anchorPosition:"downLeft",panelPaddingSize:"none",ownFocus:true,initialFocus:".globalFilterEditor__fieldInput input",repositionOnScroll:true},_react2.default.createElement(_eui.EuiResizeObserver,{onResize:onResize},(function(resizeRef){return _react2.default.createElement("div",{style:{width:maxFilterWidth,maxWidth:"100%"},ref:resizeRef},_react2.default.createElement(_eui.EuiFlexItem,{style:{width:filterWidth},grow:false},_react2.default.createElement(_filter_editor.FilterEditor,{filter:newFilter,indexPatterns:props.indexPatterns,onSubmit:onAdd,onCancel:function onCancel(){return setIsAddFilterPopoverOpen(false)},key:JSON.stringify(newFilter)})))}))))}function onAdd(filter){setIsAddFilterPopoverOpen(false);var filters=[].concat((0,_toConsumableArray2.default)(props.filters),[filter]);onFiltersUpdated(filters)}function _onRemove(i){var filters=(0,_toConsumableArray2.default)(props.filters);filters.splice(i,1);onFiltersUpdated(filters)}function _onUpdate(i,filter){var filters=(0,_toConsumableArray2.default)(props.filters);filters[i]=filter;onFiltersUpdated(filters)}function onEnableAll(){var filters=props.filters.map(_common.enableFilter);onFiltersUpdated(filters)}function onDisableAll(){var filters=props.filters.map(_common.disableFilter);onFiltersUpdated(filters)}function onPinAll(){var filters=props.filters.map(_common.pinFilter);onFiltersUpdated(filters)}function onUnpinAll(){var filters=props.filters.map(_common.unpinFilter);onFiltersUpdated(filters)}function onToggleAllNegated(){var filters=props.filters.map(_common.toggleFilterNegated);onFiltersUpdated(filters)}function onToggleAllDisabled(){var filters=props.filters.map(_common.toggleFilterDisabled);onFiltersUpdated(filters)}function onRemoveAll(){onFiltersUpdated([])}var classes=(0,_classnames.default)("globalFilterBar",props.className);return _react2.default.createElement(_eui.EuiFlexGroup,{className:"globalFilterGroup",gutterSize:"none",alignItems:"flexStart",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{className:"globalFilterGroup__branch",grow:false},_react2.default.createElement(_filter_options.FilterOptions,{onEnableAll:onEnableAll,onDisableAll:onDisableAll,onPinAll:onPinAll,onUnpinAll:onUnpinAll,onToggleAllNegated:onToggleAllNegated,onToggleAllDisabled:onToggleAllDisabled,onRemoveAll:onRemoveAll})),_react2.default.createElement(_eui.EuiFlexItem,{className:"globalFilterGroup__filterFlexItem"},_react2.default.createElement(_eui.EuiFlexGroup,{className:classes,wrap:true,responsive:false,gutterSize:"xs",alignItems:"center"},renderItems(),renderAddFilter())))}var FilterBar=(0,_react.injectI18n)(FilterBarUI);exports.FilterBar=FilterBar},1299:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseValueInput=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(17));var _toConsumableArray2=_interopRequireDefault(__webpack_require__(19));var _classCallCheck2=_interopRequireDefault(__webpack_require__(3));var _createClass2=_interopRequireDefault(__webpack_require__(4));var _inherits2=_interopRequireDefault(__webpack_require__(11));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(12));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9));var _eui=__webpack_require__(13);var _react=__webpack_require__(27);var _lodash=__webpack_require__(7);var _react2=_interopRequireDefault(__webpack_require__(5));var _generic_combo_box=__webpack_require__(1099);var _phrase_suggestor=__webpack_require__(1119);var _value_input_type=__webpack_require__(1120);var _public=__webpack_require__(24);function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2.default)(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}var PhraseValueInputUI=function(_PhraseSuggestorUI){(0,_inherits2.default)(PhraseValueInputUI,_PhraseSuggestorUI);var _super=_createSuper(PhraseValueInputUI);function PhraseValueInputUI(){(0,_classCallCheck2.default)(this,PhraseValueInputUI);return _super.apply(this,arguments)}(0,_createClass2.default)(PhraseValueInputUI,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputLabel",defaultMessage:"Value"})},this.isSuggestingValues()?this.renderWithSuggestions():_react2.default.createElement(_value_input_type.ValueInputType,{fullWidth:true,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputPlaceholder",defaultMessage:"Enter a value"}),value:this.props.value,onChange:this.props.onChange,type:this.props.field?this.props.field.type:"string"}))}},{key:"renderWithSuggestions",value:function renderWithSuggestions(){var suggestions=this.state.suggestions;var _this$props=this.props,value=_this$props.value,intl=_this$props.intl,_onChange=_this$props.onChange;var valueAsStr=String(value);var options=value?(0,_lodash.uniq)([valueAsStr].concat((0,_toConsumableArray2.default)(suggestions))):suggestions;return _react2.default.createElement(StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valueSelectPlaceholder",defaultMessage:"Select a value"}),fullWidth:true,options:options,getLabel:function getLabel(option){return option},selectedOptions:value?[valueAsStr]:[],onChange:function onChange(_ref){var _ref2=(0,_slicedToArray2.default)(_ref,1),_ref2$=_ref2[0],newValue=_ref2$===void 0?"":_ref2$;return _onChange(newValue)},onSearchChange:this.onSearchChange,singleSelection:{asPlainText:true},onCreateOption:_onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phraseParamsComboxBox"})}}]);return PhraseValueInputUI}(_phrase_suggestor.PhraseSuggestorUI);function StringComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var PhraseValueInput=(0,_react.injectI18n)((0,_public.withOpenSearchDashboards)(PhraseValueInputUI));exports.PhraseValueInput=PhraseValueInput},1300:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.PhrasesValuesInput=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(19));var _classCallCheck2=_interopRequireDefault(__webpack_require__(3));var _createClass2=_interopRequireDefault(__webpack_require__(4));var _inherits2=_interopRequireDefault(__webpack_require__(11));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(12));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9));var _eui=__webpack_require__(13);var _react=__webpack_require__(27);var _lodash=__webpack_require__(7);var _react2=_interopRequireDefault(__webpack_require__(5));var _generic_combo_box=__webpack_require__(1099);var _phrase_suggestor=__webpack_require__(1119);var _public=__webpack_require__(24);function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2.default)(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}var PhrasesValuesInputUI=function(_PhraseSuggestorUI){(0,_inherits2.default)(PhrasesValuesInputUI,_PhraseSuggestorUI);var _super=_createSuper(PhrasesValuesInputUI);function PhrasesValuesInputUI(){(0,_classCallCheck2.default)(this,PhrasesValuesInputUI);return _super.apply(this,arguments)}(0,_createClass2.default)(PhrasesValuesInputUI,[{key:"render",value:function render(){var suggestions=this.state.suggestions;var _this$props=this.props,values=_this$props.values,intl=_this$props.intl,onChange=_this$props.onChange;var options=values?(0,_lodash.uniq)([].concat((0,_toConsumableArray2.default)(values),(0,_toConsumableArray2.default)(suggestions))):suggestions;return _react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectLabel",defaultMessage:"Values"})},_react2.default.createElement(StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectPlaceholder",defaultMessage:"Select values"}),fullWidth:true,options:options,getLabel:function getLabel(option){return option},selectedOptions:values||[],onSearchChange:this.onSearchChange,onCreateOption:function onCreateOption(option){return onChange([].concat((0,_toConsumableArray2.default)(values||[]),[option]))},onChange:onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phrasesParamsComboxBox",delimiter:","}))}}]);return PhrasesValuesInputUI}(_phrase_suggestor.PhraseSuggestorUI);function StringComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var PhrasesValuesInput=(0,_react.injectI18n)((0,_public.withOpenSearchDashboards)(PhrasesValuesInputUI));exports.PhrasesValuesInput=PhrasesValuesInput},1301:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.RangeValueInput=void 0;var _moment=_interopRequireDefault(__webpack_require__(30));var _eui=__webpack_require__(13);var _react=__webpack_require__(27);var _lodash=__webpack_require__(7);var _react2=_interopRequireDefault(__webpack_require__(5));var _public=__webpack_require__(24);var _value_input_type=__webpack_require__(1120);function RangeValueInputUI(props){var opensearchDashboards=(0,_public.useOpenSearchDashboards)();var type=props.field?props.field.type:"string";var tzConfig=opensearchDashboards.services.uiSettings.get("dateFormat:tz");var formatDateChange=function formatDateChange(value){if(typeof value!=="string"&&typeof value!=="number")return value;var momentParsedValue=(0,_moment.default)(value).tz(tzConfig);if(momentParsedValue.isValid())return momentParsedValue===null||momentParsedValue===void 0?void 0:momentParsedValue.format("YYYY-MM-DDTHH:mm:ss.SSSZ");return value};var onFromChange=function onFromChange(value){if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}props.onChange({from:value,to:(0,_lodash.get)(props,"value.to")})};var onToChange=function onToChange(value){if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}props.onChange({from:(0,_lodash.get)(props,"value.from"),to:value})};return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFormControlLayoutDelimited,{fullWidth:true,"aria-label":props.intl.formatMessage({id:"data.filter.filterEditor.rangeInputLabel",defaultMessage:"Range"}),startControl:_react2.default.createElement(_value_input_type.ValueInputType,{controlOnly:true,type:type,value:props.value?props.value.from:undefined,onChange:onFromChange,onBlur:function onBlur(value){onFromChange(formatDateChange(value))},placeholder:props.intl.formatMessage({id:"data.filter.filterEditor.rangeStartInputPlaceholder",defaultMessage:"Start of the range"})}),endControl:_react2.default.createElement(_value_input_type.ValueInputType,{controlOnly:true,type:type,value:props.value?props.value.to:undefined,onChange:onToChange,onBlur:function onBlur(value){onToChange(formatDateChange(value))},placeholder:props.intl.formatMessage({id:"data.filter.filterEditor.rangeEndInputPlaceholder",defaultMessage:"End of the range"})})}))}var RangeValueInput=(0,_react.injectI18n)(RangeValueInputUI);exports.RangeValueInput=RangeValueInput},1302:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);var _typeof=__webpack_require__(8);Object.defineProperty(exports,"__esModule",{value:true});exports.FilterItem=FilterItem;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(19));var _slicedToArray2=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(13);var _classnames=_interopRequireDefault(__webpack_require__(44));var _react=_interopRequireWildcard(__webpack_require__(5));var _filter_editor=__webpack_require__(1117);var _filter_view=__webpack_require__(1303);var _common=__webpack_require__(10);var _services=__webpack_require__(38);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var FILTER_ITEM_OK="";var FILTER_ITEM_WARNING="warn";var FILTER_ITEM_ERROR="error";function FilterItem(props){var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2.default)(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];var _useState3=(0,_react.useState)(undefined),_useState4=(0,_slicedToArray2.default)(_useState3,2),indexPatternExists=_useState4[0],setIndexPatternExists=_useState4[1];var id=props.id,filter=props.filter,indexPatterns=props.indexPatterns;(0,_react.useEffect)((function(){var index=props.filter.meta.index;if(index){(0,_services.getIndexPatterns)().get(index).then((function(indexPattern){setIndexPatternExists(!!indexPattern)})).catch((function(){setIndexPatternExists(false)}))}else{setIndexPatternExists(true)}}),[props.filter.meta.index]);function handleBadgeClick(e){if(e.shiftKey){onToggleDisabled()}else{setIsPopoverOpen(!isPopoverOpen)}}function onSubmit(f){setIsPopoverOpen(false);props.onUpdate(f)}function onTogglePinned(){var f=(0,_common.toggleFilterPinned)(filter);props.onUpdate(f)}function onToggleNegated(){var f=(0,_common.toggleFilterNegated)(filter);props.onUpdate(f)}function onToggleDisabled(){var f=(0,_common.toggleFilterDisabled)(filter);props.onUpdate(f)}function isValidLabel(labelConfig){return labelConfig.status===FILTER_ITEM_OK}function isDisabled(labelConfig){var disabled=filter.meta.disabled;return disabled||labelConfig.status===FILTER_ITEM_ERROR}function getClasses(negate,labelConfig){return(0,_classnames.default)("globalFilterItem",{"globalFilterItem-isDisabled":isDisabled(labelConfig),"globalFilterItem-isError":labelConfig.status===FILTER_ITEM_ERROR,"globalFilterItem-isWarning":labelConfig.status===FILTER_ITEM_WARNING,"globalFilterItem-isPinned":(0,_common.isFilterPinned)(filter),"globalFilterItem-isExcluded":negate},props.className)}function getDataTestSubj(labelConfig){var dataTestSubjKey=filter.meta.key?"filter-key-".concat(filter.meta.key):"";var dataTestSubjValue=filter.meta.value?"filter-value-".concat(isValidLabel(labelConfig)?labelConfig.title:labelConfig.status):"";var dataTestSubjNegated=filter.meta.negate?"filter-negated":"";var dataTestSubjDisabled="filter-".concat(isDisabled(labelConfig)?"disabled":"enabled");var dataTestSubjPinned="filter-".concat((0,_common.isFilterPinned)(filter)?"pinned":"unpinned");return"filter ".concat(dataTestSubjDisabled," ").concat(dataTestSubjKey," ").concat(dataTestSubjValue," ").concat(dataTestSubjPinned," ").concat(dataTestSubjNegated)}function getPanels(){var _filter$meta=filter.meta,negate=_filter$meta.negate,disabled=_filter$meta.disabled;return[{id:0,items:[{name:(0,_common.isFilterPinned)(filter)?props.intl.formatMessage({id:"data.filter.filterBar.unpinFilterButtonLabel",defaultMessage:"Unpin"}):props.intl.formatMessage({id:"data.filter.filterBar.pinFilterButtonLabel",defaultMessage:"Pin across all apps"}),icon:"pin",onClick:function onClick(){setIsPopoverOpen(false);onTogglePinned()},"data-test-subj":"pinFilter"},{name:props.intl.formatMessage({id:"data.filter.filterBar.editFilterButtonLabel",defaultMessage:"Edit filter"}),icon:"pencil",panel:1,"data-test-subj":"editFilter"},{name:negate?props.intl.formatMessage({id:"data.filter.filterBar.includeFilterButtonLabel",defaultMessage:"Include results"}):props.intl.formatMessage({id:"data.filter.filterBar.excludeFilterButtonLabel",defaultMessage:"Exclude results"}),icon:negate?"plusInCircle":"minusInCircle",onClick:function onClick(){setIsPopoverOpen(false);onToggleNegated()},"data-test-subj":"negateFilter"},{name:disabled?props.intl.formatMessage({id:"data.filter.filterBar.enableFilterButtonLabel",defaultMessage:"Re-enable"}):props.intl.formatMessage({id:"data.filter.filterBar.disableFilterButtonLabel",defaultMessage:"Temporarily disable"}),icon:"".concat(disabled?"eye":"eyeClosed"),onClick:function onClick(){setIsPopoverOpen(false);onToggleDisabled()},"data-test-subj":"disableFilter"},{name:props.intl.formatMessage({id:"data.filter.filterBar.deleteFilterButtonLabel",defaultMessage:"Delete"}),icon:"trash",onClick:function onClick(){setIsPopoverOpen(false);props.onRemove()},"data-test-subj":"deleteFilter"}]},{id:1,width:600,content:_react.default.createElement("div",null,_react.default.createElement(_filter_editor.FilterEditor,{filter:filter,indexPatterns:indexPatterns,onSubmit:onSubmit,onCancel:function onCancel(){setIsPopoverOpen(false)}}))}]}function isFilterApplicable(){var _filter$meta2;if(!props.indexPatterns.length)return true;var ip=(0,_common.getIndexPatternFromFilter)(filter,indexPatterns);if(ip)return true;var allFields=indexPatterns.map((function(indexPattern){return indexPattern.fields.map((function(field){return field.name}))}));var flatFields=allFields.reduce((function(acc,it){return[].concat((0,_toConsumableArray2.default)(acc),(0,_toConsumableArray2.default)(it))}),[]);return flatFields.includes(((_filter$meta2=filter.meta)===null||_filter$meta2===void 0?void 0:_filter$meta2.key)||"")}function getValueLabel(){var label={title:"",message:"",status:FILTER_ITEM_OK};if(indexPatternExists===false){label.status=FILTER_ITEM_ERROR;label.title=props.intl.formatMessage({id:"data.filter.filterBar.labelErrorText",defaultMessage:"Error"});label.message=props.intl.formatMessage({id:"data.filter.filterBar.labelErrorInfo",defaultMessage:"Index pattern {indexPattern} not found"},{indexPattern:filter.meta.index})}else if(isFilterApplicable()){try{label.title=(0,_common.getDisplayValueFromFilter)(filter,indexPatterns)}catch(e){label.status=FILTER_ITEM_ERROR;label.title=props.intl.formatMessage({id:"data.filter.filterBar.labelErrorText",defaultMessage:"Error"});label.message=e.message}}else{label.status=FILTER_ITEM_WARNING;label.title=props.intl.formatMessage({id:"data.filter.filterBar.labelWarningText",defaultMessage:"Warning"});label.message=props.intl.formatMessage({id:"data.filter.filterBar.labelWarningInfo",defaultMessage:"Field {fieldName} does not exist in current view"},{fieldName:filter.meta.key})}return label}if(indexPatternExists===undefined)return null;var valueLabelConfig=getValueLabel();if(valueLabelConfig.status===FILTER_ITEM_ERROR&&!filter.meta.disabled){filter.meta.disabled=true;props.onUpdate(filter);return null}var badge=_react.default.createElement(_filter_view.FilterView,{filter:filter,valueLabel:valueLabelConfig.title,filterLabelStatus:valueLabelConfig.status,errorMessage:valueLabelConfig.message,className:getClasses(filter.meta.negate,valueLabelConfig),iconOnClick:function iconOnClick(){return props.onRemove()},onClick:handleBadgeClick,"data-test-subj":getDataTestSubj(valueLabelConfig)});return _react.default.createElement(_eui.EuiPopover,{id:"popoverFor_filter".concat(id),className:"globalFilterItem__popover",anchorClassName:"globalFilterItem__popoverAnchor",isOpen:isPopoverOpen,closePopover:function closePopover(){setIsPopoverOpen(false)},button:badge,anchorPosition:"downLeft",panelPaddingSize:"none"},_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:getPanels()}))}},1303:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.FilterView=void 0;var _extends2=_interopRequireDefault(__webpack_require__(32));var _slicedToArray2=_interopRequireDefault(__webpack_require__(17));var _objectWithoutProperties2=_interopRequireDefault(__webpack_require__(20));var _eui=__webpack_require__(13);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(5));var _=__webpack_require__(325);var _common=__webpack_require__(10);var _excluded=["filter","iconOnClick","onClick","valueLabel","errorMessage","filterLabelStatus"];var FilterView=function FilterView(_ref){var filter=_ref.filter,iconOnClick=_ref.iconOnClick,onClick=_ref.onClick,valueLabel=_ref.valueLabel,errorMessage=_ref.errorMessage,filterLabelStatus=_ref.filterLabelStatus,rest=(0,_objectWithoutProperties2.default)(_ref,_excluded);var _useInnerText=(0,_eui.useInnerText)(),_useInnerText2=(0,_slicedToArray2.default)(_useInnerText,2),ref=_useInnerText2[0],innerText=_useInnerText2[1];var title=errorMessage||_i18n.i18n.translate("data.filter.filterBar.moreFilterActionsMessage",{defaultMessage:"Filter: {innerText}. Select for more filter actions.",values:{innerText:innerText}});if((0,_common.isFilterPinned)(filter)){title="".concat(_i18n.i18n.translate("data.filter.filterBar.pinnedFilterPrefix",{defaultMessage:"Pinned"})," ").concat(title)}if(filter.meta.disabled){title="".concat(_i18n.i18n.translate("data.filter.filterBar.disabledFilterPrefix",{defaultMessage:"Disabled"})," ").concat(title)}return _react.default.createElement(_eui.EuiBadge,(0,_extends2.default)({title:title,color:"hollow",iconType:"cross",iconSide:"right",closeButtonProps:{tabIndex:-1},iconOnClick:iconOnClick,iconOnClickAriaLabel:_i18n.i18n.translate("data.filter.filterBar.filterItemBadgeIconAriaLabel",{defaultMessage:"Delete"}),onClick:onClick,onClickAriaLabel:_i18n.i18n.translate("data.filter.filterBar.filterItemBadgeAriaLabel",{defaultMessage:"Filter actions"})},rest),_react.default.createElement("span",{ref:ref},_react.default.createElement(_.FilterLabel,{filter:filter,valueLabel:valueLabel,filterLabelStatus:filterLabelStatus})))};exports.FilterView=FilterView},1304:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);var _typeof=__webpack_require__(8);Object.defineProperty(exports,"__esModule",{value:true});exports.FilterOptions=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(3));var _createClass2=_interopRequireDefault(__webpack_require__(4));var _assertThisInitialized2=_interopRequireDefault(__webpack_require__(16));var _inherits2=_interopRequireDefault(__webpack_require__(11));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(12));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9));var _defineProperty2=_interopRequireDefault(__webpack_require__(1));var _eui=__webpack_require__(13);var _react=__webpack_require__(27);var _react2=_interopRequireWildcard(__webpack_require__(5));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2.default)(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}var FilterOptionsUI=function(_Component){(0,_inherits2.default)(FilterOptionsUI,_Component);var _super=_createSuper(FilterOptionsUI);function FilterOptionsUI(){var _this;(0,_classCallCheck2.default)(this,FilterOptionsUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"state",{isPopoverOpen:false});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"togglePopover",(function(){_this.setState((function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}}))}));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));return _this}(0,_createClass2.default)(FilterOptionsUI,[{key:"render",value:function render(){var _this2=this;var panelTree={id:0,items:[{name:this.props.intl.formatMessage({id:"data.filter.options.enableAllFiltersButtonLabel",defaultMessage:"Enable all"}),icon:"eye",onClick:function onClick(){_this2.closePopover();_this2.props.onEnableAll()},"data-test-subj":"enableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.disableAllFiltersButtonLabel",defaultMessage:"Disable all"}),icon:"eyeClosed",onClick:function onClick(){_this2.closePopover();_this2.props.onDisableAll()},"data-test-subj":"disableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.pinAllFiltersButtonLabel",defaultMessage:"Pin all"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.props.onPinAll()},"data-test-subj":"pinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.unpinAllFiltersButtonLabel",defaultMessage:"Unpin all"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.props.onUnpinAll()},"data-test-subj":"unpinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertNegatedFiltersButtonLabel",defaultMessage:"Invert inclusion"}),icon:"invert",onClick:function onClick(){_this2.closePopover();_this2.props.onToggleAllNegated()},"data-test-subj":"invertInclusionAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertDisabledFiltersButtonLabel",defaultMessage:"Invert enabled/disabled"}),icon:"eye",onClick:function onClick(){_this2.closePopover();_this2.props.onToggleAllDisabled()},"data-test-subj":"invertEnableDisableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.deleteAllFiltersButtonLabel",defaultMessage:"Remove all"}),icon:"trash",onClick:function onClick(){_this2.closePopover();_this2.props.onRemoveAll()},"data-test-subj":"removeAllFilters"}]};return _react2.default.createElement(_eui.EuiPopover,{id:"popoverForAllFilters",className:"globalFilterGroup__allFiltersPopover",isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,button:_react2.default.createElement(_eui.EuiButtonIcon,{onClick:this.togglePopover,iconType:"filter","aria-label":this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),title:this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),"data-test-subj":"showFilterActions"}),anchorPosition:"rightUp",panelPaddingSize:"none",repositionOnScroll:true},_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.searchBar.changeAllFiltersTitle",defaultMessage:"Change all filters"})),_react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:[panelTree]}))}}]);return FilterOptionsUI}(_react2.Component);var FilterOptions=(0,_react.injectI18n)(FilterOptionsUI);exports.FilterOptions=FilterOptions},1305:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SaveQueryForm",{enumerable:true,get:function get(){return _save_query_form.SaveQueryForm}});Object.defineProperty(exports,"SavedQueryMeta",{enumerable:true,get:function get(){return _save_query_form.SavedQueryMeta}});var _save_query_form=__webpack_require__(1306)},1306:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);var _typeof=__webpack_require__(8);Object.defineProperty(exports,"__esModule",{value:true});exports.SaveQueryForm=SaveQueryForm;var _regenerator=_interopRequireDefault(__webpack_require__(14));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(15));var _slicedToArray2=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(13);var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(7);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function SaveQueryForm(_ref){var savedQuery=_ref.savedQuery,savedQueryService=_ref.savedQueryService,onSave=_ref.onSave,onClose=_ref.onClose,_ref$showFilterOption=_ref.showFilterOption,showFilterOption=_ref$showFilterOption===void 0?true:_ref$showFilterOption,_ref$showTimeFilterOp=_ref.showTimeFilterOption,showTimeFilterOption=_ref$showTimeFilterOp===void 0?true:_ref$showTimeFilterOp;var _useState=(0,_react.useState)(savedQuery?savedQuery.title:""),_useState2=(0,_slicedToArray2.default)(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=(0,_react.useState)(Boolean(savedQuery)),_useState4=(0,_slicedToArray2.default)(_useState3,2),enabledSaveButton=_useState4[0],setEnabledSaveButton=_useState4[1];var _useState5=(0,_react.useState)(savedQuery?savedQuery.description:""),_useState6=(0,_slicedToArray2.default)(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=(0,_react.useState)([]),_useState8=(0,_slicedToArray2.default)(_useState7,2),savedQueries=_useState8[0],setSavedQueries=_useState8[1];var _useState9=(0,_react.useState)(savedQuery?!!savedQuery.filters:true),_useState10=(0,_slicedToArray2.default)(_useState9,2),shouldIncludeFilters=_useState10[0],setShouldIncludeFilters=_useState10[1];var _useState11=(0,_react.useState)(savedQuery?!!savedQuery.timefilter:false),_useState12=(0,_slicedToArray2.default)(_useState11,2),shouldIncludeTimefilter=_useState12[0],setIncludeTimefilter=_useState12[1];var _useState13=(0,_react.useState)([]),_useState14=(0,_slicedToArray2.default)(_useState13,2),formErrors=_useState14[0],setFormErrors=_useState14[1];var titleConflictErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.titleConflictText",{defaultMessage:"Name conflicts with an existing saved query"});var savedQueryDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});(0,_react.useEffect)((function(){var fetchQueries=function(){var _ref2=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(){var allSavedQueries,sortedAllSavedQueries;return _regenerator.default.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return savedQueryService.getAllSavedQueries();case 2:allSavedQueries=_context.sent;sortedAllSavedQueries=(0,_lodash.sortBy)(allSavedQueries,"attributes.title");setSavedQueries(sortedAllSavedQueries);case 5:case"end":return _context.stop()}}}),_callee)})));return function fetchQueries(){return _ref2.apply(this,arguments)}}();fetchQueries()}),[savedQueryService]);var validate=(0,_react.useCallback)((function(){var errors=[];if(!!savedQueries.find((function(existingSavedQuery){return!savedQuery&&existingSavedQuery.attributes.title===title}))){errors.push(titleConflictErrorText)}if(!(0,_lodash.isEqual)(errors,formErrors)){setFormErrors(errors);return false}return!formErrors.length}),[savedQueries,savedQuery,title,titleConflictErrorText,formErrors]);var onClickSave=(0,_react.useCallback)((function(){if(validate()){onSave({title:title,description:description,shouldIncludeFilters:shouldIncludeFilters,shouldIncludeTimefilter:shouldIncludeTimefilter})}}),[validate,onSave,title,description,shouldIncludeFilters,shouldIncludeTimefilter]);var onInputChange=(0,_react.useCallback)((function(event){setEnabledSaveButton(Boolean(event.target.value));setFormErrors([]);setTitle(event.target.value)}),[]);var autoTrim=(0,_react.useCallback)((function(){var trimmedTitle=title.trim();if(title.length>trimmedTitle.length){setTitle(trimmedTitle)}}),[title]);var hasErrors=formErrors.length>0;var saveQueryForm=_react.default.createElement(_eui.EuiForm,{isInvalid:hasErrors,error:formErrors,"data-test-subj":"saveQueryForm"},_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiText,{color:"subdued"},savedQueryDescriptionText)),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.search.searchBar.savedQueryNameLabelText",{defaultMessage:"Name"}),helpText:_i18n.i18n.translate("data.search.searchBar.savedQueryNameHelpText",{defaultMessage:"Name is required. Name cannot contain leading or trailing whitespace. Name must be unique."}),isInvalid:hasErrors},_react.default.createElement(_eui.EuiFieldText,{disabled:!!savedQuery,value:title,name:"title",onChange:onInputChange,"data-test-subj":"saveQueryFormTitle",isInvalid:hasErrors,onBlur:autoTrim})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionLabelText",{defaultMessage:"Description"})},_react.default.createElement(_eui.EuiFieldText,{value:description,name:"description",onChange:function onChange(event){setDescription(event.target.value)},"data-test-subj":"saveQueryFormDescription"})),showFilterOption&&_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{name:"shouldIncludeFilters",label:_i18n.i18n.translate("data.search.searchBar.savedQueryIncludeFiltersLabelText",{defaultMessage:"Include filters"}),checked:shouldIncludeFilters,onChange:function onChange(){setShouldIncludeFilters(!shouldIncludeFilters)},"data-test-subj":"saveQueryFormIncludeFiltersOption"})),showTimeFilterOption&&_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{name:"shouldIncludeTimefilter",label:_i18n.i18n.translate("data.search.searchBar.savedQueryIncludeTimeFilterLabelText",{defaultMessage:"Include time filter"}),checked:shouldIncludeTimefilter,onChange:function onChange(){setIncludeTimefilter(!shouldIncludeTimefilter)},"data-test-subj":"saveQueryFormIncludeTimeFilterOption"})));return _react.default.createElement(_eui.EuiModal,{onClose:onClose,initialFocus:"[name=title]"},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,_i18n.i18n.translate("data.search.searchBar.savedQueryFormTitle",{defaultMessage:"Save query"}))),_react.default.createElement(_eui.EuiModalBody,null,saveQueryForm),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:onClose,"data-test-subj":"savedQueryFormCancelButton"},_i18n.i18n.translate("data.search.searchBar.savedQueryFormCancelButtonText",{defaultMessage:"Cancel"})),_react.default.createElement(_eui.EuiButton,{onClick:onClickSave,fill:true,"data-test-subj":"savedQueryFormSaveButton",disabled:hasErrors||!enabledSaveButton},_i18n.i18n.translate("data.search.searchBar.savedQueryFormSaveButtonText",{defaultMessage:"Save"}))))}},1307:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedQueryManagementComponent",{enumerable:true,get:function get(){return _saved_query_management_component.SavedQueryManagementComponent}});var _saved_query_management_component=__webpack_require__(1308)},1308:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);var _typeof=__webpack_require__(8);Object.defineProperty(exports,"__esModule",{value:true});exports.SavedQueryManagementComponent=SavedQueryManagementComponent;var _regenerator=_interopRequireDefault(__webpack_require__(14));var _toConsumableArray2=_interopRequireDefault(__webpack_require__(19));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(15));var _slicedToArray2=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(13);var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=__webpack_require__(7);var _saved_query_list_item=__webpack_require__(1309);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var perPage=50;function SavedQueryManagementComponent(_ref){var showSaveQuery=_ref.showSaveQuery,loadedSavedQuery=_ref.loadedSavedQuery,onSave=_ref.onSave,onSaveAsNew=_ref.onSaveAsNew,onLoad=_ref.onLoad,onClearSavedQuery=_ref.onClearSavedQuery,savedQueryService=_ref.savedQueryService;var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2.default)(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=(0,_react.useState)([]),_useState4=(0,_slicedToArray2.default)(_useState3,2),savedQueries=_useState4[0],setSavedQueries=_useState4[1];var _useState5=(0,_react.useState)(0),_useState6=(0,_slicedToArray2.default)(_useState5,2),count=_useState6[0],setTotalCount=_useState6[1];var _useState7=(0,_react.useState)(0),_useState8=(0,_slicedToArray2.default)(_useState7,2),activePage=_useState8[0],setActivePage=_useState8[1];var cancelPendingListingRequest=(0,_react.useRef)((function(){}));(0,_react.useEffect)((function(){var fetchCountAndSavedQueries=function(){var _ref2=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(){var requestGotCancelled,_yield$savedQueryServ,savedQueryCount,savedQueryItems,sortedSavedQueryItems;return _regenerator.default.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cancelPendingListingRequest.current();requestGotCancelled=false;cancelPendingListingRequest.current=function(){requestGotCancelled=true};_context.next=5;return savedQueryService.findSavedQueries("",perPage,activePage+1);case 5:_yield$savedQueryServ=_context.sent;savedQueryCount=_yield$savedQueryServ.total;savedQueryItems=_yield$savedQueryServ.queries;if(!requestGotCancelled){_context.next=10;break}return _context.abrupt("return");case 10:sortedSavedQueryItems=(0,_lodash.sortBy)(savedQueryItems,"attributes.title");setTotalCount(savedQueryCount);setSavedQueries(sortedSavedQueryItems);case 13:case"end":return _context.stop()}}}),_callee)})));return function fetchCountAndSavedQueries(){return _ref2.apply(this,arguments)}}();if(isOpen){fetchCountAndSavedQueries()}}),[isOpen,activePage,savedQueryService]);var handleTogglePopover=(0,_react.useCallback)((function(){return setIsOpen((function(currentState){return!currentState}))}),[setIsOpen]);var handleClosePopover=(0,_react.useCallback)((function(){return setIsOpen(false)}),[]);var handleSave=(0,_react.useCallback)((function(){handleClosePopover();onSave()}),[handleClosePopover,onSave]);var handleSaveAsNew=(0,_react.useCallback)((function(){handleClosePopover();onSaveAsNew()}),[handleClosePopover,onSaveAsNew]);var handleSelect=(0,_react.useCallback)((function(savedQueryToSelect){handleClosePopover();onLoad(savedQueryToSelect)}),[handleClosePopover,onLoad]);var handleDelete=(0,_react.useCallback)((function(savedQueryToDelete){var onDeleteSavedQuery=function(){var _ref3=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee2(savedQuery){return _regenerator.default.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cancelPendingListingRequest.current();setSavedQueries(savedQueries.filter((function(currentSavedQuery){return currentSavedQuery.id!==savedQuery.id})));if(loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id){onClearSavedQuery()}_context2.next=5;return savedQueryService.deleteSavedQuery(savedQuery.id);case 5:setActivePage(0);case 6:case"end":return _context2.stop()}}}),_callee2)})));return function onDeleteSavedQuery(_x){return _ref3.apply(this,arguments)}}();onDeleteSavedQuery(savedQueryToDelete);handleClosePopover()}),[handleClosePopover,loadedSavedQuery,onClearSavedQuery,savedQueries,savedQueryService]);var savedQueryDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});var noSavedQueriesDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryNoSavedQueriesText",{defaultMessage:"There are no saved queries."})+" "+savedQueryDescriptionText;var savedQueryPopoverTitleText=_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverTitleText",{defaultMessage:"Saved Queries"});var goToPage=function goToPage(pageNumber){setActivePage(pageNumber)};var savedQueryPopoverButton=_react.default.createElement(_eui.EuiButtonEmpty,{onClick:handleTogglePopover,"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),"data-test-subj":"saved-query-management-popover-button"},_react.default.createElement(_eui.EuiIcon,{type:"save",className:"euiQuickSelectPopover__buttonText"}),_react.default.createElement(_eui.EuiIcon,{type:"arrowDown"}));var savedQueryRows=function savedQueryRows(){var savedQueriesWithoutCurrent=savedQueries.filter((function(savedQuery){if(!loadedSavedQuery)return true;return savedQuery.id!==loadedSavedQuery.id}));var savedQueriesReordered=loadedSavedQuery&&savedQueriesWithoutCurrent.length!==savedQueries.length?[loadedSavedQuery].concat((0,_toConsumableArray2.default)(savedQueriesWithoutCurrent)):(0,_toConsumableArray2.default)(savedQueriesWithoutCurrent);return savedQueriesReordered.map((function(savedQuery){return _react.default.createElement(_saved_query_list_item.SavedQueryListItem,{key:savedQuery.id,savedQuery:savedQuery,isSelected:!!loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id,onSelect:handleSelect,onDelete:handleDelete,showWriteOperations:!!showSaveQuery})}))};return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiPopover,{id:"savedQueryPopover",button:savedQueryPopoverButton,isOpen:isOpen,closePopover:handleClosePopover,anchorPosition:"downLeft",panelPaddingSize:"none",buffer:-8,ownFocus:true,repositionOnScroll:true},_react.default.createElement("div",{className:"osdSavedQueryManagement__popover","data-test-subj":"saved-query-management-popover"},_react.default.createElement(_eui.EuiPopoverTitle,{id:"savedQueryManagementPopoverTitle"},savedQueryPopoverTitleText),savedQueries.length>0?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued",className:"osdSavedQueryManagement__text"},_react.default.createElement("p",null,savedQueryDescriptionText)),_react.default.createElement("div",{className:"osdSavedQueryManagement__listWrapper"},_react.default.createElement(_eui.EuiListGroup,{flush:true,className:"osdSavedQueryManagement__list","aria-labelledby":"savedQueryManagementPopoverTitle"},savedQueryRows())),_react.default.createElement(_eui.EuiPagination,{className:"osdSavedQueryManagement__pagination",pageCount:Math.ceil(count/perPage),activePage:activePage,onPageClick:goToPage})):_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued",className:"osdSavedQueryManagement__text"},_react.default.createElement("p",null,noSavedQueriesDescriptionText)),_react.default.createElement(_eui.EuiSpacer,{size:"s"})),_react.default.createElement(_eui.EuiPopoverFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"rowReverse",gutterSize:"s",alignItems:"center",justifyContent:"flexEnd",responsive:false,wrap:true},showSaveQuery&&loadedSavedQuery&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:handleSave,"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonAriaLabel",{defaultMessage:"Save changes to {title}",values:{title:loadedSavedQuery.attributes.title}}),"data-test-subj":"saved-query-management-save-changes-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonText",{defaultMessage:"Save changes"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:handleSaveAsNew,"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonAriaLabel",{defaultMessage:"Save as new saved query"}),"data-test-subj":"saved-query-management-save-as-new-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonText",{defaultMessage:"Save as new"})))),showSaveQuery&&!loadedSavedQuery&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:handleSave,"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveButtonAriaLabel",{defaultMessage:"Save a new saved query"}),"data-test-subj":"saved-query-management-save-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveButtonText",{defaultMessage:"Save current query"}))),_react.default.createElement(_eui.EuiFlexItem,null),_react.default.createElement(_eui.EuiFlexItem,{grow:false},loadedSavedQuery&&_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",flush:"left",onClick:onClearSavedQuery,"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverClearButtonAriaLabel",{defaultMessage:"Clear current saved query"}),"data-test-subj":"saved-query-management-clear-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverClearButtonText",{defaultMessage:"Clear"}))))))))}},1309:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);var _typeof=__webpack_require__(8);Object.defineProperty(exports,"__esModule",{value:true});exports.SavedQueryListItem=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(13);var _react=_interopRequireWildcard(__webpack_require__(5));var _classnames=_interopRequireDefault(__webpack_require__(44));var _i18n=__webpack_require__(2);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var SavedQueryListItem=function SavedQueryListItem(_ref){var savedQuery=_ref.savedQuery,isSelected=_ref.isSelected,onSelect=_ref.onSelect,onDelete=_ref.onDelete,showWriteOperations=_ref.showWriteOperations;var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2.default)(_useState,2),showDeletionConfirmationModal=_useState2[0],setShowDeletionConfirmationModal=_useState2[1];var selectButtonAriaLabelText=isSelected?_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemSelectedButtonAriaLabel",{defaultMessage:"Saved query button selected {savedQueryName}. Press to clear any changes.",values:{savedQueryName:savedQuery.attributes.title}}):_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemButtonAriaLabel",{defaultMessage:"Saved query button {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}});var selectButtonDataTestSubj=isSelected?"load-saved-query-".concat(savedQuery.attributes.title,"-button saved-query-list-item-selected"):"load-saved-query-".concat(savedQuery.attributes.title,"-button");var classes=(0,_classnames.default)("osdSavedQueryListItem",{"osdSavedQueryListItem-selected":isSelected});var label=_react.default.createElement("span",{className:"osdSavedQueryListItem__label"},_react.default.createElement("span",{className:"osdSavedQueryListItem__labelText"},savedQuery.attributes.title)," ",savedQuery.attributes.description&&_react.default.createElement(_eui.EuiIconTip,{type:"iInCircle",content:savedQuery.attributes.description,"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemDescriptionAriaLabel",{defaultMessage:"{savedQueryName} description",values:{savedQueryName:savedQuery.attributes.title}})}));return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiListGroupItem,{className:classes,key:savedQuery.id,"data-test-subj":"saved-query-list-item ".concat(selectButtonDataTestSubj," ").concat(isSelected?"saved-query-list-item-selected":""),isActive:isSelected,onClick:function onClick(){onSelect(savedQuery)},"aria-label":selectButtonAriaLabelText,label:label,iconType:isSelected?"check":undefined,extraAction:showWriteOperations?{color:"danger",onClick:function onClick(){return setShowDeletionConfirmationModal(true)},iconType:"trash",iconSize:"s","aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),"data-test-subj":"delete-saved-query-".concat(savedQuery.attributes.title,"-button")}:undefined}),showDeletionConfirmationModal&&_react.default.createElement(_eui.EuiConfirmModal,{title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionTitle",{defaultMessage:'Delete "{savedQueryName}"?',values:{savedQueryName:savedQuery.attributes.title}}),confirmButtonText:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionConfirmButtonText",{defaultMessage:"Delete"}),cancelButtonText:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionCancelButtonText",{defaultMessage:"Cancel"}),onConfirm:function onConfirm(){onDelete(savedQuery);setShowDeletionConfirmationModal(false)},buttonColor:"danger",onCancel:function onCancel(){setShowDeletionConfirmationModal(false)}}))};exports.SavedQueryListItem=SavedQueryListItem}}]);