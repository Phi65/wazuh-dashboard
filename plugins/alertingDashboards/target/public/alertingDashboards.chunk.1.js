(window["alertingDashboards_bundle_jsonpfunction"]=window["alertingDashboards_bundle_jsonpfunction"]||[]).push([[1],[,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderApp=renderApp;var _react=_interopRequireDefault(__webpack_require__(5));var _reactDom=_interopRequireDefault(__webpack_require__(12));var _reactRouterDom=__webpack_require__(10);__webpack_require__(210);var _Main=_interopRequireDefault(__webpack_require__(212));var _CoreContext=__webpack_require__(68);var _services=__webpack_require__(209);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function renderApp(coreStart,params){var isDarkMode=coreStart.uiSettings.get("theme:darkMode")||false;var http=coreStart.http;coreStart.chrome.setBreadcrumbs([{text:"Alerting"}]);var notificationService=new _services.NotificationService(http);var services={notificationService:notificationService};if(isDarkMode){__webpack_require__(599)}else{__webpack_require__(601)}_reactDom.default.render(_react.default.createElement(_reactRouterDom.HashRouter,null,_react.default.createElement(_services.ServicesContext.Provider,{value:services},_react.default.createElement(_CoreContext.CoreContext.Provider,{value:{http:coreStart.http,isDarkMode:isDarkMode,notifications:coreStart.notifications}},_react.default.createElement(_reactRouterDom.Route,{render:function render(props){return _react.default.createElement(_Main.default,_extends({title:"Alerting"},props))}})))),params.element);return function(){return _reactDom.default.unmountComponentAtNode(params.element)}}},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TRIGGER_ACTIONS=exports.SEARCH_TYPE=exports.PREVIEW_ERROR_TYPE=exports.OS_NOTIFICATION_PLUGIN=exports.OS_AD_PLUGIN=exports.OPENSEARCH_DASHBOARDS_AD_PLUGIN=exports.MONITOR_TYPE=exports.MONITOR_INPUT_DETECTOR_ID=exports.MONITOR_GROUP_BY=exports.MONITOR_ACTIONS=exports.MAX_QUERY_RESULT_SIZE=exports.MAX_CHANNELS_RESULT_SIZE=exports.INPUTS_DETECTOR_ID=exports.DESTINATION_ACTIONS=exports.DEFAULT_PREVIEW_ERROR_MSG=exports.DEFAULT_EMPTY_DATA=exports.DATA_TYPES=exports.CHANNEL_TYPE=exports.BACKEND_CHANNEL_TYPE=exports.APP_PATH=exports.ALERT_STATE=exports.AD_PREVIEW_DAYS=void 0;var _Object$freeze;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ALERT_STATE=Object.freeze({ACTIVE:"ACTIVE",ACKNOWLEDGED:"ACKNOWLEDGED",COMPLETED:"COMPLETED",ERROR:"ERROR",DELETED:"DELETED"});exports.ALERT_STATE=ALERT_STATE;var DEFAULT_EMPTY_DATA="-";exports.DEFAULT_EMPTY_DATA=DEFAULT_EMPTY_DATA;var APP_PATH={CREATE_MONITOR:"/create-monitor",CREATE_DESTINATION:"/create-destination"};exports.APP_PATH=APP_PATH;var SEARCH_TYPE={GRAPH:"graph",QUERY:"query",AD:"ad",CLUSTER_METRICS:"clusterMetrics"};exports.SEARCH_TYPE=SEARCH_TYPE;var MONITOR_TYPE={QUERY_LEVEL:"query_level_monitor",BUCKET_LEVEL:"bucket_level_monitor",CLUSTER_METRICS:"cluster_metrics_monitor",DOC_LEVEL:"doc_level_monitor"};exports.MONITOR_TYPE=MONITOR_TYPE;var DESTINATION_ACTIONS={UPDATE_DESTINATION:"update-destination"};exports.DESTINATION_ACTIONS=DESTINATION_ACTIONS;var MONITOR_ACTIONS={UPDATE_MONITOR:"update-monitor"};exports.MONITOR_ACTIONS=MONITOR_ACTIONS;var TRIGGER_ACTIONS={UPDATE_TRIGGER:"update-trigger",CREATE_TRIGGER:"create-trigger"};exports.TRIGGER_ACTIONS=TRIGGER_ACTIONS;var DATA_TYPES={NUMBER:"number",TEXT:"text",BOOLEAN:"boolean",KEYWORD:"keyword"};exports.DATA_TYPES=DATA_TYPES;var OS_AD_PLUGIN="opensearch-anomaly-detection";exports.OS_AD_PLUGIN=OS_AD_PLUGIN;var OS_NOTIFICATION_PLUGIN="opensearch-notifications";exports.OS_NOTIFICATION_PLUGIN=OS_NOTIFICATION_PLUGIN;var OPENSEARCH_DASHBOARDS_AD_PLUGIN="anomaly-detection-dashboards";exports.OPENSEARCH_DASHBOARDS_AD_PLUGIN=OPENSEARCH_DASHBOARDS_AD_PLUGIN;var INPUTS_DETECTOR_ID="0.search.query.query.bool.filter[1].term.detector_id.value";exports.INPUTS_DETECTOR_ID=INPUTS_DETECTOR_ID;var MONITOR_INPUT_DETECTOR_ID="inputs.".concat(INPUTS_DETECTOR_ID);exports.MONITOR_INPUT_DETECTOR_ID=MONITOR_INPUT_DETECTOR_ID;var AD_PREVIEW_DAYS=7;exports.AD_PREVIEW_DAYS=AD_PREVIEW_DAYS;var MAX_QUERY_RESULT_SIZE=200;exports.MAX_QUERY_RESULT_SIZE=MAX_QUERY_RESULT_SIZE;var MAX_CHANNELS_RESULT_SIZE=5e3;exports.MAX_CHANNELS_RESULT_SIZE=MAX_CHANNELS_RESULT_SIZE;var MONITOR_GROUP_BY="ui_metadata.search.groupBy";exports.MONITOR_GROUP_BY=MONITOR_GROUP_BY;var BACKEND_CHANNEL_TYPE=Object.freeze({SLACK:"slack",EMAIL:"email",CHIME:"chime",CUSTOM_WEBHOOK:"webhook",SES:"ses",SNS:"sns"});exports.BACKEND_CHANNEL_TYPE=BACKEND_CHANNEL_TYPE;var CHANNEL_TYPE=Object.freeze((_Object$freeze={},_defineProperty(_Object$freeze,BACKEND_CHANNEL_TYPE.SLACK,"Slack"),_defineProperty(_Object$freeze,BACKEND_CHANNEL_TYPE.EMAIL,"Email"),_defineProperty(_Object$freeze,BACKEND_CHANNEL_TYPE.CHIME,"Chime"),_defineProperty(_Object$freeze,BACKEND_CHANNEL_TYPE.CUSTOM_WEBHOOK,"Custom webhook"),_defineProperty(_Object$freeze,BACKEND_CHANNEL_TYPE.SES,"Amazon SES"),_defineProperty(_Object$freeze,BACKEND_CHANNEL_TYPE.SNS,"Amazon SNS"),_Object$freeze));exports.CHANNEL_TYPE=CHANNEL_TYPE;var DEFAULT_PREVIEW_ERROR_MSG="There was a problem previewing the detector.";exports.DEFAULT_PREVIEW_ERROR_MSG=DEFAULT_PREVIEW_ERROR_MSG;var PREVIEW_ERROR_TYPE={EXCEPTION:0,NO_FEATURE:1,NO_ENABLED_FEATURES:2,SPARSE_DATA:3};exports.PREVIEW_ERROR_TYPE=PREVIEW_ERROR_TYPE},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FormikCheckbox",{enumerable:true,get:function get(){return _FormikCheckbox.default}});Object.defineProperty(exports,"FormikCodeEditor",{enumerable:true,get:function get(){return _FormikCodeEditor.default}});Object.defineProperty(exports,"FormikComboBox",{enumerable:true,get:function get(){return _FormikComboBox.default}});Object.defineProperty(exports,"FormikFieldNumber",{enumerable:true,get:function get(){return _FormikFieldNumber.default}});Object.defineProperty(exports,"FormikFieldPassword",{enumerable:true,get:function get(){return _FormikFieldPassword.default}});Object.defineProperty(exports,"FormikFieldRadio",{enumerable:true,get:function get(){return _FormikFieldRadio.default}});Object.defineProperty(exports,"FormikFieldText",{enumerable:true,get:function get(){return _FormikFieldText.default}});Object.defineProperty(exports,"FormikFormRow",{enumerable:true,get:function get(){return _FormikFormRow.default}});Object.defineProperty(exports,"FormikInputWrapper",{enumerable:true,get:function get(){return _FormikInputWrapper.default}});Object.defineProperty(exports,"FormikSelect",{enumerable:true,get:function get(){return _FormikSelect.default}});Object.defineProperty(exports,"FormikSwitch",{enumerable:true,get:function get(){return _FormikSwitch.default}});Object.defineProperty(exports,"FormikTextArea",{enumerable:true,get:function get(){return _FormikTextArea.default}});var _FormikFieldText=_interopRequireDefault(__webpack_require__(158));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikTextArea=_interopRequireDefault(__webpack_require__(344));var _FormikSwitch=_interopRequireDefault(__webpack_require__(345));var _FormikCheckbox=_interopRequireDefault(__webpack_require__(347));var _FormikSelect=_interopRequireDefault(__webpack_require__(349));var _FormikFieldNumber=_interopRequireDefault(__webpack_require__(350));var _FormikCodeEditor=_interopRequireDefault(__webpack_require__(352));var _FormikComboBox=_interopRequireDefault(__webpack_require__(354));var _FormikFieldPassword=_interopRequireDefault(__webpack_require__(356));var _FormikFieldRadio=_interopRequireDefault(__webpack_require__(358));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hasError=exports.ILLEGAL_CHARACTERS=void 0;exports.isIndexPatternQueryValid=isIndexPatternQueryValid;exports.validateDetector=exports.validateActionThrottle=exports.validateActionName=exports.requiredNumber=exports.required=exports.isInvalidApiPath=exports.isInvalidActionThrottle=exports.isInvalid=void 0;exports.validateExtractionQuery=validateExtractionQuery;exports.validateUnit=exports.validateTimezone=exports.validateRequiredNumber=exports.validatePositiveInteger=exports.validateMonthlyDay=exports.validateMonitorName=exports.validateIndex=exports.validateIllegalCharacters=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(0);var _constants2=__webpack_require__(15);var _constants3=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var isInvalid=function isInvalid(name,form){return!!_lodash.default.get(form.touched,name,false)&&!!_lodash.default.get(form.errors,name,false)};exports.isInvalid=isInvalid;var hasError=function hasError(name,form){return _lodash.default.get(form.errors,name)};exports.hasError=hasError;var validateActionName=function validateActionName(monitor,trigger){return function(value){if(!value)return"Required.";var actions;switch(monitor.monitor_type){case _constants2.MONITOR_TYPE.QUERY_LEVEL:case _constants2.MONITOR_TYPE.CLUSTER_METRICS:actions=_lodash.default.get(trigger,"".concat(_constants3.TRIGGER_TYPE.QUERY_LEVEL,".actions"),[]);break;case _constants2.MONITOR_TYPE.BUCKET_LEVEL:actions=_lodash.default.get(trigger,"".concat(_constants3.TRIGGER_TYPE.BUCKET_LEVEL,".actions"),[]);break;case _constants2.MONITOR_TYPE.DOC_LEVEL:actions=_lodash.default.get(trigger,"".concat(_constants3.TRIGGER_TYPE.DOC_LEVEL,".actions"),[]);break}var matches=actions.filter((function(action){return action.name===value}));if(matches.length>1)return"Action name is already used."}};exports.validateActionName=validateActionName;var isInvalidActionThrottle=function isInvalidActionThrottle(action){if(_lodash.default.get(action,"throttle_enabled")){var value=_lodash.default.get(action,"throttle.value");if(!value||value<1||value>_constants.MAX_THROTTLE_VALUE){return true}}return false};exports.isInvalidActionThrottle=isInvalidActionThrottle;var validateActionThrottle=function validateActionThrottle(action){return function(value){if(isInvalidActionThrottle(action)){return _constants.WRONG_THROTTLE_WARNING}}};exports.validateActionThrottle=validateActionThrottle;var required=function required(value){if(!value)return"Required."};exports.required=required;var requiredNumber=function requiredNumber(value){if(isNaN(parseFloat(value)))return"Requires numerical value."};exports.requiredNumber=requiredNumber;var validateIllegalCharacters=function validateIllegalCharacters(){var illegalCharacters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:ILLEGAL_CHARACTERS;return function(value){if(_lodash.default.isEmpty(value))return required(value);var illegalCharactersString=illegalCharacters.join(" ");var errorText="Contains invalid characters. Cannot contain: ".concat(illegalCharactersString);if(_lodash.default.includes(illegalCharacters," ")){errorText=illegalCharacters.length===1?"Cannot contain spaces.":"Contains invalid characters or spaces. Cannot contain: ".concat(illegalCharactersString)}var includesIllegalCharacter=false;illegalCharacters.forEach((function(character){if(_lodash.default.includes(value,character))includesIllegalCharacter=true}));if(includesIllegalCharacter)return errorText}};exports.validateIllegalCharacters=validateIllegalCharacters;var validateRequiredNumber=function validateRequiredNumber(value){if(value===undefined||typeof value==="string")return"Provide a value."};exports.validateRequiredNumber=validateRequiredNumber;var isInvalidApiPath=function isInvalidApiPath(name,form){var path=_lodash.default.get(form,"values.".concat(name));return _lodash.default.get(form.touched,name,false)&&_lodash.default.isEmpty(path)};exports.isInvalidApiPath=isInvalidApiPath;var validateMonitorName=function validateMonitorName(httpClient,monitorToEdit){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(value){var options,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(value){_context.next=3;break}return _context.abrupt("return","Required.");case 3:options={index:_constants.INDEX.SCHEDULED_JOBS,query:{query:{term:{"monitor.name.keyword":value}}}};_context.next=6;return httpClient.post("../api/alerting/monitors/_search",{body:JSON.stringify(options)});case 6:response=_context.sent;if(!_lodash.default.get(response,"resp.hits.total.value",0)){_context.next=12;break}if(monitorToEdit){_context.next=10;break}return _context.abrupt("return","Monitor name is already used.");case 10:if(!(monitorToEdit&&monitorToEdit.name!==value)){_context.next=12;break}return _context.abrupt("return","Monitor name is already used.");case 12:_context.next=19;break;case 14:_context.prev=14;_context.t0=_context["catch"](0);if(!(typeof _context.t0==="string")){_context.next=18;break}throw _context.t0;case 18:throw"There was a problem validating monitor name. Please try again.";case 19:case"end":return _context.stop()}}}),_callee,null,[[0,14]])})));return function(_x){return _ref.apply(this,arguments)}}()};exports.validateMonitorName=validateMonitorName;var validateTimezone=function validateTimezone(value){if(!Array.isArray(value))return"Select a timezone.";if(!value.length)return"Select a timezone."};exports.validateTimezone=validateTimezone;var validatePositiveInteger=function validatePositiveInteger(value){if(!Number.isInteger(value)||value<1)return"Must be a positive integer."};exports.validatePositiveInteger=validatePositiveInteger;var validateUnit=function validateUnit(value){if(!["MINUTES","HOURS","DAYS"].includes(value))return"Must be one of minutes, hours, days."};exports.validateUnit=validateUnit;var validateMonthlyDay=function validateMonthlyDay(value){if(!Number.isInteger(value)||value<1||value>31)return"Must be a positive integer between 1-31."};exports.validateMonthlyDay=validateMonthlyDay;var ILLEGAL_CHARACTERS=["?",'"',","," "];exports.ILLEGAL_CHARACTERS=ILLEGAL_CHARACTERS;var validateDetector=function validateDetector(detectorId,selectedDetector){if(!detectorId)return"Must select detector.";if(selectedDetector&&selectedDetector.features.length===0)return"Must choose detector which has features."};exports.validateDetector=validateDetector;var validateIndex=function validateIndex(options){if(!Array.isArray(options))return"Must specify an index.";if(!options.length)return"Must specify an index.";var illegalCharacters=ILLEGAL_CHARACTERS.join(" ");var pattern=options.map((function(_ref2){var label=_ref2.label;return label})).join("");if(!isIndexPatternQueryValid(pattern,ILLEGAL_CHARACTERS)){return"One of your inputs contains invalid characters or spaces. Please omit: ".concat(illegalCharacters)}};exports.validateIndex=validateIndex;function isIndexPatternQueryValid(pattern,illegalCharacters){if(!pattern||!pattern.length){return false}if(pattern==="."||pattern===".."){return false}return!illegalCharacters.some((function(char){return pattern.includes(char)}))}function validateExtractionQuery(value){try{JSON.parse(value)}catch(err){return"Invalid JSON."}}},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.makeId=exports.inputLimitText=exports.ignoreEscape=exports.backendErrorNotification=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _services=__webpack_require__(13);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var makeId=(0,_services.htmlIdGenerator)();exports.makeId=makeId;var ignoreEscape=function ignoreEscape(eventHandler){return function(event){if(!(event.keyCode===27)){eventHandler()}}};exports.ignoreEscape=ignoreEscape;var backendErrorNotification=function backendErrorNotification(notifications,actionName,objectName,errorMessage){notifications.toasts.addDanger({title:"Failed to ".concat(actionName," the ").concat(objectName),text:errorMessage,toastLifeTimeMs:2e4})};exports.backendErrorNotification=backendErrorNotification;var inputLimitText=function inputLimitText(){var currCount=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var singularKeyword=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var pluralKeyword=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";var styleProps=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var difference=limit-currCount;var remainingLimit="You can add up to ".concat(difference," ").concat(limit===1?"":"more"," ").concat(difference===1?singularKeyword:pluralKeyword,".");var reachedLimit="You have reached the limit of ".concat(limit," ").concat(limit===1?singularKeyword:pluralKeyword,".");return _react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs",style:styleProps},difference>0?remainingLimit:reachedLimit)};exports.inputLimitText=inputLimitText},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WHERE_FILTER_ALLOWED_TYPES=exports.WHERE_BOOLEAN_FILTERS=exports.UNITS_OF_TIME=exports.QUERY_TYPE_METRIC_ERROR=exports.QUERY_TYPE_GROUP_BY_ERROR=exports.POPOVER_STYLE=exports.OVER_TYPES=exports.OPERATORS_MAP=exports.NUMBER_TYPES=exports.GROUP_BY_ERROR=exports.Expressions=exports.EXPRESSION_STYLE=exports.AGGREGATION_TYPES=void 0;var POPOVER_STYLE={zIndex:"200"};exports.POPOVER_STYLE=POPOVER_STYLE;var EXPRESSION_STYLE={padding:"20px",whiteSpace:"nowrap"};exports.EXPRESSION_STYLE=EXPRESSION_STYLE;var Expressions={THRESHOLD:"THRESHOLD",WHEN:"WHEN",OF_FIELD:"OF_FIELD",OVER:"OVER",FOR_THE_LAST:"FOR_THE_LAST",WHERE:"WHERE",METRICS:"METRICS",GROUP_BY:"GROUP_BY"};exports.Expressions=Expressions;var NUMBER_TYPES=["long","integer","short","byte","double","float","half_float","scaled_float"];exports.NUMBER_TYPES=NUMBER_TYPES;var UNITS_OF_TIME=[{value:"m",text:"minute(s)"},{value:"h",text:"hour(s)"},{value:"d",text:"day(s)"}];exports.UNITS_OF_TIME=UNITS_OF_TIME;var WHERE_BOOLEAN_FILTERS=[{text:"Select value",value:""},{text:"True",value:true},{text:"False",value:false}];exports.WHERE_BOOLEAN_FILTERS=WHERE_BOOLEAN_FILTERS;var OPERATORS_MAP={IS:{text:"is",value:"is",dataTypes:["number","text","keyword","boolean"]},IS_NOT:{text:"is not",value:"is_not",dataTypes:["number","text","keyword","boolean"]},IS_NULL:{text:"is null",value:"is_null",dataTypes:["number","text","keyword","boolean"]},IS_NOT_NULL:{text:"is not null",value:"is_not_null",dataTypes:["number","text","keyword"]},IS_GREATER:{text:"is greater than",value:"is_greater",dataTypes:["number"]},IS_GREATER_EQUAL:{text:"is greater than equal",value:"is_greater_equal",dataTypes:["number"]},IS_LESS:{text:"is less than",value:"is_less",dataTypes:["number"]},IS_LESS_EQUAL:{text:"is less than equal",value:"is_less_equal",dataTypes:["number"]},STARTS_WITH:{text:"starts with",value:"starts_with",dataTypes:["text","keyword"]},ENDS_WITH:{text:"ends with",value:"ends_with",dataTypes:["text","keyword"]},CONTAINS:{text:"contains",value:"contains",dataTypes:["text","keyword"]},DOES_NOT_CONTAINS:{text:"does not contain",value:"does_not_contains",dataTypes:["text"]},IN_RANGE:{text:"is in range",value:"in_range",dataTypes:["number"]},NOT_IN_RANGE:{text:"is not in range",value:"not_in_range",dataTypes:["number"]}};exports.OPERATORS_MAP=OPERATORS_MAP;var OVER_TYPES=[{value:"all documents",text:"all documents"}];exports.OVER_TYPES=OVER_TYPES;var AGGREGATION_TYPES=[{value:"avg",text:"average()"},{value:"count",text:"count()"},{value:"sum",text:"sum()"},{value:"min",text:"min()"},{value:"max",text:"max()"}];exports.AGGREGATION_TYPES=AGGREGATION_TYPES;var GROUP_BY_ERROR="Must specify at least 1 group by expression.";exports.GROUP_BY_ERROR=GROUP_BY_ERROR;var QUERY_TYPE_GROUP_BY_ERROR="Can have a maximum of 1 group by selections.";exports.QUERY_TYPE_GROUP_BY_ERROR=QUERY_TYPE_GROUP_BY_ERROR;var QUERY_TYPE_METRIC_ERROR="Can have a maximum of 1 metric selections.";exports.QUERY_TYPE_METRIC_ERROR=QUERY_TYPE_METRIC_ERROR;var WHERE_FILTER_ALLOWED_TYPES=["number","text","keyword","boolean"];exports.WHERE_FILTER_ALLOWED_TYPES=WHERE_FILTER_ALLOWED_TYPES},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TIME_RANGE_TOOLTIP_TEXT=exports.METRIC_TOOLTIP_TEXT=exports.MATCH_ALL_QUERY=exports.GROUP_BY_TOOLTIP_TEXT=exports.FORMIK_INITIAL_WHERE_EXPRESSION_VALUES=exports.FORMIK_INITIAL_VALUES=exports.FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES=exports.FORMIK_INITIAL_AGG_VALUES=exports.FILTERS_TOOLTIP_TEXT=exports.DEFAULT_DOCUMENT_LEVEL_QUERY=exports.DEFAULT_COMPOSITE_AGG_SIZE=exports.BUCKET_COUNT=void 0;var _constants=__webpack_require__(23);var _constants2=__webpack_require__(15);var _constants3=__webpack_require__(72);var _findingsUtils=__webpack_require__(38);var BUCKET_COUNT=5;exports.BUCKET_COUNT=BUCKET_COUNT;var MATCH_ALL_QUERY=JSON.stringify({size:0,query:{match_all:{}}},null,4);exports.MATCH_ALL_QUERY=MATCH_ALL_QUERY;var FORMIK_INITIAL_WHERE_EXPRESSION_VALUES={fieldName:[{label:"",type:_constants.WHERE_FILTER_ALLOWED_TYPES[0]}],operator:_constants.OPERATORS_MAP.IS.value,fieldValue:"",fieldRangeStart:undefined,fieldRangeEnd:undefined};exports.FORMIK_INITIAL_WHERE_EXPRESSION_VALUES=FORMIK_INITIAL_WHERE_EXPRESSION_VALUES;var FORMIK_INITIAL_VALUES={name:"",disabled:false,frequency:"interval",timezone:[],daily:0,period:{interval:1,unit:"MINUTES"},weekly:{mon:false,tue:false,wed:false,thur:false,fri:false,sat:false,sun:false},monthly:{type:"day",day:1},cronExpression:"0 */1 * * *",monitor_type:_constants2.MONITOR_TYPE.QUERY_LEVEL,searchType:"graph",uri:{api_type:"",path:"",path_params:"",url:""},index:[],timeField:"",query:MATCH_ALL_QUERY,queries:[],description:"",aggregationType:"count",fieldName:[],aggregations:[],groupBy:[],groupByField:[{label:""}],overDocuments:"all documents",groupedOverTop:5,groupedOverFieldName:"bytes",bucketValue:1,bucketUnitOfTime:"h",filters:[],detectorId:""};exports.FORMIK_INITIAL_VALUES=FORMIK_INITIAL_VALUES;var FORMIK_INITIAL_AGG_VALUES={aggregationType:"count",fieldName:""};exports.FORMIK_INITIAL_AGG_VALUES=FORMIK_INITIAL_AGG_VALUES;var FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES={id:undefined,queryName:"",field:"",operator:_constants3.SUPPORTED_DOC_LEVEL_QUERY_OPERATORS[0],query:"",tags:[]};exports.FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES=FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES;var DEFAULT_DOCUMENT_LEVEL_QUERY=JSON.stringify({description:"DESCRIPTION_TEXT",queries:[{name:"QUERY_NAME",query:{match_all:{}},tags:["TAG_TEXT"]}]},null,4);exports.DEFAULT_DOCUMENT_LEVEL_QUERY=DEFAULT_DOCUMENT_LEVEL_QUERY;var DEFAULT_COMPOSITE_AGG_SIZE=50;exports.DEFAULT_COMPOSITE_AGG_SIZE=DEFAULT_COMPOSITE_AGG_SIZE;var METRIC_TOOLTIP_TEXT="Extracted statistics such as simple calculations of data.";exports.METRIC_TOOLTIP_TEXT=METRIC_TOOLTIP_TEXT;var TIME_RANGE_TOOLTIP_TEXT="The time frame of data the plugin should monitor.";exports.TIME_RANGE_TOOLTIP_TEXT=TIME_RANGE_TOOLTIP_TEXT;var FILTERS_TOOLTIP_TEXT="Use a filter to retrieve a subset of the original data source.";exports.FILTERS_TOOLTIP_TEXT=FILTERS_TOOLTIP_TEXT;var GROUP_BY_TOOLTIP_TEXT="Specify a field whose every unique value can trigger alerts.";exports.GROUP_BY_TOOLTIP_TEXT=GROUP_BY_TOOLTIP_TEXT},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TRIGGER_TYPE=exports.NOT_EMPTY_RESULT=exports.HITS_TOTAL_RESULTS_PATH=exports.FORMIK_INITIAL_TRIGGER_VALUES=exports.FORMIK_INITIAL_TRIGGER_CONDITION_VALUES=exports.FORMIK_INITIAL_DOC_LEVEL_SCRIPT=exports.FORMIK_INITIAL_BUCKET_SELECTOR_VALUES=exports.ANOMALY_GRADE_RESULT_PATH=exports.ANOMALY_CONFIDENCE_RESULT_PATH=exports.AGGREGATION_RESULTS_PATH=void 0;var TRIGGER_TYPE={AD:"anomaly_detector_trigger",BUCKET_LEVEL:"bucket_level_trigger",ALERT_TRIGGER:"alerting_trigger",QUERY_LEVEL:"query_level_trigger",DOC_LEVEL:"document_level_trigger"};exports.TRIGGER_TYPE=TRIGGER_TYPE;var FORMIK_INITIAL_BUCKET_SELECTOR_VALUES={buckets_path:{"":""},parent_bucket_path:"composite_agg",script:{source:"params."}};exports.FORMIK_INITIAL_BUCKET_SELECTOR_VALUES=FORMIK_INITIAL_BUCKET_SELECTOR_VALUES;var FORMIK_INITIAL_TRIGGER_CONDITION_VALUES={thresholdValue:1e4,thresholdEnum:"ABOVE",anomalyDetector:{triggerType:TRIGGER_TYPE.AD,anomalyGradeThresholdValue:.7,anomalyGradeThresholdEnum:"ABOVE",anomalyConfidenceThresholdValue:.7,anomalyConfidenceThresholdEnum:"ABOVE"},script:{lang:"painless",source:"ctx.results[0].hits.total.value > 0"},buckets_path:{},parent_bucket_path:"composite_agg",gap_policy:"",query:undefined,queryMetric:undefined,andOrCondition:undefined};exports.FORMIK_INITIAL_TRIGGER_CONDITION_VALUES=FORMIK_INITIAL_TRIGGER_CONDITION_VALUES;var FORMIK_INITIAL_TRIGGER_VALUES={name:"",severity:"1",minTimeBetweenExecutions:null,rollingWindowSize:null,script:{lang:"painless",source:"ctx.results[0].hits.total.value > 0"},bucketSelector:JSON.stringify(FORMIK_INITIAL_BUCKET_SELECTOR_VALUES,null,4),triggerConditions:[],thresholdValue:1e4,thresholdEnum:"ABOVE",anomalyDetector:{triggerType:TRIGGER_TYPE.AD,anomalyGradeThresholdValue:.7,anomalyGradeThresholdEnum:"ABOVE",anomalyConfidenceThresholdValue:.7,anomalyConfidenceThresholdEnum:"ABOVE"},filters:[],actions:undefined};exports.FORMIK_INITIAL_TRIGGER_VALUES=FORMIK_INITIAL_TRIGGER_VALUES;var FORMIK_INITIAL_DOC_LEVEL_SCRIPT={lang:FORMIK_INITIAL_TRIGGER_VALUES.script.lang,source:"(query[name=<queryName>] || query[name=<queryName>]) && query[tag=<queryTag>]"};exports.FORMIK_INITIAL_DOC_LEVEL_SCRIPT=FORMIK_INITIAL_DOC_LEVEL_SCRIPT;var HITS_TOTAL_RESULTS_PATH="ctx.results[0].hits.total.value";exports.HITS_TOTAL_RESULTS_PATH=HITS_TOTAL_RESULTS_PATH;var AGGREGATION_RESULTS_PATH="ctx.results[0].aggregations.metric.value";exports.AGGREGATION_RESULTS_PATH=AGGREGATION_RESULTS_PATH;var ANOMALY_GRADE_RESULT_PATH="ctx.results[0].aggregations.max_anomaly_grade.value";exports.ANOMALY_GRADE_RESULT_PATH=ANOMALY_GRADE_RESULT_PATH;var ANOMALY_CONFIDENCE_RESULT_PATH="ctx.results[0].hits.hits[0]._source.confidence";exports.ANOMALY_CONFIDENCE_RESULT_PATH=ANOMALY_CONFIDENCE_RESULT_PATH;var NOT_EMPTY_RESULT="ctx.results != null && ctx.results.length > 0 && ctx.results[0].aggregations != null && ctx.results[0].aggregations.max_anomaly_grade != null && ctx.results[0].hits.total.value > 0 && ctx.results[0].hits.hits[0]._source != null && ctx.results[0].hits.hits[0]._source.confidence != null";exports.NOT_EMPTY_RESULT=NOT_EMPTY_RESULT},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _ContentPanel=_interopRequireDefault(__webpack_require__(220));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_ContentPanel.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.THRESHOLD_ENUM_OPTIONS=exports.SEVERITY_OPTIONS=exports.MANAGE_CHANNELS_PATH=exports.FORMIK_INITIAL_ACTION_VALUES=exports.DEFAULT_TRIGGER_NAME=exports.DEFAULT_MESSAGE_SOURCE=exports.DEFAULT_AND_OR_CONDITION=exports.DEFAULT_ACTION_TYPE=exports.CHANNEL_TYPES=exports.AND_OR_CONDITION_OPTIONS=void 0;var DEFAULT_MESSAGE_SOURCE={BUCKET_LEVEL_MONITOR:"\n  Monitor {{ctx.monitor.name}} just entered alert status. Please investigate the issue.\n  - Trigger: {{ctx.trigger.name}}\n  - Severity: {{ctx.trigger.severity}}\n  - Period start: {{ctx.periodStart}}\n  - Period end: {{ctx.periodEnd}}\n\n  - Deduped Alerts:\n  {{#ctx.dedupedAlerts}}\n    * {{id}} : {{bucket_keys}}\n  {{/ctx.dedupedAlerts}}\n\n  - New Alerts:\n  {{#ctx.newAlerts}}\n    * {{id}} : {{bucket_keys}}\n  {{/ctx.newAlerts}}\n\n  - Completed Alerts:\n  {{#ctx.completedAlerts}}\n    * {{id}} : {{bucket_keys}}\n  {{/ctx.completedAlerts}}\n  ".trim(),QUERY_LEVEL_MONITOR:"\n  Monitor {{ctx.monitor.name}} just entered alert status. Please investigate the issue.\n  - Trigger: {{ctx.trigger.name}}\n  - Severity: {{ctx.trigger.severity}}\n  - Period start: {{ctx.periodStart}}\n  - Period end: {{ctx.periodEnd}}\n  ".trim()};exports.DEFAULT_MESSAGE_SOURCE=DEFAULT_MESSAGE_SOURCE;var FORMIK_INITIAL_ACTION_VALUES={name:"",destination_id:"",subject_template:{lang:"mustache",source:""},message_template:{lang:"mustache",source:DEFAULT_MESSAGE_SOURCE.QUERY_LEVEL_MONITOR},throttle_enabled:false,throttle:{value:10,unit:"MINUTES"}};exports.FORMIK_INITIAL_ACTION_VALUES=FORMIK_INITIAL_ACTION_VALUES;var SEVERITY_OPTIONS=[{value:"1",text:"1 (Highest)"},{value:"2",text:"2 (High)"},{value:"3",text:"3 (Medium)"},{value:"4",text:"4 (Low)"},{value:"5",text:"5 (Lowest)"}];exports.SEVERITY_OPTIONS=SEVERITY_OPTIONS;var THRESHOLD_ENUM_OPTIONS=[{value:"ABOVE",text:"IS ABOVE"},{value:"BELOW",text:"IS BELOW"},{value:"EXACTLY",text:"IS EXACTLY"}];exports.THRESHOLD_ENUM_OPTIONS=THRESHOLD_ENUM_OPTIONS;var DEFAULT_AND_OR_CONDITION="AND";exports.DEFAULT_AND_OR_CONDITION=DEFAULT_AND_OR_CONDITION;var AND_OR_CONDITION_OPTIONS=[{value:"AND",text:"AND"},{value:"OR",text:"OR"}];exports.AND_OR_CONDITION_OPTIONS=AND_OR_CONDITION_OPTIONS;var DEFAULT_TRIGGER_NAME="New trigger";exports.DEFAULT_TRIGGER_NAME=DEFAULT_TRIGGER_NAME;var DEFAULT_ACTION_TYPE="slack";exports.DEFAULT_ACTION_TYPE=DEFAULT_ACTION_TYPE;var MANAGE_CHANNELS_PATH="/app/notifications-dashboards#/channels";exports.MANAGE_CHANNELS_PATH=MANAGE_CHANNELS_PATH;var CHANNEL_TYPES=["slack","email","chime","webhook","ses","sns"];exports.CHANNEL_TYPES=CHANNEL_TYPES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NOTIFICATIONS_LEARN_MORE_HREF=exports.DESTINATION_TYPE=exports.DESTINATION_OPTIONS=exports.ALLOW_LIST_SETTING_PATH=void 0;var DESTINATION_TYPE={CHIME:"chime",SLACK:"slack",CUSTOM_HOOK:"custom_webhook",EMAIL:"email"};exports.DESTINATION_TYPE=DESTINATION_TYPE;var DESTINATION_OPTIONS=[{value:DESTINATION_TYPE.CHIME,text:"Amazon Chime"},{value:DESTINATION_TYPE.SLACK,text:"Slack"},{value:DESTINATION_TYPE.CUSTOM_HOOK,text:"Custom webhook"},{value:DESTINATION_TYPE.EMAIL,text:"Email"}];exports.DESTINATION_OPTIONS=DESTINATION_OPTIONS;var ALLOW_LIST_SETTING_PATH="plugins.alerting.destination.allow_list";exports.ALLOW_LIST_SETTING_PATH=ALLOW_LIST_SETTING_PATH;var NOTIFICATIONS_LEARN_MORE_HREF="https://opensearch.org/docs/monitoring-plugins/alerting/monitors/#questions-about-destinations";exports.NOTIFICATIONS_LEARN_MORE_HREF=NOTIFICATIONS_LEARN_MORE_HREF},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(342));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikInputWrapper.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikFormRow=_interopRequireDefault(__webpack_require__(343));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikFormRow.default;exports.default=_default;module.exports=exports.default},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAlertsFindingColumn=exports.findingsColumnTypes=exports.TABLE_TAB_IDS=exports.ALERTS_FINDING_COLUMN=void 0;exports.getFindings=getFindings;exports.parseFindingsForPreview=exports.getFindingsForMonitor=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _tableUtils=__webpack_require__(55);var _FindingFlyout=_interopRequireDefault(__webpack_require__(226));var _FindingsPopover=_interopRequireDefault(__webpack_require__(227));var _queryString=_interopRequireDefault(__webpack_require__(32));var _helpers=__webpack_require__(22);var _FindingsDashboard=__webpack_require__(71);var _constants=__webpack_require__(23);var _helpers2=__webpack_require__(91);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TABLE_TAB_IDS={ALERTS:{id:"alerts",name:"Alerts"},FINDINGS:{id:"findings",name:"Document findings"}};exports.TABLE_TAB_IDS=TABLE_TAB_IDS;var ALERTS_FINDING_COLUMN={field:"related_doc_ids",name:"Document",sortable:true,truncateText:true,render:function render(related_doc_ids,alert){if(_lodash.default.isEmpty(related_doc_ids))console.log("Alerts index contains an entry with 0 related document IDs:",alert);return related_doc_ids.length>1?_react.default.createElement(_FindingsPopover.default,{docIds:related_doc_ids}):related_doc_ids[0]}};exports.ALERTS_FINDING_COLUMN=ALERTS_FINDING_COLUMN;var getAlertsFindingColumn=function getAlertsFindingColumn(httpClient,history,location,notifications,flyoutIsOpen,openFlyout,closeFlyout){return{field:"related_doc_ids",name:"Document",sortable:true,truncateText:true,render:function render(related_doc_ids,alert){if(_lodash.default.isEmpty(related_doc_ids))console.log("Alerts index contains an entry with 0 related document IDs:",alert);return _react.default.createElement(_FindingFlyout.default,{alert:alert,httpClient:httpClient,history:history,location:location,notifications:notifications,dashboardFlyoutIsOpen:flyoutIsOpen,openFlyout:openFlyout,closeFlyout:closeFlyout})}}};exports.getAlertsFindingColumn=getAlertsFindingColumn;var findingsColumnTypes=function findingsColumnTypes(){var isAlertsFlyout=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return[{field:"document_list",name:"Document",sortable:true,truncateText:true,render:function render(document_list,finding){return _lodash.default.isEmpty(document_list)?finding.related_doc_id:_react.default.createElement(_FindingFlyout.default,{isAlertsFlyout:isAlertsFlyout,finding:finding,document_list:document_list})}},{field:"queries",name:"Query",sortable:true,truncateText:false,render:function render(queries,finding){if(_lodash.default.isEmpty(queries))console.log("Findings index contains an entry with 0 queries:",finding);return queries.length>1?_react.default.createElement(_FindingsPopover.default,{queries:queries}):"".concat(queries[0].name," (").concat(queries[0].query,")")}},{field:"timestamp",name:"Time found",sortable:true,truncateText:false,render:_tableUtils.renderTime,dataType:"date"}]};exports.findingsColumnTypes=findingsColumnTypes;var getFindingsForMonitor=function getFindingsForMonitor(){var findings=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var monitorId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var monitorFindings=[];findings.map((function(finding){var findingId=_lodash.default.keys(finding)[0];var findingValues=_lodash.default.get(finding,"".concat(findingId,".finding"));var findingMonitorId=findingValues.monitor_id;if(!_lodash.default.isEmpty(findingValues)&&findingMonitorId===monitorId)monitorFindings.push(_objectSpread(_objectSpread({},findingValues),{},{document_list:finding[findingId].document_list}))}));return{findings:monitorFindings,totalFindings:monitorFindings.length}};exports.getFindingsForMonitor=getFindingsForMonitor;var parseFindingsForPreview=function parseFindingsForPreview(){var previewResponse=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var queries=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var findings=[];if((0,_helpers2.validDocLevelGraphQueries)(queries)){var queryNames=queries.map((function(query){return query.queryName}));var timestamp=Date.now();var docIdsToQueries={};_lodash.default.keys(previewResponse).forEach((function(queryName){if(_lodash.default.includes(queryNames,queryName)){_lodash.default.get(previewResponse,queryName,[]).forEach((function(id){if(_lodash.default.includes(_lodash.default.keys(docIdsToQueries),id)){var query=_lodash.default.find(queries,{queryName:queryName});docIdsToQueries[id].push({name:queryName,query:query.query})}else{var _query=_lodash.default.find(queries,{queryName:queryName});var operator=_constants.OPERATORS_MAP[_lodash.default.toUpper(_query.operator)].text;var querySource="".concat(_query.field," ").concat(operator," ").concat(_query.query);docIdsToQueries[id]=[{name:queryName,query:querySource}]}}))}}));_lodash.default.keys(docIdsToQueries).forEach((function(docId){var finding={index:index,related_doc_id:docId,queries:docIdsToQueries[docId],timestamp:timestamp};findings.push(finding)}))}return findings};exports.parseFindingsForPreview=parseFindingsForPreview;function getFindings(_x){return _getFindings.apply(this,arguments)}function _getFindings(){_getFindings=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var id,from,size,search,sortField,sortDirection,httpClient,history,location,monitorId,notifications,params,queryParamsString,resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=_ref.id,from=_ref.from,size=_ref.size,search=_ref.search,sortField=_ref.sortField,sortDirection=_ref.sortDirection,httpClient=_ref.httpClient,history=_ref.history,location=_ref.location,monitorId=_ref.monitorId,notifications=_ref.notifications;params={id:id,from:from,size:size,search:search,sortDirection:sortDirection,sortField:sortField};queryParamsString=_queryString.default.stringify(params);location.search;history.replace(_objectSpread(_objectSpread({},location),{},{search:queryParamsString}));params["size"]=Math.max(size,_FindingsDashboard.MAX_FINDINGS_COUNT);_context.next=8;return httpClient.get("../api/alerting/findings/_search",{query:params});case 8:resp=_context.sent;if(!resp.ok){_context.next=13;break}return _context.abrupt("return",getFindingsForMonitor(resp.findings,monitorId));case 13:console.log("Error getting findings:",resp);(0,_helpers.backendErrorNotification)(notifications,"get","findings",resp.err);case 15:case"end":return _context.stop()}}}),_callee)})));return _getFindings.apply(this,arguments)}},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_QUERY_PARAMS=exports.DEFAULT_PAGE_SIZE_OPTIONS=void 0;var DEFAULT_PAGE_SIZE_OPTIONS=[5,10,20,50];exports.DEFAULT_PAGE_SIZE_OPTIONS=DEFAULT_PAGE_SIZE_OPTIONS;var DEFAULT_QUERY_PARAMS={from:0,size:20,search:"",sortField:"name",sortDirection:"desc",state:"all"};exports.DEFAULT_QUERY_PARAMS=DEFAULT_QUERY_PARAMS},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.STATE=exports.METHOD_TYPE=exports.FORMIK_INITIAL_SENDER_VALUES=exports.FORMIK_INITIAL_EMAIL_GROUP_VALUES=void 0;var METHOD_TYPE={NONE:"none",SSL:"ssl",TLS:"starttls"};exports.METHOD_TYPE=METHOD_TYPE;var STATE={NO_OP:"no_op",UPDATED:"updated",CREATED:"created"};exports.STATE=STATE;var FORMIK_INITIAL_SENDER_VALUES={name:"",email:"",host:"",port:"",method:METHOD_TYPE.NONE,state:STATE.CREATED};exports.FORMIK_INITIAL_SENDER_VALUES=FORMIK_INITIAL_SENDER_VALUES;var FORMIK_INITIAL_EMAIL_GROUP_VALUES={name:"",emails:[],state:STATE.CREATED};exports.FORMIK_INITIAL_EMAIL_GROUP_VALUES=FORMIK_INITIAL_EMAIL_GROUP_VALUES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAllowList=getAllowList;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(31);var _helpers=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getAllowList(_x){return _getAllowList.apply(this,arguments)}function _getAllowList(){_getAllowList=_asyncToGenerator(regeneratorRuntime.mark((function _callee(httpClient){var response,_response$resp,defaults,transient,persistent,defaultList,transientList,persistentList;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return httpClient.get("../api/alerting/_settings");case 3:response=_context.sent;if(!response.ok){_context.next=12;break}_response$resp=response.resp,defaults=_response$resp.defaults,transient=_response$resp.transient,persistent=_response$resp.persistent;defaultList=_lodash.default.get(defaults,"".concat(_constants.ALLOW_LIST_SETTING_PATH),[]);transientList=_lodash.default.get(transient,"".concat(_constants.ALLOW_LIST_SETTING_PATH),null);persistentList=_lodash.default.get(persistent,"".concat(_constants.ALLOW_LIST_SETTING_PATH),null);return _context.abrupt("return",persistentList||transientList||defaultList);case 12:console.log("Unable to get destination allow_list",response.resp);return _context.abrupt("return",[]);case 14:_context.next=20;break;case 16:_context.prev=16;_context.t0=_context["catch"](0);console.log("Unable to get destination allow_list",_context.t0);return _context.abrupt("return",[]);case 20:case"end":return _context.stop()}}}),_callee,null,[[0,16]])})));return _getAllowList.apply(this,arguments)}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getGroupByExpressionAllowedTypes=getGroupByExpressionAllowedTypes;exports.getMetricExpressionAllowedTypes=getMetricExpressionAllowedTypes;exports.getOfExpressionAllowedTypes=getOfExpressionAllowedTypes;exports.selectOptionValueToText=selectOptionValueToText;exports.validateAggregationsDuplicates=void 0;function selectOptionValueToText(optionValue,options){return options.find((function(opt){return opt.value===optionValue})).text}function getOfExpressionAllowedTypes(values){var types=["number"];if(["min","max"].includes(values.aggregationType))types.push("date");return types}function getMetricExpressionAllowedTypes(values){var types=["number"];if(values.aggregations.some((function(e){return["min","max","count"].includes(e.aggregationType)})))types.push("date");if(values.aggregations.some((function(e){return["count"].includes(e.aggregationType)})))types.push("keyword");return types}function getGroupByExpressionAllowedTypes(){return["keyword"]}var validateAggregationsDuplicates=function validateAggregationsDuplicates(aggregations){var duplicates=0;aggregations.forEach((function(e1,index){aggregations.slice(index+1).forEach((function(e2){if(e1.aggregationType===e2.aggregationType&&e1.fieldName===e2.fieldName){duplicates++}}))}));return duplicates>0};exports.validateAggregationsDuplicates=validateAggregationsDuplicates},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.REST_API_REFERENCE=exports.PATH_PARAMETER_ILLEGAL_CHARACTER_TEXT=exports.PATH_PARAMETERS_REQUIRED_TEXT=exports.NO_PATH_PARAMS_PLACEHOLDER_TEXT=exports.ILLEGAL_PATH_PARAMETER_CHARACTERS=exports.GET_API_TYPE_DEBUG_TEXT=exports.EMPTY_PATH_PARAMS_TEXT=exports.DEFAULT_CLUSTER_METRICS_SCRIPT=exports.API_TYPES=exports.API_PATH_REQUIRED_PLACEHOLDER_TEXT=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var API_PATH_REQUIRED_PLACEHOLDER_TEXT="Select an API.";exports.API_PATH_REQUIRED_PLACEHOLDER_TEXT=API_PATH_REQUIRED_PLACEHOLDER_TEXT;var EMPTY_PATH_PARAMS_TEXT="Enter remaining path components and path parameters";exports.EMPTY_PATH_PARAMS_TEXT=EMPTY_PATH_PARAMS_TEXT;var GET_API_TYPE_DEBUG_TEXT="Cannot determine ApiType in clusterMetricsMonitorHelpers::getSelectedApiType.";exports.GET_API_TYPE_DEBUG_TEXT=GET_API_TYPE_DEBUG_TEXT;var ILLEGAL_PATH_PARAMETER_CHARACTERS=[":",'"',"+","\\","|","?","#",">","<"," "];exports.ILLEGAL_PATH_PARAMETER_CHARACTERS=ILLEGAL_PATH_PARAMETER_CHARACTERS;var NO_PATH_PARAMS_PLACEHOLDER_TEXT="No path parameter options";exports.NO_PATH_PARAMS_PLACEHOLDER_TEXT=NO_PATH_PARAMS_PLACEHOLDER_TEXT;var PATH_PARAMETER_ILLEGAL_CHARACTER_TEXT="The provided path parameters contain invalid characters or spaces. Please omit: ".concat(ILLEGAL_PATH_PARAMETER_CHARACTERS.join(" "));exports.PATH_PARAMETER_ILLEGAL_CHARACTER_TEXT=PATH_PARAMETER_ILLEGAL_CHARACTER_TEXT;var PATH_PARAMETERS_REQUIRED_TEXT="Path parameters are required for this API.";exports.PATH_PARAMETERS_REQUIRED_TEXT=PATH_PARAMETERS_REQUIRED_TEXT;var REST_API_REFERENCE="https://opensearch.org/docs/latest/opensearch/rest-api/index/";exports.REST_API_REFERENCE=REST_API_REFERENCE;var DEFAULT_CLUSTER_METRICS_SCRIPT={lang:"painless",source:"ctx.results[0] != null"};exports.DEFAULT_CLUSTER_METRICS_SCRIPT=DEFAULT_CLUSTER_METRICS_SCRIPT;var API_TYPES={CLUSTER_HEALTH:{type:"CLUSTER_HEALTH",documentation:"https://opensearch.org/docs/latest/opensearch/rest-api/cluster-health/",exampleText:"indexAlias1,indexAlias2...",label:"Cluster health",paths:{withPathParams:"_cluster/health/",withoutPathParams:"_cluster/health"},get prependText(){return this.paths.withPathParams||this.paths.withoutPathParams},appendText:"",defaultCondition:_objectSpread(_objectSpread({},DEFAULT_CLUSTER_METRICS_SCRIPT),{},{source:'ctx.results[0].status != "green"'})},CLUSTER_STATS:{type:"CLUSTER_STATS",documentation:"https://opensearch.org/docs/latest/opensearch/rest-api/cluster-stats/",exampleText:"nodeFilter1,nodeFilter2...",label:"Cluster stats",paths:{withPathParams:"_cluster/stats/nodes/",withoutPathParams:"_cluster/stats"},get prependText(){return this.paths.withPathParams||this.paths.withoutPathParams},appendText:"",defaultCondition:_objectSpread(_objectSpread({},DEFAULT_CLUSTER_METRICS_SCRIPT),{},{source:"ctx.results[0].indices.count <= 0"})},CLUSTER_SETTINGS:{type:"CLUSTER_SETTINGS",documentation:"https://opensearch.org/docs/latest/opensearch/rest-api/cluster-settings/",exampleText:undefined,label:"Cluster settings",paths:{withPathParams:undefined,withoutPathParams:"_cluster/settings"},get prependText(){return this.paths.withPathParams||this.paths.withoutPathParams},appendText:"",defaultCondition:_objectSpread(_objectSpread({},DEFAULT_CLUSTER_METRICS_SCRIPT),{},{source:"ctx.results[0].transient != null"})},NODES_STATS:{type:"NODES_STATS",documentation:"https://opensearch.org/docs/latest/opensearch/popular-api/#get-node-statistics",exampleText:undefined,label:"Nodes stats",paths:{withPathParams:undefined,withoutPathParams:"_nodes/stats"},get prependText(){return this.paths.withPathParams||this.paths.withoutPathParams},appendText:"",defaultCondition:_objectSpread(_objectSpread({},DEFAULT_CLUSTER_METRICS_SCRIPT),{},{source:"ctx.results[0].nodes.NODE_ID.jvm.mem.heap_used_percent > 60"})},CAT_PENDING_TASKS:{type:"CAT_PENDING_TASKS",documentation:"https://opensearch.org/docs/latest/opensearch/rest-api/cat/cat-pending-tasks/",exampleText:undefined,label:"List pending tasks",paths:{withPathParams:undefined,withoutPathParams:"_cat/pending_tasks"},get prependText(){return this.paths.withPathParams||this.paths.withoutPathParams},appendText:"",defaultCondition:_objectSpread(_objectSpread({},DEFAULT_CLUSTER_METRICS_SCRIPT),{},{source:"ctx.results[0].tasks.size() >= 0"})},CAT_RECOVERY:{type:"CAT_RECOVERY",documentation:"https://opensearch.org/docs/latest/opensearch/rest-api/cat/cat-recovery/",exampleText:"index1,index2...",label:"Recovery",paths:{withPathParams:"_cat/recovery/",withoutPathParams:"_cat/recovery"},get prependText(){return this.paths.withPathParams||this.paths.withoutPathParams},appendText:"",defaultCondition:_objectSpread(_objectSpread({},DEFAULT_CLUSTER_METRICS_SCRIPT),{},{source:"ctx.results[0].INDEX_NAME.shards.length <= 0"})},CAT_SNAPSHOTS:{type:"CAT_SNAPSHOTS",documentation:"https://opensearch.org/docs/latest/opensearch/rest-api/cat/cat-snapshots/",exampleText:"repositoryName",label:"List snapshots",paths:{withPathParams:"_cat/snapshots/",withoutPathParams:undefined},get prependText(){return this.paths.withPathParams||this.paths.withoutPathParams},appendText:"",defaultCondition:_objectSpread(_objectSpread({},DEFAULT_CLUSTER_METRICS_SCRIPT),{},{source:'ctx.results[0].SNAPSHOT_ID.status == "FAILED"'})},CAT_TASKS:{type:"CAT_TASKS",documentation:"https://opensearch.org/docs/latest/opensearch/rest-api/cat/cat-tasks/",exampleText:undefined,label:"List tasks",paths:{withPathParams:undefined,withoutPathParams:"_cat/tasks"},get prependText(){return this.paths.withPathParams||this.paths.withoutPathParams},appendText:"",defaultCondition:_objectSpread(_objectSpread({},DEFAULT_CLUSTER_METRICS_SCRIPT),{},{source:"ctx.results[0].tasks.length > 0"})}};exports.API_TYPES=API_TYPES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildClusterMetricsRequest=buildClusterMetricsRequest;exports.validateApiPathParameter=exports.pathParamsContainIllegalCharacters=exports.isInvalidApiPathParameter=exports.getExamplePathParams=exports.getApiTypesRequiringPathParams=exports.getApiType=exports.getApiPath=exports.canExecuteClusterMetricsMonitor=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));var _formikToMonitor=__webpack_require__(66);var _clusterMetricsMonitorConstants=__webpack_require__(52);var _constants=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildClusterMetricsRequest(values){return _lodash.default.get((0,_formikToMonitor.formikToClusterMetricsInput)(values),"uri")}var canExecuteClusterMetricsMonitor=function canExecuteClusterMetricsMonitor(){var uri=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _uri$api_type=uri.api_type,api_type=_uri$api_type===void 0?_constants.FORMIK_INITIAL_VALUES.uri.api_type:_uri$api_type,_uri$path_params=uri.path_params,path_params=_uri$path_params===void 0?_constants.FORMIK_INITIAL_VALUES.uri.path_params:_uri$path_params;if(_lodash.default.isEmpty(api_type))return false;var requiresPathParams=_lodash.default.isEmpty(_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(api_type,".paths.withoutPathParams")));var hasPathParams=!_lodash.default.isEmpty(path_params);if(pathParamsContainIllegalCharacters(path_params))return false;return requiresPathParams?hasPathParams:true};exports.canExecuteClusterMetricsMonitor=canExecuteClusterMetricsMonitor;var pathParamsContainIllegalCharacters=function pathParamsContainIllegalCharacters(pathParams){if(_lodash.default.isEmpty(pathParams))return false;var foundIllegalCharacters=_clusterMetricsMonitorConstants.ILLEGAL_PATH_PARAMETER_CHARACTERS.find((function(illegalCharacter){return _lodash.default.includes(pathParams,illegalCharacter)}));return!_lodash.default.isEmpty(foundIllegalCharacters)};exports.pathParamsContainIllegalCharacters=pathParamsContainIllegalCharacters;var getApiPath=function getApiPath(){var hasPathParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var apiType=arguments.length>1?arguments[1]:undefined;var path=hasPathParams?_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".paths.withPathParams"),_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".paths.withoutPathParams"))):_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".paths.withoutPathParams"));return path||_constants.FORMIK_INITIAL_VALUES.uri.path};exports.getApiPath=getApiPath;var getApiTypesRequiringPathParams=function getApiTypesRequiringPathParams(){var apiList=[];_lodash.default.keys(_clusterMetricsMonitorConstants.API_TYPES).forEach((function(api){var withoutPathParams=_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(api,".paths.withoutPathParams"),"");if(_lodash.default.isEmpty(withoutPathParams))apiList.push({value:_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(api,".type")),label:_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(api,".label"))})}));return apiList};exports.getApiTypesRequiringPathParams=getApiTypesRequiringPathParams;var getExamplePathParams=function getExamplePathParams(apiType){if(_lodash.default.isEmpty(apiType))return _clusterMetricsMonitorConstants.NO_PATH_PARAMS_PLACEHOLDER_TEXT;var exampleText=_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".exampleText"),"");_lodash.default.isEmpty(exampleText)?exampleText=_clusterMetricsMonitorConstants.NO_PATH_PARAMS_PLACEHOLDER_TEXT:exampleText="e.g., ".concat(exampleText);return exampleText};exports.getExamplePathParams=getExamplePathParams;var getApiType=function getApiType(uri){var apiType="";var path=_lodash.default.get(uri,"path");if(_lodash.default.isEmpty(path))return apiType;_lodash.default.keys(_clusterMetricsMonitorConstants.API_TYPES).forEach((function(apiTypeKey){var withPathParams=_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiTypeKey,".paths.withPathParams"));var withoutPathParams=_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiTypeKey,".paths.withoutPathParams"));if(path===withPathParams||path===withoutPathParams)apiType=apiTypeKey}));if(_lodash.default.isEmpty(apiType))console.debug(_clusterMetricsMonitorConstants.GET_API_TYPE_DEBUG_TEXT);return apiType};exports.getApiType=getApiType;var isInvalidApiPathParameter=function isInvalidApiPathParameter(field,hidePathParams,pathParams,requirePathParams){if(hidePathParams)return false;var pathParamsTouched=_lodash.default.get(field,"touched.uri.path_params",false);if(pathParamsTouched){if(requirePathParams&&_lodash.default.isEmpty(pathParams))return true;return pathParamsContainIllegalCharacters(pathParams)}else return pathParamsTouched};exports.isInvalidApiPathParameter=isInvalidApiPathParameter;var validateApiPathParameter=function validateApiPathParameter(field,hidePathParams,pathParams,requirePathParams){if(hidePathParams)return _clusterMetricsMonitorConstants.NO_PATH_PARAMS_PLACEHOLDER_TEXT;var pathParamsTouched=_lodash.default.get(field,"touched.uri.path_params",false);if(requirePathParams&&pathParamsTouched&&_lodash.default.isEmpty(pathParams))return _clusterMetricsMonitorConstants.PATH_PARAMETERS_REQUIRED_TEXT;if(isInvalidApiPathParameter(field,hidePathParams,pathParams,requirePathParams))return _clusterMetricsMonitorConstants.PATH_PARAMETER_ILLEGAL_CHARACTER_TEXT};exports.validateApiPathParameter=validateApiPathParameter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TIME_SERIES_ALERT_STATE=exports.MIN_POI_Y_SCALE=exports.MIN_HIGHLIGHT_WINDOW_DURATION=exports.MAX_DOC_COUNT_FOR_ALERTS=exports.MAX_DAYS_ALLOWED_IN_RANGE=exports.EMPTY_ALERT_COUNT=exports.DEFAULT_POI_TIME_WINDOW_DAYS=exports.ALERT_TIMELINE_COLORS_MAP=void 0;var _ALERT_TIMELINE_COLOR,_EMPTY_ALERT_COUNT;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TIME_SERIES_ALERT_STATE=Object.freeze({NO_ALERTS:"NO_ALERTS",TRIGGERED:"TRIGGERED",ACKNOWLEDGED:"ACKNOWLEDGED",ERROR:"ERROR"});exports.TIME_SERIES_ALERT_STATE=TIME_SERIES_ALERT_STATE;var ALERT_TIMELINE_COLORS_MAP=(_ALERT_TIMELINE_COLOR={},_defineProperty(_ALERT_TIMELINE_COLOR,TIME_SERIES_ALERT_STATE.NO_ALERTS,"#6AAF35"),_defineProperty(_ALERT_TIMELINE_COLOR,TIME_SERIES_ALERT_STATE.TRIGGERED,"#D0021B"),_defineProperty(_ALERT_TIMELINE_COLOR,TIME_SERIES_ALERT_STATE.ACKNOWLEDGED,"pink"),_defineProperty(_ALERT_TIMELINE_COLOR,TIME_SERIES_ALERT_STATE.ERROR,"lightgrey"),_ALERT_TIMELINE_COLOR);exports.ALERT_TIMELINE_COLORS_MAP=ALERT_TIMELINE_COLORS_MAP;var MAX_DAYS_ALLOWED_IN_RANGE=30;exports.MAX_DAYS_ALLOWED_IN_RANGE=MAX_DAYS_ALLOWED_IN_RANGE;var DEFAULT_POI_TIME_WINDOW_DAYS=2;exports.DEFAULT_POI_TIME_WINDOW_DAYS=DEFAULT_POI_TIME_WINDOW_DAYS;var MAX_DOC_COUNT_FOR_ALERTS=800;exports.MAX_DOC_COUNT_FOR_ALERTS=MAX_DOC_COUNT_FOR_ALERTS;var MIN_POI_Y_SCALE=5;exports.MIN_POI_Y_SCALE=MIN_POI_Y_SCALE;var MIN_HIGHLIGHT_WINDOW_DURATION=10;exports.MIN_HIGHLIGHT_WINDOW_DURATION=MIN_HIGHLIGHT_WINDOW_DURATION;var EMPTY_ALERT_COUNT=(_EMPTY_ALERT_COUNT={},_defineProperty(_EMPTY_ALERT_COUNT,TIME_SERIES_ALERT_STATE.TRIGGERED,0),_defineProperty(_EMPTY_ALERT_COUNT,TIME_SERIES_ALERT_STATE.ACKNOWLEDGED,0),_defineProperty(_EMPTY_ALERT_COUNT,TIME_SERIES_ALERT_STATE.ERROR,0),_EMPTY_ALERT_COUNT);exports.EMPTY_ALERT_COUNT=EMPTY_ALERT_COUNT},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderTime=exports.queryColumns=exports.bucketColumns=exports.alertColumns=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _moment=_interopRequireDefault(__webpack_require__(8));var _constants=__webpack_require__(15);var _constants2=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var renderTime=function renderTime(time){var momentTime=(0,_moment.default)(time);if(time&&momentTime.isValid())return momentTime.format("MM/DD/YY h:mm a");return _constants.DEFAULT_EMPTY_DATA};exports.renderTime=renderTime;var queryColumns=[{field:"start_time",name:"Alert start time",sortable:true,truncateText:false,render:renderTime,dataType:"date"},{field:"end_time",name:"Alert end time",sortable:true,truncateText:false,render:renderTime,dataType:"date"},{field:"trigger_name",name:"Trigger name",sortable:true,truncateText:true,textOnly:true},{field:"severity",name:"Severity",sortable:false,truncateText:false},{field:"state",name:"State",sortable:false,truncateText:false,render:function render(state,alert){var stateText=typeof state!=="string"?_constants.DEFAULT_EMPTY_DATA:_lodash.default.capitalize(state.toLowerCase());return state===_constants.ALERT_STATE.ERROR?"".concat(stateText,": ").concat(alert.error_message):stateText}},{field:"acknowledged_time",name:"Time acknowledged",sortable:true,truncateText:false,render:renderTime,dataType:"date"}];exports.queryColumns=queryColumns;var bucketColumns=[{field:"start_time",name:"Alert start time",sortable:true,truncateText:false,render:renderTime,dataType:"date"},{field:"end_time",name:"Alert last updated",sortable:true,truncateText:false,render:function render(endTime,alert){var ackTime=alert.acknowledged_time;return renderTime(Math.max(endTime,ackTime))},dataType:"date"},{field:"state",name:"State",sortable:false,truncateText:false,render:function render(state,alert){var stateText=typeof state!=="string"?_constants.DEFAULT_EMPTY_DATA:_lodash.default.capitalize(state.toLowerCase());return state===_constants.ALERT_STATE.ERROR?"".concat(stateText,": ").concat(alert.error_message):stateText}},{field:"trigger_name",name:"Trigger name",sortable:true,truncateText:true,textOnly:true},{field:"severity",name:"Severity",sortable:false,truncateText:false}];exports.bucketColumns=bucketColumns;var alertColumns=function alertColumns(history,httpClient,loadingMonitors,location,monitors,notifications,setFlyout,openFlyout,closeFlyout,refreshDashboard){return[{field:"total",name:"Alerts",sortable:true,truncateText:false,render:function render(total,alert){return _react.default.createElement(_eui.EuiLink,{onClick:function onClick(){openFlyout(_objectSpread(_objectSpread({},alert),{},{history:history,httpClient:httpClient,loadingMonitors:loadingMonitors,location:location,monitors:monitors,notifications:notifications,setFlyout:setFlyout,closeFlyout:closeFlyout,refreshDashboard:refreshDashboard}))},"data-test-subj":"euiLink_".concat(alert.trigger_name)},"".concat(total," alerts"))}},{field:"ACTIVE",name:"Active",sortable:true,truncateText:false},{field:"ACKNOWLEDGED",name:"Acknowledged",sortable:true,truncateText:false},{field:"ERROR",name:"Errors",sortable:true,truncateText:false},{field:"trigger_name",name:"Trigger name",sortable:true,truncateText:true,textOnly:true},{field:"start_time",name:"Trigger start time",sortable:true,truncateText:false,render:renderTime,dataType:"date"},{field:"last_notification_time",name:"Trigger last updated",sortable:true,truncateText:true,render:renderTime,dataType:"date"},{field:"severity",name:"Severity",sortable:false,truncateText:false},{field:"monitor_name",name:"Monitor name",sortable:true,truncateText:true,textOnly:true,render:function render(name,alert){return _react.default.createElement(_eui.EuiLink,{href:"".concat(_constants2.PLUGIN_NAME,"#/monitors/").concat(alert.monitor_id)},name)}}]};exports.alertColumns=alertColumns},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _IconToolTip=_interopRequireDefault(__webpack_require__(459));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_IconToolTip.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFieldsForType=getFieldsForType;exports.getIndexFields=exports.getFilteredIndexFields=void 0;exports.getTypeForField=getTypeForField;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(23);var _constants2=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function getFieldsForType(dataTypes,type){if(type===_constants2.DATA_TYPES.NUMBER){return _constants.NUMBER_TYPES.reduce((function(options,type){return options.concat(getFieldsForType(dataTypes,type))}),[])}if(dataTypes[type]){return _toConsumableArray(dataTypes[type].values())}return[]}var getIndexFields=function getIndexFields(dataTypes,allowedTypes){return allowedTypes.map((function(type){return{label:type,options:getFieldsForType(dataTypes,type).map((function(field){return{label:field,type:type}}))}}))};exports.getIndexFields=getIndexFields;var getFilteredIndexFields=function getFilteredIndexFields(dataTypes,allowedTypes,fieldsToInclude){return allowedTypes.map((function(type){return{label:type,options:getFieldsForType(dataTypes,type).filter((function(field){return fieldsToInclude.includes(field)})).map((function(field){return{label:field,type:type}}))}}))};exports.getFilteredIndexFields=getFilteredIndexFields;function getTypeForField(){var queryField=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var indexFields=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(_lodash.default.isEmpty(queryField)||_lodash.default.isEmpty(indexFields))return _constants2.DATA_TYPES.TEXT;var match=indexFields.find((function(entry){var _entry$options;return((_entry$options=entry.options)===null||_entry$options===void 0?void 0:_entry$options.find((function(dataField){return dataField.label===queryField})))!==undefined}));return(match===null||match===void 0?void 0:match.label)||_constants2.DATA_TYPES.TEXT}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.TRIGGER_OPERATORS_MAP=exports.TRIGGER_COMPARISON_OPERATORS=exports.DEFAULT_METRIC_AGGREGATION=exports.DEFAULT_CLOSED_STATES=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);__webpack_require__(60);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _constants=__webpack_require__(15);var _constants2=__webpack_require__(28);var _AddTriggerConditionButton=_interopRequireDefault(__webpack_require__(465));var _BucketLevelTriggerGraph=_interopRequireDefault(__webpack_require__(467));var _BucketLevelTriggerQuery=_interopRequireDefault(__webpack_require__(470));var _validation=__webpack_require__(129);var _WhereExpression=_interopRequireDefault(__webpack_require__(194));var _formik=__webpack_require__(20);var _ConfigureActions=_interopRequireDefault(__webpack_require__(130));var _helpers=__webpack_require__(22);var _constants3=__webpack_require__(30);var _helper=__webpack_require__(65);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultRowProps={label:"Trigger name",style:{paddingLeft:"20px",paddingTop:"10px"},isInvalid:_validate.isInvalid,error:_validate.hasError};var defaultInputProps={isInvalid:_validate.isInvalid};var selectFieldProps={validate:function validate(){}};var selectRowProps={label:"Severity level",style:{paddingLeft:"20px"},isInvalid:_validate.isInvalid,error:_validate.hasError};var selectInputProps={options:_constants3.SEVERITY_OPTIONS};var MAX_TRIGGER_CONDITIONS=10;var DEFAULT_METRIC_AGGREGATION={value:"_count",text:"Count of documents"};exports.DEFAULT_METRIC_AGGREGATION=DEFAULT_METRIC_AGGREGATION;var TRIGGER_OPERATORS_MAP={INCLUDE:"include",EXCLUDE:"exclude"};exports.TRIGGER_OPERATORS_MAP=TRIGGER_OPERATORS_MAP;var TRIGGER_COMPARISON_OPERATORS=[{text:"includes",value:TRIGGER_OPERATORS_MAP.INCLUDE,dataTypes:["number","text","keyword","boolean"]},{text:"excludes",value:TRIGGER_OPERATORS_MAP.EXCLUDE,dataTypes:["number","text","keyword","boolean"]}];exports.TRIGGER_COMPARISON_OPERATORS=TRIGGER_COMPARISON_OPERATORS;var DEFAULT_CLOSED_STATES={WHEN:false,OF_FIELD:false,THRESHOLD:false,OVER:false,FOR_THE_LAST:false,WHERE:false};exports.DEFAULT_CLOSED_STATES=DEFAULT_CLOSED_STATES;var DefineBucketLevelTrigger=function(_Component){_inherits(DefineBucketLevelTrigger,_Component);var _super=_createSuper(DefineBucketLevelTrigger);function DefineBucketLevelTrigger(props){var _this;_classCallCheck(this,DefineBucketLevelTrigger);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"openExpression",(function(expression){_this.setState({openedStates:_objectSpread(_objectSpread({},DEFAULT_CLOSED_STATES),{},_defineProperty({},expression,true))})}));_defineProperty(_assertThisInitialized(_this),"closeExpression",(function(expression){var _this$state=_this.state,madeChanges=_this$state.madeChanges,openedStates=_this$state.openedStates;if(madeChanges&&openedStates[expression]){_this.setState({madeChanges:false})}_this.setState({openedStates:_objectSpread(_objectSpread({},openedStates),{},_defineProperty({},expression,false))})}));_defineProperty(_assertThisInitialized(_this),"onMadeChanges",(function(){_this.setState({madeChanges:true})}));_defineProperty(_assertThisInitialized(_this),"renderWhereExpression",(function(dataTypes,monitor,fieldPath){var compositeAggregations=_lodash.default.get(monitor,"inputs[0].search.query.aggregations.composite_agg.composite.sources",[]).flatMap((function(entry){return _lodash.default.keys(entry)}));return _react.default.createElement("div",null,_react.default.createElement(_WhereExpression.default,{openedStates:_this.state.openedStates,closeExpression:_this.closeExpression,openExpression:_this.openExpression,onMadeChanges:_this.onMadeChanges,dataTypes:dataTypes,indexFieldFilters:compositeAggregations,useTriggerFieldOperators:true,fieldPath:fieldPath}))}));_defineProperty(_assertThisInitialized(_this),"renderBucketLevelTriggerGraph",(function(arrayHelpers,fieldPath,monitor,monitorValues,response,triggerValues){var metricAggregations=_lodash.default.keys(_lodash.default.get(monitor,"inputs[0].search.query.aggregations.composite_agg.aggs",[])).map((function(metric){return{value:metric,text:metric}}));if(!metricAggregations.includes(DEFAULT_METRIC_AGGREGATION)){metricAggregations.push(DEFAULT_METRIC_AGGREGATION)}var triggerConditions=_lodash.default.get(triggerValues,"".concat(fieldPath,"triggerConditions"),[]);if(_lodash.default.isEmpty(triggerConditions)){arrayHelpers.push(_lodash.default.cloneDeep(_constants2.FORMIK_INITIAL_TRIGGER_CONDITION_VALUES))}return triggerConditions.map((function(triggerCondition,index){return _react.default.createElement(_BucketLevelTriggerGraph.default,{key:index,arrayHelpers:arrayHelpers,index:index,fieldPath:fieldPath,monitorValues:monitorValues,triggerValues:triggerValues,response:response,queryMetrics:metricAggregations})}))}));_defineProperty(_assertThisInitialized(_this),"renderBucketLevelTriggerQuery",(function(context,executeResponse,onRun,setFlyout,triggerValues,isDarkMode,fieldPath){return _react.default.createElement(_BucketLevelTriggerQuery.default,{context:context,executeResponse:executeResponse,onRun:onRun,setFlyout:setFlyout,triggerValues:triggerValues,isDarkMode:isDarkMode,fieldPath:fieldPath})}));_this.state={openedStates:DEFAULT_CLOSED_STATES,madeChanges:false};return _this}_createClass(DefineBucketLevelTrigger,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,edit=_this$props.edit,triggerArrayHelpers=_this$props.triggerArrayHelpers,executeResponse=_this$props.executeResponse,monitor=_this$props.monitor,monitorValues=_this$props.monitorValues,onRun=_this$props.onRun,setFlyout=_this$props.setFlyout,triggers=_this$props.triggers,triggerValues=_this$props.triggerValues,isDarkMode=_this$props.isDarkMode,dataTypes=_this$props.dataTypes,triggerIndex=_this$props.triggerIndex,httpClient=_this$props.httpClient,notifications=_this$props.notifications,notificationService=_this$props.notificationService,plugins=_this$props.plugins;var fieldPath=triggerIndex!==undefined?"triggerDefinitions[".concat(triggerIndex,"]."):"";var context=(0,_helper.getTriggerContext)(executeResponse,monitor,triggerValues,triggerIndex);var isGraph=_lodash.default.get(monitorValues,"searchType")===_constants.SEARCH_TYPE.GRAPH;var response=_lodash.default.get(executeResponse,"input_results.results[0]");var triggerName=_lodash.default.get(triggerValues,"".concat(fieldPath,"name"),_constants3.DEFAULT_TRIGGER_NAME);var disableAddTriggerConditionButton=_lodash.default.get(triggerValues,"".concat(fieldPath,"triggerConditions")).length>=MAX_TRIGGER_CONDITIONS;var bucketLevelTriggerContent=isGraph?_react.default.createElement("div",null,_react.default.createElement(_formik.FieldArray,{name:"".concat(fieldPath,"triggerConditions"),validateOnChange:true},(function(conditionsArrayHelpers){return _react.default.createElement("div",null,_react.default.createElement("div",{style:{paddingLeft:"20px",paddingTop:"10px"}},_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h4",null,"Trigger conditions")),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},"Specify thresholds for the metrics you have chosen in your query above.")),_this2.renderBucketLevelTriggerGraph(conditionsArrayHelpers,fieldPath,monitor,monitorValues,response,triggerValues),_react.default.createElement("div",{style:{paddingLeft:"15px"}},_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_AddTriggerConditionButton.default,{arrayHelpers:conditionsArrayHelpers,disabled:disableAddTriggerConditionButton}),(0,_helpers.inputLimitText)(_lodash.default.get(triggerValues,"".concat(fieldPath,"triggerConditions"),[]).length,MAX_TRIGGER_CONDITIONS,"trigger condition","trigger conditions",{paddingLeft:"10px"})))})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement("div",{style:{paddingLeft:"20px"}},this.renderWhereExpression(dataTypes,monitor,fieldPath))):this.renderBucketLevelTriggerQuery(context,executeResponse,onRun,setFlyout,triggerValues,isDarkMode,fieldPath);return _react.default.createElement(_eui.EuiAccordion,{id:triggerName,buttonContent:_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h1",null,_lodash.default.isEmpty(triggerName)?_constants3.DEFAULT_TRIGGER_NAME:triggerName)),initialIsOpen:edit?false:triggerIndex===0,extraAction:_react.default.createElement(_eui.EuiButton,{color:"danger",onClick:function onClick(){triggerArrayHelpers.remove(triggerIndex)},size:"s"},"Remove trigger"),style:{paddingBottom:"15px",paddingTop:"10px"}},_react.default.createElement("div",{style:{padding:"0px 10px",paddingTop:"10px"}},_react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(fieldPath,"name"),fieldProps:{validate:(0,_validation.validateTriggerName)(triggers,triggerValues,fieldPath)},formRow:true,rowProps:defaultRowProps,inputProps:defaultInputProps}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_FormControls.FormikSelect,{name:"".concat(fieldPath,"severity"),formRow:true,fieldProps:selectFieldProps,rowProps:selectRowProps,inputProps:selectInputProps}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),bucketLevelTriggerContent,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},_react.default.createElement(_formik.FieldArray,{name:"".concat(fieldPath,"actions"),validateOnChange:true},(function(arrayHelpers){return _react.default.createElement(_ConfigureActions.default,{arrayHelpers:arrayHelpers,context:context,httpClient:httpClient,setFlyout:setFlyout,values:triggerValues,notifications:notifications,fieldPath:fieldPath,triggerIndex:triggerIndex,notificationService:notificationService,plugins:plugins})})))))}}]);return DefineBucketLevelTrigger}(_react.Component);var _default=DefineBucketLevelTrigger;exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formikToAction=formikToAction;exports.formikToBucketLevelTrigger=formikToBucketLevelTrigger;exports.formikToBucketLevelTriggerAction=formikToBucketLevelTriggerAction;exports.formikToBucketLevelTriggerCondition=formikToBucketLevelTriggerCondition;exports.formikToCondition=formikToCondition;exports.formikToDocumentLevelTrigger=formikToDocumentLevelTrigger;exports.formikToDocumentLevelTriggerCondition=formikToDocumentLevelTriggerCondition;exports.formikToQueryLevelTrigger=formikToQueryLevelTrigger;exports.formikToTrigger=formikToTrigger;exports.formikToTriggerDefinition=formikToTriggerDefinition;exports.formikToTriggerDefinitions=formikToTriggerDefinitions;exports.formikToTriggerUiMetadata=formikToTriggerUiMetadata;exports.getADCondition=getADCondition;exports.getBucketLevelTriggerCondition=getBucketLevelTriggerCondition;exports.getBucketSelectorBucketsPath=getBucketSelectorBucketsPath;exports.getBucketSelectorScriptSource=getBucketSelectorScriptSource;exports.getCompositeAggFilter=getCompositeAggFilter;exports.getCondition=getCondition;exports.getDocumentLevelScriptSource=getDocumentLevelScriptSource;exports.getLogicalOperator=getLogicalOperator;exports.getRelationalOperator=getRelationalOperator;exports.getResultsPath=getResultsPath;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(28);var _constants2=__webpack_require__(15);var _Message=__webpack_require__(128);var _constants3=__webpack_require__(30);var _constants4=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function formikToTrigger(values){var monitorUiMetadata=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var triggerDefinitions=_lodash.default.get(values,"triggerDefinitions");return _lodash.default.isArray(triggerDefinitions)?formikToTriggerDefinitions(triggerDefinitions,monitorUiMetadata):formikToTriggerDefinition(values,monitorUiMetadata)}function formikToTriggerDefinitions(values,monitorUiMetadata){return values.map((function(trigger){return formikToTriggerDefinition(trigger,monitorUiMetadata)}))}function formikToTriggerDefinition(values,monitorUiMetadata){switch(monitorUiMetadata.monitor_type){case _constants2.MONITOR_TYPE.BUCKET_LEVEL:return formikToBucketLevelTrigger(values,monitorUiMetadata);case _constants2.MONITOR_TYPE.DOC_LEVEL:return formikToDocumentLevelTrigger(values,monitorUiMetadata);default:return formikToQueryLevelTrigger(values,monitorUiMetadata)}}function formikToQueryLevelTrigger(values,monitorUiMetadata){var condition=formikToCondition(values,monitorUiMetadata);var actions=formikToAction(values);return{id:values.id,name:values.name,severity:values.severity,condition:condition,actions:actions,min_time_between_executions:values.minTimeBetweenExecutions,rolling_window_size:values.rollingWindowSize}}function formikToBucketLevelTrigger(values,monitorUiMetadata){var condition=formikToBucketLevelTriggerCondition(values,monitorUiMetadata);var actions=formikToBucketLevelTriggerAction(values);return{bucket_level_trigger:{id:values.id,name:values.name,severity:values.severity,condition:condition,actions:actions,min_time_between_executions:values.minTimeBetweenExecutions,rolling_window_size:values.rollingWindowSize}}}function formikToDocumentLevelTrigger(values,monitorUiMetadata){var condition=formikToDocumentLevelTriggerCondition(values,monitorUiMetadata);var actions=formikToBucketLevelTriggerAction(values);return{document_level_trigger:{id:values.id,name:values.name,severity:values.severity,condition:condition,actions:actions}}}function formikToDocumentLevelTriggerCondition(values,monitorUiMetadata){var triggerConditions=_lodash.default.get(values,"triggerConditions",[]);var searchType=_lodash.default.get(monitorUiMetadata,"search.searchType",_constants2.SEARCH_TYPE.QUERY);if(searchType===_constants2.SEARCH_TYPE.QUERY)return{script:values.script};var source=getDocumentLevelScriptSource(triggerConditions);return{script:{lang:"painless",source:source}}}function getDocumentLevelScriptSource(conditions){var scriptSourceContents=[];conditions.forEach((function(condition){var andOrCondition=condition.andOrCondition,query=condition.query;if(andOrCondition){var logicOperator=getLogicalOperator(andOrCondition);scriptSourceContents.push(logicOperator)}if(!_lodash.default.isEmpty(query)&&!_lodash.default.isEmpty(query.queryName)){var queryExpression=_lodash.default.get(query,"expression");scriptSourceContents.push("query[".concat(queryExpression,"]"))}}));return scriptSourceContents.join(" ")}function formikToAction(values){var actions=values.actions;if(actions&&actions.length>0){return actions.map((function(action){if(!action.throttle_enabled)return _lodash.default.omit(action,["throttle"]);return action}))}return actions}function formikToBucketLevelTriggerAction(values){var actions=values.actions;var executionPolicyPath="action_execution_policy.action_execution_scope";if(actions&&actions.length>0){return actions.map((function(action){var formattedAction=_lodash.default.cloneDeep(action);switch(formattedAction.throttle_enabled){case true:_lodash.default.set(formattedAction,"throttle.unit",_constants3.FORMIK_INITIAL_ACTION_VALUES.throttle.unit);break;case false:formattedAction=_lodash.default.omit(formattedAction,["throttle"]);break}var notifyOption=_lodash.default.get(formattedAction,"".concat(executionPolicyPath));var notifyOptionId=_lodash.default.isString(notifyOption)?notifyOption:_lodash.default.keys(notifyOption)[0];switch(notifyOptionId){case _Message.NOTIFY_OPTIONS_VALUES.PER_ALERT:var actionableAlerts=_lodash.default.get(formattedAction,"".concat(executionPolicyPath,".").concat(_Message.NOTIFY_OPTIONS_VALUES.PER_ALERT,".actionable_alerts"),[]);_lodash.default.set(formattedAction,"".concat(executionPolicyPath,".").concat(_Message.NOTIFY_OPTIONS_VALUES.PER_ALERT,".actionable_alerts"),actionableAlerts.map((function(entry){return entry.value})));break;case _Message.NOTIFY_OPTIONS_VALUES.PER_EXECUTION:_lodash.default.set(formattedAction,"".concat(executionPolicyPath,".").concat(_Message.NOTIFY_OPTIONS_VALUES.PER_EXECUTION),{});break}return formattedAction}))}return actions}function formikToTriggerUiMetadata(values,monitorUiMetadata){switch(monitorUiMetadata.monitor_type){case _constants2.MONITOR_TYPE.QUERY_LEVEL:case _constants2.MONITOR_TYPE.CLUSTER_METRICS:var searchType=_lodash.default.get(monitorUiMetadata,"search.searchType","query");var queryLevelTriggersUiMetadata={};_lodash.default.get(values,"triggerDefinitions",[]).forEach((function(trigger){var anomalyDetector=trigger.anomalyDetector,thresholdEnum=trigger.thresholdEnum,thresholdValue=trigger.thresholdValue;var triggerMetadata={value:thresholdValue,enum:thresholdEnum};if(searchType===_constants2.SEARCH_TYPE.AD&&anomalyDetector.triggerType===_constants.TRIGGER_TYPE.AD){triggerMetadata.adTriggerMetadata={triggerType:anomalyDetector.triggerType,anomalyGrade:{value:anomalyDetector.anomalyGradeThresholdValue,enum:anomalyDetector.anomalyGradeThresholdEnum},anomalyConfidence:{value:anomalyDetector.anomalyConfidenceThresholdValue,enum:anomalyDetector.anomalyConfidenceThresholdEnum}}}queryLevelTriggersUiMetadata[trigger.name]=triggerMetadata}));return queryLevelTriggersUiMetadata;case _constants2.MONITOR_TYPE.BUCKET_LEVEL:var bucketLevelTriggersUiMetadata={};_lodash.default.get(values,"triggerDefinitions",[]).forEach((function(trigger){var triggerMetadata=trigger.triggerConditions.map((function(condition){return{value:condition.thresholdValue,enum:condition.thresholdEnum}}));bucketLevelTriggersUiMetadata[trigger.name]=triggerMetadata}));return bucketLevelTriggersUiMetadata;case _constants2.MONITOR_TYPE.DOC_LEVEL:var docLevelTriggersUiMetadata={};_lodash.default.get(values,"triggerDefinitions",[]).forEach((function(trigger){var triggerMetadata=_lodash.default.get(trigger,"triggerConditions",[]).map((function(condition){return{query:condition.query,andOrCondition:condition.andOrCondition,script:condition.script}}));docLevelTriggersUiMetadata[trigger.name]=triggerMetadata}));return docLevelTriggersUiMetadata}}function formikToCondition(values){var monitorUiMetadata=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var thresholdValue=values.thresholdValue,thresholdEnum=values.thresholdEnum;var searchType=_lodash.default.get(monitorUiMetadata,"search.searchType","query");var aggregationType=_lodash.default.get(monitorUiMetadata,"search.aggregations.0.aggregationType");if(searchType===_constants2.SEARCH_TYPE.QUERY||searchType===_constants2.SEARCH_TYPE.CLUSTER_METRICS)return{script:values.script};if(searchType===_constants2.SEARCH_TYPE.AD)return getADCondition(values);var isCount=!aggregationType;var resultsPath=getResultsPath(isCount);var operator=getRelationalOperator(thresholdEnum);return getCondition(resultsPath,operator,thresholdValue,isCount)}function formikToBucketLevelTriggerCondition(values){var monitorUiMetadata=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var searchType=_lodash.default.get(monitorUiMetadata,"search.searchType",_constants2.SEARCH_TYPE.QUERY);var bucketSelector=_lodash.default.get(values,"bucketSelector",_constants.FORMIK_INITIAL_TRIGGER_VALUES.bucketSelector);try{bucketSelector=JSON.parse(bucketSelector)}catch(err){}if(searchType===_constants2.SEARCH_TYPE.QUERY)return bucketSelector;if(searchType===_constants2.SEARCH_TYPE.GRAPH)return getBucketLevelTriggerCondition(values)}function getADCondition(values){var anomalyDetector=values.anomalyDetector;if(anomalyDetector.triggerType===_constants.TRIGGER_TYPE.AD){var anomalyGradeOperator=getRelationalOperator(anomalyDetector.anomalyGradeThresholdEnum);var anomalyConfidenceOperator=getRelationalOperator(anomalyDetector.anomalyConfidenceThresholdEnum);return{script:{lang:"painless",source:"return ".concat(_constants.NOT_EMPTY_RESULT," && ").concat(_constants.ANOMALY_GRADE_RESULT_PATH," != null && ").concat(_constants.ANOMALY_GRADE_RESULT_PATH," ").concat(anomalyGradeOperator," ").concat(anomalyDetector.anomalyGradeThresholdValue," && ").concat(_constants.ANOMALY_CONFIDENCE_RESULT_PATH," ").concat(anomalyConfidenceOperator," ").concat(anomalyDetector.anomalyConfidenceThresholdValue)}}}else{return{script:values.script}}}function getCondition(resultsPath,operator,value,isCount){var baseSource="".concat(resultsPath," ").concat(operator," ").concat(value);return{script:{lang:"painless",source:isCount?baseSource:"return ".concat(resultsPath," == null ? false : ").concat(baseSource)}}}function getBucketLevelTriggerCondition(values){var conditions=values.triggerConditions;var bucketsPath=getBucketSelectorBucketsPath(conditions);var scriptSource=getBucketSelectorScriptSource(conditions);var composite_agg_filter=getCompositeAggFilter(values);return{parent_bucket_path:"composite_agg",buckets_path:bucketsPath,script:{source:scriptSource},composite_agg_filter:composite_agg_filter}}function getBucketSelectorBucketsPath(conditions){var bucketsPath={};conditions.forEach((function(condition){var queryMetric=condition.queryMetric;bucketsPath[queryMetric]=queryMetric}));return bucketsPath}function getBucketSelectorScriptSource(conditions){var scriptSourceContents=[];conditions.forEach((function(condition){var queryMetric=condition.queryMetric,thresholdValue=condition.thresholdValue,thresholdEnum=condition.thresholdEnum,andOrCondition=condition.andOrCondition;if(andOrCondition){var logicalOperator=getLogicalOperator(andOrCondition);scriptSourceContents.push(logicalOperator)}var relationalOperator=getRelationalOperator(thresholdEnum);var scriptCondition="params.".concat(queryMetric," ").concat(relationalOperator," ").concat(thresholdValue);scriptSourceContents.push(scriptCondition)}));return scriptSourceContents.join(" ")}function getResultsPath(isCount){return isCount?_constants.HITS_TOTAL_RESULTS_PATH:_constants.AGGREGATION_RESULTS_PATH}function getCompositeAggFilter(_ref){var _ref$filters=_ref.filters,filters=_ref$filters===void 0?[]:_ref$filters;var composite_agg_filter={};filters.forEach((function(filter){var fieldName=_lodash.default.get(filter,"fieldName",_constants4.FORMIK_INITIAL_WHERE_EXPRESSION_VALUES.fieldName);if(fieldName.length>0){composite_agg_filter[fieldName[0].label]=_defineProperty({},filter.operator,filter.fieldValue)}}));if(!_lodash.default.isEmpty(composite_agg_filter))return composite_agg_filter}function getRelationalOperator(thresholdEnum){return{ABOVE:">",BELOW:"<",EXACTLY:"=="}[thresholdEnum]}function getLogicalOperator(logicalEnum){return{AND:"&&",OR:"||"}[logicalEnum]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toChannelType=exports.getTriggerContext=exports.getDefaultScript=exports.getChannelOptions=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(31);var _constants2=__webpack_require__(15);var _constants3=__webpack_require__(27);var _clusterMetricsMonitorConstants=__webpack_require__(52);var _constants4=__webpack_require__(28);var _moment=_interopRequireDefault(__webpack_require__(8));var _formikToTrigger=__webpack_require__(64);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getChannelOptions=function getChannelOptions(channels,allowedTypes){return allowedTypes.map((function(type){return{label:type,options:channels.filter((function(channel){return channel.type===type}))}}))};exports.getChannelOptions=getChannelOptions;var toChannelType=function toChannelType(type){if(type===_constants.DESTINATION_TYPE.CUSTOM_HOOK){return _constants2.BACKEND_CHANNEL_TYPE.CUSTOM_WEBHOOK}return type};exports.toChannelType=toChannelType;var getDefaultScript=function getDefaultScript(monitorValues){var monitorType=_lodash.default.get(monitorValues,"monitor_type",_constants3.FORMIK_INITIAL_VALUES.monitor_type);switch(monitorType){case _constants2.MONITOR_TYPE.BUCKET_LEVEL:return _constants4.FORMIK_INITIAL_TRIGGER_VALUES.bucketSelector;case _constants2.MONITOR_TYPE.CLUSTER_METRICS:var apiType=_lodash.default.get(monitorValues,"uri.api_type");return _lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".defaultCondition"),_clusterMetricsMonitorConstants.DEFAULT_CLUSTER_METRICS_SCRIPT);case _constants2.MONITOR_TYPE.DOC_LEVEL:return _constants4.FORMIK_INITIAL_DOC_LEVEL_SCRIPT;default:return _constants4.FORMIK_INITIAL_TRIGGER_VALUES.script}};exports.getDefaultScript=getDefaultScript;var getTriggerContext=function getTriggerContext(executeResponse,monitor,values,triggerIndex){var trigger=(0,_formikToTrigger.formikToTrigger)(values,_lodash.default.get(monitor,"ui_metadata",{}));if(_lodash.default.isArray(trigger)&&triggerIndex>=0)trigger=trigger[triggerIndex];return{periodStart:_moment.default.utc(_lodash.default.get(executeResponse,"period_start",Date.now())).format(),periodEnd:_moment.default.utc(_lodash.default.get(executeResponse,"period_end",Date.now())).format(),results:[_lodash.default.get(executeResponse,"input_results.results[0]")].filter((function(result){return!!result})),trigger:trigger,alert:null,error:null,monitor:monitor}};exports.getTriggerContext=getTriggerContext},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildSchedule=buildSchedule;exports.formikToAd=formikToAd;exports.formikToAdQuery=formikToAdQuery;exports.formikToAggregation=formikToAggregation;exports.formikToClusterMetricsInput=formikToClusterMetricsInput;exports.formikToCompositeAggregation=formikToCompositeAggregation;exports.formikToDocLevelInput=formikToDocLevelInput;exports.formikToDocLevelQueriesUiMetadata=formikToDocLevelQueriesUiMetadata;exports.formikToExtractionQuery=formikToExtractionQuery;exports.formikToGraphQuery=formikToGraphQuery;exports.formikToIndices=formikToIndices;exports.formikToInputs=formikToInputs;exports.formikToMetricAggregation=formikToMetricAggregation;exports.formikToMonitor=formikToMonitor;exports.formikToQuery=formikToQuery;exports.formikToSearch=formikToSearch;exports.formikToUiCompositeAggregation=formikToUiCompositeAggregation;exports.formikToUiGraphQuery=formikToUiGraphQuery;exports.formikToUiOverAggregation=formikToUiOverAggregation;exports.formikToUiSchedule=formikToUiSchedule;exports.formikToUiSearch=formikToUiSearch;exports.formikToWhereClause=formikToWhereClause;var _lodash=_interopRequireDefault(__webpack_require__(7));var _momentTimezone=_interopRequireDefault(__webpack_require__(9));var _constants=__webpack_require__(27);var _constants2=__webpack_require__(15);var _whereFilters=__webpack_require__(488);var _clusterMetricsMonitorConstants=__webpack_require__(52);var _clusterMetricsMonitorHelpers=__webpack_require__(53);var _constants3=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function formikToMonitor(values){var uiSchedule=formikToUiSchedule(values);var schedule=buildSchedule(values.frequency,uiSchedule);var monitorUiMetadata=function monitorUiMetadata(){var _ref;switch(values.monitor_type){case _constants2.MONITOR_TYPE.DOC_LEVEL:return _ref={},_defineProperty(_ref,_constants3.DOC_LEVEL_INPUT_FIELD,formikToDocLevelQueriesUiMetadata(values)),_defineProperty(_ref,"search",{searchType:values.searchType}),_ref;default:return{search:formikToUiSearch(values)}}};return{name:values.name,type:"monitor",monitor_type:values.monitor_type,enabled:!values.disabled,schedule:schedule,inputs:[formikToInputs(values)],triggers:[],ui_metadata:_objectSpread({schedule:uiSchedule,monitor_type:values.monitor_type},monitorUiMetadata())}}function formikToInputs(values){switch(values.monitor_type){case _constants2.MONITOR_TYPE.CLUSTER_METRICS:return formikToClusterMetricsInput(values);case _constants2.MONITOR_TYPE.DOC_LEVEL:return formikToDocLevelInput(values);default:return formikToSearch(values)}}function formikToSearch(values){var isAD=values.searchType===_constants2.SEARCH_TYPE.AD;var query=isAD?formikToAdQuery(values):formikToQuery(values);var adResultIndex=_lodash.default.get(values,"adResultIndex",".opendistro-anomaly-results*");var indices=isAD?[adResultIndex]:formikToIndices(values);return{search:{indices:indices,query:query}}}function formikToAdQuery(values){return{size:1,sort:[{anomaly_grade:"desc"},{confidence:"desc"}],query:{bool:{filter:[{range:{execution_end_time:{from:"{{period_end}}||-"+values.period.interval+"m",to:"{{period_end}}",include_lower:true,include_upper:true}}},{term:{detector_id:{value:values.detectorId}}}]}},aggregations:{max_anomaly_grade:{max:{field:"anomaly_grade"}}}}}function formikToClusterMetricsInput(values){var apiType=_lodash.default.get(values,"uri.api_type",_constants.FORMIK_INITIAL_VALUES.uri.api_type);if(_lodash.default.isEmpty(apiType))apiType=(0,_clusterMetricsMonitorHelpers.getApiType)(_lodash.default.get(values,"uri"));var pathParams=_lodash.default.get(values,"uri.path_params",_constants.FORMIK_INITIAL_VALUES.uri.path_params);pathParams=_lodash.default.trim(pathParams);var hasPathParams=!_lodash.default.isEmpty(pathParams);if(hasPathParams)_lodash.default.concat(pathParams,_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".appendText"),""));var path=_lodash.default.get(values,"uri.path",_constants.FORMIK_INITIAL_VALUES.uri.path);if(_lodash.default.isEmpty(path))path=(0,_clusterMetricsMonitorHelpers.getApiPath)(hasPathParams,apiType);var canConstructUrl=!_lodash.default.isEmpty(apiType);var url=canConstructUrl?"http://localhost:9200/".concat(path).concat(pathParams):_constants.FORMIK_INITIAL_VALUES.uri.url;return{uri:{api_type:apiType,path:path,path_params:pathParams,url:url}}}function formikToAd(values){return{anomaly_detector:{detector_id:values.detectorId}}}function formikToUiSearch(values){var searchType=values.searchType,timeField=values.timeField,aggregations=values.aggregations,groupBy=values.groupBy,bucketValue=values.bucketValue,bucketUnitOfTime=values.bucketUnitOfTime,filters=values.filters;return{searchType:searchType,timeField:timeField,aggregations:aggregations,groupBy:groupBy,bucketValue:bucketValue,bucketUnitOfTime:bucketUnitOfTime,filters:filters}}function formikToIndices(values){return values.index.map((function(_ref2){var label=_ref2.label;return label}))}function formikToQuery(values){var isGraph=values.searchType===_constants2.SEARCH_TYPE.GRAPH;return isGraph?formikToGraphQuery(values):formikToExtractionQuery(values)}function formikToExtractionQuery(values){var query=_lodash.default.get(values,"query",_constants.FORMIK_INITIAL_VALUES.query);try{query=JSON.parse(query)}catch(err){}return query}function formikToGraphQuery(values){var bucketValue=values.bucketValue,bucketUnitOfTime=values.bucketUnitOfTime,monitor_type=values.monitor_type;var aggregation=function aggregation(){switch(monitor_type){case _constants2.MONITOR_TYPE.BUCKET_LEVEL:return formikToCompositeAggregation(values);default:return formikToAggregation(values)}};var timeField=values.timeField;var filters=[{range:_defineProperty({},timeField,{gte:"{{period_end}}||-".concat(Math.round(bucketValue)).concat(bucketUnitOfTime),lte:"{{period_end}}",format:"epoch_millis"})}];var whereFilters=formikToWhereClause(values);if(whereFilters.length)filters=filters.concat(whereFilters);return{size:0,aggregations:aggregation(),query:{bool:{filter:filters}}}}function formikToDocLevelInput(values){var description=_constants.FORMIK_INITIAL_VALUES.description;var indices=formikToIndices(values);var queries=_lodash.default.get(values,"queries",_constants.FORMIK_INITIAL_VALUES.queries);switch(values.searchType){case _constants2.SEARCH_TYPE.GRAPH:description=values.description;queries=queries.map((function(query){var formikToQuery=_constants3.DOC_LEVEL_QUERY_MAP[query.operator].query(query);return{id:query.id,name:query.queryName,query:formikToQuery,tags:query.tags}}));break;case _constants2.SEARCH_TYPE.QUERY:var query=_lodash.default.get(values,"query","");try{query=JSON.parse(query);description=_lodash.default.get(query,"description",description);queries=_lodash.default.get(query,"queries",queries)}catch(e){}break;default:console.log("Unsupported searchType found for ".concat(_constants2.MONITOR_TYPE.DOC_LEVEL,": ").concat(JSON.stringify(values.searchType)),values.searchType)}return _defineProperty({},_constants3.DOC_LEVEL_INPUT_FIELD,{description:description,indices:indices,queries:queries})}function formikToDocLevelQueriesUiMetadata(values){return{queries:_lodash.default.get(values,"queries",[])}}function formikToCompositeAggregation(values){var aggregations=values.aggregations,groupBy=values.groupBy;var aggs={};aggregations.map((function(aggItem){var name="".concat(aggItem.aggregationType,"_").concat(aggItem.fieldName.replace(/\./g,"_"));var type=aggItem.aggregationType==="count"?"value_count":aggItem.aggregationType;aggs[name]=_defineProperty({},type,{field:aggItem.fieldName})}));var sources=[];groupBy.map((function(groupByItem){return sources.push(_defineProperty({},groupByItem,{terms:{field:groupByItem}}))}));return{composite_agg:{composite:{sources:sources},aggs:aggs}}}function formikToAggregation(values){var aggregations=values.aggregations,groupBy=values.groupBy;var aggs={};aggregations.map((function(aggItem){var type=aggItem.aggregationType==="count"?"value_count":aggItem.aggregationType;aggs["metric"]=_defineProperty({},type,{field:aggItem.fieldName})}));if(groupBy.length)aggs.terms_agg={terms:{field:groupBy[0]}};return aggs}function formikToUiGraphQuery(values){var bucketValue=values.bucketValue,bucketUnitOfTime=values.bucketUnitOfTime,monitor_type=values.monitor_type;var useComposite=monitor_type===_constants2.MONITOR_TYPE.BUCKET_LEVEL;var aggregation=useComposite?formikToUiCompositeAggregation(values):formikToUiOverAggregation(values);var timeField=values.timeField;var filters=[{range:_defineProperty({},timeField,{gte:"now-".concat(bucketValue*_constants.BUCKET_COUNT).concat(bucketUnitOfTime),lte:"now"})}];var whereFilters=formikToWhereClause(values);if(whereFilters.length)filters=filters.concat(whereFilters);return{size:0,aggregations:aggregation,query:{bool:{filter:filters}}}}function formikToUiOverAggregation(values){var metricAggregation=formikToMetricAggregation(values);var bucketValue=values.bucketValue,bucketUnitOfTime=values.bucketUnitOfTime,groupBy=values.groupBy;var timeField=values.timeField;var aggregations=groupBy.length?_objectSpread(_objectSpread({},metricAggregation),{},{terms_agg:{terms:{field:groupBy[0]}}}):metricAggregation;return{over:{date_histogram:{field:timeField,interval:"".concat(bucketValue).concat(bucketUnitOfTime),time_zone:_momentTimezone.default.tz.guess(),min_doc_count:0,extended_bounds:{min:"now-".concat(bucketValue*_constants.BUCKET_COUNT).concat(bucketUnitOfTime),max:"now"}},aggregations:aggregations}}}function formikToWhereClause(_ref4){var _ref4$filters=_ref4.filters,filters=_ref4$filters===void 0?[]:_ref4$filters;return filters.map((function(filter){return _whereFilters.OPERATORS_QUERY_MAP[filter.operator].query(filter)}))}function formikToMetricAggregation(values){var _aggregations$,_aggregations$2;var aggregations=values.aggregations;var aggregationType=(_aggregations$=aggregations[0])===null||_aggregations$===void 0?void 0:_aggregations$.aggregationType;var field=(_aggregations$2=aggregations[0])===null||_aggregations$2===void 0?void 0:_aggregations$2.fieldName;if(!field)return{};if(aggregationType==="count")aggregationType="value_count";return{metric:_defineProperty({},aggregationType,{field:field})}}function formikToUiCompositeAggregation(values){var aggregations=values.aggregations,groupBy=values.groupBy,timeField=values.timeField,bucketValue=values.bucketValue,bucketUnitOfTime=values.bucketUnitOfTime,monitorType=values.monitor_type;var aggs={};aggregations.map((function(aggItem){var name="".concat(aggItem.aggregationType,"_").concat(aggItem.fieldName.replace(/\./g,"_"));var type=aggItem.aggregationType==="count"?"value_count":aggItem.aggregationType;aggs[name]=_defineProperty({},type,{field:aggItem.fieldName})}));var sources=[];groupBy.map((function(groupByItem){return sources.push(_defineProperty({},groupByItem,{terms:{field:groupByItem}}))}));sources.push({date:{date_histogram:{field:timeField,interval:"".concat(bucketValue).concat(bucketUnitOfTime),time_zone:_momentTimezone.default.tz.guess()}}});return{composite_agg:{composite:{sources:sources,size:_constants.DEFAULT_COMPOSITE_AGG_SIZE},aggs:aggs}}}function formikToUiSchedule(values){return{timezone:_lodash.default.get(values,"timezone[0].label",null),frequency:values.frequency,period:values.period,daily:values.daily,weekly:values.weekly,monthly:values.monthly,cronExpression:values.cronExpression}}function buildSchedule(scheduleType,values){var period=values.period,daily=values.daily,weekly=values.weekly,_values$monthly=values.monthly,type=_values$monthly.type,day=_values$monthly.day,cronExpression=values.cronExpression,timezone=values.timezone;switch(scheduleType){case"interval":{return{period:period}}case"daily":{return{cron:{expression:"0 ".concat(daily," * * *"),timezone:timezone}}}case"weekly":{var daysOfWeek=Object.entries(weekly).filter((function(_ref5){var _ref6=_slicedToArray(_ref5,2),day=_ref6[0],checked=_ref6[1];return checked})).map((function(_ref7){var _ref8=_slicedToArray(_ref7,1),day=_ref8[0];return day.toUpperCase()})).join(",");return{cron:{expression:"0 ".concat(daily," * * ").concat(daysOfWeek),timezone:timezone}}}case"monthly":{var dayOfMonth="?";if(type==="day"){dayOfMonth=day}return{cron:{expression:"0 ".concat(daily," ").concat(dayOfMonth," */1 *"),timezone:timezone}}}case"cronExpression":return{cron:{expression:cronExpression,timezone:timezone}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=monitorToFormik;exports.docLevelInputToFormik=docLevelInputToFormik;exports.getQueryOperator=getQueryOperator;exports.indicesToFormik=indicesToFormik;exports.parseQueryString=parseQueryString;exports.queriesToFormik=queriesToFormik;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(27);var _constants2=__webpack_require__(15);var _constants3=__webpack_require__(23);var _constants4=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function monitorToFormik(monitor){var formikValues=_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_VALUES);if(!monitor)return formikValues;var name=monitor.name,monitor_type=monitor.monitor_type,enabled=monitor.enabled,_monitor$schedule$cro=monitor.schedule.cron;_monitor$schedule$cro=_monitor$schedule$cro===void 0?{}:_monitor$schedule$cro;var _monitor$schedule$cro2=_monitor$schedule$cro.expression,cronExpression=_monitor$schedule$cro2===void 0?formikValues.cronExpression:_monitor$schedule$cro2,timezone=_monitor$schedule$cro.timezone,inputs=monitor.inputs,_monitor$ui_metadata=monitor.ui_metadata;_monitor$ui_metadata=_monitor$ui_metadata===void 0?{}:_monitor$ui_metadata;var _monitor$ui_metadata$=_monitor$ui_metadata.schedule,schedule=_monitor$ui_metadata$===void 0?{}:_monitor$ui_metadata$,_monitor$ui_metadata$2=_monitor$ui_metadata.search,search=_monitor$ui_metadata$2===void 0?{}:_monitor$ui_metadata$2;var _search$searchType=search.searchType,searchType=_search$searchType===void 0?"query":_search$searchType,fieldName=search.fieldName;var isAD=searchType===_constants2.SEARCH_TYPE.AD;var monitorInputs=function monitorInputs(){switch(monitor_type){case _constants2.MONITOR_TYPE.CLUSTER_METRICS:return{index:_constants.FORMIK_INITIAL_VALUES.index,uri:inputs[0].uri};case _constants2.MONITOR_TYPE.DOC_LEVEL:return docLevelInputToFormik(monitor);default:return{index:indicesToFormik(inputs[0].search.indices),query:JSON.stringify(inputs[0].search.query,null,4)}}};return _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},formikValues),{},{name:name,disabled:!enabled},schedule),{},{cronExpression:cronExpression},monitorInputs()),{},{monitor_type:monitor_type},search),{},{searchType:searchType,fieldName:fieldName?[{label:fieldName}]:[],timezone:timezone?[{label:timezone}]:[],detectorId:isAD?_lodash.default.get(inputs,_constants2.INPUTS_DETECTOR_ID):undefined,adResultIndex:isAD?_lodash.default.get(inputs,"0.search.indices.0"):undefined})}function indicesToFormik(indices){return indices.map((function(index){return{label:index}}))}function docLevelInputToFormik(monitor){var input=monitor.inputs[0][_constants4.DOC_LEVEL_INPUT_FIELD];var description=input.description,indices=input.indices,queries=input.queries;return{description:description,index:indicesToFormik(indices),query:JSON.stringify(_lodash.default.omit(input,"indices"),null,4),queries:queriesToFormik(queries)}}function queriesToFormik(queries){return queries.map((function(query){var querySource;try{querySource=JSON.parse(query.query)}catch(e){querySource=query.query}var operator=getQueryOperator(querySource);var parsedQuerySource=parseQueryString(querySource,operator);return _objectSpread(_objectSpread({},_constants.FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES),{},{id:query.id,queryName:query.name,tags:query.tags,operator:operator},parsedQuerySource)}))}function getQueryOperator(){var query=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_constants.FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES.query;if(_lodash.default.startsWith(query,"NOT (")&&_lodash.default.endsWith(query,")"))return _constants3.OPERATORS_MAP.IS_NOT.value;if(_lodash.default.includes(query,_constants4.QUERY_STRING_QUERY_OPERATORS[_constants3.OPERATORS_MAP.IS_GREATER_EQUAL.value]))return _constants3.OPERATORS_MAP.IS_GREATER_EQUAL.value;if(_lodash.default.includes(query,_constants4.QUERY_STRING_QUERY_OPERATORS[_constants3.OPERATORS_MAP.IS_GREATER.value]))return _constants3.OPERATORS_MAP.IS_GREATER.value;if(_lodash.default.includes(query,_constants4.QUERY_STRING_QUERY_OPERATORS[_constants3.OPERATORS_MAP.IS_LESS_EQUAL.value]))return _constants3.OPERATORS_MAP.IS_LESS_EQUAL.value;if(_lodash.default.includes(query,_constants4.QUERY_STRING_QUERY_OPERATORS[_constants3.OPERATORS_MAP.IS_LESS.value]))return _constants3.OPERATORS_MAP.IS_LESS.value;return _constants3.OPERATORS_MAP.IS.value}function parseQueryString(){var query=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_constants.FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES.query;var operator=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_constants3.OPERATORS_MAP.IS.value;var field=_constants.FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES.field;var parsedQuery=_constants.FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES.query;switch(operator){case _constants3.OPERATORS_MAP.IS.value:parsedQuery=_lodash.default.split(query,'"');field=_lodash.default.trim(parsedQuery[0],'":');parsedQuery=_lodash.default.trim(parsedQuery[1],'"');break;case _constants3.OPERATORS_MAP.IS_NOT.value:parsedQuery=query.substring(5,query.length-1);parsedQuery=_lodash.default.split(parsedQuery,":");field=_lodash.default.trim(parsedQuery[0],'"');parsedQuery=_lodash.default.trim(parsedQuery[1],'"');break;case _constants3.OPERATORS_MAP.IS_GREATER.value:parsedQuery=_lodash.default.split(query,_constants4.QUERY_STRING_QUERY_OPERATORS[_constants3.OPERATORS_MAP.IS_GREATER.value]);field=field=_lodash.default.trim(parsedQuery[0],'"');parsedQuery=_lodash.default.trim(parsedQuery[1],'"');break;case _constants3.OPERATORS_MAP.IS_GREATER_EQUAL.value:parsedQuery=_lodash.default.split(query,_constants4.QUERY_STRING_QUERY_OPERATORS[_constants3.OPERATORS_MAP.IS_GREATER_EQUAL.value]);field=field=_lodash.default.trim(parsedQuery[0],'"');parsedQuery=_lodash.default.trim(parsedQuery[1],'"');break;case _constants3.OPERATORS_MAP.IS_LESS.value:parsedQuery=_lodash.default.split(query,_constants4.QUERY_STRING_QUERY_OPERATORS[_constants3.OPERATORS_MAP.IS_LESS.value]);field=field=_lodash.default.trim(parsedQuery[0],'"');parsedQuery=_lodash.default.trim(parsedQuery[1],'"');break;case _constants3.OPERATORS_MAP.IS_LESS_EQUAL.value:parsedQuery=_lodash.default.split(query,_constants4.QUERY_STRING_QUERY_OPERATORS[_constants3.OPERATORS_MAP.IS_LESS_EQUAL.value]);field=field=_lodash.default.trim(parsedQuery[0],'"');parsedQuery=_lodash.default.trim(parsedQuery[1],'"');break;default:console.log("Unknown query operator detected:",operator)}return{field:field,query:parsedQuery}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CoreContext=exports.CoreConsumer=void 0;var _react=_interopRequireDefault(__webpack_require__(5));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CoreContext=_react.default.createContext({});exports.CoreContext=CoreContext;var CoreConsumer=CoreContext.Consumer;exports.CoreConsumer=CoreConsumer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addAlert=addAlert;exports.addFirstAlert=addFirstAlert;exports.displayAcknowledgedAlertsToast=displayAcknowledgedAlertsToast;exports.filterActiveAlerts=filterActiveAlerts;exports.getInitialSize=getInitialSize;exports.getQueryObjectFromState=getQueryObjectFromState;exports.getURLQueryParams=getURLQueryParams;exports.groupAlertsByTrigger=groupAlertsByTrigger;exports.insertGroupByColumn=insertGroupByColumn;exports.removeColumns=removeColumns;exports.renderEmptyValue=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(70);var _tableUtils=__webpack_require__(55);var _constants2=__webpack_require__(15);var _queryString=_interopRequireDefault(__webpack_require__(32));var _AlertService=__webpack_require__(223);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function groupAlertsByTrigger(alerts){if(_lodash.default.isUndefined(alerts))return _lodash.default.cloneDeep(_constants.EMPTY_ALERT_LIST.alerts);var alertsByTriggers=new Map;alerts.map((function(alert){var triggerID=alert.trigger_id;var newAlertList=alertsByTriggers.has(triggerID)?addAlert(alertsByTriggers.get(triggerID),alert):addFirstAlert(alert);alertsByTriggers.set(triggerID,newAlertList)}));return Array.from(alertsByTriggers,(function(_ref){var _ref2=_slicedToArray(_ref,2),triggerID=_ref2[0],alerts=_ref2[1];return _objectSpread(_objectSpread({},alerts),{},{triggerID:triggerID})}))}function addFirstAlert(firstAlert){var state=firstAlert.state,version=firstAlert.version,trigger_name=firstAlert.trigger_name,severity=firstAlert.severity,start_time=firstAlert.start_time,last_notification_time=firstAlert.last_notification_time,monitor_name=firstAlert.monitor_name,monitor_id=firstAlert.monitor_id;var newAlertList=_lodash.default.cloneDeep(_constants.EMPTY_ALERT_LIST);newAlertList[state]++;newAlertList.total++;newAlertList.alerts.push(firstAlert);return _objectSpread(_objectSpread({},newAlertList),{},{version:version,trigger_name:trigger_name,severity:severity,start_time:start_time,last_notification_time:last_notification_time,monitor_name:monitor_name,monitor_id:monitor_id})}function addAlert(alertList,newAlert){var state=newAlert.state;alertList[state]++;alertList.total++;alertList.alerts.push(newAlert);var end_time=newAlert.end_time,acknowledged_time=newAlert.acknowledged_time;var alertLastUpdateTime=end_time<acknowledged_time?acknowledged_time:end_time;if(alertList.last_notification_time<alertLastUpdateTime)alertList.last_notification_time=alertLastUpdateTime;return alertList}var renderEmptyValue=function renderEmptyValue(value){return value===undefined?_constants2.DEFAULT_EMPTY_DATA:value};exports.renderEmptyValue=renderEmptyValue;function insertGroupByColumn(){var groupBy=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var result=_lodash.default.cloneDeep(_tableUtils.bucketColumns);groupBy.map((function(fieldName){return result.splice(0,0,{field:"agg_alert_content.bucket.key.".concat(fieldName),name:fieldName,render:renderEmptyValue,sortable:false,truncateText:false})}));return result}function removeColumns(){var columnFieldNames=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var allColumns=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return allColumns.filter((function(column){return!_lodash.default.includes(columnFieldNames,column.field)}))}function getInitialSize(){var perAlertView=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var defaultSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_constants.DEFAULT_GET_ALERTS_QUERY_PARAMS.size;return perAlertView&&defaultSize>=0?defaultSize:_constants.MAX_ALERT_COUNT}function displayAcknowledgedAlertsToast(notifications){var successfulCount=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var successfulText="Successfully acknowledged ".concat(successfulCount," ").concat(successfulCount===1?"alert":"alerts",".");if(successfulCount>0)notifications.toasts.addSuccess(successfulText)}function filterActiveAlerts(){var alerts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return _lodash.default.filter(alerts,{state:_constants2.ALERT_STATE.ACTIVE})}function getQueryObjectFromState(_ref3){var page=_ref3.page,size=_ref3.size,search=_ref3.search,sortField=_ref3.sortField,sortDirection=_ref3.sortDirection,severityLevel=_ref3.severityLevel,alertState=_ref3.alertState,monitorIds=_ref3.monitorIds,flyoutIsOpen=_ref3.flyoutIsOpen;return{page:page,size:size,search:search,sortField:sortField,sortDirection:sortDirection,severityLevel:severityLevel,alertState:alertState,monitorIds:monitorIds,flyoutIsOpen:flyoutIsOpen}}function getURLQueryParams(location){var _queryString$parse=_queryString.default.parse(location.search),_queryString$parse$fr=_queryString$parse.from,from=_queryString$parse$fr===void 0?_constants.DEFAULT_GET_ALERTS_QUERY_PARAMS.from:_queryString$parse$fr,_queryString$parse$si=_queryString$parse.size,size=_queryString$parse$si===void 0?_constants.DEFAULT_GET_ALERTS_QUERY_PARAMS.size:_queryString$parse$si,_queryString$parse$se=_queryString$parse.search,search=_queryString$parse$se===void 0?_constants.DEFAULT_GET_ALERTS_QUERY_PARAMS.search:_queryString$parse$se,_queryString$parse$so=_queryString$parse.sortField,sortField=_queryString$parse$so===void 0?_constants.DEFAULT_GET_ALERTS_QUERY_PARAMS.sortField:_queryString$parse$so,_queryString$parse$so2=_queryString$parse.sortDirection,sortDirection=_queryString$parse$so2===void 0?_constants.DEFAULT_GET_ALERTS_QUERY_PARAMS.sortDirection:_queryString$parse$so2,_queryString$parse$se2=_queryString$parse.severityLevel,severityLevel=_queryString$parse$se2===void 0?_constants.DEFAULT_GET_ALERTS_QUERY_PARAMS.severityLevel:_queryString$parse$se2,_queryString$parse$al=_queryString$parse.alertState,alertState=_queryString$parse$al===void 0?_constants.DEFAULT_GET_ALERTS_QUERY_PARAMS.alertState:_queryString$parse$al;return{from:isNaN(parseInt(from,10))?_constants.DEFAULT_GET_ALERTS_QUERY_PARAMS.from:parseInt(from,10),size:isNaN(parseInt(size,10))?_constants.DEFAULT_GET_ALERTS_QUERY_PARAMS.size:parseInt(size,10),search:search,sortField:_lodash.default.includes(_lodash.default.values(_AlertService.GET_ALERTS_SORT_FILTERS),sortField)?sortField:_constants.DEFAULT_GET_ALERTS_QUERY_PARAMS.sortField,sortDirection:sortDirection,severityLevel:severityLevel,alertState:alertState}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MAX_ALERT_COUNT=exports.EMPTY_ALERT_LIST=exports.DEFAULT_PAGE_SIZE_OPTIONS=exports.DEFAULT_GET_ALERTS_QUERY_PARAMS_BY_TRIGGER=exports.DEFAULT_GET_ALERTS_QUERY_PARAMS=void 0;var EMPTY_ALERT_LIST={ACTIVE:0,ACKNOWLEDGED:0,ERROR:0,total:0,alerts:[]};exports.EMPTY_ALERT_LIST=EMPTY_ALERT_LIST;var MAX_ALERT_COUNT=1e4;exports.MAX_ALERT_COUNT=MAX_ALERT_COUNT;var DEFAULT_PAGE_SIZE_OPTIONS=[5,10,20,50];exports.DEFAULT_PAGE_SIZE_OPTIONS=DEFAULT_PAGE_SIZE_OPTIONS;var DEFAULT_GET_ALERTS_QUERY_PARAMS={alertState:"ALL",from:0,search:"",severityLevel:"ALL",size:20,sortDirection:"desc",sortField:"start_time"};exports.DEFAULT_GET_ALERTS_QUERY_PARAMS=DEFAULT_GET_ALERTS_QUERY_PARAMS;var DEFAULT_GET_ALERTS_QUERY_PARAMS_BY_TRIGGER={alertState:"ALL",from:0,search:"",severityLevel:"ALL",size:MAX_ALERT_COUNT,sortDirection:"desc",sortField:"start_time"};exports.DEFAULT_GET_ALERTS_QUERY_PARAMS_BY_TRIGGER=DEFAULT_GET_ALERTS_QUERY_PARAMS_BY_TRIGGER},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.NO_FINDINGS_TEXT=exports.MAX_FINDINGS_COUNT=exports.GET_FINDINGS_PREVIEW_PARAMS=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _queryString=_interopRequireDefault(__webpack_require__(32));var _eui=__webpack_require__(6);var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _constants=__webpack_require__(45);var _FindingService=__webpack_require__(136);var _findingsUtils=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var GET_FINDINGS_PREVIEW_PARAMS={id:_FindingService.DEFAULT_GET_FINDINGS_PARAMS.id,from:_FindingService.DEFAULT_GET_FINDINGS_PARAMS.from,search:_FindingService.DEFAULT_GET_FINDINGS_PARAMS.search,size:10,sortDirection:_FindingService.DEFAULT_GET_FINDINGS_PARAMS.sortDirection,sortField:_FindingService.GET_FINDINGS_SORT_FIELDS.TIMESTAMP};exports.GET_FINDINGS_PREVIEW_PARAMS=GET_FINDINGS_PREVIEW_PARAMS;var NO_FINDINGS_TEXT="There are no existing findings. Adjust document level queries to generate findings. Once a document is indexed that meets the query condition, the finding will show in this table.";exports.NO_FINDINGS_TEXT=NO_FINDINGS_TEXT;var MAX_FINDINGS_COUNT=1e4;exports.MAX_FINDINGS_COUNT=MAX_FINDINGS_COUNT;var FindingsDashboard=function(_Component){_inherits(FindingsDashboard,_Component);var _super=_createSuper(FindingsDashboard);function FindingsDashboard(props){var _this;_classCallCheck(this,FindingsDashboard);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"onTableChange",(function(_ref){var _ref$page=_ref.page,tablePage=_ref$page===void 0?{}:_ref$page,_ref$sort=_ref.sort,sort=_ref$sort===void 0?{}:_ref$sort;var _tablePage$index=tablePage.index,page=_tablePage$index===void 0?0:_tablePage$index,_tablePage$size=tablePage.size,size=_tablePage$size===void 0?10:_tablePage$size;var sortField=sort.field,sortDirection=sort.direction;_this.setState({page:page,size:size,sortField:sortField,sortDirection:sortDirection})}));var _props$isPreview=props.isPreview,isPreview=_props$isPreview===void 0?false:_props$isPreview;var _ref2=isPreview?GET_FINDINGS_PREVIEW_PARAMS:_this.getURLQueryParams(),id=_ref2.id,from=_ref2.from,_size=_ref2.size,search=_ref2.search,_sortField=_ref2.sortField,_sortDirection=_ref2.sortDirection;_this.state={loadingFindings:true,findings:[],totalFindings:0,page:Math.floor(from/_size),id:id,from:from,size:_size,search:search,sortField:_sortField,sortDirection:_sortDirection};return _this}_createClass(FindingsDashboard,[{key:"componentDidMount",value:function componentDidMount(){var _this$props$isPreview=this.props.isPreview,isPreview=_this$props$isPreview===void 0?false:_this$props$isPreview;if(isPreview)this.getPreviewFindingsDocuments();else this.getFindings()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var _this$props$isPreview2=this.props.isPreview,isPreview=_this$props$isPreview2===void 0?false:_this$props$isPreview2;var prevQuery=this.getQueryObjectFromState(prevState);var currQuery=this.getQueryObjectFromState(this.state);if(!_lodash.default.isEqual(prevQuery,currQuery)){if(isPreview)this.sortPreviewFindings(prevState.sortDirection,this.state.sortDirection);else this.getFindings()}}},{key:"getURLQueryParams",value:function getURLQueryParams(){var location=this.props.location;var _queryString$parse=_queryString.default.parse(location.search),_queryString$parse$id=_queryString$parse.id,id=_queryString$parse$id===void 0?_FindingService.DEFAULT_GET_FINDINGS_PARAMS.id:_queryString$parse$id,_queryString$parse$fr=_queryString$parse.from,from=_queryString$parse$fr===void 0?_FindingService.DEFAULT_GET_FINDINGS_PARAMS.from:_queryString$parse$fr,_queryString$parse$si=_queryString$parse.size,size=_queryString$parse$si===void 0?_FindingService.DEFAULT_GET_FINDINGS_PARAMS.size:_queryString$parse$si,_queryString$parse$se=_queryString$parse.search,search=_queryString$parse$se===void 0?_FindingService.DEFAULT_GET_FINDINGS_PARAMS.search:_queryString$parse$se,_queryString$parse$so=_queryString$parse.sortField,sortField=_queryString$parse$so===void 0?_FindingService.DEFAULT_GET_FINDINGS_PARAMS.sortField:_queryString$parse$so,_queryString$parse$so2=_queryString$parse.sortDirection,sortDirection=_queryString$parse$so2===void 0?_FindingService.DEFAULT_GET_FINDINGS_PARAMS.sortDirection:_queryString$parse$so2;var parsedSize=isNaN(parseInt(size,10))?_FindingService.DEFAULT_GET_FINDINGS_PARAMS.size:parseInt(size,10);return{id:id,from:isNaN(parseInt(from,10))?_FindingService.DEFAULT_GET_FINDINGS_PARAMS.from:parseInt(from,10),size:_lodash.default.includes(_constants.DEFAULT_PAGE_SIZE_OPTIONS,parsedSize)?parsedSize:_FindingService.DEFAULT_GET_FINDINGS_PARAMS.size,search:search,sortField:_lodash.default.includes(_lodash.default.values(_FindingService.GET_FINDINGS_SORT_FIELDS),sortField)?sortField:_FindingService.DEFAULT_GET_FINDINGS_PARAMS.sortField,sortDirection:sortDirection}}},{key:"getQueryObjectFromState",value:function getQueryObjectFromState(_ref3){var id=_ref3.id,from=_ref3.from,size=_ref3.size,search=_ref3.search,sortField=_ref3.sortField,sortDirection=_ref3.sortDirection;return{id:id,from:from,size:size,search:search,sortField:sortField,sortDirection:sortDirection}}},{key:"getFindings",value:function(){var _getFindings2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,httpClient,history,monitorId,location,notifications,_this$state,id,from,size,search,sortField,sortDirection,results;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({loadingFindings:true});_this$props=this.props,httpClient=_this$props.httpClient,history=_this$props.history,monitorId=_this$props.monitorId,location=_this$props.location,notifications=_this$props.notifications;_this$state=this.state,id=_this$state.id,from=_this$state.from,size=_this$state.size,search=_this$state.search,sortField=_this$state.sortField,sortDirection=_this$state.sortDirection;_context.next=5;return(0,_findingsUtils.getFindings)({id:id,from:from,size:size,search:search,sortField:sortField,sortDirection:sortDirection,httpClient:httpClient,history:history,location:location,monitorId:monitorId,notifications:notifications});case 5:results=_context.sent;this.setState(_objectSpread(_objectSpread({},results),{},{loadingFindings:false}));case 7:case"end":return _context.stop()}}}),_callee,this)})));function getFindings(){return _getFindings2.apply(this,arguments)}return getFindings}()},{key:"getPreviewFindingsDocuments",value:function getPreviewFindingsDocuments(){this.setState({loadingFindings:true});var _this$props2=this.props,index=_this$props2.index,queries=_this$props2.queries,previewResponse=_this$props2.previewResponse;this.setState({loadingFindings:false,findings:(0,_findingsUtils.parseFindingsForPreview)(previewResponse,index,queries)})}},{key:"sortPreviewFindings",value:function sortPreviewFindings(prevSortDirection,currSortDirection){var _this$state2=this.state,findings=_this$state2.findings,sortField=_this$state2.sortField;var sortedFindings;switch(sortField){case"document_list":sortedFindings=_lodash.default.sortBy(findings,"related_doc_id");break;case"queries":sortedFindings=_lodash.default.sortBy(findings,"queries");break;default:sortedFindings=_lodash.default.sortBy(findings,"timestamp")}if(prevSortDirection!==currSortDirection)sortedFindings=_lodash.default.reverse(sortedFindings);this.setState({findings:sortedFindings})}},{key:"render",value:function render(){var _this2=this;var _this$props3=this.props,_this$props3$isAlerts=_this$props3.isAlertsFlyout,isAlertsFlyout=_this$props3$isAlerts===void 0?false:_this$props3$isAlerts,_this$props3$isPrevie=_this$props3.isPreview,isPreview=_this$props3$isPrevie===void 0?false:_this$props3$isPrevie;var _this$state3=this.state,loadingFindings=_this$state3.loadingFindings,findings=_this$state3.findings,totalFindings=_this$state3.totalFindings,search=_this$state3.search,size=_this$state3.size,sortField=_this$state3.sortField,sortDirection=_this$state3.sortDirection,page=_this$state3.page;var pagination={pageIndex:page,pageSize:size,totalItemCount:totalFindings,pageSizeOptions:_constants.DEFAULT_PAGE_SIZE_OPTIONS};var sorting={sort:{direction:sortDirection,field:sortField}};var getItemId=function getItemId(item){return item.id};var paginatedFindings=findings.slice(page*size,page*size+size);return _react.default.createElement(_ContentPanel.default,{title:"Document findings",description:isPreview?"Showing first ".concat(GET_FINDINGS_PREVIEW_PARAMS.size," document findings."):undefined,titleSize:"s",bodyStyles:{padding:"initial"}},!isPreview&&_react.default.createElement(_eui.EuiFlexGroup,{style:{padding:"0px 5px"}},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldSearch,{fullWidth:true,placeholder:"Search for a document ID",onChange:function onChange(selection){_this2.setState({page:0,search:selection.target.value});_this2.getFindings()},value:search})),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{justifyContent:"center"}},_react.default.createElement(_eui.EuiPagination,{pageCount:Math.ceil(totalFindings/size)||1,activePage:page,onPageClick:function onPageClick(page){return _this2.setState({page:page})}}))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"}),_react.default.createElement(_eui.EuiBasicTable,{items:loadingFindings?[]:paginatedFindings,itemId:getItemId,columns:(0,_findingsUtils.findingsColumnTypes)(isAlertsFlyout),pagination:isPreview?undefined:pagination,sorting:sorting,isSelectable:false,onChange:this.onTableChange,loading:loadingFindings,noItemsMessage:loadingFindings?_react.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"}):_react.default.createElement(_eui.EuiEmptyPrompt,{style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,NO_FINDINGS_TEXT))})}))}}]);return FindingsDashboard}(_react.Component);exports.default=FindingsDashboard},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SUPPORTED_DOC_LEVEL_QUERY_OPERATORS=exports.QUERY_STRING_QUERY_OPERATORS=exports.LEGACY_QUERY_OPERATORS=exports.DOC_LEVEL_QUERY_MAP=exports.DOC_LEVEL_INPUT_FIELD=void 0;var _constants=__webpack_require__(23);var _QUERY_STRING_QUERY_O,_DOC_LEVEL_QUERY_MAP;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DOC_LEVEL_INPUT_FIELD="doc_level_input";exports.DOC_LEVEL_INPUT_FIELD=DOC_LEVEL_INPUT_FIELD;var SUPPORTED_DOC_LEVEL_QUERY_OPERATORS=[_constants.OPERATORS_MAP.IS.value,_constants.OPERATORS_MAP.IS_NOT.value,_constants.OPERATORS_MAP.IS_GREATER.value,_constants.OPERATORS_MAP.IS_GREATER_EQUAL.value,_constants.OPERATORS_MAP.IS_LESS.value,_constants.OPERATORS_MAP.IS_LESS_EQUAL.value];exports.SUPPORTED_DOC_LEVEL_QUERY_OPERATORS=SUPPORTED_DOC_LEVEL_QUERY_OPERATORS;var LEGACY_QUERY_OPERATORS={IS:{text:"is",value:"=="},IS_NOT:{text:"is not",value:"!="}};exports.LEGACY_QUERY_OPERATORS=LEGACY_QUERY_OPERATORS;var QUERY_STRING_QUERY_OPERATORS=(_QUERY_STRING_QUERY_O={},_defineProperty(_QUERY_STRING_QUERY_O,_constants.OPERATORS_MAP.IS_GREATER.value,":>"),_defineProperty(_QUERY_STRING_QUERY_O,_constants.OPERATORS_MAP.IS_GREATER_EQUAL.value,":>="),_defineProperty(_QUERY_STRING_QUERY_O,_constants.OPERATORS_MAP.IS_LESS.value,":<"),_defineProperty(_QUERY_STRING_QUERY_O,_constants.OPERATORS_MAP.IS_LESS_EQUAL.value,":<="),_QUERY_STRING_QUERY_O);exports.QUERY_STRING_QUERY_OPERATORS=QUERY_STRING_QUERY_OPERATORS;var DOC_LEVEL_QUERY_MAP=(_DOC_LEVEL_QUERY_MAP={},_defineProperty(_DOC_LEVEL_QUERY_MAP,LEGACY_QUERY_OPERATORS.IS.value,{query:function query(_ref){var field=_ref.field,_query=_ref.query;return"".concat(field,':"').concat(_query,'"')}}),_defineProperty(_DOC_LEVEL_QUERY_MAP,LEGACY_QUERY_OPERATORS.IS_NOT.value,{query:function query(_ref2){var field=_ref2.field,_query2=_ref2.query;return"NOT (".concat(field,':"').concat(_query2,'")')}}),_defineProperty(_DOC_LEVEL_QUERY_MAP,_constants.OPERATORS_MAP.IS.value,{query:function query(_ref3){var field=_ref3.field,_query3=_ref3.query;return"".concat(field,':"').concat(_query3,'"')}}),_defineProperty(_DOC_LEVEL_QUERY_MAP,_constants.OPERATORS_MAP.IS_NOT.value,{query:function query(_ref4){var field=_ref4.field,_query4=_ref4.query;return"NOT (".concat(field,':"').concat(_query4,'")')}}),_defineProperty(_DOC_LEVEL_QUERY_MAP,_constants.OPERATORS_MAP.IS_GREATER.value,{query:function query(_ref5){var field=_ref5.field,_query5=_ref5.query;return"".concat(field).concat(QUERY_STRING_QUERY_OPERATORS[_constants.OPERATORS_MAP.IS_GREATER.value]).concat(_query5)}}),_defineProperty(_DOC_LEVEL_QUERY_MAP,_constants.OPERATORS_MAP.IS_GREATER_EQUAL.value,{query:function query(_ref6){var field=_ref6.field,_query6=_ref6.query;return"".concat(field).concat(QUERY_STRING_QUERY_OPERATORS[_constants.OPERATORS_MAP.IS_GREATER_EQUAL.value]).concat(_query6)}}),_defineProperty(_DOC_LEVEL_QUERY_MAP,_constants.OPERATORS_MAP.IS_LESS.value,{query:function query(_ref7){var field=_ref7.field,_query7=_ref7.query;return"".concat(field).concat(QUERY_STRING_QUERY_OPERATORS[_constants.OPERATORS_MAP.IS_LESS.value]).concat(_query7)}}),_defineProperty(_DOC_LEVEL_QUERY_MAP,_constants.OPERATORS_MAP.IS_LESS_EQUAL.value,{query:function query(_ref8){var field=_ref8.field,_query8=_ref8.query;return"".concat(field).concat(QUERY_STRING_QUERY_OPERATORS[_constants.OPERATORS_MAP.IS_LESS_EQUAL.value]).concat(_query8)}}),_DOC_LEVEL_QUERY_MAP);exports.DOC_LEVEL_QUERY_MAP=DOC_LEVEL_QUERY_MAP},,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateWhereFilters=exports.validateWhereFilter=exports.validateRange=exports.isRangeOperator=exports.isNullOperator=exports.getOperators=exports.displayText=exports.DEFAULT_WHERE_EXPRESSION_TEXT=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(23);var _DefineBucketLevelTrigger=__webpack_require__(63);var _constants2=__webpack_require__(15);var _constants3=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var DEFAULT_WHERE_EXPRESSION_TEXT="All fields are included";exports.DEFAULT_WHERE_EXPRESSION_TEXT=DEFAULT_WHERE_EXPRESSION_TEXT;var getOperators=function getOperators(){var fieldType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_constants2.DATA_TYPES.TEXT;var supportedOperators=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Object.values(_constants.OPERATORS_MAP);return supportedOperators.reduce((function(acc,currentOperator){return currentOperator.dataTypes.includes(fieldType)?[].concat(_toConsumableArray(acc),[{text:currentOperator.text,value:currentOperator.value}]):acc}),[])};exports.getOperators=getOperators;var isRangeOperator=function isRangeOperator(selectedOperator){return[_constants.OPERATORS_MAP.IN_RANGE.value,_constants.OPERATORS_MAP.NOT_IN_RANGE.value].includes(selectedOperator)};exports.isRangeOperator=isRangeOperator;var isNullOperator=function isNullOperator(selectedOperator){return[_constants.OPERATORS_MAP.IS_NULL.value,_constants.OPERATORS_MAP.IS_NOT_NULL.value].includes(selectedOperator)};exports.isNullOperator=isNullOperator;var displayText=function displayText(whereValues){var comparisonOperators=_lodash.default.concat(Object.values(_constants.OPERATORS_MAP),_DefineBucketLevelTrigger.TRIGGER_COMPARISON_OPERATORS);var whereFieldName=_lodash.default.get(whereValues,"fieldName[0].label",undefined);if(!whereFieldName)return DEFAULT_WHERE_EXPRESSION_TEXT;var selectedOperator=_lodash.default.get(whereValues,"operator",_constants.OPERATORS_MAP.IS);var operatorObj=comparisonOperators.find((function(operator){return operator.value===selectedOperator}))||{};var initialText="".concat(whereFieldName," ").concat(operatorObj.text||"");if(isRangeOperator(selectedOperator)){var startRange=_lodash.default.get(whereValues,"fieldRangeStart");var endRange=_lodash.default.get(whereValues,"fieldRangeEnd");return"".concat(initialText," from ").concat(startRange," to ").concat(endRange)}else if(isNullOperator(selectedOperator)){return"".concat(initialText)}else{var value=_lodash.default.get(whereValues,"fieldValue","");return"".concat(initialText," ").concat(value)}};exports.displayText=displayText;var validateRange=function validateRange(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var filter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_constants3.FORMIK_INITIAL_WHERE_EXPRESSION_VALUES;if(_lodash.default.isEmpty(value===null||value===void 0?void 0:value.toString()))return"Required.";if(filter.fieldRangeEnd<value||filter.fieldRangeStart===filter.fieldRangeEnd)return"Start should be less than end range.";if(value<filter.fieldRangeStart)return"End should be greater than start range.";return undefined};exports.validateRange=validateRange;var validateWhereFilter=function validateWhereFilter(){var _filter$fieldValue;var filter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_constants3.FORMIK_INITIAL_WHERE_EXPRESSION_VALUES;var fieldName=_lodash.default.get(filter,"fieldName[0]",_constants3.FORMIK_INITIAL_WHERE_EXPRESSION_VALUES.fieldName[0]);var fieldOperator=_lodash.default.get(filter,"operator",_constants3.FORMIK_INITIAL_WHERE_EXPRESSION_VALUES.operator);var filterIsValid=!_lodash.default.isEmpty(fieldName.label);switch(fieldOperator){case _constants.OPERATORS_MAP.IS:case _constants.OPERATORS_MAP.IS_NOT:case _constants.OPERATORS_MAP.IS_GREATER:case _constants.OPERATORS_MAP.IS_GREATER_EQUAL:case _constants.OPERATORS_MAP.IS_LESS:case _constants.OPERATORS_MAP.IS_LESS_EQUAL:case _constants.OPERATORS_MAP.STARTS_WITH:case _constants.OPERATORS_MAP.ENDS_WITH:case _constants.OPERATORS_MAP.CONTAINS:case _constants.OPERATORS_MAP.NOT_CONTAINS:filterIsValid=filterIsValid&&!_lodash.default.isEmpty((_filter$fieldValue=filter.fieldValue)===null||_filter$fieldValue===void 0?void 0:_filter$fieldValue.toString());break;case _constants.OPERATORS_MAP.IN_RANGE:case _constants.OPERATORS_MAP.NOT_IN_RANGE:filterIsValid=filterIsValid&&!validateRange(filter.fieldRangeStart,filter)&&!validateRange(filter.fieldRangeEnd,filter);break;case _constants.OPERATORS_MAP.IS_NULL:case _constants.OPERATORS_MAP.IS_NOT_NULL:break;default:console.log("Unknown query operator detected:",fieldOperator);filterIsValid=false}return filterIsValid};exports.validateWhereFilter=validateWhereFilter;var validateWhereFilters=function validateWhereFilters(){var filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return filters.filter((function(filter){return validateWhereFilter(filter)})).length===filters.length};exports.validateWhereFilters=validateWhereFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildRequest=void 0;var _formikToMonitor=__webpack_require__(66);var _constants=__webpack_require__(15);var buildRequest=function buildRequest(values){var uiGraphQuery=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return values.searchType===_constants.SEARCH_TYPE.GRAPH?buildGraphSearchRequest(values,uiGraphQuery):buildQuerySearchRequest(values)};exports.buildRequest=buildRequest;function buildQuerySearchRequest(values){switch(values.monitor_type){case _constants.MONITOR_TYPE.DOC_LEVEL:return(0,_formikToMonitor.formikToDocLevelInput)(values);default:var indices=(0,_formikToMonitor.formikToIndices)(values);var query=JSON.parse(values.query);return{search:{query:query,indices:indices}}}}function buildGraphSearchRequest(values,uiGraphQuery){switch(values.monitor_type){case _constants.MONITOR_TYPE.DOC_LEVEL:return(0,_formikToMonitor.formikToDocLevelInput)(values);default:var query=uiGraphQuery?(0,_formikToMonitor.formikToUiGraphQuery)(values):(0,_formikToMonitor.formikToGraphQuery)(values);var indices=(0,_formikToMonitor.formikToIndices)(values);return{search:{query:query,indices:indices}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formikInitialValues=exports.URL_TYPE=exports.CONTENT_TYPE_KEY=void 0;var _constants=__webpack_require__(31);var _formikInitialValues;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var URL_TYPE={FULL_URL:"url",ATTRIBUTE_URL:"custom_url"};exports.URL_TYPE=URL_TYPE;var CONTENT_TYPE_KEY="Content-Type";exports.CONTENT_TYPE_KEY=CONTENT_TYPE_KEY;var DEFAULT_CONTENT_VALUE="application/json";var formikInitialValues=(_formikInitialValues={urlType:"url",name:"",type:"slack"},_defineProperty(_formikInitialValues,_constants.DESTINATION_TYPE.SLACK,{url:""}),_defineProperty(_formikInitialValues,_constants.DESTINATION_TYPE.CHIME,{url:""}),_defineProperty(_formikInitialValues,_constants.DESTINATION_TYPE.CUSTOM_HOOK,{urlType:URL_TYPE.FULL_URL,scheme:"HTTPS",method:"POST",headerParams:[{key:CONTENT_TYPE_KEY,value:DEFAULT_CONTENT_VALUE}],queryParams:[{key:"",value:""}]}),_defineProperty(_formikInitialValues,_constants.DESTINATION_TYPE.EMAIL,{emailSender:[],emailRecipients:[]}),_formikInitialValues);exports.formikInitialValues=formikInitialValues},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RECIPIENT_TYPE=void 0;var RECIPIENT_TYPE={EMAIL:"email",EMAIL_GROUP:"email_group"};exports.RECIPIENT_TYPE=RECIPIENT_TYPE},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _DashboardControls=_interopRequireDefault(__webpack_require__(222));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_DashboardControls.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateDocLevelGraphQuery=exports.validDocLevelGraphQueries=exports.getDocLevelQueryOperators=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(72);var _constants2=__webpack_require__(23);var _constants3=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getDocLevelQueryOperators=function getDocLevelQueryOperators(){return _constants.SUPPORTED_DOC_LEVEL_QUERY_OPERATORS.map((function(type){return _constants2.OPERATORS_MAP[_lodash.default.toUpper(type)]}))};exports.getDocLevelQueryOperators=getDocLevelQueryOperators;var validateDocLevelGraphQuery=function validateDocLevelGraphQuery(){var _query$query;var query=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_constants3.FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES;return!_lodash.default.isEmpty(query.queryName)&&!_lodash.default.isEmpty(query.field)&&!_lodash.default.isEmpty(query.operator)&&!_lodash.default.isEmpty((_query$query=query.query)===null||_query$query===void 0?void 0:_query$query.toString())};exports.validateDocLevelGraphQuery=validateDocLevelGraphQuery;var validDocLevelGraphQueries=function validDocLevelGraphQueries(){var queries=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return!_lodash.default.isEmpty(queries)&&!queries.some((function(query){return!validateDocLevelGraphQuery(query)}))};exports.validDocLevelGraphQueries=validDocLevelGraphQueries},,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateSenderName=exports.validatePort=exports.validateHost=exports.validateEmailGroupName=exports.validateEmailGroupEmails=exports.validateEmail=exports.isValidEmail=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var validateSenderName=function validateSenderName(senders){return function(value){if(!value)return"Required";if(!/^[A-Z0-9_]+$/i.test(value))return"Invalid sender name";var matches=senders.filter((function(sender){return sender.name===value}));if(matches.length>1)return"Sender name is already being used"}};exports.validateSenderName=validateSenderName;var validateEmailGroupName=function validateEmailGroupName(emailGroups){return function(value){if(!value)return"Required";if(!/^[A-Z0-9_-]+$/i.test(value)){return"Invalid email group name"}var matches=emailGroups.filter((function(emailGroup){return emailGroup.name===value}));if(matches.length>1)return"Email group name is already being used"}};exports.validateEmailGroupName=validateEmailGroupName;var validateEmailGroupEmails=function validateEmailGroupEmails(options){if(_lodash.default.isEmpty(options))return"Must specify an email";var invalidEmails=options.map((function(option){return option.label})).filter((function(email){return!isValidEmail(email)}));if(invalidEmails.length>0){return"Invalid emails: ".concat(invalidEmails.join(", "))}};exports.validateEmailGroupEmails=validateEmailGroupEmails;var validateEmail=function validateEmail(value){if(!value)return"Required";if(!isValidEmail(value)){return"Invalid email address"}};exports.validateEmail=validateEmail;var validateHost=function validateHost(value){if(!value)return"Required"};exports.validateHost=validateHost;var validatePort=function validatePort(value){if(!value)return"Required"};exports.validatePort=validatePort;var isValidEmail=function isValidEmail(value){return/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i.test(value)};exports.isValidEmail=isValidEmail},,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ForExpression",{enumerable:true,get:function get(){return _ForExpression.default}});Object.defineProperty(exports,"GroupByExpression",{enumerable:true,get:function get(){return _GroupByExpression.default}});Object.defineProperty(exports,"GroupByItem",{enumerable:true,get:function get(){return _GroupByItem.default}});Object.defineProperty(exports,"GroupByPopover",{enumerable:true,get:function get(){return _GroupByPopover.default}});Object.defineProperty(exports,"MetricExpression",{enumerable:true,get:function get(){return _MetricExpression.default}});Object.defineProperty(exports,"MetricItem",{enumerable:true,get:function get(){return _MetricItem.default}});Object.defineProperty(exports,"MetricPopover",{enumerable:true,get:function get(){return _MetricPopover.default}});Object.defineProperty(exports,"OfExpression",{enumerable:true,get:function get(){return _OfExpression.default}});Object.defineProperty(exports,"OverExpression",{enumerable:true,get:function get(){return _OverExpression.default}});Object.defineProperty(exports,"WhenExpression",{enumerable:true,get:function get(){return _WhenExpression.default}});Object.defineProperty(exports,"WhereExpression",{enumerable:true,get:function get(){return _WhereExpression.default}});var _ForExpression=_interopRequireDefault(__webpack_require__(458));var _GroupByExpression=_interopRequireDefault(__webpack_require__(190));var _GroupByItem=_interopRequireDefault(__webpack_require__(191));var _GroupByPopover=_interopRequireDefault(__webpack_require__(460));var _MetricExpression=_interopRequireDefault(__webpack_require__(192));var _MetricItem=_interopRequireDefault(__webpack_require__(461));var _MetricPopover=_interopRequireDefault(__webpack_require__(193));var _OfExpression=_interopRequireDefault(__webpack_require__(462));var _OverExpression=_interopRequireDefault(__webpack_require__(463));var _WhenExpression=_interopRequireDefault(__webpack_require__(464));var _WhereExpression=_interopRequireDefault(__webpack_require__(194));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.NO_ACTIONABLE_ALERT_SELECTIONS=exports.NOTIFY_OPTIONS_VALUES=exports.NOTIFY_OPTIONS_LABELS=exports.DEFAULT_ACTIONABLE_ALERTS_SELECTIONS=exports.ACTIONABLE_ALERTS_OPTIONS_VALUES=exports.ACTIONABLE_ALERTS_OPTIONS_LABELS=exports.ACTIONABLE_ALERTS_OPTIONS=void 0;exports.default=Message;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _mustache=_interopRequireDefault(__webpack_require__(472));var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _constants=__webpack_require__(0);var _constants2=__webpack_require__(15);var _OverviewStat=_interopRequireDefault(__webpack_require__(195));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var NOTIFY_OPTIONS_VALUES={PER_ALERT:"per_alert",PER_EXECUTION:"per_execution"};exports.NOTIFY_OPTIONS_VALUES=NOTIFY_OPTIONS_VALUES;var NOTIFY_OPTIONS_LABELS={PER_ALERT:"Per alert",PER_EXECUTION:"Per execution"};exports.NOTIFY_OPTIONS_LABELS=NOTIFY_OPTIONS_LABELS;var ACTIONABLE_ALERTS_OPTIONS_VALUES={COMPLETED:"COMPLETED",DEDUPED:"DEDUPED",NEW:"NEW"};exports.ACTIONABLE_ALERTS_OPTIONS_VALUES=ACTIONABLE_ALERTS_OPTIONS_VALUES;var ACTIONABLE_ALERTS_OPTIONS_LABELS={COMPLETED:"Completed",DEDUPED:"De-duplicated",NEW:"New"};exports.ACTIONABLE_ALERTS_OPTIONS_LABELS=ACTIONABLE_ALERTS_OPTIONS_LABELS;var ACTIONABLE_ALERTS_OPTIONS=[{value:ACTIONABLE_ALERTS_OPTIONS_VALUES.COMPLETED,label:ACTIONABLE_ALERTS_OPTIONS_LABELS.COMPLETED},{value:ACTIONABLE_ALERTS_OPTIONS_VALUES.DEDUPED,label:ACTIONABLE_ALERTS_OPTIONS_LABELS.DEDUPED},{value:ACTIONABLE_ALERTS_OPTIONS_VALUES.NEW,label:ACTIONABLE_ALERTS_OPTIONS_LABELS.NEW}];exports.ACTIONABLE_ALERTS_OPTIONS=ACTIONABLE_ALERTS_OPTIONS;var DEFAULT_ACTIONABLE_ALERTS_SELECTIONS=[{value:ACTIONABLE_ALERTS_OPTIONS_VALUES.DEDUPED,label:ACTIONABLE_ALERTS_OPTIONS_LABELS.DEDUPED},{value:ACTIONABLE_ALERTS_OPTIONS_VALUES.NEW,label:ACTIONABLE_ALERTS_OPTIONS_LABELS.NEW}];exports.DEFAULT_ACTIONABLE_ALERTS_SELECTIONS=DEFAULT_ACTIONABLE_ALERTS_SELECTIONS;var NO_ACTIONABLE_ALERT_SELECTIONS="Must select at least 1 option.";exports.NO_ACTIONABLE_ALERT_SELECTIONS=NO_ACTIONABLE_ALERT_SELECTIONS;var renderSendTestMessageButton=function renderSendTestMessageButton(index,sendTestMessage,isBucketLevelMonitor,displayPreview,setDisplayPreview,fieldPath){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexStart"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiCheckbox,{id:"".concat(fieldPath,"actions.").concat(index),label:"Preview message",checked:displayPreview,onChange:function onChange(e){return setDisplayPreview(e)}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexEnd",direction:"column",gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){sendTestMessage(index)}},_react.default.createElement(_eui.EuiText,null,"Send test message"))),isBucketLevelMonitor?_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"xs"},"For bucket-level triggers, at least one bucket of data is required from the monitor input query.")):null)))};var validateActionableAlertsSelections=function validateActionableAlertsSelections(options){if(!_lodash.default.isArray(options)||_lodash.default.isEmpty(options))return NO_ACTIONABLE_ALERT_SELECTIONS};function Message(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props,action=_ref.action,context=_ref.context,index=_ref.index,_ref$isSubjectDisable=_ref.isSubjectDisabled,isSubjectDisabled=_ref$isSubjectDisable===void 0?false:_ref$isSubjectDisable,sendTestMessage=_ref.sendTestMessage,fieldPath=_ref.fieldPath,values=_ref.values;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),displayPreview=_useState2[0],setDisplayPreview=_useState2[1];var onDisplayPreviewChange=function onDisplayPreviewChange(e){return setDisplayPreview(e.target.checked)};var monitorType=_lodash.default.get(context,"ctx.monitor.monitor_type",_constants2.MONITOR_TYPE.QUERY_LEVEL);var editableActionExecutionPolicy=monitorType===_constants2.MONITOR_TYPE.BUCKET_LEVEL||monitorType===_constants2.MONITOR_TYPE.DOC_LEVEL;var actionPath="".concat(fieldPath,"actions.").concat(index);var actionExecutionPolicyPath=editableActionExecutionPolicy?"".concat(actionPath,".action_execution_policy"):actionPath;var actionableAlertsSelectionsPath="".concat(actionExecutionPolicyPath,".action_execution_scope.").concat(NOTIFY_OPTIONS_VALUES.PER_ALERT,".actionable_alerts");var defaultNotifyOption;switch(monitorType){case _constants2.MONITOR_TYPE.BUCKET_LEVEL:defaultNotifyOption=NOTIFY_OPTIONS_VALUES.PER_ALERT;break;case _constants2.MONITOR_TYPE.DOC_LEVEL:defaultNotifyOption=NOTIFY_OPTIONS_VALUES.PER_EXECUTION;break;default:defaultNotifyOption=NOTIFY_OPTIONS_VALUES.PER_EXECUTION}var actionExecutionScopeId=editableActionExecutionPolicy?_lodash.default.get(action,"action_execution_policy.action_execution_scope",defaultNotifyOption):"";if(!_lodash.default.isString(actionExecutionScopeId))actionExecutionScopeId=_lodash.default.keys(actionExecutionScopeId)[0];var actionableAlertsSelections;var displayActionableAlertsOptions;var displayThrottlingSettings;switch(monitorType){case _constants2.MONITOR_TYPE.BUCKET_LEVEL:displayActionableAlertsOptions=true;displayThrottlingSettings=actionExecutionScopeId===NOTIFY_OPTIONS_VALUES.PER_ALERT;actionableAlertsSelections=_lodash.default.get(values,actionableAlertsSelectionsPath);break;case _constants2.MONITOR_TYPE.DOC_LEVEL:displayActionableAlertsOptions=false;displayThrottlingSettings=false;actionableAlertsSelections=[];_lodash.default.set(action,"action_execution_policy.action_execution_scope",actionExecutionScopeId);break;default:displayActionableAlertsOptions=false;displayThrottlingSettings=actionExecutionScopeId!==NOTIFY_OPTIONS_VALUES.PER_EXECUTION}if(actionExecutionScopeId===NOTIFY_OPTIONS_VALUES.PER_ALERT){if(_lodash.default.get(values,"".concat(actionPath,".throttle.value"))===undefined)_lodash.default.set(values,"".concat(actionPath,".throttle.value"),10);if(actionableAlertsSelections===undefined)actionableAlertsSelections=DEFAULT_ACTIONABLE_ALERTS_SELECTIONS;_lodash.default.set(values,actionableAlertsSelectionsPath,actionableAlertsSelections)}if(!displayThrottlingSettings)_lodash.default.set(values,"".concat(actionPath,".throttle_enabled"),false);var preview="";try{preview=_mustache.default.render(action.message_template.source,context)}catch(err){preview=err.message;console.error("There was an error rendering mustache template",err)}return _react.default.createElement("div",null,!isSubjectDisabled?_react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(fieldPath,"actions.").concat(index,".subject_template.source"),formRow:true,fieldProps:{validate:_validate.required},rowProps:{label:"Message subject",style:{maxWidth:"100%"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Enter a subject",fullWidth:true,isInvalid:_validate.isInvalid}}):null,_react.default.createElement(_FormControls.FormikTextArea,{name:"".concat(fieldPath,"actions.").concat(index,".message_template.source"),formRow:true,fieldProps:{validate:_validate.required},rowProps:{label:_react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,{size:"xs",style:{paddingBottom:"0px",marginBottom:"0px"}},_react.default.createElement("h4",null,"Message")),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},"Embed variables in your message using Mustache templates."," ",_react.default.createElement(_eui.EuiLink,{external:true,href:_constants.URL.MUSTACHE,target:"_blank"},"Learn more"))),style:{maxWidth:"100%"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Can use mustache templates",fullWidth:true,isInvalid:_validate.isInvalid}}),_react.default.createElement(_eui.EuiFormRow,{style:{maxWidth:"100%"}},renderSendTestMessageButton(index,sendTestMessage,monitorType===_constants2.MONITOR_TYPE.BUCKET_LEVEL,displayPreview,onDisplayPreviewChange,fieldPath)),displayPreview?_react.default.createElement(_eui.EuiFormRow,{label:"Message preview",style:{maxWidth:"100%"}},_react.default.createElement(_eui.EuiTextArea,{placeholder:"Preview of mustache template",fullWidth:true,value:preview,readOnly:true,className:"read-only-text-area"})):null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h4",null,"Action configuration")),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),editableActionExecutionPolicy?_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement("span",{style:{color:"#343741"}},"Perform action"),style:{maxWidth:"100%"}},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikFieldRadio,{name:"".concat(actionExecutionPolicyPath,".action_execution_scope"),formRow:true,inputProps:{id:"".concat(actionExecutionPolicyPath,".").concat(NOTIFY_OPTIONS_VALUES.PER_EXECUTION),value:NOTIFY_OPTIONS_VALUES.PER_EXECUTION,checked:actionExecutionScopeId===NOTIFY_OPTIONS_VALUES.PER_EXECUTION,label:NOTIFY_OPTIONS_LABELS.PER_EXECUTION,onChange:function onChange(e,field,form){return field.onChange(e)}}})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikFieldRadio,{name:"".concat(actionExecutionPolicyPath,".action_execution_scope"),formRow:true,inputProps:{id:"".concat(actionExecutionPolicyPath,".").concat(NOTIFY_OPTIONS_VALUES.PER_ALERT),value:NOTIFY_OPTIONS_VALUES.PER_ALERT,checked:actionExecutionScopeId===NOTIFY_OPTIONS_VALUES.PER_ALERT,label:NOTIFY_OPTIONS_LABELS.PER_ALERT,onChange:function onChange(e,field,form){return field.onChange(e)}}})),actionExecutionScopeId===NOTIFY_OPTIONS_VALUES.PER_ALERT&&displayActionableAlertsOptions?_react.default.createElement(_eui.EuiFormRow,{style:{maxWidth:"100%"}},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",style:{margin:"0px",maxWidth:"100%"}},_react.default.createElement(_FormControls.FormikComboBox,{name:actionableAlertsSelectionsPath,formRow:true,fieldProps:{validate:validateActionableAlertsSelections},rowProps:{label:"Actionable alerts",style:{width:"400px"},isInvalid:actionExecutionScopeId===NOTIFY_OPTIONS_VALUES.PER_ALERT&&_lodash.default.isEmpty(actionableAlertsSelections),error:NO_ACTIONABLE_ALERT_SELECTIONS},inputProps:{placeholder:"Select alert options",options:ACTIONABLE_ALERTS_OPTIONS,onBlur:function onBlur(e,field,form){form.setFieldTouched(actionableAlertsSelectionsPath,true)},onChange:function onChange(options,field,form){form.setFieldValue(actionableAlertsSelectionsPath,options)},isClearable:true,selectedOptions:actionableAlertsSelections}}))):null)):_react.default.createElement("div",null,_react.default.createElement(_OverviewStat.default,{header:"Perform action",value:"Per monitor execution"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"})),displayThrottlingSettings?_react.default.createElement(_eui.EuiFormRow,{label:"Throttling",style:{paddingBottom:"10px",maxWidth:"100%"}},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column"},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{marginBottom:"0px"}},_react.default.createElement(_FormControls.FormikCheckbox,{name:"".concat(fieldPath,"actions.").concat(index,".throttle_enabled"),inputProps:{label:"Enable action throttling"}})),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",style:{margin:"0px",display:_lodash.default.get(action,"throttle_enabled")?"":"none"}},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{marginRight:"0px"}},_react.default.createElement(_eui.EuiFormRow,{label:"Throttle actions to only trigger every"},_react.default.createElement(_FormControls.FormikFieldNumber,{name:"".concat(actionPath,".throttle.value"),fieldProps:{validate:(0,_validate.validateActionThrottle)(action)},formRow:true,rowProps:{isInvalid:(0,_validate.isInvalidActionThrottle)(action),helpText:!(0,_validate.isInvalidActionThrottle)(action)&&_constants.WRONG_THROTTLE_WARNING,error:[_constants.WRONG_THROTTLE_WARNING]},inputProps:{style:{width:"400px"},min:1,max:_constants.MAX_THROTTLE_VALUE,append:_react.default.createElement(_eui.EuiText,{style:{backgroundColor:"transparent",paddingLeft:"4px"}},"minutes"),className:"euiFieldText",disabled:!_lodash.default.get(action,"throttle_enabled")?"disabled":""}})))))):null)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateTriggerName=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var validateTriggerName=function validateTriggerName(triggers,triggerToEdit,fieldPath){return function(value){if(!value)return"Required.";var nameExists=triggers.filter((function(trigger){var triggerId=_lodash.default.get(trigger,"".concat(_constants.TRIGGER_TYPE.BUCKET_LEVEL,".id"),_lodash.default.get(trigger,"".concat(_constants.TRIGGER_TYPE.QUERY_LEVEL,".id")));var triggerName=_lodash.default.get(trigger,"".concat(_constants.TRIGGER_TYPE.BUCKET_LEVEL,".name"),_lodash.default.get(trigger,"".concat(_constants.TRIGGER_TYPE.QUERY_LEVEL,".name"),_constants.FORMIK_INITIAL_TRIGGER_VALUES.name));var triggerToEditId=_lodash.default.get(triggerToEdit,"".concat(fieldPath,"id"),triggerToEdit.id);return triggerToEditId!==triggerId&&triggerName.toLowerCase()===value.toLowerCase()}));if(nameExists.length>0){return"Trigger name already used."}}};exports.validateTriggerName=validateTriggerName},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _ConfigureActions=_interopRequireDefault(__webpack_require__(474));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_ConfigureActions.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _formik=__webpack_require__(20);var _moment=_interopRequireDefault(__webpack_require__(8));var _eui=__webpack_require__(6);var _TimezoneComboBox=_interopRequireDefault(__webpack_require__(199));var _excluded=["value","onChange","onBlur"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var Daily=function Daily(){return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column",style:{marginTop:"5px"}},_react.default.createElement(_eui.EuiFlexItem,{style:{marginTop:"0px"}},_react.default.createElement(_formik.Field,{name:"daily"},(function(_ref){var _ref$field=_ref.field,value=_ref$field.value,onChange=_ref$field.onChange,onBlur=_ref$field.onBlur,rest=_objectWithoutProperties(_ref$field,_excluded),_ref$form=_ref.form,touched=_ref$form.touched,errors=_ref$form.errors,setFieldValue=_ref$form.setFieldValue;return _react.default.createElement(_eui.EuiFormRow,{label:"Around",style:{marginTop:"0px"}},_react.default.createElement(_eui.EuiDatePicker,_extends({showTimeSelect:true,showTimeSelectOnly:true,selected:(0,_moment.default)().hours(value).minutes(0),onChange:function onChange(date){setFieldValue("daily",date.hours())},dateFormat:"hh:mm A",timeIntervals:60},rest)))}))),_react.default.createElement(_eui.EuiFlexItem,{style:{marginTop:"0px"}},_react.default.createElement(_TimezoneComboBox.default,null)))};var _default=Daily;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.MAX_TRIGGERS=void 0;exports.getUnwrappedTriggers=getUnwrappedTriggers;var _react=_interopRequireWildcard(__webpack_require__(5));var _v=_interopRequireDefault(__webpack_require__(527));var _eui=__webpack_require__(6);var _lodash=_interopRequireDefault(__webpack_require__(7));var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _constants=__webpack_require__(15);var _constants2=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var MAX_TRIGGERS=10;exports.MAX_TRIGGERS=MAX_TRIGGERS;function getUnwrappedTriggers(monitor){return monitor.triggers.map((function(trigger){switch(monitor.monitor_type){case _constants.MONITOR_TYPE.BUCKET_LEVEL:return trigger[_constants2.TRIGGER_TYPE.BUCKET_LEVEL];case _constants.MONITOR_TYPE.DOC_LEVEL:return trigger[_constants2.TRIGGER_TYPE.DOC_LEVEL];default:return trigger[_constants2.TRIGGER_TYPE.QUERY_LEVEL]}}))}var Triggers=function(_Component){_inherits(Triggers,_Component);var _super=_createSuper(Triggers);function Triggers(props){var _this;_classCallCheck(this,Triggers);_this=_super.call(this,props);_this.state={field:"name",tableKey:(0,_v.default)(),direction:"asc",selectedItems:[]};_this.onDelete=_this.onDelete.bind(_assertThisInitialized(_this));_this.onEdit=_this.onEdit.bind(_assertThisInitialized(_this));_this.onSelectionChange=_this.onSelectionChange.bind(_assertThisInitialized(_this));_this.onTableChange=_this.onTableChange.bind(_assertThisInitialized(_this));return _this}_createClass(Triggers,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps,nextContext){if(this.props.monitor!==nextProps.monitor){this.setState({tableKey:(0,_v.default)()})}}},{key:"onDelete",value:function onDelete(){var selectedItems=this.state.selectedItems;var _this$props=this.props,updateMonitor=_this$props.updateMonitor,monitor=_this$props.monitor;var triggersToDelete=selectedItems.reduce((function(map,item){return _objectSpread(_objectSpread({},map),{},_defineProperty({},item.name,true))}),{});var shouldKeepTrigger=function shouldKeepTrigger(trigger){return!triggersToDelete[trigger.name]};var updatedTriggers=getUnwrappedTriggers(monitor).filter(shouldKeepTrigger);updateMonitor({triggers:updatedTriggers})}},{key:"onEdit",value:function onEdit(){var monitor=this.props.monitor;this.props.onEditTrigger(monitor.triggers)}},{key:"onSelectionChange",value:function onSelectionChange(selectedItems){this.setState({selectedItems:selectedItems})}},{key:"onTableChange",value:function onTableChange(_ref){var _ref$sort=_ref.sort;_ref$sort=_ref$sort===void 0?{}:_ref$sort;var field=_ref$sort.field,direction=_ref$sort.direction;this.setState({field:field,direction:direction})}},{key:"render",value:function render(){var _this$state=this.state,direction=_this$state.direction,field=_this$state.field,tableKey=_this$state.tableKey;var monitor=this.props.monitor;var numOfTriggers=_lodash.default.get(monitor,"triggers",[]).length;var columns=[{field:"name",name:"Name",sortable:true,truncateText:true,width:"25%"},{field:"actions",name:"Number of actions",sortable:true,truncateText:false,render:function render(actions){return actions.length},width:"25%"},{field:"severity",name:"Severity",sortable:true,truncateText:false,width:"50%"}];var sorting={sort:{field:field,direction:direction}};return _react.default.createElement(_ContentPanel.default,{title:"Triggers (".concat(numOfTriggers,")"),titleSize:"s",bodyStyles:{padding:"initial"}},_react.default.createElement(_eui.EuiInMemoryTable,{items:getUnwrappedTriggers(monitor),itemId:"id",key:tableKey,columns:columns,sorting:sorting,onTableChange:this.onTableChange,noItemsMessage:"There are no triggers."}))}}]);return Triggers}(_react.Component);exports.default=Triggers},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _SubHeader=_interopRequireDefault(__webpack_require__(566));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_SubHeader.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _queryString=_interopRequireDefault(__webpack_require__(32));var _eui=__webpack_require__(6);var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _DashboardEmptyPrompt=_interopRequireDefault(__webpack_require__(135));var _DashboardControls=_interopRequireDefault(__webpack_require__(90));var _tableUtils=__webpack_require__(55);var _constants=__webpack_require__(15);var _helpers=__webpack_require__(22);var _helpers2=__webpack_require__(69);var _constants2=__webpack_require__(45);var _constants3=__webpack_require__(70);var _AcknowledgeAlertsModal=_interopRequireDefault(__webpack_require__(224));var _findingsUtils=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Dashboard=function(_Component){_inherits(Dashboard,_Component);var _super=_createSuper(Dashboard);function Dashboard(props){var _this;_classCallCheck(this,Dashboard);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"getAlerts",_lodash.default.debounce((function(from,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds){var params={from:from,size:size,search:search,sortField:sortField,sortDirection:sortDirection,severityLevel:severityLevel,alertState:alertState,monitorIds:monitorIds};var queryParamsString=_queryString.default.stringify(params);location.search;var _this$props=_this.props,httpClient=_this$props.httpClient,history=_this$props.history,notifications=_this$props.notifications,perAlertView=_this$props.perAlertView;history.replace(_objectSpread(_objectSpread({},_this.props.location),{},{search:queryParamsString}));httpClient.get("../api/alerting/alerts",{query:params}).then((function(resp){if(resp.ok){var alerts=resp.alerts,totalAlerts=resp.totalAlerts;_this.setState({alerts:alerts,totalAlerts:totalAlerts});if(!perAlertView){var alertsByTriggers=(0,_helpers2.groupAlertsByTrigger)(alerts);_this.setState({totalTriggers:alertsByTriggers.length,alertsByTriggers:alertsByTriggers});_this.getMonitors()}}else{console.log("error getting alerts:",resp);(0,_helpers.backendErrorNotification)(notifications,"get","alerts",resp.err)}}))}),500,{leading:true}));_defineProperty(_assertThisInitialized(_this),"acknowledgeAlert",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var selectedItems,_this$props2,httpClient,notifications,perAlertView,selectedAlerts,monitorAlerts,_this$state,page,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:selectedItems=_this.state.selectedItems;_this$props2=_this.props,httpClient=_this$props2.httpClient,notifications=_this$props2.notifications,perAlertView=_this$props2.perAlertView;if(selectedItems.length){_context.next=4;break}return _context.abrupt("return");case 4:selectedAlerts=perAlertView?selectedItems:_lodash.default.get(selectedItems,"0.alerts",[]);selectedAlerts=(0,_helpers2.filterActiveAlerts)(selectedAlerts);monitorAlerts=selectedAlerts.reduce((function(monitorAlerts,alert){var id=alert.id,monitorId=alert.monitor_id;if(monitorAlerts[monitorId])monitorAlerts[monitorId].push(id);else monitorAlerts[monitorId]=[id];return monitorAlerts}),{});Object.entries(monitorAlerts).map((function(_ref2){var _ref3=_slicedToArray(_ref2,2),monitorId=_ref3[0],alerts=_ref3[1];return httpClient.post("../api/alerting/monitors/".concat(monitorId,"/_acknowledge/alerts"),{body:JSON.stringify({alerts:alerts})}).then((function(resp){if(!resp.ok){(0,_helpers.backendErrorNotification)(notifications,"acknowledge","alert",resp.resp)}else{var successfulCount=_lodash.default.get(resp,"resp.success",[]).length;(0,_helpers2.displayAcknowledgedAlertsToast)(notifications,successfulCount)}})).catch((function(error){return error}))}));_this.setState({selectedItems:[]});_this$state=_this.state,page=_this$state.page,size=_this$state.size,search=_this$state.search,sortField=_this$state.sortField,sortDirection=_this$state.sortDirection,severityLevel=_this$state.severityLevel,alertState=_this$state.alertState,monitorIds=_this$state.monitorIds;_this.getAlerts(page*size,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds);_this.refreshDashboard();case 12:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"onTableChange",(function(_ref4){var _ref4$page=_ref4.page,tablePage=_ref4$page===void 0?{}:_ref4$page,_ref4$sort=_ref4.sort,sort=_ref4$sort===void 0?{}:_ref4$sort;var page=tablePage.index,size=tablePage.size;var sortField=sort.field,sortDirection=sort.direction;_this.setState({page:page,size:size,sortField:sortField,sortDirection:sortDirection})}));_defineProperty(_assertThisInitialized(_this),"onSeverityLevelChange",(function(e){_this.setState({page:0,severityLevel:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onAlertStateChange",(function(e){_this.setState({page:0,alertState:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onSelectionChange",(function(selectedItems){_this.setState({selectedItems:selectedItems})}));_defineProperty(_assertThisInitialized(_this),"onSearchChange",(function(e){_this.setState({page:0,search:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onPageClick",(function(page){_this.setState({page:page})}));_defineProperty(_assertThisInitialized(_this),"openFlyout",(function(payload){_this.setState({flyoutIsOpen:true});if(!_lodash.default.isEmpty(payload)){_this.props.setFlyout({type:"alertsDashboard",payload:_objectSpread({},payload)})}}));_defineProperty(_assertThisInitialized(_this),"closeFlyout",(function(){var setFlyout=_this.props.setFlyout;if(typeof setFlyout==="function")setFlyout(null);_this.setState({flyoutIsOpen:false})}));_defineProperty(_assertThisInitialized(_this),"refreshDashboard",(function(){var _this$state2=_this.state,page=_this$state2.page,size=_this$state2.size,search=_this$state2.search,sortField=_this$state2.sortField,sortDirection=_this$state2.sortDirection,severityLevel=_this$state2.severityLevel,alertState=_this$state2.alertState,monitorIds=_this$state2.monitorIds;_this.getAlerts(page*size,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds)}));_defineProperty(_assertThisInitialized(_this),"openModal",(function(){_this.setState(_objectSpread(_objectSpread({},_this.state),{},{showAlertsModal:true}))}));_defineProperty(_assertThisInitialized(_this),"closeModal",(function(){_this.setState(_objectSpread(_objectSpread({},_this.state),{},{search:"",showAlertsModal:false}));_this.refreshDashboard()}));_defineProperty(_assertThisInitialized(_this),"renderModal",(function(){var _this$props3=_this.props,history=_this$props3.history,httpClient=_this$props3.httpClient,location=_this$props3.location,notifications=_this$props3.notifications;var _this$state3=_this.state,monitors=_this$state3.monitors,selectedItems=_this$state3.selectedItems;var _selectedItems$=selectedItems[0],monitor_id=_selectedItems$.monitor_id,triggerID=_selectedItems$.triggerID,trigger_name=_selectedItems$.trigger_name;var monitor=_lodash.default.get(_lodash.default.find(monitors,{_id:monitor_id}),"_source");return _react.default.createElement(_AcknowledgeAlertsModal.default,{history:history,httpClient:httpClient,location:location,monitor:monitor,monitorId:monitor_id,notifications:notifications,onClose:_this.closeModal,triggerId:triggerID,triggerName:trigger_name})}));var _location=props.location,_perAlertView=props.perAlertView;var _getURLQueryParams=(0,_helpers2.getURLQueryParams)(_location),_alertState=_getURLQueryParams.alertState,_from=_getURLQueryParams.from,_search=_getURLQueryParams.search,_severityLevel=_getURLQueryParams.severityLevel,_size=_getURLQueryParams.size,_sortDirection=_getURLQueryParams.sortDirection,_sortField=_getURLQueryParams.sortField;_this.state={alerts:[],alertsByTriggers:[],alertState:_alertState,flyoutIsOpen:false,loadingMonitors:true,monitors:[],monitorIds:_this.props.monitorIds,page:Math.floor(_from/_size),search:_search,selectedItems:[],severityLevel:_severityLevel,showAlertsModal:false,size:(0,_helpers2.getInitialSize)(_perAlertView,_size),sortDirection:_sortDirection,sortField:_sortField,totalAlerts:0,totalTriggers:0};return _this}_createClass(Dashboard,[{key:"componentDidMount",value:function componentDidMount(){var _this$state4=this.state,alertState=_this$state4.alertState,page=_this$state4.page,search=_this$state4.search,severityLevel=_this$state4.severityLevel,size=_this$state4.size,sortDirection=_this$state4.sortDirection,sortField=_this$state4.sortField,monitorIds=_this$state4.monitorIds;this.getAlerts(page*size,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var prevQuery=(0,_helpers2.getQueryObjectFromState)(prevState);var currQuery=(0,_helpers2.getQueryObjectFromState)(this.state);if(!_lodash.default.isEqual(prevQuery,currQuery)){var _this$state5=this.state,page=_this$state5.page,size=_this$state5.size,search=_this$state5.search,sortField=_this$state5.sortField,sortDirection=_this$state5.sortDirection,severityLevel=_this$state5.severityLevel,alertState=_this$state5.alertState,monitorIds=_this$state5.monitorIds;this.getAlerts(page*size,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds)}}},{key:"getMonitors",value:function(){var _getMonitors=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var httpClient,alertsByTriggers,monitorIds,monitors,params,response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:httpClient=this.props.httpClient;alertsByTriggers=this.state.alertsByTriggers;this.setState(_objectSpread(_objectSpread({},this.state),{},{loadingMonitors:true}));monitorIds=alertsByTriggers.map((function(alert){return alert.monitor_id}));_context2.prev=4;params={query:{query:{ids:{values:monitorIds}}}};_context2.next=8;return httpClient.post("../api/alerting/monitors/_search",{body:JSON.stringify(params)});case 8:response=_context2.sent;if(response.ok){monitors=_lodash.default.get(response,"resp.hits.hits",[])}else{console.log("error getting monitors:",response)}_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2["catch"](4);console.error(_context2.t0);case 15:this.setState(_objectSpread(_objectSpread({},this.state),{},{loadingMonitors:false,monitors:monitors}));case 16:case"end":return _context2.stop()}}}),_callee2,this,[[4,12]])})));function getMonitors(){return _getMonitors.apply(this,arguments)}return getMonitors}()},{key:"render",value:function render(){var _this2=this;var _this$state6=this.state,alerts=_this$state6.alerts,alertsByTriggers=_this$state6.alertsByTriggers,alertState=_this$state6.alertState,flyoutIsOpen=_this$state6.flyoutIsOpen,loadingMonitors=_this$state6.loadingMonitors,monitors=_this$state6.monitors,page=_this$state6.page,search=_this$state6.search,selectedItems=_this$state6.selectedItems,severityLevel=_this$state6.severityLevel,size=_this$state6.size,sortDirection=_this$state6.sortDirection,sortField=_this$state6.sortField,totalAlerts=_this$state6.totalAlerts,totalTriggers=_this$state6.totalTriggers;var _this$props4=this.props,monitorIds=_this$props4.monitorIds,detectorIds=_this$props4.detectorIds,onCreateTrigger=_this$props4.onCreateTrigger,perAlertView=_this$props4.perAlertView,monitorType=_this$props4.monitorType,groupBy=_this$props4.groupBy,setFlyout=_this$props4.setFlyout,httpClient=_this$props4.httpClient,location=_this$props4.location,history=_this$props4.history,notifications=_this$props4.notifications,_this$props4$isAlerts=_this$props4.isAlertsFlyout,isAlertsFlyout=_this$props4$isAlerts===void 0?false:_this$props4$isAlerts;var totalItems=perAlertView?totalAlerts:totalTriggers;var isBucketMonitor=monitorType===_constants.MONITOR_TYPE.BUCKET_LEVEL;var columnType;if(perAlertView){switch(monitorType){case _constants.MONITOR_TYPE.BUCKET_LEVEL:columnType=(0,_helpers2.insertGroupByColumn)(groupBy);break;case _constants.MONITOR_TYPE.DOC_LEVEL:columnType=_lodash.default.cloneDeep(_tableUtils.queryColumns);columnType.splice(0,0,(0,_findingsUtils.getAlertsFindingColumn)(httpClient,history,location,notifications,flyoutIsOpen,this.openFlyout,this.closeFlyout));break;default:columnType=_tableUtils.queryColumns;break}}else{columnType=(0,_tableUtils.alertColumns)(history,httpClient,loadingMonitors,location,monitors,notifications,setFlyout,this.openFlyout,this.closeFlyout,this.refreshDashboard)}var pagination={pageIndex:page,pageSize:size,totalItemCount:Math.min(_constants3.MAX_ALERT_COUNT,totalItems),pageSizeOptions:_constants2.DEFAULT_PAGE_SIZE_OPTIONS};var sorting={sort:{direction:sortDirection,field:sortField}};var selection={onSelectionChange:this.onSelectionChange,selectable:perAlertView?function(item){return item.state===_constants.ALERT_STATE.ACTIVE}:function(item){return item.ACTIVE>0},selectableMessage:perAlertView?function(selectable){return selectable?undefined:"Only active alerts can be acknowledged."}:function(selectable){return selectable?undefined:"Only triggers with active alerts can be acknowledged."}};var actions=function actions(){var actions=[_react.default.createElement(_eui.EuiButton,{onClick:perAlertView?_this2.acknowledgeAlert:_this2.openModal,disabled:perAlertView?!selectedItems.length:selectedItems.length!==1,"data-test-subj":"acknowledgeAlertsButton"},"Acknowledge")];if(!perAlertView){var alert=selectedItems[0];actions.unshift(_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){_this2.openFlyout(_objectSpread(_objectSpread({},alert),{},{history:history,httpClient:httpClient,loadingMonitors:loadingMonitors,location:location,monitors:monitors,notifications:notifications,setFlyout:setFlyout,closeFlyout:_this2.closeFlyout,refreshDashboard:_this2.refreshDashboard}))},disabled:selectedItems.length!==1},"View alert details"))}if(detectorIds.length){actions.unshift(_react.default.createElement(_eui.EuiButton,{href:"".concat(_constants.OPENSEARCH_DASHBOARDS_AD_PLUGIN,"#/detectors/").concat(detectorIds[0]),target:"_blank"},"View detector ",_react.default.createElement(_eui.EuiIcon,{type:"popout"})))}return actions};var getItemId=function getItemId(item){if(perAlertView)return isBucketMonitor?item.id:"".concat(item.id,"-").concat(item.version);return"".concat(item.triggerID,"-").concat(item.version)};return _react.default.createElement(_ContentPanel.default,{title:perAlertView?"Alerts":"Alerts by triggers",titleSize:monitorIds.length?"s":"l",bodyStyles:{padding:"initial"},actions:actions()},_react.default.createElement(_DashboardControls.default,{activePage:page,pageCount:Math.ceil(totalItems/size)||1,search:search,severity:severityLevel,state:alertState,onSearchChange:this.onSearchChange,onSeverityChange:this.onSeverityLevelChange,onStateChange:this.onAlertStateChange,onPageChange:this.onPageClick,isAlertsFlyout:isAlertsFlyout,monitorType:monitorType}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"}),_react.default.createElement(_eui.EuiBasicTable,{items:perAlertView?alerts:alertsByTriggers,itemId:getItemId,columns:columnType,pagination:perAlertView?pagination:undefined,sorting:sorting,isSelectable:true,selection:selection,onChange:this.onTableChange,noItemsMessage:_react.default.createElement(_DashboardEmptyPrompt.default,{onCreateTrigger:onCreateTrigger}),"data-test-subj":"alertsDashboard_table"}),this.state.showAlertsModal&&this.renderModal())}}]);return Dashboard}(_react.Component);exports.default=Dashboard;_defineProperty(Dashboard,"defaultProps",{monitorIds:[],detectorIds:[]});module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _DashboardEmptyPrompt=_interopRequireDefault(__webpack_require__(221));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_DashboardEmptyPrompt.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.GET_FINDINGS_SORT_FIELDS=exports.DEFAULT_GET_FINDINGS_PARAMS=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var GET_FINDINGS_SORT_FIELDS={INDEX:"index",MONITOR_NAME:"monitor_name",TIMESTAMP:"timestamp"};exports.GET_FINDINGS_SORT_FIELDS=GET_FINDINGS_SORT_FIELDS;var DEFAULT_GET_FINDINGS_PARAMS={id:undefined,from:0,search:"",size:20,sortDirection:"desc",sortField:GET_FINDINGS_SORT_FIELDS.TIMESTAMP};exports.DEFAULT_GET_FINDINGS_PARAMS=DEFAULT_GET_FINDINGS_PARAMS;var FindingService=_createClass((function FindingService(esDriver){var _this=this;_classCallCheck(this,FindingService);_defineProperty(this,"getFindings",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context,req,res){var _req$query,_req$query$id,id,_req$query$from,from,_req$query$size,size,_req$query$search,search,_req$query$sortDirect,sortDirection,_req$query$sortField,sortField,params,_this$esDriver$asScop,callAsCurrentUser,resp,findings,totalFindings;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_req$query=req.query,_req$query$id=_req$query.id,id=_req$query$id===void 0?DEFAULT_GET_FINDINGS_PARAMS.id:_req$query$id,_req$query$from=_req$query.from,from=_req$query$from===void 0?DEFAULT_GET_FINDINGS_PARAMS.from:_req$query$from,_req$query$size=_req$query.size,size=_req$query$size===void 0?DEFAULT_GET_FINDINGS_PARAMS.size:_req$query$size,_req$query$search=_req$query.search,search=_req$query$search===void 0?DEFAULT_GET_FINDINGS_PARAMS.search:_req$query$search,_req$query$sortDirect=_req$query.sortDirection,sortDirection=_req$query$sortDirect===void 0?DEFAULT_GET_FINDINGS_PARAMS.sortDirection:_req$query$sortDirect,_req$query$sortField=_req$query.sortField,sortField=_req$query$sortField===void 0?DEFAULT_GET_FINDINGS_PARAMS.sortField:_req$query$sortField;_context.t0=sortField;_context.next=_context.t0===GET_FINDINGS_SORT_FIELDS.INDEX?4:_context.t0===GET_FINDINGS_SORT_FIELDS.MONITOR_NAME?6:8;break;case 4:params={sortString:"".concat(sortField,".keyword"),sortOrder:sortDirection};return _context.abrupt("break",9);case 6:params={sortString:"".concat(sortField,".keyword"),sortOrder:sortDirection};return _context.abrupt("break",9);case 8:params={sortString:GET_FINDINGS_SORT_FIELDS.TIMESTAMP,sortOrder:sortDirection};case 9:if(!_lodash.default.isEmpty(id))params.findingId=id;params.startIndex=from;params.size=size;params.searchString=search;if(search.trim())params.searchString="*".concat(search.trim().split(" ").join("* *"),"*");_this$esDriver$asScop=_this.esDriver.asScoped(req),callAsCurrentUser=_this$esDriver$asScop.callAsCurrentUser;_context.prev=15;_context.next=18;return callAsCurrentUser("alerting.getFindings",params);case 18:resp=_context.sent;findings=resp.findings.map((function(result){return _defineProperty({},result.finding.id,_objectSpread({},result))}));totalFindings=resp.totalFindings;return _context.abrupt("return",res.ok({body:{ok:true,findings:findings,totalFindings:totalFindings}}));case 24:_context.prev=24;_context.t1=_context["catch"](15);console.log(_context.t1.message);return _context.abrupt("return",res.ok({body:{ok:false,err:_context.t1.message}}));case 28:case"end":return _context.stop()}}}),_callee,null,[[15,24]])})));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}());this.esDriver=esDriver}));exports.default=FindingService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.staticColumns=exports.MAX_DESTINATIONS=exports.DEFAULT_QUERY_PARAMS=void 0;var _constants=__webpack_require__(31);var DEFAULT_QUERY_PARAMS={from:0,search:"",size:20,sortDirection:"desc",sortField:"name",type:"ALL"};exports.DEFAULT_QUERY_PARAMS=DEFAULT_QUERY_PARAMS;var MAX_DESTINATIONS=200;exports.MAX_DESTINATIONS=MAX_DESTINATIONS;var staticColumns=[{field:"name",name:"Destination name",sortable:true,truncateText:true,textOnly:true,width:"100px"},{field:"type",name:"Destination type",truncateText:true,sortable:true,textOnly:true,width:"100px",render:function render(value){var actionType=_constants.DESTINATION_OPTIONS.filter((function(item){return item.value===value}));if(actionType.length>0){return actionType[0].text}else{return"Unsupported Type"}}},{field:"user",name:"Last updated by",sortable:true,truncateText:true,textOnly:true,width:"100px",render:function render(value){return value&&value.name?value.name:"-"}}];exports.staticColumns=staticColumns},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _ManageSenders=_interopRequireDefault(__webpack_require__(255));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_ManageSenders.default;exports.default=_default;module.exports=exports.default},,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikFieldText=_interopRequireDefault(__webpack_require__(341));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikFieldText.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _excluded=["isInvalid"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikTextArea=function FormikTextArea(_ref){var name=_ref.name,_ref$formRow=_ref.formRow,formRow=_ref$formRow===void 0?false:_ref$formRow,_ref$fieldProps=_ref.fieldProps,fieldProps=_ref$fieldProps===void 0?{}:_ref$fieldProps,_ref$rowProps=_ref.rowProps,rowProps=_ref$rowProps===void 0?{}:_ref$rowProps,_ref$inputProps=_ref.inputProps,inputProps=_ref$inputProps===void 0?{}:_ref$inputProps;return _react.default.createElement(_FormikInputWrapper.default,{name:name,fieldProps:fieldProps,render:function render(_ref2){var field=_ref2.field,form=_ref2.form;return formRow?_react.default.createElement(_FormikFormRow.default,{name:name,form:form,rowProps:rowProps},_react.default.createElement(TextArea,{name:name,form:form,field:field,inputProps:inputProps})):_react.default.createElement(TextArea,{name:name,form:form,field:field,inputProps:inputProps})}})};var TextArea=function TextArea(_ref3){var name=_ref3.name,form=_ref3.form,field=_ref3.field,_ref3$inputProps=_ref3.inputProps,isInvalid=_ref3$inputProps.isInvalid,rest=_objectWithoutProperties(_ref3$inputProps,_excluded);return _react.default.createElement(_eui.EuiTextArea,_extends({isInvalid:typeof isInvalid==="function"?isInvalid(name,form):isInvalid},field,rest))};var _default=FormikTextArea;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _excluded=["onChange","isInvalid"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikSelect=function FormikSelect(_ref){var name=_ref.name,_ref$formRow=_ref.formRow,formRow=_ref$formRow===void 0?false:_ref$formRow,_ref$fieldProps=_ref.fieldProps,fieldProps=_ref$fieldProps===void 0?{}:_ref$fieldProps,_ref$rowProps=_ref.rowProps,rowProps=_ref$rowProps===void 0?{}:_ref$rowProps,_ref$inputProps=_ref.inputProps,inputProps=_ref$inputProps===void 0?{}:_ref$inputProps,_ref$selectedOption=_ref.selectedOption,selectedOption=_ref$selectedOption===void 0?undefined:_ref$selectedOption;return _react.default.createElement(_FormikInputWrapper.default,{name:name,fieldProps:fieldProps,render:function render(_ref2){var field=_ref2.field,form=_ref2.form;return formRow?_react.default.createElement(_FormikFormRow.default,{name:name,form:form,rowProps:rowProps},_react.default.createElement(FieldSelect,{name:name,form:form,field:field,inputProps:inputProps})):_react.default.createElement(FieldSelect,{name:name,form:form,field:field,inputProps:inputProps,selectedOption:selectedOption})}})};var FieldSelect=function FieldSelect(_ref3){var name=_ref3.name,field=_ref3.field,form=_ref3.form,_ref3$inputProps=_ref3.inputProps,_onChange=_ref3$inputProps.onChange,isInvalid=_ref3$inputProps.isInvalid,rest=_objectWithoutProperties(_ref3$inputProps,_excluded),selectedOption=_ref3.selectedOption;return _react.default.createElement(_eui.EuiSelect,_extends({name:name,id:name},rest,{value:selectedOption?selectedOption:field.value,onChange:function onChange(e){return typeof _onChange==="function"?_onChange(e,field,form):field.onChange(e)},isInvalid:typeof isInvalid==="function"?isInvalid(name,form):isInvalid}))};var _default=FormikSelect;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=getSenders;var _constants=__webpack_require__(15);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getSenders(_x){return _getSenders.apply(this,arguments)}function _getSenders(){_getSenders=_asyncToGenerator(regeneratorRuntime.mark((function _callee(httpClient){var searchText,response,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchText=_args.length>1&&_args[1]!==undefined?_args[1]:"";_context.prev=1;_context.next=4;return httpClient.get("../api/alerting/destinations/email_accounts",{query:{search:searchText,size:_constants.MAX_QUERY_RESULT_SIZE}});case 4:response=_context.sent;if(!response.ok){_context.next=9;break}return _context.abrupt("return",response.emailAccounts);case 9:console.log("Unable to get email accounts",response.err);return _context.abrupt("return",[]);case 11:_context.next=17;break;case 13:_context.prev=13;_context.t0=_context["catch"](1);console.log("Unable to get email accounts",_context.t0);return _context.abrupt("return",[]);case 17:case"end":return _context.stop()}}}),_callee,null,[[1,13]])})));return _getSenders.apply(this,arguments)}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _ManageEmailGroups=_interopRequireDefault(__webpack_require__(363));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_ManageEmailGroups.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=getEmailGroups;var _constants=__webpack_require__(15);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getEmailGroups(_x){return _getEmailGroups.apply(this,arguments)}function _getEmailGroups(){_getEmailGroups=_asyncToGenerator(regeneratorRuntime.mark((function _callee(httpClient){var searchText,response,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchText=_args.length>1&&_args[1]!==undefined?_args[1]:"";_context.prev=1;_context.next=4;return httpClient.get("../api/alerting/destinations/email_groups",{query:{search:searchText,size:_constants.MAX_QUERY_RESULT_SIZE}});case 4:response=_context.sent;if(!response.ok){_context.next=9;break}return _context.abrupt("return",response.emailGroups);case 9:console.log("Unable to get email groups",response.err);return _context.abrupt("return",[]);case 11:_context.next=17;break;case 13:_context.prev=13;_context.t0=_context["catch"](1);console.log("Unable to get email groups",_context.t0);return _context.abrupt("return",[]);case 17:case"end":return _context.stop()}}}),_callee,null,[[1,13]])})));return _getEmailGroups.apply(this,arguments)}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _CreateMonitor=_interopRequireDefault(__webpack_require__(374));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_CreateMonitor.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _VisualGraph=_interopRequireDefault(__webpack_require__(378));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_VisualGraph.default;exports.default=_default;module.exports=exports.default},,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Y_DOMAIN_BUFFER=exports.X_DOMAIN_BUFFER=exports.SIZE_RANGE=exports.LINE_STYLES=exports.HINT_STYLES=exports.DEFAULT_MARK_SIZE=exports.BAR_PERCENTAGE=exports.BAR_KEY_COUNT=exports.ANNOTATION_STYLES=void 0;var SIZE_RANGE=[3,3];exports.SIZE_RANGE=SIZE_RANGE;var LINE_STYLES={strokeWidth:1};exports.LINE_STYLES=LINE_STYLES;var ANNOTATION_STYLES={strokeWidth:1,stroke:"red"};exports.ANNOTATION_STYLES=ANNOTATION_STYLES;var HINT_STYLES={background:"#3a3a48",borderRadius:"5px",padding:"7px 10px",fontSize:"12px",fontWeight:"bold",color:"#fff",textAlign:"left",whiteSpace:"nowrap",boxShadow:"0 2px 4px rgba(0,0,0,.5)"};exports.HINT_STYLES=HINT_STYLES;var Y_DOMAIN_BUFFER=1.4;exports.Y_DOMAIN_BUFFER=Y_DOMAIN_BUFFER;var X_DOMAIN_BUFFER=.2;exports.X_DOMAIN_BUFFER=X_DOMAIN_BUFFER;var DEFAULT_MARK_SIZE=3;exports.DEFAULT_MARK_SIZE=DEFAULT_MARK_SIZE;var BAR_PERCENTAGE=.015;exports.BAR_PERCENTAGE=BAR_PERCENTAGE;var BAR_KEY_COUNT=3;exports.BAR_KEY_COUNT=BAR_KEY_COUNT},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.MAX_NUM_QUERY_LEVEL_GROUP_BYS=exports.MAX_NUM_BUCKET_LEVEL_GROUP_BYS=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _dataTypes=__webpack_require__(62);var _helpers=__webpack_require__(51);var _GroupByItem=_interopRequireDefault(__webpack_require__(191));var _constants=__webpack_require__(23);var _constants2=__webpack_require__(15);var _helpers2=__webpack_require__(22);var _constants3=__webpack_require__(27);var _IconToolTip=_interopRequireDefault(__webpack_require__(61));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MAX_NUM_QUERY_LEVEL_GROUP_BYS=1;exports.MAX_NUM_QUERY_LEVEL_GROUP_BYS=MAX_NUM_QUERY_LEVEL_GROUP_BYS;var MAX_NUM_BUCKET_LEVEL_GROUP_BYS=2;exports.MAX_NUM_BUCKET_LEVEL_GROUP_BYS=MAX_NUM_BUCKET_LEVEL_GROUP_BYS;var GroupByExpression=function(_Component){_inherits(GroupByExpression,_Component);var _super=_createSuper(GroupByExpression);function GroupByExpression(){var _this;_classCallCheck(this,GroupByExpression);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"renderFieldItems",(function(arrayHelpers,fieldOptions,expressionWidth){var values=_this.props.formik.values;return values.groupBy.map((function(groupByItem,index){return _react.default.createElement("span",{style:{paddingRight:"5px"},key:"group-by-expr-".concat(index)},_react.default.createElement(_GroupByItem.default,{values:values,arrayHelpers:arrayHelpers,fieldOptions:fieldOptions,expressionWidth:expressionWidth,groupByItem:groupByItem,index:index}))}))}));return _this}_createClass(GroupByExpression,[{key:"render",value:function render(){var _this$props=this.props,values=_this$props.formik.values,errors=_this$props.errors,arrayHelpers=_this$props.arrayHelpers,dataTypes=_this$props.dataTypes;var monitorType=values.monitor_type,groupBy=values.groupBy;var fieldOptions=(0,_dataTypes.getIndexFields)(dataTypes,(0,_helpers.getGroupByExpressionAllowedTypes)(values));var expressionWidth=Math.max.apply(Math,_toConsumableArray(fieldOptions.map((function(_ref){var options=_ref.options;return options.reduce((function(accu,curr){return Math.max(accu,curr.label.length)}),0)}))))*8+60;var isBucketLevelMonitor=values.monitor_type===_constants2.MONITOR_TYPE.BUCKET_LEVEL;if(!values.groupBy.length&&isBucketLevelMonitor){errors.groupBy=_constants.GROUP_BY_ERROR}else if(!isBucketLevelMonitor&&values.groupBy.length>MAX_NUM_QUERY_LEVEL_GROUP_BYS){errors.groupBy=_constants.QUERY_TYPE_GROUP_BY_ERROR}else{delete errors.groupBy}var showAddButtonFlag=false;if(!isBucketLevelMonitor&&groupBy.length<MAX_NUM_QUERY_LEVEL_GROUP_BYS){showAddButtonFlag=true}else if(isBucketLevelMonitor&&groupBy.length<MAX_NUM_BUCKET_LEVEL_GROUP_BYS){showAddButtonFlag=true}var limitText=isBucketLevelMonitor?(0,_helpers2.inputLimitText)(groupBy.length,MAX_NUM_BUCKET_LEVEL_GROUP_BYS,"group by","group bys",{paddingLeft:"10px"}):(0,_helpers2.inputLimitText)(groupBy.length,MAX_NUM_QUERY_LEVEL_GROUP_BYS,"group by","group bys",{paddingLeft:"10px"});return _react.default.createElement("div",{id:"groupBy"},_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Group by "),!isBucketLevelMonitor?_react.default.createElement("i",null,"- optional "):null,_react.default.createElement(_IconToolTip.default,{content:_constants3.GROUP_BY_TOOLTIP_TEXT,iconType:"questionInCircle"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),values.groupBy.length===0&&_react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,{size:"xs"},"No group bys defined.")),this.renderFieldItems(arrayHelpers,fieldOptions,expressionWidth),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),showAddButtonFlag&&_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){arrayHelpers.push("")},"data-test-subj":"addGroupByButton",style:{paddingTop:"5px"}},"+ Add group by"),_react.default.createElement(_eui.EuiText,{color:"danger",size:"xs"},errors.groupBy),limitText)}}]);return GroupByExpression}(_react.Component);var _default=(0,_formik.connect)(GroupByExpression);exports.default=_default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=GroupByItem;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _index=__webpack_require__(127);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function GroupByItem(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props,values=_ref.values,arrayHelpers=_ref.arrayHelpers,fieldOptions=_ref.fieldOptions,expressionWidth=_ref.expressionWidth,groupByItem=_ref.groupByItem,index=_ref.index;var _useState=(0,_react.useState)(groupByItem===""),_useState2=_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];var closePopover=function closePopover(){if(_lodash.default.isEmpty(groupByItem))arrayHelpers.remove(index);setIsPopoverOpen(false)};return _react.default.createElement(_eui.EuiPopover,{id:"groupBy-badge-popover",button:_react.default.createElement("div",null,_react.default.createElement(_eui.EuiBadge,{color:"hollow",iconSide:"right",iconType:"cross",iconOnClick:function iconOnClick(){arrayHelpers.remove(index)},iconOnClickAriaLabel:"Remove group by",onClick:function onClick(){setIsPopoverOpen(true)},onClickAriaLabel:"Edit group by"},groupByItem)),isOpen:isPopoverOpen,closePopover:closePopover,panelPaddingSize:"none",ownFocus:true,withTitle:true,anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiPopoverTitle,null," ADD GROUP BY "),_react.default.createElement(_index.GroupByPopover,{values:values,options:fieldOptions,closePopover:closePopover,expressionWidth:expressionWidth,index:index}))}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.MAX_NUM_QUERY_LEVEL_METRICS=exports.MAX_NUM_BUCKET_LEVEL_METRICS=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _lodash=_interopRequireDefault(__webpack_require__(7));var _dataTypes=__webpack_require__(62);var _helpers=__webpack_require__(51);var _constants=__webpack_require__(27);var _index=__webpack_require__(127);var _constants2=__webpack_require__(15);var _helpers2=__webpack_require__(22);var _IconToolTip=_interopRequireDefault(__webpack_require__(61));var _constants3=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MAX_NUM_QUERY_LEVEL_METRICS=1;exports.MAX_NUM_QUERY_LEVEL_METRICS=MAX_NUM_QUERY_LEVEL_METRICS;var MAX_NUM_BUCKET_LEVEL_METRICS=5;exports.MAX_NUM_BUCKET_LEVEL_METRICS=MAX_NUM_BUCKET_LEVEL_METRICS;var MetricExpression=function(_Component){_inherits(MetricExpression,_Component);var _super=_createSuper(MetricExpression);function MetricExpression(){var _this;_classCallCheck(this,MetricExpression);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"renderFieldItems",(function(arrayHelpers,fieldOptions,expressionWidth){var values=_this.props.formik.values;return values.aggregations.map((function(aggregation,index){return _react.default.createElement("span",{style:{paddingRight:"5px"},key:"metric-expr-".concat(index)},_react.default.createElement(_index.MetricItem,{arrayHelpers:arrayHelpers,fieldOptions:fieldOptions,expressionWidth:expressionWidth,aggregation:aggregation,index:index}))}))}));return _this}_createClass(MetricExpression,[{key:"render",value:function render(){var _this$props=this.props,values=_this$props.formik.values,errors=_this$props.errors,arrayHelpers=_this$props.arrayHelpers,dataTypes=_this$props.dataTypes;var fieldOptions=(0,_dataTypes.getIndexFields)(dataTypes,(0,_helpers.getMetricExpressionAllowedTypes)(values));var expressionWidth=Math.max.apply(Math,_toConsumableArray(fieldOptions.map((function(_ref){var options=_ref.options;return options.reduce((function(accu,curr){return Math.max(accu,curr.label.length)}),0)}))))*8+60;var monitorType=values.monitor_type,aggregations=values.aggregations;var showAddButtonFlag=false;var limitText=_constants2.MONITOR_TYPE.BUCKET_LEVEL===monitorType?(0,_helpers2.inputLimitText)(aggregations.length,MAX_NUM_BUCKET_LEVEL_METRICS,"metric","metrics",{paddingLeft:"10px"}):(0,_helpers2.inputLimitText)(aggregations.length,MAX_NUM_QUERY_LEVEL_METRICS,"metric","metrics",{paddingLeft:"10px"});if(_constants2.MONITOR_TYPE.QUERY_LEVEL===monitorType&&aggregations.length<MAX_NUM_QUERY_LEVEL_METRICS){showAddButtonFlag=true}else if(_constants2.MONITOR_TYPE.BUCKET_LEVEL===monitorType&&aggregations.length<MAX_NUM_BUCKET_LEVEL_METRICS){showAddButtonFlag=true}if((0,_helpers.validateAggregationsDuplicates)(aggregations)){errors.aggregations="You have defined duplicated metrics."}else if(_constants2.MONITOR_TYPE.QUERY_LEVEL===monitorType&&aggregations.length>MAX_NUM_QUERY_LEVEL_METRICS){errors.aggregations=_constants3.QUERY_TYPE_METRIC_ERROR}else{delete errors.aggregations}return _react.default.createElement("div",{id:"aggregations"},_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Metrics"),_react.default.createElement("i",null," - optional "),_react.default.createElement(_IconToolTip.default,{content:_constants.METRIC_TOOLTIP_TEXT,iconType:"questionInCircle"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),!(_constants2.MONITOR_TYPE.QUERY_LEVEL===monitorType&&aggregations.length>0)&&_react.default.createElement("span",{style:{paddingRight:"5px"}},_react.default.createElement(_eui.EuiBadge,{color:"hollow",style:{paddingRight:"5px"}},"COUNT OF documents")),this.renderFieldItems(arrayHelpers,fieldOptions,expressionWidth),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_eui.EuiText,{color:"danger",size:"xs"},errors.aggregations),showAddButtonFlag&&_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){arrayHelpers.push(_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_AGG_VALUES))},"data-test-subj":"addMetricButton",style:{paddingTop:"5px"}},"+ Add metric"),limitText)}}]);return MetricExpression}(_react.Component);var _default=(0,_formik.connect)(MetricExpression);exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=MetricPopover;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(23);var _FormControls=__webpack_require__(17);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function MetricPopover(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props,options=_ref.options,closePopover=_ref.closePopover,expressionWidth=_ref.expressionWidth,index=_ref.index;var onChangeFieldWrapper=function onChangeFieldWrapper(options,field,form){form.setFieldValue("aggregations.".concat(index,".fieldName"),options[0].label)};return _react.default.createElement("div",{style:_objectSpread(_objectSpread({width:Math.max(expressionWidth,280)+120,height:160},_constants.POPOVER_STYLE),_constants.EXPRESSION_STYLE)},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("h4",null,"Aggregation"))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikSelect,{name:"aggregations.".concat(index,".aggregationType"),inputProps:{options:_constants.AGGREGATION_TYPES,"data-test-subj":"metrics.".concat(index,".aggregationTypeSelect")}})))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("h4",null,"Field"))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikComboBox,{name:"aggregations.".concat(index,".fieldName"),inputProps:{placeholder:"Select a field",options:options,onChange:onChangeFieldWrapper,isClearable:false,singleSelection:{asPlainText:true},"data-test-subj":"metrics.".concat(index,".ofFieldComboBox")}}))))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){closePopover()}},"Cancel")),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButton,{fill:true,onClick:function onClick(){closePopover()}},"Save"))))}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.MAX_NUM_WHERE_EXPRESSION=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(23);var _constants2=__webpack_require__(27);var _DefineBucketLevelTrigger=__webpack_require__(63);var _helpers=__webpack_require__(22);var _IconToolTip=_interopRequireDefault(__webpack_require__(61));var _WherePopover=_interopRequireDefault(__webpack_require__(485));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var MAX_NUM_WHERE_EXPRESSION={DATA_FILTERS:10,KEYWORD_FILTERS:1};exports.MAX_NUM_WHERE_EXPRESSION=MAX_NUM_WHERE_EXPRESSION;var WhereExpression=function(_Component){_inherits(WhereExpression,_Component);var _super=_createSuper(WhereExpression);function WhereExpression(props){_classCallCheck(this,WhereExpression);return _super.call(this,props)}_createClass(WhereExpression,[{key:"renderFiltersBadges",value:function renderFiltersBadges(filters,filtersArrayHelpers,whereFilterHeader){var _this$props=this.props,openedStates=_this$props.openedStates,closeExpression=_this$props.closeExpression,openExpression=_this$props.openExpression,dataTypes=_this$props.dataTypes,indexFieldFilters=_this$props.indexFieldFilters,_this$props$useTrigge=_this$props.useTriggerFieldOperators,useTriggerFieldOperators=_this$props$useTrigge===void 0?false:_this$props$useTrigge,_this$props$fieldPath=_this$props.fieldPath,fieldPath=_this$props$fieldPath===void 0?"":_this$props$fieldPath,formik=_this$props.formik,onMadeChanges=_this$props.onMadeChanges;var maxNumWhereExpressions=useTriggerFieldOperators?MAX_NUM_WHERE_EXPRESSION.KEYWORD_FILTERS:MAX_NUM_WHERE_EXPRESSION.DATA_FILTERS;return _react.default.createElement("div",null,filters.length===0?_react.default.createElement(_eui.EuiText,{size:"xs"},"No filters defined."):_react.default.createElement("div",{style:{maxWidth:"75%"}},filters.map((function(filter,index){return _react.default.createElement("span",{key:"".concat(fieldPath,"filters.").concat(index),style:{paddingRight:"5px"}},_react.default.createElement(_WherePopover.default,{closePopover:function closePopover(){return closeExpression(_constants.Expressions.WHERE)},dataTypes:dataTypes,indexFieldFilters:indexFieldFilters,fieldPath:"".concat(fieldPath,"filters.").concat(index,"."),filtersArrayHelpers:filtersArrayHelpers,formik:formik,index:index,onMadeChanges:onMadeChanges,openPopover:function openPopover(){return openExpression(_constants.Expressions.WHERE)},openedState:openedStates.WHERE,useTriggerFieldOperators:useTriggerFieldOperators,values:filter,whereFilterHeader:whereFilterHeader}))}))),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),filters.length<maxNumWhereExpressions&&_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs","data-test-subj":"".concat(fieldPath,"addFilterButton"),onClick:function onClick(){openExpression(_constants.Expressions.WHERE);filtersArrayHelpers.push(useTriggerFieldOperators?_objectSpread(_objectSpread({},_constants2.FORMIK_INITIAL_WHERE_EXPRESSION_VALUES),{},{operator:_DefineBucketLevelTrigger.TRIGGER_OPERATORS_MAP.INCLUDE}):_objectSpread({},_constants2.FORMIK_INITIAL_WHERE_EXPRESSION_VALUES))},style:{paddingTop:"5px"}},"+ Add filter"),(0,_helpers.inputLimitText)(filters.length,maxNumWhereExpressions,_lodash.default.lowerCase(whereFilterHeader),_lodash.default.lowerCase("".concat(whereFilterHeader,"s")),{paddingLeft:"10px"}))}},{key:"render",value:function render(){var _this=this;var _this$props2=this.props,values=_this$props2.formik.values,_this$props2$useTrigg=_this$props2.useTriggerFieldOperators,useTriggerFieldOperators=_this$props2$useTrigg===void 0?false:_this$props2$useTrigg,_this$props2$fieldPat=_this$props2.fieldPath,fieldPath=_this$props2$fieldPat===void 0?"":_this$props2$fieldPat;var whereFilterHeader=useTriggerFieldOperators?"Keyword filter":"Data filter";var filters=_lodash.default.get(values,"".concat(fieldPath,"filters"),_constants2.FORMIK_INITIAL_VALUES.filters);return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,whereFilterHeader),_react.default.createElement("i",null," - optional "),_react.default.createElement(_IconToolTip.default,{content:_constants2.FILTERS_TOOLTIP_TEXT,iconType:"questionInCircle"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_formik.FieldArray,{name:"".concat(fieldPath,"filters"),validateOnChange:true},(function(filtersArrayHelpers){return _this.renderFiltersBadges(filters,filtersArrayHelpers,whereFilterHeader)})))}}]);return WhereExpression}(_react.Component);var _default=(0,_formik.connect)(WhereExpression);exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _OverviewStat=_interopRequireDefault(__webpack_require__(473));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_OverviewStat.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _AddActionButton=_interopRequireDefault(__webpack_require__(484));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_AddActionButton.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFieldsFromProperties=getFieldsFromProperties;exports.getPathsPerDataType=getPathsPerDataType;exports.getTypeFromMappings=getTypeFromMappings;exports.resolvePath=resolvePath;exports.shouldSkip=shouldSkip;function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function shouldSkip(mapping){var isDisabled=mapping.enabled===false;var hasIndexDisabled=mapping.index===false;var isNestedDataType=mapping.type==="nested";return isDisabled||hasIndexDisabled||isNestedDataType}function resolvePath(path,field){if(path)return"".concat(path,".").concat(field);return field}function getFieldsFromProperties(properties,dataTypes,path){Object.entries(properties).forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),field=_ref2[0],value=_ref2[1];getTypeFromMappings(value,dataTypes,resolvePath(path,field))}))}function getTypeFromMappings(mappings,dataTypes){var path=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(shouldSkip(mappings))return dataTypes;if(mappings.properties){getFieldsFromProperties(mappings.properties,dataTypes,path);return dataTypes}var type=mappings.type;if(dataTypes[type])dataTypes[type].add(path);else dataTypes[type]=new Set([path]);return dataTypes}function getPathsPerDataType(mappings){var dataTypes={};Object.entries(mappings).forEach((function(_ref3){var _ref4=_slicedToArray(_ref3,2),index=_ref4[0],docMappings=_ref4[1].mappings;return getTypeFromMappings(docMappings,dataTypes)}));return dataTypes}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SubmitErrorHandler=void 0;var _react=__webpack_require__(5);function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var SubmitErrorHandler=function SubmitErrorHandler(props){var errorKeys=Object.keys(dotNotate(props.errors));var effect=function effect(){if(errorKeys.length>0&&!props.isSubmitting&&!props.isValid){props.onSubmitError();var selector='[id="'.concat(errorKeys[0],'"], [name="').concat(errorKeys[0],'"]:not(div)');var errorElement=document.querySelector(selector);if(errorElement){errorElement.focus({preventScroll:true});setTimeout((function(){errorElement.scrollIntoView({behavior:"smooth",block:"center"})}),100)}}};(0,_react.useEffect)(effect,[props.isSubmitting]);return null};exports.SubmitErrorHandler=SubmitErrorHandler;function dotNotate(obj,target,prefix){target=target||{},prefix=prefix||"";Object.keys(obj).forEach((function(key){if(obj[key]!==null&&_typeof(obj[key])==="object"){dotNotate(obj[key],target,prefix+key+".")}else{return target[prefix+key]=obj[key]}}));return target}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _momentTimezone=_interopRequireDefault(__webpack_require__(9));var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var timezones=_momentTimezone.default.tz.names().map((function(tz){return{label:tz}}));var TimezoneComboBox=function TimezoneComboBox(){return _react.default.createElement(_FormControls.FormikComboBox,{name:"timezone",formRow:true,fieldProps:{validate:_validate.validateTimezone},rowProps:{isInvalid:_validate.isInvalid,error:_validate.hasError,style:{marginTop:"0px"}},inputProps:{placeholder:"Select a timezone",options:timezones,renderOption:function renderOption(_ref){var tz=_ref.label;return"".concat(tz," (").concat(_momentTimezone.default.tz(tz).format("Z"),")")},onChange:function onChange(options,field,form){var error=(0,_validate.validateTimezone)(options);form.setFieldError("timezone",error);form.setFieldValue("timezone",options)},onBlur:function onBlur(e,field,form){form.setFieldTouched("timezone",true)},singleSelection:{asPlainText:true},"data-test-subj":"timezoneComboBox"}})};var _default=TimezoneComboBox;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var unitOptions=[{value:"MINUTES",text:"Minutes"},{value:"HOURS",text:"Hours"},{value:"DAYS",text:"Days"}];var Interval=function Interval(){return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikFieldNumber,{name:"period.interval",formRow:true,fieldProps:{validate:_validate.validatePositiveInteger},rowProps:{label:"Run every",isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{icon:"clock",min:1,"data-test-subj":"interval_interval_field"}})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikSelect,{name:"period.unit",formRow:true,fieldProps:{validate:_validate.validateUnit},rowProps:{hasEmptyLabelSpace:true,isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{options:unitOptions,"data-test-subj":"interval_unit_field"}})))};var _default=Interval;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _excluded=["onChange","id","label"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikCheckableCard=function FormikCheckableCard(_ref){var name=_ref.name,_ref$formRow=_ref.formRow,formRow=_ref$formRow===void 0?false:_ref$formRow,_ref$fieldProps=_ref.fieldProps,fieldProps=_ref$fieldProps===void 0?{}:_ref$fieldProps,_ref$rowProps=_ref.rowProps,rowProps=_ref$rowProps===void 0?{}:_ref$rowProps,_ref$inputProps=_ref.inputProps,inputProps=_ref$inputProps===void 0?{}:_ref$inputProps;return _react.default.createElement(_FormikInputWrapper.default,{name:name,fieldProps:fieldProps,render:function render(_ref2){var field=_ref2.field,form=_ref2.form;return formRow?_react.default.createElement(_FormikFormRow.default,{name:name,form:form,rowProps:rowProps},_react.default.createElement(FieldCheckableCard,{name:name,form:form,field:field,inputProps:inputProps})):_react.default.createElement(FieldCheckableCard,{name:name,form:form,field:field,inputProps:inputProps})}})};var FieldCheckableCard=function FieldCheckableCard(_ref3){var name=_ref3.name,form=_ref3.form,field=_ref3.field,_ref3$inputProps=_ref3.inputProps,_onChange=_ref3$inputProps.onChange,id=_ref3$inputProps.id,label=_ref3$inputProps.label,rest=_objectWithoutProperties(_ref3$inputProps,_excluded);return _react.default.createElement(_eui.EuiCheckableCard,_extends({name:name,id:id,label:label},field,rest,{onChange:function onChange(e){return typeof _onChange==="function"?_onChange(e,field,form):field.onChange(e)}}))};var _default=FormikCheckableCard;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _AddTriggerButton=_interopRequireDefault(__webpack_require__(524));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_AddTriggerButton.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _TriggerQuery=_interopRequireDefault(__webpack_require__(532));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_TriggerQuery.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _TriggerExpressions=_interopRequireDefault(__webpack_require__(534));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_TriggerExpressions.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _DelayedLoader=_interopRequireDefault(__webpack_require__(540));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_DelayedLoader.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=getOverviewStats;exports.getTime=getTime;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _momentTimezone=_interopRequireDefault(__webpack_require__(9));var _getScheduleFromMonitor=_interopRequireDefault(__webpack_require__(549));var _constants=__webpack_require__(15);var _clusterMetricsMonitorConstants=__webpack_require__(52);var _clusterMetricsMonitorHelpers=__webpack_require__(53);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getTime(time){var momentTime=_momentTimezone.default.tz(time,_momentTimezone.default.tz.guess());if(time&&momentTime.isValid())return momentTime.format("MM/DD/YY h:mm a z");return _constants.DEFAULT_EMPTY_DATA}function getMonitorType(searchType,monitor){switch(searchType){case _constants.SEARCH_TYPE.GRAPH:return"Visual Graph";case _constants.SEARCH_TYPE.AD:return"Anomaly Detector";case _constants.SEARCH_TYPE.CLUSTER_METRICS:var uri=_lodash.default.get(monitor,"inputs.0.uri");var apiType=(0,_clusterMetricsMonitorHelpers.getApiType)(uri);return _lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".label"));default:return"Extraction Query"}}function getMonitorLevelType(monitorType){switch(monitorType){case _constants.MONITOR_TYPE.QUERY_LEVEL:return"Per query monitor";case _constants.MONITOR_TYPE.BUCKET_LEVEL:return"Per bucket monitor";case _constants.MONITOR_TYPE.CLUSTER_METRICS:return"Per cluster metrics monitor";case _constants.MONITOR_TYPE.DOC_LEVEL:return"Per document monitor";default:console.log("Unexpected monitor type:",monitorType);return"-"}}function getOverviewStats(monitor,monitorId,monitorVersion,activeCount,detector,detectorId){var searchType=_lodash.default.has(monitor,"inputs[0].uri")?_constants.SEARCH_TYPE.CLUSTER_METRICS:_lodash.default.get(monitor,"ui_metadata.search.searchType","query");var detectorOverview=detector?[{header:"Detector",value:_react.default.createElement(_eui.EuiLink,{href:"".concat(_constants.OPENSEARCH_DASHBOARDS_AD_PLUGIN,"#/detectors/").concat(detectorId),target:"_blank"},detector.name)}]:[];var monitorLevelType=_lodash.default.get(monitor,"ui_metadata.monitor_type","query_level_monitor");return[{header:"Monitor type",value:getMonitorLevelType(monitorLevelType)},{header:"Monitor definition type",value:getMonitorType(searchType,monitor)}].concat(detectorOverview,[{header:"Total active alerts",value:activeCount},{header:"Schedule",value:(0,_getScheduleFromMonitor.default)(monitor)},{header:"Last updated",value:getTime(monitor.last_update_time)},{header:"Monitor ID",value:monitorId},{header:"Monitor version number",value:monitorVersion},{header:"Last updated by",value:monitor.user&&monitor.user.name?monitor.user.name:"-"}])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isToday=exports.getRangeMaxTime=exports.calculateInterval=void 0;var _moment=_interopRequireDefault(__webpack_require__(8));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isToday=function isToday(currentDate){return currentDate.isSame((0,_moment.default)(Date.now()),"day")};exports.isToday=isToday;var getRangeMaxTime=function getRangeMaxTime(currentDate){return isToday(currentDate)?(0,_moment.default)(Date.now()):currentDate.clone().endOf("day")};exports.getRangeMaxTime=getRangeMaxTime;var calculateInterval=function calculateInterval(duration){var bucketWindows=[_moment.default.duration(1,"d"),_moment.default.duration(18,"hour"),_moment.default.duration(12,"hour"),_moment.default.duration(6,"hour"),_moment.default.duration(3,"hour"),_moment.default.duration(1,"hour"),_moment.default.duration(30,"minute"),_moment.default.duration(20,"minute"),_moment.default.duration(10,"minute"),_moment.default.duration(5,"minute"),_moment.default.duration(3,"minute"),_moment.default.duration(1,"minute")];var target=Math.ceil(duration/30);if(target<_moment.default.duration(1,"minute")){return _moment.default.duration(1,"minute")}for(var i=0;i<bucketWindows.length;i++){if(bucketWindows[i]<=target){return bucketWindows[i]}}};exports.calculateInterval=calculateInterval},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _AttributeEditor=_interopRequireDefault(__webpack_require__(575));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_AttributeEditor.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NotificationService",{enumerable:true,get:function get(){return _NotificationService.default}});Object.defineProperty(exports,"ServicesConsumer",{enumerable:true,get:function get(){return _services.ServicesConsumer}});Object.defineProperty(exports,"ServicesContext",{enumerable:true,get:function get(){return _services.ServicesContext}});var _NotificationService=_interopRequireDefault(__webpack_require__(596));var _services=__webpack_require__(598);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Main=_interopRequireDefault(__webpack_require__(213));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_Main.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _reactRouterDom=__webpack_require__(10);var _CoreContext=__webpack_require__(68);var _Home=_interopRequireDefault(__webpack_require__(214));var _Breadcrumbs=_interopRequireDefault(__webpack_require__(372));var _CreateMonitor=_interopRequireDefault(__webpack_require__(164));var _MonitorDetails=_interopRequireDefault(__webpack_require__(546));var _CreateDestination=_interopRequireDefault(__webpack_require__(564));var _Flyout=_interopRequireDefault(__webpack_require__(588));var _constants=__webpack_require__(15);var _services=__webpack_require__(209);var _excluded=["history"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Main=function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(){var _this;_classCallCheck(this,Main);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"state",{flyout:null});_defineProperty(_assertThisInitialized(_this),"setFlyout",(function(flyout){var currentFlyout=_this.state.flyout;if(currentFlyout&&flyout&&currentFlyout.type===flyout.type){_this.setState({flyout:null})}else{_this.setState({flyout:flyout})}}));return _this}_createClass(Main,[{key:"render",value:function render(){var _this2=this;var flyout=this.state.flyout;var _this$props=this.props,history=_this$props.history,rest=_objectWithoutProperties(_this$props,_excluded);return _react.default.createElement(_CoreContext.CoreConsumer,null,(function(core){return core&&_react.default.createElement(_services.ServicesConsumer,null,(function(services){return services&&_react.default.createElement("div",{style:{padding:"15px 0px"}},_react.default.createElement(_Breadcrumbs.default,_extends({history:history,httpClient:core.http},rest)),_react.default.createElement(_Flyout.default,{flyout:flyout,onClose:function onClose(){_this2.setFlyout(null)}}),_react.default.createElement(_reactRouterDom.Switch,null,_react.default.createElement(_reactRouterDom.Route,{path:_constants.APP_PATH.CREATE_MONITOR,render:function render(props){return _react.default.createElement(_CreateMonitor.default,_extends({httpClient:core.http,setFlyout:_this2.setFlyout,notifications:core.notifications,isDarkMode:core.isDarkMode,notificationService:services.notificationService},props))}}),_react.default.createElement(_reactRouterDom.Route,{path:_constants.APP_PATH.CREATE_DESTINATION,render:function render(props){return _react.default.createElement(_CreateDestination.default,_extends({httpClient:core.http,setFlyout:_this2.setFlyout,notifications:core.notifications},props))}}),_react.default.createElement(_reactRouterDom.Route,{path:"/destinations/:destinationId",render:function render(props){return _react.default.createElement(_CreateDestination.default,_extends({httpClient:core.http,setFlyout:_this2.setFlyout,notifications:core.notifications},props,{edit:true}))}}),_react.default.createElement(_reactRouterDom.Route,{path:"/monitors/:monitorId",render:function render(props){return _react.default.createElement(_MonitorDetails.default,_extends({httpClient:core.http,setFlyout:_this2.setFlyout,notifications:core.notifications,isDarkMode:core.isDarkMode,notificationService:services.notificationService},props))}}),_react.default.createElement(_reactRouterDom.Route,{render:function render(props){return _react.default.createElement(_Home.default,_extends({httpClient:core.http},props,{setFlyout:_this2.setFlyout,notifications:core.notifications}))}})))}))}))}}]);return Main}(_react.Component);var _default=Main;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Home=_interopRequireDefault(__webpack_require__(215));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_Home.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _reactRouterDom=__webpack_require__(10);var _eui=__webpack_require__(6);var _Dashboard=_interopRequireDefault(__webpack_require__(134));var _Monitors=_interopRequireDefault(__webpack_require__(228));var _DestinationsList=_interopRequireDefault(__webpack_require__(242));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getSelectedTabId=function getSelectedTabId(pathname){if(pathname.includes("monitors"))return"monitors";if(pathname.includes("destinations"))return"destinations";return"alerts"};var Home=function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"onSelectedTabChanged",(function(route){var currPathname=_this.props.location.pathname;if(!currPathname.includes(route)){_this.props.history.push(route)}}));_defineProperty(_assertThisInitialized(_this),"renderTab",(function(tab){return _react.default.createElement(_eui.EuiTab,{onClick:function onClick(){return _this.onSelectedTabChanged(tab.route)},isSelected:tab.id===_this.state.selectedTabId,key:tab.id},tab.name)}));var pathname=_this.props.location.pathname;var selectedTabId=getSelectedTabId(pathname);_this.state={selectedTabId:selectedTabId};_this.tabs=[{id:"alerts",name:"Alerts",route:"dashboard"},{id:"monitors",name:"Monitors",route:"monitors"},{id:"destinations",name:"Destinations",route:"destinations"}];return _this}_createClass(Home,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var prevPathname=prevProps.location.pathname;var currPathname=this.props.location.pathname;if(prevPathname!==currPathname){var selectedTabId=getSelectedTabId(currPathname);this.setState({selectedTabId:selectedTabId})}}},{key:"render",value:function render(){var _this$props=this.props,httpClient=_this$props.httpClient,notifications=_this$props.notifications,setFlyout=_this$props.setFlyout;return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTabs,null,this.tabs.map(this.renderTab)),_react.default.createElement("div",{style:{padding:"25px 25px"}},_react.default.createElement(_reactRouterDom.Switch,null,_react.default.createElement(_reactRouterDom.Route,{exact:true,path:"/dashboard",render:function render(props){return _react.default.createElement(_Dashboard.default,_extends({},props,{httpClient:httpClient,notifications:notifications,perAlertView:false,setFlyout:setFlyout}))}}),_react.default.createElement(_reactRouterDom.Route,{exact:true,path:"/monitors",render:function render(props){return _react.default.createElement(_Monitors.default,_extends({},props,{httpClient:httpClient,notifications:notifications}))}}),_react.default.createElement(_reactRouterDom.Route,{exact:true,path:"/destinations",render:function render(props){return _react.default.createElement(_DestinationsList.default,_extends({},props,{httpClient:httpClient,notifications:notifications}))}}),_react.default.createElement(_reactRouterDom.Redirect,{to:"/dashboard"}))))}}]);return Home}(_react.Component);exports.default=Home;module.exports=exports.default},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ContentPanel=function ContentPanel(_ref){var _ref$title=_ref.title,title=_ref$title===void 0?"":_ref$title,_ref$titleSize=_ref.titleSize,titleSize=_ref$titleSize===void 0?"l":_ref$titleSize,_ref$description=_ref.description,description=_ref$description===void 0?"":_ref$description,_ref$descriptionSize=_ref.descriptionSize,descriptionSize=_ref$descriptionSize===void 0?"xs":_ref$descriptionSize,_ref$bodyStyles=_ref.bodyStyles,bodyStyles=_ref$bodyStyles===void 0?{}:_ref$bodyStyles,_ref$panelStyles=_ref.panelStyles,panelStyles=_ref$panelStyles===void 0?{}:_ref$panelStyles,_ref$horizontalRuleCl=_ref.horizontalRuleClassName,horizontalRuleClassName=_ref$horizontalRuleCl===void 0?"":_ref$horizontalRuleCl,actions=_ref.actions,children=_ref.children;return _react.default.createElement(_eui.EuiPanel,{style:_objectSpread({paddingLeft:"0px",paddingRight:"0px"},panelStyles)},_react.default.createElement(_eui.EuiFlexGroup,{style:{padding:"0px 10px"},justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{size:titleSize},_react.default.createElement("h3",null,title))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Array.isArray(actions)?actions.map((function(action,idx){return _react.default.createElement(_eui.EuiFlexItem,{key:idx},action)})):_react.default.createElement(_eui.EuiFlexItem,null,actions)))),_react.default.createElement(_eui.EuiText,{style:{padding:"0px 10px"},size:descriptionSize,color:"subdued"},description),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs",className:horizontalRuleClassName}),_react.default.createElement("div",{style:_objectSpread({padding:"0px 10px"},bodyStyles)},children))};var _default=ContentPanel;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(15);var _constants2=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createMonitorText="There are no existing alerts. Create a monitor to add triggers and actions. Once an alarm is triggered, the state will show in this table.";var createTriggerText="There are no existing alerts. Create a trigger to start alerting. Once an alarm is triggered, the state will show in this table.";var editTriggerConditionsText="There are no existing alerts. Adjust trigger conditions to start alerting. Once an alarm is triggered, the state will show in this table.";var createMonitorButton=_react.default.createElement(_eui.EuiButton,{fill:true,href:"".concat(_constants2.PLUGIN_NAME,"#").concat(_constants.APP_PATH.CREATE_MONITOR)},"Create monitor");var editMonitorButton=function editMonitorButton(onCreateTrigger){return _react.default.createElement(_eui.EuiButtonEmpty,{onClick:onCreateTrigger},"Edit monitor")};var DashboardEmptyPrompt=function DashboardEmptyPrompt(_ref){var onCreateTrigger=_ref.onCreateTrigger,_ref$isModal=_ref.isModal,isModal=_ref$isModal===void 0?false:_ref$isModal;var inMonitorDetails=typeof onCreateTrigger==="function";var displayText=isModal?editTriggerConditionsText:inMonitorDetails?createTriggerText:createMonitorText;var actions=inMonitorDetails?undefined:isModal?editMonitorButton(onCreateTrigger):createMonitorButton;return _react.default.createElement(_eui.EuiEmptyPrompt,{style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,displayText)),actions:actions})};var _default=DashboardEmptyPrompt;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _constants=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var severityOptions=[{value:"ALL",text:"All severity levels"},{value:"1",text:"1 (Highest)"},{value:"2",text:"2 (High)"},{value:"3",text:"3 (Medium)"},{value:"4",text:"4 (Low)"},{value:"5",text:"5 (Lowest)"}];var stateOptions=[{value:"ALL",text:"All alerts"},{value:_constants.ALERT_STATE.ACTIVE,text:"Active"},{value:_constants.ALERT_STATE.ACKNOWLEDGED,text:"Acknowledged"},{value:_constants.ALERT_STATE.COMPLETED,text:"Completed"},{value:_constants.ALERT_STATE.ERROR,text:"Error"},{value:_constants.ALERT_STATE.DELETED,text:"Deleted"}];var DashboardControls=function DashboardControls(_ref){var activePage=_ref.activePage,pageCount=_ref.pageCount,search=_ref.search,_ref$severity=_ref.severity,severity=_ref$severity===void 0?severityOptions[0]:_ref$severity,_ref$state=_ref.state,state=_ref$state===void 0?stateOptions[0]:_ref$state,onSearchChange=_ref.onSearchChange,onSeverityChange=_ref.onSeverityChange,onStateChange=_ref.onStateChange,onPageChange=_ref.onPageChange,_ref$isAlertsFlyout=_ref.isAlertsFlyout,isAlertsFlyout=_ref$isAlertsFlyout===void 0?false:_ref$isAlertsFlyout,monitorType=_ref.monitorType;var supportedStateOptions=stateOptions;switch(monitorType){case _constants.MONITOR_TYPE.DOC_LEVEL:var supportedStates=[_constants.ALERT_STATE.ACKNOWLEDGED,_constants.ALERT_STATE.ACTIVE,_constants.ALERT_STATE.ERROR];supportedStateOptions=stateOptions.filter((function(state){return _lodash.default.includes(supportedStates,state.value)}));break}return _react.default.createElement(_eui.EuiFlexGroup,{style:{padding:"0px 5px"}},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldSearch,{fullWidth:true,placeholder:"Search",onChange:onSearchChange,value:search})),isAlertsFlyout?null:_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSelect,{options:severityOptions,value:severity,onChange:onSeverityChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSelect,{options:supportedStateOptions,value:state,onChange:onStateChange,"data-test-subj":"dashboardAlertStateFilter"})),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{justifyContent:"center"}},_react.default.createElement(_eui.EuiPagination,{pageCount:pageCount,activePage:activePage,onPageClick:onPageChange})))};var _default=DashboardControls;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.GET_ALERTS_SORT_FILTERS=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var GET_ALERTS_SORT_FILTERS={MONITOR_NAME:"monitor_name",TRIGGER_NAME:"trigger_name",START_TIME:"start_time",END_TIME:"end_time",ACKNOWLEDGE_TIME:"acknowledged_time"};exports.GET_ALERTS_SORT_FILTERS=GET_ALERTS_SORT_FILTERS;var AlertService=_createClass((function AlertService(esDriver){var _this=this;_classCallCheck(this,AlertService);_defineProperty(this,"getAlerts",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context,req,res){var _req$query,_req$query$from,from,_req$query$size,size,_req$query$search,search,_req$query$sortDirect,sortDirection,_req$query$sortField,sortField,_req$query$severityLe,severityLevel,_req$query$alertState,alertState,_req$query$monitorIds,monitorIds,params,_this$esDriver$asScop,callAsCurrentUser,resp,alerts,totalAlerts;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_req$query=req.query,_req$query$from=_req$query.from,from=_req$query$from===void 0?0:_req$query$from,_req$query$size=_req$query.size,size=_req$query$size===void 0?20:_req$query$size,_req$query$search=_req$query.search,search=_req$query$search===void 0?"":_req$query$search,_req$query$sortDirect=_req$query.sortDirection,sortDirection=_req$query$sortDirect===void 0?"desc":_req$query$sortDirect,_req$query$sortField=_req$query.sortField,sortField=_req$query$sortField===void 0?GET_ALERTS_SORT_FILTERS.START_TIME:_req$query$sortField,_req$query$severityLe=_req$query.severityLevel,severityLevel=_req$query$severityLe===void 0?"ALL":_req$query$severityLe,_req$query$alertState=_req$query.alertState,alertState=_req$query$alertState===void 0?"ALL":_req$query$alertState,_req$query$monitorIds=_req$query.monitorIds,monitorIds=_req$query$monitorIds===void 0?[]:_req$query$monitorIds;_context.t0=sortField;_context.next=_context.t0===GET_ALERTS_SORT_FILTERS.MONITOR_NAME?4:_context.t0===GET_ALERTS_SORT_FILTERS.TRIGGER_NAME?6:_context.t0===GET_ALERTS_SORT_FILTERS.END_TIME?8:_context.t0===GET_ALERTS_SORT_FILTERS.ACKNOWLEDGE_TIME?10:12;break;case 4:params={sortString:"".concat(sortField,".keyword"),sortOrder:sortDirection};return _context.abrupt("break",13);case 6:params={sortString:"".concat(sortField,".keyword"),sortOrder:sortDirection};return _context.abrupt("break",13);case 8:params={sortString:sortField,sortOrder:sortDirection,missing:sortDirection==="asc"?"_last":"_first"};return _context.abrupt("break",13);case 10:params={sortString:sortField,sortOrder:sortDirection,missing:"_last"};return _context.abrupt("break",13);case 12:params={sortString:GET_ALERTS_SORT_FILTERS.START_TIME,sortOrder:sortDirection};case 13:params.startIndex=from;params.size=size;params.severityLevel=severityLevel;params.alertState=alertState;params.searchString=search;if(search.trim())params.searchString="*".concat(search.trim().split(" ").join("* *"),"*");if(monitorIds.length>0)params.monitorId=!Array.isArray(monitorIds)?monitorIds:monitorIds[0];_this$esDriver$asScop=_this.esDriver.asScoped(req),callAsCurrentUser=_this$esDriver$asScop.callAsCurrentUser;_context.prev=21;_context.next=24;return callAsCurrentUser("alerting.getAlerts",params);case 24:resp=_context.sent;alerts=resp.alerts.map((function(hit){var alert=hit;var id=hit.alert_id;var version=hit.alert_version;return _objectSpread(_objectSpread({id:id},alert),{},{version:version})}));totalAlerts=resp.totalAlerts;return _context.abrupt("return",res.ok({body:{ok:true,alerts:alerts,totalAlerts:totalAlerts}}));case 30:_context.prev=30;_context.t1=_context["catch"](21);console.log(_context.t1.message);return _context.abrupt("return",res.ok({body:{ok:false,err:_context.t1.message}}));case 34:case"end":return _context.stop()}}}),_callee,null,[[21,30]])})));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}());this.esDriver=esDriver}));exports.default=AlertService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _AcknowledgeAlertsModal=_interopRequireDefault(__webpack_require__(225));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_AcknowledgeAlertsModal.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.DEFAULT_NUM_MODAL_ROWS=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _queryString=_interopRequireDefault(__webpack_require__(32));var _eui=__webpack_require__(6);var _constants=__webpack_require__(15);var _helpers=__webpack_require__(69);var _helpers2=__webpack_require__(22);var _constants2=__webpack_require__(70);var _constants3=__webpack_require__(45);var _DashboardControls=_interopRequireDefault(__webpack_require__(90));var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _tableUtils=__webpack_require__(55);var _DashboardEmptyPrompt=_interopRequireDefault(__webpack_require__(135));var _findingsUtils=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULT_NUM_MODAL_ROWS=10;exports.DEFAULT_NUM_MODAL_ROWS=DEFAULT_NUM_MODAL_ROWS;var AcknowledgeAlertsModal=function(_Component){_inherits(AcknowledgeAlertsModal,_Component);var _super=_createSuper(AcknowledgeAlertsModal);function AcknowledgeAlertsModal(props){var _this;_classCallCheck(this,AcknowledgeAlertsModal);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"getAlerts",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$state,from,search,sortField,sortDirection,severityLevel,alertState,monitorIds,_this$props,httpClient,history,notifications,triggerId,params,queryParamsString;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState(_objectSpread(_objectSpread({},_this.state),{},{loading:true}));_this$state=_this.state,from=_this$state.from,search=_this$state.search,sortField=_this$state.sortField,sortDirection=_this$state.sortDirection,severityLevel=_this$state.severityLevel,alertState=_this$state.alertState,monitorIds=_this$state.monitorIds;_this$props=_this.props,httpClient=_this$props.httpClient,history=_this$props.history,notifications=_this$props.notifications,triggerId=_this$props.triggerId;params={from:from,size:_constants2.MAX_ALERT_COUNT,search:search,sortField:sortField,sortDirection:sortDirection,severityLevel:severityLevel,alertState:alertState,monitorIds:monitorIds};queryParamsString=_queryString.default.stringify(params);history.replace(_objectSpread(_objectSpread({},_this.props.location),{},{search:queryParamsString}));httpClient.get("../api/alerting/alerts",{query:params}).then((function(resp){if(resp.ok){var alerts=resp.alerts;var filteredAlerts=_lodash.default.filter(alerts,{trigger_id:triggerId});_this.setState(_objectSpread(_objectSpread({},_this.state),{},{alerts:filteredAlerts,totalAlerts:filteredAlerts.length}))}else{console.log("error getting alerts:",resp);(0,_helpers2.backendErrorNotification)(notifications,"get","alerts",resp.err)}}));_this.setState(_objectSpread(_objectSpread({},_this.state),{},{loading:false}));case 8:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"acknowledgeAlerts",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var selectedItems,_this$props2,httpClient,notifications,selectedAlerts,monitorAlerts,_this$state2,page,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({loading:true});selectedItems=_this.state.selectedItems;_this$props2=_this.props,httpClient=_this$props2.httpClient,notifications=_this$props2.notifications;if(selectedItems.length){_context2.next=5;break}return _context2.abrupt("return");case 5:selectedAlerts=(0,_helpers.filterActiveAlerts)(selectedItems);monitorAlerts=selectedAlerts.reduce((function(monitorAlerts,alert){var id=alert.id,monitorId=alert.monitor_id;if(monitorAlerts[monitorId])monitorAlerts[monitorId].push(id);else monitorAlerts[monitorId]=[id];return monitorAlerts}),{});Object.entries(monitorAlerts).map((function(_ref3){var _ref4=_slicedToArray(_ref3,2),monitorId=_ref4[0],alerts=_ref4[1];return httpClient.post("../api/alerting/monitors/".concat(monitorId,"/_acknowledge/alerts"),{body:JSON.stringify({alerts:alerts})}).then((function(resp){if(!resp.ok){(0,_helpers2.backendErrorNotification)(notifications,"acknowledge","alert",resp.resp)}else{var successfulCount=_lodash.default.get(resp,"resp.success",[]).length;(0,_helpers.displayAcknowledgedAlertsToast)(notifications,successfulCount)}})).catch((function(error){return error}))}));_this$state2=_this.state,page=_this$state2.page,size=_this$state2.size,search=_this$state2.search,sortField=_this$state2.sortField,sortDirection=_this$state2.sortDirection,severityLevel=_this$state2.severityLevel,alertState=_this$state2.alertState,monitorIds=_this$state2.monitorIds;_context2.next=11;return _this.getAlerts(page*size,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds);case 11:_this.setState(_objectSpread(_objectSpread({},_this.state),{},{loading:false,selectedItems:[]}));case 12:case"end":return _context2.stop()}}}),_callee2)}))));_defineProperty(_assertThisInitialized(_this),"onSeverityLevelChange",(function(e){_this.setState({page:0,severityLevel:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onAlertStateChange",(function(e){_this.setState({page:0,alertState:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onPageClick",(function(page){_this.setState({page:page})}));_defineProperty(_assertThisInitialized(_this),"onSearchChange",(function(e){_this.setState({page:0,search:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onSelectionChange",(function(selectedItems){_this.setState({selectedItems:selectedItems})}));_defineProperty(_assertThisInitialized(_this),"onTableChange",(function(_ref5){var _ref5$page=_ref5.page,tablePage=_ref5$page===void 0?{}:_ref5$page,_ref5$sort=_ref5.sort,sort=_ref5$sort===void 0?{}:_ref5$sort;var page=tablePage.index,size=tablePage.size;var sortField=sort.field,sortDirection=sort.direction;_this.setState({page:page,size:size,sortField:sortField,sortDirection:sortDirection});var alerts=_this.props.alerts;_this.setState({alerts:alerts})}));_defineProperty(_assertThisInitialized(_this),"onCreateTrigger",(function(){var _this$props3=_this.props,history=_this$props3.history,monitorId=_this$props3.monitorId,onClose=_this$props3.onClose;onClose();history.push("/monitors/".concat(monitorId,"?action=").concat(_constants.MONITOR_ACTIONS.UPDATE_MONITOR))}));var _this$props4=_this.props,location=_this$props4.location,monitor_id=_this$props4.monitor_id;var _getURLQueryParams=(0,_helpers.getURLQueryParams)(location),_alertState=_getURLQueryParams.alertState,_from=_getURLQueryParams.from,_search=_getURLQueryParams.search,_severityLevel=_getURLQueryParams.severityLevel,_size=_getURLQueryParams.size,_sortDirection=_getURLQueryParams.sortDirection,_sortField=_getURLQueryParams.sortField;_this.state={alerts:[],alertState:_alertState,flyoutIsOpen:false,loading:true,monitors:[],monitorIds:[monitor_id],page:Math.floor(_from/_size),search:_search,selectedItems:[],severityLevel:_severityLevel,size:DEFAULT_NUM_MODAL_ROWS,sortDirection:_sortDirection,sortField:_sortField,totalAlerts:0};return _this}_createClass(AcknowledgeAlertsModal,[{key:"componentDidMount",value:function componentDidMount(){var _this$state3=this.state,alertState=_this$state3.alertState,page=_this$state3.page,search=_this$state3.search,severityLevel=_this$state3.severityLevel,size=_this$state3.size,sortDirection=_this$state3.sortDirection,sortField=_this$state3.sortField,monitorIds=_this$state3.monitorIds;this.getAlerts(page*size,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var prevQuery=(0,_helpers.getQueryObjectFromState)(prevState);var currQuery=(0,_helpers.getQueryObjectFromState)(this.state);if(!_lodash.default.isEqual(prevQuery,currQuery)){var _this$state4=this.state,page=_this$state4.page,size=_this$state4.size,search=_this$state4.search,sortField=_this$state4.sortField,sortDirection=_this$state4.sortDirection,severityLevel=_this$state4.severityLevel,alertState=_this$state4.alertState,monitorIds=_this$state4.monitorIds;this.getAlerts(page*size,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds)}}},{key:"render",value:function render(){var _this2=this;var _this$props5=this.props,httpClient=_this$props5.httpClient,location=_this$props5.location,history=_this$props5.history,monitor=_this$props5.monitor,notifications=_this$props5.notifications,onClose=_this$props5.onClose,triggerName=_this$props5.triggerName;var detectorId=_lodash.default.get(monitor,_constants.MONITOR_INPUT_DETECTOR_ID);var groupBy=_lodash.default.get(monitor,_constants.MONITOR_GROUP_BY);var monitorType=_lodash.default.get(monitor,"monitor_type",_constants.MONITOR_TYPE.QUERY_LEVEL);var actions=function actions(){var selectedItems=_this2.state.selectedItems;var actions=[_react.default.createElement(_eui.EuiButton,{onClick:_this2.acknowledgeAlerts,disabled:!selectedItems.length,"data-test-subj":"alertsDashboardModal_acknowledgeAlertsButton"},"Acknowledge")];if(!_lodash.default.isEmpty(detectorId)){actions.unshift(_react.default.createElement(_eui.EuiButton,{href:"".concat(_constants.OPENSEARCH_DASHBOARDS_AD_PLUGIN,"#/detectors/").concat(detectorId),target:"_blank"},"View detector ",_react.default.createElement(_eui.EuiIcon,{type:"popout"})))}return actions};var getItemId=function getItemId(item){switch(monitorType){case _constants.MONITOR_TYPE.QUERY_LEVEL:case _constants.MONITOR_TYPE.CLUSTER_METRICS:case _constants.MONITOR_TYPE.DOC_LEVEL:return"".concat(item.id,"-").concat(item.version);case _constants.MONITOR_TYPE.BUCKET_LEVEL:return item.id}};var _this$state5=this.state,_this$state5$alerts=_this$state5.alerts,alerts=_this$state5$alerts===void 0?[]:_this$state5$alerts,alertState=_this$state5.alertState,flyoutIsOpen=_this$state5.flyoutIsOpen,loading=_this$state5.loading,page=_this$state5.page,search=_this$state5.search,selectable=_this$state5.selectable,selectedItems=_this$state5.selectedItems,severityLevel=_this$state5.severityLevel,size=_this$state5.size,sortDirection=_this$state5.sortDirection,sortField=_this$state5.sortField,totalAlerts=_this$state5.totalAlerts;var columnType=function columnType(){var columns;switch(monitorType){case _constants.MONITOR_TYPE.BUCKET_LEVEL:columns=(0,_helpers.insertGroupByColumn)(groupBy);break;case _constants.MONITOR_TYPE.DOC_LEVEL:columns=_lodash.default.cloneDeep(_tableUtils.queryColumns);columns.splice(0,0,(0,_findingsUtils.getAlertsFindingColumn)(httpClient,history,location,notifications,flyoutIsOpen,(function(){return _this2.setState({flyoutIsOpen:true})}),(function(){return _this2.setState({flyoutIsOpen:false})})));break;default:columns=_tableUtils.queryColumns;break}return(0,_helpers.removeColumns)(["trigger_name"],columns)};var pagination={pageIndex:page,pageSize:size,totalItemCount:totalAlerts,pageSizeOptions:_constants3.DEFAULT_PAGE_SIZE_OPTIONS};var selection={onSelectionChange:this.onSelectionChange,selectable:function selectable(item){return item.state===_constants.ALERT_STATE.ACTIVE},selectableMessage:function selectableMessage(selectable){return selectable?undefined:"Only active alerts can be acknowledged."}};var sorting={sort:{direction:sortDirection,field:sortField}};var trimmedAlerts=alerts.slice(page*size,page*size+size);return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:onClose,maxWidth:false,"data-test-subj":"alertsDashboardModal_".concat(triggerName)},_react.default.createElement(_eui.EuiModalHeader,{"data-test-subj":"alertsDashboardModal_header_".concat(triggerName)},_react.default.createElement(_eui.EuiModalHeaderTitle,null,"Select which alerts to acknowledge for ".concat(triggerName))),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_ContentPanel.default,{title:"Alerts (".concat(selectedItems.length,"/").concat(totalAlerts,")"),titleSize:"s",bodyStyles:{padding:"initial"},actions:actions()},_react.default.createElement(_DashboardControls.default,{activePage:page,pageCount:Math.ceil(totalAlerts/size)||1,search:search,severity:severityLevel,state:alertState,onSearchChange:this.onSearchChange,onSeverityChange:this.onSeverityLevelChange,onStateChange:this.onAlertStateChange,onPageChange:this.onPageClick}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"}),_react.default.createElement(_eui.EuiBasicTable,{items:loading?[]:trimmedAlerts,itemId:getItemId,columns:columnType(),loading:loading,pagination:pagination,sorting:sorting,isSelectable:selectable,selection:selection,onChange:this.onTableChange,noItemsMessage:loading?"Loading alerts...":_react.default.createElement(_DashboardEmptyPrompt.default,{onCreateTrigger:this.onCreateTrigger,isModal:true}),"data-test-subj":"alertsDashboardModal_table_".concat(triggerName)}))))),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButton,{onClick:onClose,fill:true,"data-test-subj":"alertsDashboardModal_closeButton_".concat(triggerName)},"Close"))))}}]);return AcknowledgeAlertsModal}(_react.Component);exports.default=AcknowledgeAlertsModal},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.NO_FINDING_DOC_ID_TEXT=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _findingsUtils=__webpack_require__(38);var _FindingService=__webpack_require__(136);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NO_FINDING_DOC_ID_TEXT="No document ID";exports.NO_FINDING_DOC_ID_TEXT=NO_FINDING_DOC_ID_TEXT;var FindingFlyout=function(_Component){_inherits(FindingFlyout,_Component);var _super=_createSuper(FindingFlyout);function FindingFlyout(props){var _this;_classCallCheck(this,FindingFlyout);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"onClick",(function(){var _this$props=_this.props,_this$props$dashboard=_this$props.dashboardFlyoutIsOpen,dashboardFlyoutIsOpen=_this$props$dashboard===void 0?false:_this$props$dashboard,openFlyout=_this$props.openFlyout,closeFlyout=_this$props.closeFlyout;var isFlyoutOpen=_this.state.isFlyoutOpen;if(typeof openFlyout==="function"&&typeof closeFlyout==="function"){if(dashboardFlyoutIsOpen)closeFlyout();else openFlyout()}_this.setState({isFlyoutOpen:!isFlyoutOpen})}));_defineProperty(_assertThisInitialized(_this),"closeFlyout",(function(){_this.setState({isFlyoutOpen:false});var _this$props2=_this.props,_this$props2$dashboar=_this$props2.dashboardFlyoutIsOpen,dashboardFlyoutIsOpen=_this$props2$dashboar===void 0?false:_this$props2$dashboar,closeFlyout=_this$props2.closeFlyout;if(typeof closeFlyout==="function"&&dashboardFlyoutIsOpen){closeFlyout()}}));var alert=props.alert,_props$document_list=props.document_list,document_list=_props$document_list===void 0?[]:_props$document_list,_props$finding=props.finding,finding=_props$finding===void 0?{}:_props$finding;var alertDocList=_lodash.default.isEmpty(alert)?undefined:[{id:_lodash.default.get(alert,"related_doc_ids.0")}];_this.state={docList:alertDocList||document_list,flyout:undefined,finding:finding,isFlyoutOpen:false};return _this}_createClass(FindingFlyout,[{key:"componentDidUpdate",value:function(){var _componentDidUpdate=_asyncToGenerator(regeneratorRuntime.mark((function _callee(prevProps,prevState){var isFlyoutOpen;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isFlyoutOpen=this.state.isFlyoutOpen;if(!(prevState.isFlyoutOpen!==isFlyoutOpen&&isFlyoutOpen)){_context.next=4;break}_context.next=4;return this.renderFlyout();case 4:case"end":return _context.stop()}}}),_callee,this)})));function componentDidUpdate(_x,_x2){return _componentDidUpdate.apply(this,arguments)}return componentDidUpdate}()},{key:"getFinding",value:function(){var _getFinding=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this$props3,alert,httpClient,history,location,notifications,findingId,findingResults,finding;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props3=this.props,alert=_this$props3.alert,httpClient=_this$props3.httpClient,history=_this$props3.history,location=_this$props3.location,notifications=_this$props3.notifications;findingId=_lodash.default.get(alert,"finding_ids.0","");_context2.next=4;return(0,_findingsUtils.getFindings)(_objectSpread(_objectSpread({},_FindingService.DEFAULT_GET_FINDINGS_PARAMS),{},{id:findingId,httpClient:httpClient,history:history,monitorId:alert.monitor_id,location:location,notifications:notifications}));case 4:findingResults=_context2.sent;finding=findingResults.findings[0];this.setState({finding:finding,docList:finding.document_list});case 7:case"end":return _context2.stop()}}}),_callee2,this)})));function getFinding(){return _getFinding.apply(this,arguments)}return getFinding}()},{key:"renderFlyout",value:function(){var _renderFlyout=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var alert,_this$state,docList,finding,_finding$id,findingId,_finding$queries,queries,_docList$,_docList$$id,docId,_docList$$index,index,_docList$$document,document,documentDisplay,queriesDisplay,flyout;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:alert=this.props.alert;if(_lodash.default.isEmpty(alert)){_context3.next=4;break}_context3.next=4;return this.getFinding();case 4:_this$state=this.state,docList=_this$state.docList,finding=_this$state.finding;_finding$id=finding.id,findingId=_finding$id===void 0?"":_finding$id,_finding$queries=finding.queries,queries=_finding$queries===void 0?[]:_finding$queries;_docList$=docList[0],_docList$$id=_docList$.id,docId=_docList$$id===void 0?"":_docList$$id,_docList$$index=_docList$.index,index=_docList$$index===void 0?"":_docList$$index,_docList$$document=_docList$.document,document=_docList$$document===void 0?"":_docList$$document;documentDisplay=JSON.parse(document);queriesDisplay=queries.map((function(query,indexNum){return _react.default.createElement("p",{key:"".concat(query.name).concat(indexNum),style:{paddingTop:indexNum>0?"10px":undefined}},"".concat(query.name," (").concat(query.query,")"))}));flyout=_react.default.createElement(_eui.EuiFlyout,{onClose:this.closeFlyout,ownFocus:true,hideCloseButton:true,side:"right",size:"m"},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{className:"eui-textTruncate"},_react.default.createElement(_eui.EuiTitle,{size:"m",className:"eui-textTruncate"},_react.default.createElement("h3",{id:findingId||"temp_finding_".concat(docId)},"Document finding"))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{iconType:"cross",display:"empty",iconSize:"m",onClick:this.closeFlyout})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_eui.EuiFlexGrid,{columns:2,direction:"column",gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"m"},_react.default.createElement("strong",null,"Document ID"),_react.default.createElement("p",null,docId))),!_lodash.default.isEmpty(findingId)&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"m"},_react.default.createElement("strong",null,"Finding ID"),_react.default.createElement("p",null,findingId))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"m"},_react.default.createElement("strong",null,"Index"),_react.default.createElement("p",null,index)))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"l"}),_react.default.createElement(_eui.EuiText,{size:"m"},_react.default.createElement("strong",null,"Queries"),queriesDisplay),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"l"}),_react.default.createElement(_eui.EuiText,{size:"m"},_react.default.createElement("strong",null,"Document")),_react.default.createElement(_eui.EuiCodeBlock,{language:"json",fontSize:"m",paddingSize:"m",overflowHeight:600,inline:false,isCopyable:true,style:{height:"400px"}},JSON.stringify(documentDisplay,null,3))));this.setState({flyout:flyout});case 11:case"end":return _context3.stop()}}}),_callee3,this)})));function renderFlyout(){return _renderFlyout.apply(this,arguments)}return renderFlyout}()},{key:"render",value:function render(){var dashboardFlyoutIsOpen=this.props.dashboardFlyoutIsOpen;var _this$state2=this.state,docList=_this$state2.docList,flyout=_this$state2.flyout,isFlyoutOpen=_this$state2.isFlyoutOpen;var openFlyout=_lodash.default.isUndefined(dashboardFlyoutIsOpen)?isFlyoutOpen:dashboardFlyoutIsOpen&&isFlyoutOpen;var docId=_lodash.default.get(docList,"0.id",NO_FINDING_DOC_ID_TEXT);docId=_lodash.default.split(docId,"|")[0];return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiLink,{onClick:this.onClick},docId),openFlyout&&flyout)}}]);return FindingFlyout}(_react.Component);exports.default=FindingFlyout},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=FindingsPopover;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function FindingsPopover(_ref){var _ref$docIds=_ref.docIds,docIds=_ref$docIds===void 0?[]:_ref$docIds,_ref$queries=_ref.queries,queries=_ref$queries===void 0?[]:_ref$queries;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];var onButtonClick=function onButtonClick(){return setIsPopoverOpen(!isPopoverOpen)};var closePopover=function closePopover(){return setIsPopoverOpen(false)};var header;var popoverContent;var count;if(!_lodash.default.isEmpty(docIds)){header="Documents";popoverContent=docIds.map((function(docId,index){return _react.default.createElement("div",{key:"".concat(docId).concat(index)},index>0&&_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement("p",null,docId)))}));count=popoverContent.length}else{header="Queries";popoverContent=queries.map((function(query,index){return _react.default.createElement("div",{key:"".concat(query.name).concat(index)},index>0&&_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement("strong",null,query.name),_react.default.createElement("p",null,query.query)))}));count=popoverContent.length}var buttonContent="".concat(count," ").concat(header);return _react.default.createElement(_eui.EuiPopover,{button:_react.default.createElement(_eui.EuiLink,{onClick:onButtonClick},buttonContent),isOpen:isPopoverOpen,closePopover:closePopover},popoverContent)}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Monitors=_interopRequireDefault(__webpack_require__(229));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_Monitors.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _queryString=_interopRequireDefault(__webpack_require__(32));var _eui=__webpack_require__(6);var _AcknowledgeModal=_interopRequireDefault(__webpack_require__(230));var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _MonitorActions=_interopRequireDefault(__webpack_require__(234));var _MonitorControls=_interopRequireDefault(__webpack_require__(236));var _MonitorEmptyPrompt=_interopRequireDefault(__webpack_require__(238));var _constants=__webpack_require__(45);var _helpers=__webpack_require__(240);var _tableUtils=__webpack_require__(241);var _constants2=__webpack_require__(15);var _helpers2=__webpack_require__(22);var _helpers3=__webpack_require__(69);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MAX_MONITOR_COUNT=1e3;var Monitors=function(_Component){_inherits(Monitors,_Component);var _super=_createSuper(Monitors);function Monitors(props){var _this;_classCallCheck(this,Monitors);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"formatGetMonitorsResponse",(function(monitors){var unwrappedMonitors=[];monitors.forEach((function(monitor){var monitorType=_lodash.default.get(monitor,"monitor.monitor.monitor_type","monitor.monitor_type");switch(monitorType){case _constants2.MONITOR_TYPE.CLUSTER_METRICS:var unwrappedMonitor=monitor.monitor;_lodash.default.set(monitor,"monitor",unwrappedMonitor.monitor);_lodash.default.set(monitor,"name",monitor.monitor.name);_lodash.default.set(monitor,"enabled",monitor.monitor.enabled);unwrappedMonitors.push(monitor);break;default:unwrappedMonitors.push(monitor)}}));return unwrappedMonitors}));var _getURLQueryParams=(0,_helpers.getURLQueryParams)(_this.props.location),from=_getURLQueryParams.from,size=_getURLQueryParams.size,search=_getURLQueryParams.search,sortField=_getURLQueryParams.sortField,sortDirection=_getURLQueryParams.sortDirection,state=_getURLQueryParams.state;_this.state={alerts:[],totalAlerts:0,totalMonitors:0,page:Math.floor(from/size),size:size,search:search,sortField:sortField,sortDirection:sortDirection,selectedItems:[],isPopoverOpen:false,monitors:[],monitorState:state,loadingMonitors:true};_this.getMonitors=_lodash.default.debounce(_this.getMonitors.bind(_assertThisInitialized(_this)),500,{leading:true});_this.onTableChange=_this.onTableChange.bind(_assertThisInitialized(_this));_this.onMonitorStateChange=_this.onMonitorStateChange.bind(_assertThisInitialized(_this));_this.onSelectionChange=_this.onSelectionChange.bind(_assertThisInitialized(_this));_this.onSearchChange=_this.onSearchChange.bind(_assertThisInitialized(_this));_this.updateMonitor=_this.updateMonitor.bind(_assertThisInitialized(_this));_this.deleteMonitor=_this.deleteMonitor.bind(_assertThisInitialized(_this));_this.updateMonitors=_this.updateMonitors.bind(_assertThisInitialized(_this));_this.deleteMonitors=_this.deleteMonitors.bind(_assertThisInitialized(_this));_this.onClickAcknowledge=_this.onClickAcknowledge.bind(_assertThisInitialized(_this));_this.onClickAcknowledgeModal=_this.onClickAcknowledgeModal.bind(_assertThisInitialized(_this));_this.onClickEdit=_this.onClickEdit.bind(_assertThisInitialized(_this));_this.onClickEnable=_this.onClickEnable.bind(_assertThisInitialized(_this));_this.onClickDelete=_this.onClickDelete.bind(_assertThisInitialized(_this));_this.onClickDisable=_this.onClickDisable.bind(_assertThisInitialized(_this));_this.onBulkAcknowledge=_this.onBulkAcknowledge.bind(_assertThisInitialized(_this));_this.onBulkEnable=_this.onBulkEnable.bind(_assertThisInitialized(_this));_this.onBulkDelete=_this.onBulkDelete.bind(_assertThisInitialized(_this));_this.onBulkDisable=_this.onBulkDisable.bind(_assertThisInitialized(_this));_this.onPageClick=_this.onPageClick.bind(_assertThisInitialized(_this));_this.getActiveAlerts=_this.getActiveAlerts.bind(_assertThisInitialized(_this));_this.onClickCancel=_this.onClickCancel.bind(_assertThisInitialized(_this));_this.resetFilters=_this.resetFilters.bind(_assertThisInitialized(_this));_this.columns=[].concat(_toConsumableArray(_tableUtils.columns),[{name:"Actions",width:"60px",actions:[{name:"Acknowledge",description:"Acknowledge this Monitor",onClick:_this.onClickAcknowledge},{name:"Enable",description:"Enable this Monitor",onClick:_this.onClickEnable,available:function available(item){return!item.enabled}},{name:"Disable",description:"Disable this Monitor",onClick:_this.onClickDisable,available:function available(item){return item.enabled}},{name:"Delete",description:"Delete this Monitor",onClick:_this.onClickDelete}]}]);return _this}_createClass(Monitors,[{key:"componentDidMount",value:function componentDidMount(){var _this$state=this.state,page=_this$state.page,size=_this$state.size,search=_this$state.search,sortField=_this$state.sortField,sortDirection=_this$state.sortDirection,monitorState=_this$state.monitorState;this.getMonitors(page*size,size,search,sortField,sortDirection,monitorState)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var prevQuery=this.getQueryObjectFromState(prevState);var currQuery=this.getQueryObjectFromState(this.state);if(!_lodash.default.isEqual(prevQuery,currQuery)){var _this$state2=this.state,page=_this$state2.page,size=_this$state2.size,search=_this$state2.search,sortField=_this$state2.sortField,sortDirection=_this$state2.sortDirection,monitorState=_this$state2.monitorState;this.getMonitors(page*size,size,search,sortField,sortDirection,monitorState)}}},{key:"getQueryObjectFromState",value:function getQueryObjectFromState(_ref){var page=_ref.page,size=_ref.size,search=_ref.search,sortField=_ref.sortField,sortDirection=_ref.sortDirection,monitorState=_ref.monitorState;return{page:page,size:size,search:search,sortField:sortField,sortDirection:sortDirection,monitorState:monitorState}}},{key:"getMonitors",value:function(){var _getMonitors=_asyncToGenerator(regeneratorRuntime.mark((function _callee(from,size,search,sortField,sortDirection,state){var params,queryParamsString,_this$props,httpClient,history,response,monitors,totalMonitors;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({loadingMonitors:true});_context.prev=1;params={from:from,size:size,search:search,sortField:sortField,sortDirection:sortDirection,state:state};queryParamsString=_queryString.default.stringify(params);_this$props=this.props,httpClient=_this$props.httpClient,history=_this$props.history;history.replace(_objectSpread(_objectSpread({},this.props.location),{},{search:queryParamsString}));_context.next=8;return httpClient.get("../api/alerting/monitors",{query:params});case 8:response=_context.sent;if(response.ok){monitors=response.monitors,totalMonitors=response.totalMonitors;this.setState({monitors:this.formatGetMonitorsResponse(monitors),totalMonitors:totalMonitors})}else{console.log("error getting monitors:",response)}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](1);console.error(_context.t0);case 15:this.setState({loadingMonitors:false});case 16:case"end":return _context.stop()}}}),_callee,this,[[1,12]])})));function getMonitors(_x,_x2,_x3,_x4,_x5,_x6){return _getMonitors.apply(this,arguments)}return getMonitors}()},{key:"onTableChange",value:function onTableChange(_ref2){var _ref2$page=_ref2.page,tablePage=_ref2$page===void 0?{}:_ref2$page,_ref2$sort=_ref2.sort,sort=_ref2$sort===void 0?{}:_ref2$sort;var page=tablePage.index,size=tablePage.size;var sortField=sort.field,sortDirection=sort.direction;this.setState({page:page,size:size,sortField:sortField,sortDirection:sortDirection})}},{key:"onMonitorStateChange",value:function onMonitorStateChange(e){this.setState({page:0,monitorState:e.target.value})}},{key:"onSelectionChange",value:function onSelectionChange(selectedItems){this.setState({selectedItems:selectedItems})}},{key:"onSearchChange",value:function onSearchChange(e){this.setState({page:0,search:e.target.value})}},{key:"updateMonitor",value:function updateMonitor(item,update){var _this$props2=this.props,httpClient=_this$props2.httpClient,notifications=_this$props2.notifications;var id=item.id,ifSeqNo=item.ifSeqNo,ifPrimaryTerm=item.ifPrimaryTerm,monitor=item.monitor;return httpClient.put("../api/alerting/monitors/".concat(id),{query:{ifSeqNo:ifSeqNo,ifPrimaryTerm:ifPrimaryTerm},body:JSON.stringify(_objectSpread(_objectSpread({},monitor),update))}).then((function(resp){if(!resp.ok){(0,_helpers2.backendErrorNotification)(notifications,"update","monitor",resp.resp)}return resp})).catch((function(err){return err}))}},{key:"deleteMonitor",value:function deleteMonitor(item){var _this$props3=this.props,httpClient=_this$props3.httpClient,notifications=_this$props3.notifications;var id=item.id,version=item.version;return httpClient.delete("../api/alerting/monitors/".concat(id),{query:{version:version}}).then((function(resp){if(!resp.ok){(0,_helpers2.backendErrorNotification)(notifications,"delete","monitor",resp.resp)}return resp})).catch((function(err){return err}))}},{key:"updateMonitors",value:function updateMonitors(items,update){var _this2=this;var arrayOfPromises=items.map((function(item){return _this2.updateMonitor(item,update).catch((function(error){return error}))}));return Promise.all(arrayOfPromises).then((function(values){var _this2$state=_this2.state,page=_this2$state.page,size=_this2$state.size,search=_this2$state.search,sortField=_this2$state.sortField,sortDirection=_this2$state.sortDirection,monitorState=_this2$state.monitorState;_this2.getMonitors(page*size,size,search,sortField,sortDirection,monitorState);_this2.setState({selectedItems:[]})}))}},{key:"deleteMonitors",value:function deleteMonitors(items){var _this3=this;var arrayOfPromises=items.map((function(item){return _this3.deleteMonitor(item).catch((function(error){return error}))}));return Promise.all(arrayOfPromises).then((function(values){var _this3$state=_this3.state,page=_this3$state.page,size=_this3$state.size,search=_this3$state.search,sortField=_this3$state.sortField,sortDirection=_this3$state.sortDirection,monitorState=_this3$state.monitorState;_this3.getMonitors(page*size,size,search,sortField,sortDirection,monitorState);_this3.setState({selectedItems:[]})}))}},{key:"onClickAcknowledge",value:function(){var _onClickAcknowledge=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(item){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.getActiveAlerts([item]);case 2:case"end":return _context2.stop()}}}),_callee2,this)})));function onClickAcknowledge(_x7){return _onClickAcknowledge.apply(this,arguments)}return onClickAcknowledge}()},{key:"onClickAcknowledgeModal",value:function(){var _onClickAcknowledgeModal=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(alerts){var _this$props4,httpClient,notifications,monitorAlerts,promises,values,_this$state3,page,size,search,sortField,sortDirection,monitorState;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$props4=this.props,httpClient=_this$props4.httpClient,notifications=_this$props4.notifications;monitorAlerts=alerts.reduce((function(monitorAlerts,alert){var id=alert.id,monitorId=alert.monitor_id;if(monitorAlerts[monitorId])monitorAlerts[monitorId].push(id);else monitorAlerts[monitorId]=[id];return monitorAlerts}),{});promises=Object.entries(monitorAlerts).map((function(_ref3){var _ref4=_slicedToArray(_ref3,2),monitorId=_ref4[0],alerts=_ref4[1];return httpClient.post("../api/alerting/monitors/".concat(monitorId,"/_acknowledge/alerts"),{body:JSON.stringify({alerts:alerts})}).then((function(resp){if(!resp.ok){(0,_helpers2.backendErrorNotification)(notifications,"acknowledge","alert",resp.resp)}else{var successfulCount=_lodash.default.get(resp,"resp.success",[]).length;(0,_helpers3.displayAcknowledgedAlertsToast)(notifications,successfulCount)}})).catch((function(error){return error}))}));_context3.next=5;return Promise.all(promises);case 5:values=_context3.sent;_this$state3=this.state,page=_this$state3.page,size=_this$state3.size,search=_this$state3.search,sortField=_this$state3.sortField,sortDirection=_this$state3.sortDirection,monitorState=_this$state3.monitorState;this.getMonitors(page*size,size,search,sortField,sortDirection,monitorState);this.setState({alerts:[],totalAlerts:0,showAcknowledgeModal:false,selectedItems:[]});case 9:case"end":return _context3.stop()}}}),_callee3,this)})));function onClickAcknowledgeModal(_x8){return _onClickAcknowledgeModal.apply(this,arguments)}return onClickAcknowledgeModal}()},{key:"onClickEdit",value:function onClickEdit(){var _this$state$selectedI=_slicedToArray(this.state.selectedItems,1),id=_this$state$selectedI[0].id;if(id)this.props.history.push("/monitors/".concat(id,"?action=").concat(_constants2.MONITOR_ACTIONS.UPDATE_MONITOR))}},{key:"onClickEnable",value:function onClickEnable(item){this.updateMonitors([item],{enabled:true})}},{key:"onClickDelete",value:function onClickDelete(item){this.deleteMonitors([item])}},{key:"onClickDisable",value:function onClickDisable(item){this.updateMonitors([item],{enabled:false})}},{key:"onBulkAcknowledge",value:function(){var _onBulkAcknowledge=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.getActiveAlerts(this.state.selectedItems);case 2:case"end":return _context4.stop()}}}),_callee4,this)})));function onBulkAcknowledge(){return _onBulkAcknowledge.apply(this,arguments)}return onBulkAcknowledge}()},{key:"onBulkEnable",value:function onBulkEnable(){this.updateMonitors(this.state.selectedItems,{enabled:true})}},{key:"onBulkDelete",value:function onBulkDelete(){this.deleteMonitors(this.state.selectedItems)}},{key:"onBulkDisable",value:function onBulkDisable(){this.updateMonitors(this.state.selectedItems,{enabled:false})}},{key:"onPageClick",value:function onPageClick(page){this.setState({page:page})}},{key:"getActiveAlerts",value:function(){var _getActiveAlerts=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(selectedItems){var monitorIds,params,_this$props5,httpClient,notifications,response,alerts,totalAlerts;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:monitorIds=selectedItems.map((function(monitor){return monitor.id}));if(monitorIds.length){_context5.next=3;break}return _context5.abrupt("return");case 3:params={from:0,size:100,sortField:"monitor_name",sortDirection:"asc",alertState:"ACTIVE",monitorIds:monitorIds};_this$props5=this.props,httpClient=_this$props5.httpClient,notifications=_this$props5.notifications;_context5.next=7;return httpClient.get("../api/alerting/alerts",{query:params});case 7:response=_context5.sent;if(response.ok){alerts=response.alerts,totalAlerts=response.totalAlerts;this.setState({alerts:alerts,totalAlerts:totalAlerts,showAcknowledgeModal:true})}else{console.error(response);(0,_helpers2.backendErrorNotification)(notifications,"get","alerts",response.err)}case 9:case"end":return _context5.stop()}}}),_callee5,this)})));function getActiveAlerts(_x9){return _getActiveAlerts.apply(this,arguments)}return getActiveAlerts}()},{key:"onClickCancel",value:function onClickCancel(){this.setState({showAcknowledgeModal:false})}},{key:"resetFilters",value:function resetFilters(){this.setState({search:_constants.DEFAULT_QUERY_PARAMS.search,monitorState:_constants.DEFAULT_QUERY_PARAMS.state})}},{key:"getItemId",value:function getItemId(item){return"".concat(item.id,"-").concat(item.currentTime)}},{key:"render",value:function render(){var _this$state4=this.state,alerts=_this$state4.alerts,monitors=_this$state4.monitors,monitorState=_this$state4.monitorState,page=_this$state4.page,search=_this$state4.search,selectedItems=_this$state4.selectedItems,showAcknowledgeModal=_this$state4.showAcknowledgeModal,size=_this$state4.size,sortDirection=_this$state4.sortDirection,sortField=_this$state4.sortField,totalAlerts=_this$state4.totalAlerts,totalMonitors=_this$state4.totalMonitors,loadingMonitors=_this$state4.loadingMonitors;var filterIsApplied=!!search||monitorState!==_constants.DEFAULT_QUERY_PARAMS.state;var pagination={pageIndex:page,pageSize:size,pageSizeOptions:_constants.DEFAULT_PAGE_SIZE_OPTIONS,totalItemCount:Math.min(MAX_MONITOR_COUNT,totalMonitors)};var sorting={sort:{direction:sortDirection,field:sortField}};var selection={onSelectionChange:this.onSelectionChange,selectableMessage:function selectableMessage(selectable){return selectable?undefined:undefined}};return _react.default.createElement(_ContentPanel.default,{actions:_react.default.createElement(_MonitorActions.default,{isEditDisabled:selectedItems.length!==1,onBulkAcknowledge:this.onBulkAcknowledge,onBulkEnable:this.onBulkEnable,onBulkDisable:this.onBulkDisable,onBulkDelete:this.onBulkDelete,onClickEdit:this.onClickEdit}),bodyStyles:{padding:"initial"},title:"Monitors"},_react.default.createElement(_MonitorControls.default,{activePage:page,pageCount:Math.ceil(totalMonitors/size)||1,search:search,state:monitorState,onSearchChange:this.onSearchChange,onStateChange:this.onMonitorStateChange,onPageClick:this.onPageClick}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"}),showAcknowledgeModal&&_react.default.createElement(_AcknowledgeModal.default,{alerts:alerts,totalAlerts:totalAlerts,onAcknowledge:this.onClickAcknowledgeModal,onClickCancel:this.onClickCancel}),_react.default.createElement(_eui.EuiBasicTable,{columns:this.columns,hasActions:true,isSelectable:true,itemId:this.getItemId,items:monitors,noItemsMessage:_react.default.createElement(_MonitorEmptyPrompt.default,{filterIsApplied:filterIsApplied,loading:loadingMonitors,resetFilters:this.resetFilters}),onChange:this.onTableChange,pagination:pagination,selection:selection,sorting:sorting}))}}]);return Monitors}(_react.Component);exports.default=Monitors;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _AcknowledgeModal=_interopRequireDefault(__webpack_require__(231));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_AcknowledgeModal.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _propTypes=_interopRequireDefault(__webpack_require__(16));var _moment=_interopRequireDefault(__webpack_require__(8));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var AcknowledgeModal=function(_Component){_inherits(AcknowledgeModal,_Component);var _super=_createSuper(AcknowledgeModal);function AcknowledgeModal(props){var _this;_classCallCheck(this,AcknowledgeModal);_this=_super.call(this,props);_this.state={selectedItems:[]};_this.onConfirm=_this.onConfirm.bind(_assertThisInitialized(_this));_this.onSelectionChange=_this.onSelectionChange.bind(_assertThisInitialized(_this));return _this}_createClass(AcknowledgeModal,[{key:"onConfirm",value:function onConfirm(){var selectedItems=this.state.selectedItems;if(!selectedItems.length)return;this.props.onAcknowledge(selectedItems)}},{key:"onSelectionChange",value:function onSelectionChange(selectedItems){this.setState({selectedItems:selectedItems})}},{key:"renderTime",value:function renderTime(time){var momentTime=(0,_moment.default)(time);if(time&&momentTime.isValid())return momentTime.format("MM/DD/YY h:mm a");return"--"}},{key:"render",value:function render(){var _this$props=this.props,alerts=_this$props.alerts,totalAlerts=_this$props.totalAlerts;var columns=[{field:"monitor_name",name:"Monitor",truncateText:true},{field:"trigger_name",name:"Trigger",truncateText:true},{field:"start_time",name:"Start Time",truncateText:false,render:this.renderTime},{field:"severity",name:"Severity",align:"right",truncateText:false}];var selection={onSelectionChange:this.onSelectionChange};return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:"Acknowledge Alerts",maxWidth:650,onCancel:this.props.onClickCancel,onConfirm:this.onConfirm,cancelButtonText:"cancel",confirmButtonText:"Acknowledge"},_react.default.createElement("p",null,"Select which alerts to acknowledge."),_react.default.createElement(_eui.EuiInMemoryTable,{items:alerts,itemId:"id",columns:columns,isSelectable:true,selection:selection,onTableChange:this.onTableChange,style:{borderTop:"1px solid #D9D9D9",borderLeft:"1px solid #D9D9D9",borderRight:"1px solid #D9D9D9"}})))}}]);return AcknowledgeModal}(_react.Component);exports.default=AcknowledgeModal;var AlertType=_propTypes.default.shape({});module.exports=exports.default},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _MonitorActions=_interopRequireDefault(__webpack_require__(235));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_MonitorActions.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(15);var _constants2=__webpack_require__(0);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MonitorActions=function(_Component){_inherits(MonitorActions,_Component);var _super=_createSuper(MonitorActions);function MonitorActions(){var _this;_classCallCheck(this,MonitorActions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"state",{isActionsOpen:false});_defineProperty(_assertThisInitialized(_this),"getActions",(function(){var isEditDisabled=_this.props.isEditDisabled;var actions=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"acknowledge","data-test-subj":"acknowledgeItem",onClick:function onClick(){_this.onCloseActions();_this.props.onBulkAcknowledge()}},"Acknowledge"),_react.default.createElement(_eui.EuiContextMenuItem,{key:"enable","data-test-subj":"enableItem",onClick:function onClick(){_this.onCloseActions();_this.props.onBulkEnable()}},"Enable"),_react.default.createElement(_eui.EuiContextMenuItem,{key:"disable","data-test-subj":"disableItem",onClick:function onClick(){_this.onCloseActions();_this.props.onBulkDisable()}},"Disable"),_react.default.createElement(_eui.EuiContextMenuItem,{key:"delete","data-test-subj":"deleteItem",onClick:function onClick(){_this.onCloseActions();_this.props.onBulkDelete()}},"Delete")];if(isEditDisabled)actions.splice(0,1);return actions}));_defineProperty(_assertThisInitialized(_this),"onCloseActions",(function(){_this.setState({isActionsOpen:false})}));_defineProperty(_assertThisInitialized(_this),"onClickActions",(function(){_this.setState((function(prevState){return{isActionsOpen:!prevState.isActionsOpen}}))}));return _this}_createClass(MonitorActions,[{key:"render",value:function render(){var isActionsOpen=this.state.isActionsOpen;var _this$props=this.props,isEditDisabled=_this$props.isEditDisabled,onClickEdit=_this$props.onClickEdit;return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPopover,{id:"actionsPopover",button:_react.default.createElement(_eui.EuiButton,{onClick:this.onClickActions,iconType:"arrowDown",iconSide:"right","data-test-subj":"actionsButton"},"Actions"),isOpen:isActionsOpen,closePopover:this.onCloseActions,panelPaddingSize:"none",anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiContextMenuPanel,{items:this.getActions()}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{disabled:isEditDisabled,onClick:onClickEdit,"data-test-subj":"editButton"},"Edit")),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,href:"".concat(_constants2.PLUGIN_NAME,"#").concat(_constants.APP_PATH.CREATE_MONITOR),"data-test-subj":"createButton"},"Create monitor")))}}]);return MonitorActions}(_react.Component);exports.default=MonitorActions;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _MonitorControls=_interopRequireDefault(__webpack_require__(237));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_MonitorControls.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MONITOR_STATES={ALL:"all",ENABLED:"enabled",DISABLED:"disabled"};var states=[{value:MONITOR_STATES.ALL,text:"All states"},{value:MONITOR_STATES.ENABLED,text:"Enabled"},{value:MONITOR_STATES.DISABLED,text:"Disabled"}];var MonitorControls=function MonitorControls(_ref){var activePage=_ref.activePage,pageCount=_ref.pageCount,search=_ref.search,state=_ref.state,onSearchChange=_ref.onSearchChange,onStateChange=_ref.onStateChange,onPageClick=_ref.onPageClick;return _react.default.createElement(_eui.EuiFlexGroup,{style:{padding:"0px 5px"}},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldSearch,{fullWidth:true,value:search,placeholder:"Search",onChange:onSearchChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSelect,{options:states,value:state,onChange:onStateChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{justifyContent:"center"}},_react.default.createElement(_eui.EuiPagination,{pageCount:pageCount,activePage:activePage,onPageClick:onPageClick})))};var _default=MonitorControls;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _MonitorEmptyPrompt=_interopRequireDefault(__webpack_require__(239));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_MonitorEmptyPrompt.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(15);var _constants2=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var filterText="There are no monitors matching your applied filters. Reset your filters to view your monitors.";var emptyMonitorText="There are no existing monitors. Create a monitor to add triggers and actions.";var loadingText="Loading monitors...";var createMonitorButton=_react.default.createElement(_eui.EuiButton,{fill:true,href:"".concat(_constants2.PLUGIN_NAME,"#").concat(_constants.APP_PATH.CREATE_MONITOR)},"Create monitor");var resetFiltersButton=function resetFiltersButton(resetFilters){return _react.default.createElement(_eui.EuiButton,{fill:true,onClick:resetFilters},"Reset Filters")};var getMessagePrompt=function getMessagePrompt(_ref){var filterIsApplied=_ref.filterIsApplied,loading=_ref.loading;if(loading)return loadingText;if(filterIsApplied)return filterText;return emptyMonitorText};var getActions=function getActions(_ref2){var filterIsApplied=_ref2.filterIsApplied,loading=_ref2.loading,resetFilters=_ref2.resetFilters;if(loading)return null;if(filterIsApplied)return resetFiltersButton(resetFilters);return createMonitorButton};var MonitorEmptyPrompt=function MonitorEmptyPrompt(props){return _react.default.createElement(_eui.EuiEmptyPrompt,{style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,getMessagePrompt(props))),actions:getActions(props)})};var _default=MonitorEmptyPrompt;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getURLQueryParams=getURLQueryParams;var _constants=__webpack_require__(45);var _queryString=_interopRequireDefault(__webpack_require__(32));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getURLQueryParams(location){var _queryString$parse=_queryString.default.parse(location.search),_queryString$parse$fr=_queryString$parse.from,from=_queryString$parse$fr===void 0?_constants.DEFAULT_QUERY_PARAMS.from:_queryString$parse$fr,_queryString$parse$si=_queryString$parse.size,size=_queryString$parse$si===void 0?_constants.DEFAULT_QUERY_PARAMS.size:_queryString$parse$si,_queryString$parse$se=_queryString$parse.search,search=_queryString$parse$se===void 0?_constants.DEFAULT_QUERY_PARAMS.search:_queryString$parse$se,_queryString$parse$so=_queryString$parse.sortField,sortField=_queryString$parse$so===void 0?_constants.DEFAULT_QUERY_PARAMS.sortField:_queryString$parse$so,_queryString$parse$so2=_queryString$parse.sortDirection,sortDirection=_queryString$parse$so2===void 0?_constants.DEFAULT_QUERY_PARAMS.sortDirection:_queryString$parse$so2,_queryString$parse$st=_queryString$parse.state,state=_queryString$parse$st===void 0?_constants.DEFAULT_QUERY_PARAMS.state:_queryString$parse$st;return{from:isNaN(parseInt(from,10))?_constants.DEFAULT_QUERY_PARAMS.from:parseInt(from,10),size:isNaN(parseInt(size,10))?_constants.DEFAULT_QUERY_PARAMS.size:parseInt(size,10),search:search,sortField:sortField,sortDirection:sortDirection,state:state}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.columns=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _moment=_interopRequireDefault(__webpack_require__(8));var _constants=__webpack_require__(15);var _constants2=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var renderTime=function renderTime(time){var momentTime=(0,_moment.default)(time);if(time&&momentTime.isValid())return momentTime.format("MM/DD/YY h:mm a");return _constants.DEFAULT_EMPTY_DATA};var columns=[{field:"name",name:"Monitor name",sortable:true,textOnly:true,render:function render(name,item){return _react.default.createElement(_eui.EuiLink,{"data-test-subj":name,href:"".concat(_constants2.PLUGIN_NAME,"#/monitors/").concat(item.id)},name)}},{field:"user",name:"Last updated by",sortable:true,truncateText:true,textOnly:true,render:function render(_,item){return item.monitor.user&&item.monitor.user.name?item.monitor.user.name:"-"}},{field:"latestAlert",name:"Latest alert",sortable:false,truncateText:true,textOnly:true},{field:"enabled",name:"State",sortable:false,truncateText:false,render:function render(enabled){return enabled?"Enabled":"Disabled"}},{field:"lastNotificationTime",name:"Last notification time",sortable:true,truncateText:false,render:renderTime,dataType:"date"},{field:"active",name:"Active",sortable:true,truncateText:false},{field:"acknowledged",name:"Acknowledged",sortable:true,truncateText:false},{field:"errors",name:"Errors",sortable:true,truncateText:false},{field:"ignored",name:"Ignored",sortable:true,truncateText:false}];exports.columns=columns},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _DestinationsList=_interopRequireDefault(__webpack_require__(243));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_DestinationsList.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _queryString=_interopRequireDefault(__webpack_require__(32));var _lodash=_interopRequireDefault(__webpack_require__(7));var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _DestinationsList=__webpack_require__(244);var _constants=__webpack_require__(137);var _helpers=__webpack_require__(253);var _deleteHelpers=__webpack_require__(254);var _constants2=__webpack_require__(0);var _constants3=__webpack_require__(15);var _ManageSenders=_interopRequireDefault(__webpack_require__(138));var _ManageEmailGroups=_interopRequireDefault(__webpack_require__(162));var _helpers2=__webpack_require__(48);var _constants4=__webpack_require__(31);var _helpers3=__webpack_require__(22);var _NotificationsInfoCallOut=_interopRequireDefault(__webpack_require__(368));var _FullPageNotificationsInfoCallOut=_interopRequireDefault(__webpack_require__(370));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DestinationsList=function(_React$Component){_inherits(DestinationsList,_React$Component);var _super=_createSuper(DestinationsList);function DestinationsList(props){var _this;_classCallCheck(this,DestinationsList);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"isEmailAllowed",(function(){var allowList=_this.state.allowList;return allowList.includes(_constants4.DESTINATION_TYPE.EMAIL)}));_defineProperty(_assertThisInitialized(_this),"isDeleteAllowed",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(type,id){var httpClient,requestBody,resp,total;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:httpClient=_this.props.httpClient;requestBody={query:(0,_deleteHelpers.isDeleteAllowedQuery)(type,id),index:_constants2.INDEX.SCHEDULED_JOBS};_context.next=4;return httpClient.post("../api/alerting/monitors/_search",{body:JSON.stringify(requestBody)});case 4:resp=_context.sent;total=_lodash.default.get(resp,"resp.hits.total.value");return _context.abrupt("return",total===0);case 7:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"handleDeleteAction",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(destinationToDelete){var id,type,allowDelete;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=destinationToDelete.id,type=destinationToDelete.type;_context2.next=3;return _this.isDeleteAllowed(type,id);case 3:allowDelete=_context2.sent;if(allowDelete){_this.setState({showDeleteConfirmation:true,destinationToDelete:destinationToDelete})}else{_this.setState({destinationConsumedByOthers:true,destinationToDelete:destinationToDelete});setTimeout((function(){return _this.setState({destinationConsumedByOthers:false,destinationToDelete:null})}),5e3)}case 5:case"end":return _context2.stop()}}}),_callee2)})));return function(_x3){return _ref2.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"handleDeleteDestination",_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var destinationId,_this$props,httpClient,notifications,resp;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:destinationId=_this.state.destinationToDelete.id;_this$props=_this.props,httpClient=_this$props.httpClient,notifications=_this$props.notifications;_context3.prev=2;_context3.next=5;return httpClient.delete("../api/alerting/destinations/".concat(destinationId));case 5:resp=_context3.sent;if(!resp.ok){_context3.next=11;break}_context3.next=9;return _this.getDestinations();case 9:_context3.next=13;break;case 11:console.log("Unable to delete destination");(0,_helpers3.backendErrorNotification)(notifications,"delete","destination",resp.resp);case 13:_this.setState({showDeleteConfirmation:false,destinationToDelete:null});_context3.next=19;break;case 16:_context3.prev=16;_context3.t0=_context3["catch"](2);console.log("unable to delete destination",_context3.t0);case 19:case"end":return _context3.stop()}}}),_callee3,null,[[2,16]])}))));_defineProperty(_assertThisInitialized(_this),"handleEditDestination",(function(destinationToEdit){_this.props.history.push({pathname:"destinations/".concat(destinationToEdit.id),search:"?action=".concat(_constants3.DESTINATION_ACTIONS.UPDATE_DESTINATION),state:{destinationToEdit:destinationToEdit}})}));_defineProperty(_assertThisInitialized(_this),"handleSearchChange",(function(e){var searchText=e.target.value;_this.setState((function(state){return{page:0,queryParams:_objectSpread(_objectSpread({},state.queryParams),{},{search:searchText})}}))}));_defineProperty(_assertThisInitialized(_this),"handleTypeChange",(function(e){var type=e.target.value;_this.setState((function(state){return{page:0,queryParams:_objectSpread(_objectSpread({},state.queryParams),{},{type:type})}}))}));_defineProperty(_assertThisInitialized(_this),"getDestinations",_lodash.default.debounce(function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(from,params){var _this$props2,history,httpClient,queryParms,resp;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.setState({isDestinationLoading:true});_this$props2=_this.props,history=_this$props2.history,httpClient=_this$props2.httpClient;queryParms=_queryString.default.stringify(_objectSpread({from:from},params));history.replace(_objectSpread(_objectSpread({},_this.props.location),{},{search:queryParms}));_context4.prev=4;_context4.next=7;return httpClient.get("../api/alerting/destinations",{query:_objectSpread({from:from},params)});case 7:resp=_context4.sent;if(resp.ok){_this.setState({isDestinationLoading:false,destinations:resp.destinations,totalDestinations:resp.totalDestinations})}else{_this.setState({isDestinationLoading:false})}_context4.next=14;break;case 11:_context4.prev=11;_context4.t0=_context4["catch"](4);console.error("Unable to get destinations",_context4.t0);case 14:case"end":return _context4.stop()}}}),_callee4,null,[[4,11]])})));return function(_x4,_x5){return _ref4.apply(this,arguments)}}(),500,{leading:true}));_defineProperty(_assertThisInitialized(_this),"handlePageChange",(function(_ref5){var _ref5$page=_ref5.page,tablePage=_ref5$page===void 0?{}:_ref5$page,_ref5$sort=_ref5.sort,sort=_ref5$sort===void 0?{}:_ref5$sort;var page=tablePage.index,size=tablePage.size;var sortField=sort.field,sortDirection=sort.direction;_this.setState((function(state){return{page:page,queryParams:_objectSpread(_objectSpread({},state.queryParams),{},{size:size,sortField:sortField,sortDirection:sortDirection})}}))}));_defineProperty(_assertThisInitialized(_this),"handlePageClick",(function(page){_this.setState({page:page})}));_defineProperty(_assertThisInitialized(_this),"handleResetFilter",(function(){_this.setState((function(state){return _objectSpread(_objectSpread({},state),{},{queryParams:_objectSpread(_objectSpread({},state.queryParams),{},{search:"",type:"ALL"})})}))}));_defineProperty(_assertThisInitialized(_this),"hideManageSendersModal",(function(){_this.setState({showManageSenders:false})}));_defineProperty(_assertThisInitialized(_this),"hideManageEmailGroupsModal",(function(){_this.setState({showManageEmailGroups:false})}));var _getURLQueryParams=(0,_helpers.getURLQueryParams)(props.location),_from=_getURLQueryParams.from,_size=_getURLQueryParams.size,search=_getURLQueryParams.search,_sortField=_getURLQueryParams.sortField,_sortDirection=_getURLQueryParams.sortDirection,_type=_getURLQueryParams.type;_this.state={showDeleteConfirmation:false,isDestinationLoading:true,destinations:[],destinationToDelete:undefined,totalDestinations:0,page:Math.floor(_from/_size),queryParams:{size:_size,search:search,sortField:_sortField,sortDirection:_sortDirection,type:_type},selectedItems:[],allowList:[],showManageSenders:false,showManageEmailGroups:false,hasNotificationPlugin:false};_this.columns=[].concat(_toConsumableArray(_constants.staticColumns),[{name:"Actions",width:"35px",actions:[{name:"View",description:"View this destination.",onClick:_this.handleEditDestination}]}]);_this.getPlugins=_this.getPlugins.bind(_assertThisInitialized(_this));return _this}_createClass(DestinationsList,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){if(!_lodash.default.isEqual(_objectSpread({page:prevState.page},prevState.queryParams),_objectSpread({page:this.state.page},this.state.queryParams))){var _this$state=this.state,page=_this$state.page,queryParams=_this$state.queryParams;this.getDestinations(page*queryParams.size,queryParams)}}},{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var httpClient,allowList,_this$state2,page,queryParams;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:this.getPlugins();httpClient=this.props.httpClient;_context5.next=4;return(0,_helpers2.getAllowList)(httpClient);case 4:allowList=_context5.sent;this.setState({allowList:allowList});_this$state2=this.state,page=_this$state2.page,queryParams=_this$state2.queryParams;this.getDestinations(page*queryParams.size,queryParams);case 8:case"end":return _context5.stop()}}}),_callee5,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"getPlugins",value:function(){var _getPlugins=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){var httpClient,pluginsResponse,plugins,hasNotificationPlugin;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:httpClient=this.props.httpClient;_context6.prev=1;_context6.next=4;return httpClient.get("../api/alerting/_plugins");case 4:pluginsResponse=_context6.sent;if(pluginsResponse.ok){plugins=pluginsResponse.resp.map((function(plugin){return plugin.component}));hasNotificationPlugin=plugins.indexOf(_constants3.OS_NOTIFICATION_PLUGIN)!==-1;this.setState({hasNotificationPlugin:hasNotificationPlugin})}else{console.error("There was a problem getting plugins list")}_context6.next=11;break;case 8:_context6.prev=8;_context6.t0=_context6["catch"](1);console.error("There was a problem getting plugins list",_context6.t0);case 11:case"end":return _context6.stop()}}}),_callee6,this,[[1,8]])})));function getPlugins(){return _getPlugins.apply(this,arguments)}return getPlugins}()},{key:"render",value:function render(){var _this2=this;var _this$props3=this.props,httpClient=_this$props3.httpClient,notifications=_this$props3.notifications;var _this$state3=this.state,destinations=_this$state3.destinations,destinationToDelete=_this$state3.destinationToDelete,page=_this$state3.page,_this$state3$queryPar=_this$state3.queryParams,size=_this$state3$queryPar.size,search=_this$state3$queryPar.search,type=_this$state3$queryPar.type,sortDirection=_this$state3$queryPar.sortDirection,sortField=_this$state3$queryPar.sortField,totalDestinations=_this$state3.totalDestinations,isDestinationLoading=_this$state3.isDestinationLoading,destinationConsumedByOthers=_this$state3.destinationConsumedByOthers,allowList=_this$state3.allowList,hasNotificationPlugin=_this$state3.hasNotificationPlugin;var isFilterApplied=!!search||type!=="ALL";var pagination={pageIndex:page,pageSize:size,totalItemCount:totalDestinations,pageSizeOptions:[5,10,20,50]};var sorting={sort:{direction:sortDirection,field:sortField}};return _react.default.createElement(_react.default.Fragment,null,destinationConsumedByOthers?_react.default.createElement(_eui.EuiCallOut,{title:"Couldn't delete destination ".concat(destinationToDelete.name,". One or more monitors uses this destination."),iconType:"cross",color:"danger"}):null,isDestinationLoading||totalDestinations>0||isFilterApplied?_react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h3",null,"Destinations (deprecated)")),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_NotificationsInfoCallOut.default,{hasNotificationPlugin:hasNotificationPlugin}),_react.default.createElement(_ContentPanel.default,{bodyStyles:{padding:"initial"},title:_react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,{size:"s",style:{paddingBottom:"0px",marginBottom:"0px"}},_react.default.createElement("h3",null,"Destinations pending for migration")),hasNotificationPlugin?_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s",style:{paddingTop:"0px",marginTop:"0px"}},"Destinations that are pending migration will continue to work."):null),actions:_react.default.createElement(_DestinationsList.DestinationsActions,{isEmailAllowed:this.isEmailAllowed(),onClickManageSenders:function onClickManageSenders(){_this2.setState({showManageSenders:true})},onClickManageEmailGroups:function onClickManageEmailGroups(){_this2.setState({showManageEmailGroups:true})}})},_react.default.createElement(_DestinationsList.DeleteConfirmation,{isVisible:this.state.showDeleteConfirmation,onCancel:function onCancel(){_this2.setState({showDeleteConfirmation:false})},onConfirm:this.handleDeleteDestination}),_react.default.createElement(_ManageSenders.default,{httpClient:httpClient,isEmailAllowed:this.isEmailAllowed(),isVisible:this.state.showManageSenders,onClickCancel:this.hideManageSendersModal,onClickSave:this.hideManageSendersModal,notifications:notifications}),_react.default.createElement(_ManageEmailGroups.default,{httpClient:httpClient,isEmailAllowed:this.isEmailAllowed(),isVisible:this.state.showManageEmailGroups,onClickCancel:this.hideManageEmailGroupsModal,onClickSave:this.hideManageEmailGroupsModal,notifications:notifications}),_react.default.createElement(_DestinationsList.DestinationsControls,{activePage:page,pageCount:Math.ceil(totalDestinations/size)||1,search:search,type:type,onSearchChange:this.handleSearchChange,onTypeChange:this.handleTypeChange,onPageClick:this.handlePageClick,allowList:allowList}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"}),_react.default.createElement(_eui.EuiBasicTable,{columns:this.columns,hasActions:true,isSelectable:true,items:destinations,pagination:pagination,noItemsMessage:isDestinationLoading?"Loading destinations...":_react.default.createElement(_DestinationsList.EmptyDestinations,{hasNotificationPlugin:hasNotificationPlugin,isFilterApplied:isFilterApplied,onResetFilters:this.handleResetFilter}),onChange:this.handlePageChange,sorting:sorting}))):_react.default.createElement(_FullPageNotificationsInfoCallOut.default,{hasNotificationPlugin:hasNotificationPlugin}))}}]);return DestinationsList}(_react.default.Component);var _default=DestinationsList;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DeleteConfirmation",{enumerable:true,get:function get(){return _DeleteConfirmation.default}});Object.defineProperty(exports,"DestinationsActions",{enumerable:true,get:function get(){return _DestinationsActions.default}});Object.defineProperty(exports,"DestinationsControls",{enumerable:true,get:function get(){return _DestinationsControls.default}});Object.defineProperty(exports,"EmptyDestinations",{enumerable:true,get:function get(){return _EmptyDestinations.default}});var _DeleteConfirmation=_interopRequireDefault(__webpack_require__(245));var _DestinationsActions=_interopRequireDefault(__webpack_require__(247));var _DestinationsControls=_interopRequireDefault(__webpack_require__(249));var _EmptyDestinations=_interopRequireDefault(__webpack_require__(251));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _DeleteConfirmation=_interopRequireDefault(__webpack_require__(246));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_DeleteConfirmation.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DeleteConfirmation=function DeleteConfirmation(_ref){var isVisible=_ref.isVisible,onConfirm=_ref.onConfirm,onCancel=_ref.onCancel;return isVisible?_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:"Delete this destination?",onCancel:onCancel,onConfirm:onConfirm,cancelButtonText:"No",confirmButtonText:"Yes",buttonColor:"danger",defaultFocusedButton:_eui.EUI_MODAL_CANCEL_BUTTON})):null};var _default=DeleteConfirmation;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _DestinationsActions=_interopRequireDefault(__webpack_require__(248));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_DestinationsActions.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(15);var _constants2=__webpack_require__(0);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DestinationsActions=function(_Component){_inherits(DestinationsActions,_Component);var _super=_createSuper(DestinationsActions);function DestinationsActions(){var _this;_classCallCheck(this,DestinationsActions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"state",{isActionsOpen:false});_defineProperty(_assertThisInitialized(_this),"getActions",(function(){return[_react.default.createElement(_eui.EuiContextMenuItem,{key:"manageSenders",onClick:function onClick(){_this.onCloseActions();_this.props.onClickManageSenders()}},"View email senders"),_react.default.createElement(_eui.EuiContextMenuItem,{key:"manageEmailGroups",onClick:function onClick(){_this.onCloseActions();_this.props.onClickManageEmailGroups()}},"View email groups")]}));_defineProperty(_assertThisInitialized(_this),"onCloseActions",(function(){_this.setState({isActionsOpen:false})}));_defineProperty(_assertThisInitialized(_this),"onClickActions",(function(){_this.setState((function(prevState){return{isActionsOpen:!prevState.isActionsOpen}}))}));return _this}_createClass(DestinationsActions,[{key:"render",value:function render(){var isEmailAllowed=this.props.isEmailAllowed;var isActionsOpen=this.state.isActionsOpen;return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},isEmailAllowed?_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiPopover,{id:"destinationActionsPopover",button:_react.default.createElement(_eui.EuiButton,{onClick:this.onClickActions,iconType:"arrowDown",iconSide:"right"},"Actions"),isOpen:isActionsOpen,closePopover:this.onCloseActions,panelPaddingSize:"none",anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiContextMenuPanel,{items:this.getActions()}))):null)}}]);return DestinationsActions}(_react.Component);exports.default=DestinationsActions;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _DestinationsControls=_interopRequireDefault(__webpack_require__(250));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_DestinationsControls.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var filterTypes=[{value:"ALL",text:"All type"}].concat(_toConsumableArray(_constants.DESTINATION_OPTIONS));var defaultProps={search:"",type:"ALL"};var DestinationsControls=function DestinationsControls(_ref){var activePage=_ref.activePage,pageCount=_ref.pageCount,search=_ref.search,type=_ref.type,onSearchChange=_ref.onSearchChange,onTypeChange=_ref.onTypeChange,onPageClick=_ref.onPageClick,allowList=_ref.allowList;var allowedOptions=_constants.DESTINATION_OPTIONS.filter((function(option){return allowList.includes(option.value)}));var filterTypes=[{value:"ALL",text:"All type"}].concat(_toConsumableArray(allowedOptions));return _react.default.createElement(_eui.EuiFlexGroup,{style:{padding:"0px 5px"}},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldSearch,{fullWidth:true,value:search,placeholder:"Search",onChange:onSearchChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSelect,{options:filterTypes,value:type,onChange:onTypeChange})),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{justifyContent:"center"}},_react.default.createElement(_eui.EuiPagination,{pageCount:pageCount,activePage:activePage,onPageClick:onPageClick})))};DestinationsControls.defaultProps=defaultProps;var _default=DestinationsControls;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _EmptyDestinations=_interopRequireDefault(__webpack_require__(252));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_EmptyDestinations.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(30);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var filterText=function filterText(hasNotificationPlugin){return hasNotificationPlugin?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,"There are no destinations matching your applied filters. Reset your filters to view all destinations."),_react.default.createElement("p",null,"Migrated destinations can be found in ",_react.default.createElement(_eui.EuiLink,{href:_constants.MANAGE_CHANNELS_PATH},"Notifications"))):_react.default.createElement("p",null,"There are no destinations matching your applied filters. Reset your filters to view all destinations.")};var emptyText=_react.default.createElement("p",null,"There are no existing destinations.");var resetFiltersButton=function resetFiltersButton(resetFilters){return _react.default.createElement(_eui.EuiButton,{fill:true,onClick:resetFilters},"Reset filters")};var EmptyDestinations=function EmptyDestinations(_ref){var hasNotificationPlugin=_ref.hasNotificationPlugin,isFilterApplied=_ref.isFilterApplied,onResetFilters=_ref.onResetFilters;return _react.default.createElement(_eui.EuiEmptyPrompt,{style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiText,null,isFilterApplied?filterText(hasNotificationPlugin):emptyText),actions:isFilterApplied?resetFiltersButton(onResetFilters):undefined})};var _default=EmptyDestinations;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getURLQueryParams=void 0;var _queryString=_interopRequireDefault(__webpack_require__(32));var _constants=__webpack_require__(137);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getURLQueryParams=function getURLQueryParams(location){var _queryString$parse=_queryString.default.parse(location.search),_queryString$parse$fr=_queryString$parse.from,from=_queryString$parse$fr===void 0?_constants.DEFAULT_QUERY_PARAMS.from:_queryString$parse$fr,_queryString$parse$si=_queryString$parse.size,size=_queryString$parse$si===void 0?_constants.DEFAULT_QUERY_PARAMS.size:_queryString$parse$si,_queryString$parse$se=_queryString$parse.search,search=_queryString$parse$se===void 0?_constants.DEFAULT_QUERY_PARAMS.search:_queryString$parse$se,_queryString$parse$so=_queryString$parse.sortField,sortField=_queryString$parse$so===void 0?_constants.DEFAULT_QUERY_PARAMS.sortField:_queryString$parse$so,_queryString$parse$so2=_queryString$parse.sortDirection,sortDirection=_queryString$parse$so2===void 0?_constants.DEFAULT_QUERY_PARAMS.sortDirection:_queryString$parse$so2,_queryString$parse$ty=_queryString$parse.type,type=_queryString$parse$ty===void 0?_constants.DEFAULT_QUERY_PARAMS.type:_queryString$parse$ty;return{from:isNaN(parseInt(from,10))?_constants.DEFAULT_QUERY_PARAMS.from:parseInt(from,10),size:isNaN(parseInt(size,10))?_constants.DEFAULT_QUERY_PARAMS.size:parseInt(size,10),search:search,sortField:sortField,sortDirection:sortDirection,type:type}};exports.getURLQueryParams=getURLQueryParams},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDeleteAllowedQuery=void 0;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var isDeleteAllowedQuery=function isDeleteAllowedQuery(type,id){return{size:0,query:{nested:{path:"monitor.triggers.actions",query:{bool:{filter:{term:_defineProperty({},"monitor.triggers.actions.destination_id",id)}}}}}}};exports.isDeleteAllowedQuery=isDeleteAllowedQuery},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _Sender=_interopRequireDefault(__webpack_require__(340));var _SenderEmptyPrompt=_interopRequireDefault(__webpack_require__(360));var _helpers=__webpack_require__(362);var _helpers2=_interopRequireDefault(__webpack_require__(161));var _constants=__webpack_require__(47);var _helpers3=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createSenderContext=function createSenderContext(senders){return{ctx:{senders:senders}}};var getInitialValues=function getInitialValues(senders){return _lodash.default.isEmpty(senders)?{senders:[]}:{senders:senders.map((function(sender){return(0,_helpers.senderToFormik)(sender)}))}};var ManageSenders=function(_React$Component){_inherits(ManageSenders,_React$Component);var _super=_createSuper(ManageSenders);function ManageSenders(props){var _this;_classCallCheck(this,ManageSenders);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"loadInitialValues",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var httpClient,senders,initialValues;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:httpClient=_this.props.httpClient;_this.setState({loadingSenders:true});_context.next=4;return(0,_helpers2.default)(httpClient);case 4:senders=_context.sent;initialValues=getInitialValues(senders);_this.setState({initialValues:initialValues,sendersToDelete:[],loadingSenders:false});case 7:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"createSender",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(sender){var _this$props,httpClient,notifications,body,response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,httpClient=_this$props.httpClient,notifications=_this$props.notifications;body={name:sender.name,email:sender.email,host:sender.host,port:sender.port,method:sender.method};_context2.prev=2;_context2.next=5;return httpClient.post("../api/alerting/destinations/email_accounts",{body:JSON.stringify(body)});case 5:response=_context2.sent;if(!response.ok){_this.setState({failedSenders:true});notifications.toasts.addDanger({title:"Failed to create sender: ".concat(sender.name),text:"Reason: ".concat(response.resp)})}_context2.next=14;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](2);console.error("Unable to create sender",_context2.t0);_this.setState({failedSenders:true});notifications.toasts.addDanger({title:"Failed to create sender: ".concat(sender.name),text:"Reason: ".concat(_context2.t0)});case 14:case"end":return _context2.stop()}}}),_callee2,null,[[2,9]])})));return function(_x){return _ref2.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"updateSender",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(updatedSender){var _this$props2,httpClient,notifications,id,ifSeqNo,ifPrimaryTerm,body,response;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$props2=_this.props,httpClient=_this$props2.httpClient,notifications=_this$props2.notifications;id=updatedSender.id,ifSeqNo=updatedSender.ifSeqNo,ifPrimaryTerm=updatedSender.ifPrimaryTerm;body={name:updatedSender.name,email:updatedSender.email,host:updatedSender.host,port:updatedSender.port,method:updatedSender.method};_context3.prev=3;_context3.next=6;return httpClient.put("../api/alerting/destinations/email_accounts/".concat(id),{query:{ifSeqNo:ifSeqNo,ifPrimaryTerm:ifPrimaryTerm},body:JSON.stringify(body)});case 6:response=_context3.sent;if(!response.ok){_this.setState({failedSenders:true});notifications.toasts.addDanger({title:"Failed to update sender: ".concat(updatedSender.name),text:"Reason: ".concat(response.resp)})}_context3.next=15;break;case 10:_context3.prev=10;_context3.t0=_context3["catch"](3);console.error("Unable to update sender",_context3.t0);_this.setState({failedSenders:true});notifications.toasts.addDanger({title:"Failed to update sender: ".concat(updatedSender.name),text:"Reason: ".concat(_context3.t0)});case 15:case"end":return _context3.stop()}}}),_callee3,null,[[3,10]])})));return function(_x2){return _ref3.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"deleteSender",function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(sender){var _this$props3,httpClient,notifications,id,response;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$props3=_this.props,httpClient=_this$props3.httpClient,notifications=_this$props3.notifications;id=sender.id;_context4.prev=2;_context4.next=5;return httpClient.delete("../api/alerting/destinations/email_accounts/".concat(id));case 5:response=_context4.sent;if(!response.ok){_this.setState({failedSenders:true});notifications.toasts.addDanger({title:"Failed to delete sender: ".concat(sender.name),text:"Reason: ".concat(response.resp)})}_context4.next=14;break;case 9:_context4.prev=9;_context4.t0=_context4["catch"](2);console.error("Unable to delete sender",_context4.t0);_this.setState({failedSenders:true});notifications.toasts.addDanger({title:"Failed to delete sender: ".concat(sender.name),text:"Reason: ".concat(_context4.t0)});case 14:case"end":return _context4.stop()}}}),_callee4,null,[[2,9]])})));return function(_x3){return _ref4.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"processSenders",function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(values){var sendersToDelete,senders,_iterator,_step,sender,_iterator2,_step2,_sender,failedSenders;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:sendersToDelete=_this.state.sendersToDelete;senders=values.senders;_iterator=_createForOfIteratorHelper(senders);_context5.prev=3;_iterator.s();case 5:if((_step=_iterator.n()).done){_context5.next=17;break}sender=_step.value;if(!(sender.state===_constants.STATE.CREATED)){_context5.next=12;break}_context5.next=10;return _this.createSender(sender);case 10:_context5.next=15;break;case 12:if(!(sender.state===_constants.STATE.UPDATED)){_context5.next=15;break}_context5.next=15;return _this.updateSender(sender);case 15:_context5.next=5;break;case 17:_context5.next=22;break;case 19:_context5.prev=19;_context5.t0=_context5["catch"](3);_iterator.e(_context5.t0);case 22:_context5.prev=22;_iterator.f();return _context5.finish(22);case 25:_iterator2=_createForOfIteratorHelper(sendersToDelete);_context5.prev=26;_iterator2.s();case 28:if((_step2=_iterator2.n()).done){_context5.next=34;break}_sender=_step2.value;_context5.next=32;return _this.deleteSender(_sender);case 32:_context5.next=28;break;case 34:_context5.next=39;break;case 36:_context5.prev=36;_context5.t1=_context5["catch"](26);_iterator2.e(_context5.t1);case 39:_context5.prev=39;_iterator2.f();return _context5.finish(39);case 42:failedSenders=_this.state.failedSenders;if(!failedSenders){_this.props.notifications.toasts.addSuccess("Successfully saved senders")}_this.setState({failedSenders:false});case 45:case"end":return _context5.stop()}}}),_callee5,null,[[3,19,22,25],[26,36,39,42]])})));return function(_x4){return _ref5.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"renderSenders",(function(_ref6){var values=_ref6.values,arrayHelpers=_ref6.arrayHelpers;var hasSenders=!_lodash.default.isEmpty(values.senders);return hasSenders?_react.default.createElement("div",null,values.senders.map((function(sender,index){return _react.default.createElement("div",{key:index},_react.default.createElement(_Sender.default,{sender:sender,arrayHelpers:arrayHelpers,context:createSenderContext(values.senders),index:index,onDelete:function onDelete(){if(sender.id){_this.setState((function(prevState){return{sendersToDelete:[].concat(_toConsumableArray(prevState.sendersToDelete),[sender])}}))}arrayHelpers.remove(index)}}),_react.default.createElement(_eui.EuiSpacer,{className:"accordion-separator"}))}))):_react.default.createElement(_SenderEmptyPrompt.default,null)}));_defineProperty(_assertThisInitialized(_this),"hasSendersToProcess",(function(values){var sendersToDelete=_this.state.sendersToDelete;return!_lodash.default.isEmpty(values.senders)||!_lodash.default.isEmpty(sendersToDelete)}));_this.state={initialValues:{},sendersToDelete:[],loadingSenders:true,failedSenders:false};return _this}_createClass(ManageSenders,[{key:"componentDidMount",value:function componentDidMount(){var isEmailAllowed=this.props.isEmailAllowed;if(isEmailAllowed){this.loadInitialValues()}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.isVisible&&!this.props.isVisible||prevProps.isEmailAllowed!==this.props.isEmailAllowed){this.loadInitialValues()}}},{key:"render",value:function render(){var _this2=this;var _this$props4=this.props,isEmailAllowed=_this$props4.isEmailAllowed,isVisible=_this$props4.isVisible,onClickCancel=_this$props4.onClickCancel,onClickSave=_this$props4.onClickSave;var _this$state=this.state,initialValues=_this$state.initialValues,loadingSenders=_this$state.loadingSenders;return isVisible?_react.default.createElement(_formik.Formik,{initialValues:initialValues,onSubmit:function onSubmit(values,formikBag){_this2.processSenders(values).then((function(){return onClickSave()}))},validateOnChange:false},(function(_ref7){var values=_ref7.values,handleSubmit=_ref7.handleSubmit,isSubmitting=_ref7.isSubmitting;return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{className:"modal-manage-email",maxWidth:1e3,onClose:(0,_helpers3.ignoreEscape)(onClickCancel)},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,"Manage email senders")),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_formik.FieldArray,{name:"senders",validateOnChange:true},(function(arrayHelpers){return!isEmailAllowed||loadingSenders?_react.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},isEmailAllowed?"Loading Senders...":"Email is disallowed"):_this2.renderSenders({values:values,arrayHelpers:arrayHelpers})}))),_this2.hasSendersToProcess(values)?_react.default.createElement("div",null,_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:onClickCancel},"Close"))))):null))})):null}}]);return ManageSenders}(_react.default.Component);exports.default=ManageSenders;ManageSenders.defaultProps={isEmailAllowed:false,isVisible:false};module.exports=exports.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _validate2=__webpack_require__(104);var _constants=__webpack_require__(47);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var methodOptions=[{value:_constants.METHOD_TYPE.NONE,text:"None"},{value:_constants.METHOD_TYPE.SSL,text:"SSL"},{value:_constants.METHOD_TYPE.TLS,text:"TLS"}];var onSenderChange=function onSenderChange(index,sender,arrayHelpers){if(sender.id&&sender.state!==_constants.STATE.UPDATED){arrayHelpers.replace(index,_objectSpread(_objectSpread({},sender),{},{state:_constants.STATE.UPDATED}))}};var Sender=function Sender(_ref){var sender=_ref.sender,arrayHelpers=_ref.arrayHelpers,context=_ref.context,index=_ref.index,onDelete=_ref.onDelete;var name=sender.name;return _react.default.createElement(_eui.EuiAccordion,{id:name,buttonContent:!name?"New sender":name,paddingSize:"l"},_react.default.createElement(_FormControls.FormikFieldText,{name:"senders.".concat(index,".name"),formRow:true,fieldProps:{validate:(0,_validate2.validateSenderName)(context.ctx.senders)},rowProps:{label:"Sender name",helpText:"A unique and descriptive name that is easy to search. "+"Valid characters are upper and lowercase a-z, 0-9, and _ (underscore).",style:{padding:"10px 0px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"my_sender",onChange:function onChange(e,field,form){field.onChange(e);onSenderChange(index,sender,arrayHelpers)},isInvalid:_validate.isInvalid,disabled:true}}),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline",justifyContent:"flexStart",style:{padding:"10px 0px"}},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormControls.FormikFieldText,{name:"senders.".concat(index,".email"),formRow:true,fieldProps:{validate:_validate2.validateEmail},rowProps:{label:"Email address",isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"username@xxx.com",onChange:function onChange(e,field,form){field.onChange(e);onSenderChange(index,sender,arrayHelpers)},isInvalid:_validate.isInvalid,disabled:true}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormControls.FormikFieldText,{name:"senders.".concat(index,".host"),formRow:true,fieldProps:{validate:_validate2.validateHost},rowProps:{label:"Host",isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"smtp.xxx.com",onChange:function onChange(e,field,form){field.onChange(e);onSenderChange(index,sender,arrayHelpers)},isInvalid:_validate.isInvalid,disabled:true}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormControls.FormikFieldNumber,{name:"senders.".concat(index,".port"),formRow:true,fieldProps:{validate:_validate2.validatePort},rowProps:{label:"Port",isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"25",onChange:function onChange(e,field,form){field.onChange(e);onSenderChange(index,sender,arrayHelpers)},isInvalid:_validate.isInvalid,disabled:true}}))),_react.default.createElement(_FormControls.FormikSelect,{name:"senders.".concat(index,".method"),formRow:true,rowProps:{label:"Encryption method",helpText:"SSL or TLS is recommended for security.\n          SSL and TLS requires validation by adding the following fields to the Opensearch keystore:\n          plugins.alerting.destination.email.".concat(!name?"[sender name]":name,".username\n          plugins.alerting.destination.email.").concat(!name?"[sender name]":name,".password"),style:{padding:"10px 0px"}},inputProps:{options:methodOptions,onChange:function onChange(e,field,form){field.onChange(e);onSenderChange(index,sender,arrayHelpers)},disabled:true}}))};var _default=Sender;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _excluded=["onChange","isInvalid","onFocus"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikFieldText=function FormikFieldText(_ref){var name=_ref.name,_ref$formRow=_ref.formRow,formRow=_ref$formRow===void 0?false:_ref$formRow,_ref$fieldProps=_ref.fieldProps,fieldProps=_ref$fieldProps===void 0?{}:_ref$fieldProps,_ref$rowProps=_ref.rowProps,rowProps=_ref$rowProps===void 0?{}:_ref$rowProps,_ref$inputProps=_ref.inputProps,inputProps=_ref$inputProps===void 0?{}:_ref$inputProps;return _react.default.createElement(_FormikInputWrapper.default,{name:name,fieldProps:fieldProps,render:function render(_ref2){var field=_ref2.field,form=_ref2.form;return formRow?_react.default.createElement(_FormikFormRow.default,{name:name,form:form,rowProps:rowProps},_react.default.createElement(FieldText,{name:name,form:form,field:field,inputProps:inputProps})):_react.default.createElement(FieldText,{name:name,form:form,field:field,inputProps:inputProps})}})};var FieldText=function FieldText(_ref3){var name=_ref3.name,form=_ref3.form,field=_ref3.field,_ref3$inputProps=_ref3.inputProps,_onChange=_ref3$inputProps.onChange,isInvalid=_ref3$inputProps.isInvalid,onFocus=_ref3$inputProps.onFocus,rest=_objectWithoutProperties(_ref3$inputProps,_excluded);return _react.default.createElement(_eui.EuiFieldText,_extends({},field,rest,{onChange:function onChange(e){return typeof _onChange==="function"?_onChange(e,field,form):field.onChange(e)},onFocus:typeof onFocus==="function"?function(e){return onFocus(e,field,form)}:onFocus,isInvalid:typeof isInvalid==="function"?isInvalid(name,form):isInvalid}))};var _default=FormikFieldText;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _formik=__webpack_require__(20);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var FormikInputWrapper=function FormikInputWrapper(_ref){var name=_ref.name,fieldProps=_ref.fieldProps,render=_ref.render;return _react.default.createElement(_formik.Field,_extends({name:name},fieldProps),(function(_ref2){var field=_ref2.field,form=_ref2.form;return render({field:field,form:form})}))};var _default=FormikInputWrapper;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _excluded=["isInvalid","error"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikFormRow=function FormikFormRow(_ref){var children=_ref.children,form=_ref.form,name=_ref.name,_ref$rowProps=_ref.rowProps,isInvalid=_ref$rowProps.isInvalid,error=_ref$rowProps.error,rest=_objectWithoutProperties(_ref$rowProps,_excluded);return _react.default.createElement(_eui.EuiFormRow,_extends({id:"".concat(name,"-form-row"),isInvalid:typeof isInvalid==="function"?isInvalid(name,form):isInvalid,error:typeof error==="function"?error(name,form):error},rest),children)};var _default=FormikFormRow;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikTextArea=_interopRequireDefault(__webpack_require__(159));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikTextArea.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikSwitch=_interopRequireDefault(__webpack_require__(346));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikSwitch.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _excluded=["value"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikSwitch=function FormikSwitch(_ref){var name=_ref.name,_ref$formRow=_ref.formRow,formRow=_ref$formRow===void 0?false:_ref$formRow,_ref$fieldProps=_ref.fieldProps,fieldProps=_ref$fieldProps===void 0?{}:_ref$fieldProps,_ref$rowProps=_ref.rowProps,rowProps=_ref$rowProps===void 0?{}:_ref$rowProps,_ref$inputProps=_ref.inputProps,inputProps=_ref$inputProps===void 0?{}:_ref$inputProps;return _react.default.createElement(_FormikInputWrapper.default,{name:name,fieldProps:fieldProps,render:function render(_ref2){var field=_ref2.field,form=_ref2.form;return formRow?_react.default.createElement(_FormikFormRow.default,{name:name,form:form,rowProps:rowProps},_react.default.createElement(FieldSwitch,{name:name,form:form,field:field,inputProps:inputProps})):_react.default.createElement(FieldSwitch,{name:name,field:field,inputProps:inputProps})}})};var FieldSwitch=function FieldSwitch(_ref3){var name=_ref3.name,_ref3$field=_ref3.field,value=_ref3$field.value,rest=_objectWithoutProperties(_ref3$field,_excluded),inputProps=_ref3.inputProps;return _react.default.createElement(_eui.EuiSwitch,_extends({name:name,id:name,checked:value},inputProps,rest))};var _default=FormikSwitch;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikCheckbox=_interopRequireDefault(__webpack_require__(348));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikCheckbox.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _excluded=["value"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikCheckbox=function FormikCheckbox(_ref){var name=_ref.name,_ref$formRow=_ref.formRow,formRow=_ref$formRow===void 0?false:_ref$formRow,_ref$fieldProps=_ref.fieldProps,fieldProps=_ref$fieldProps===void 0?{}:_ref$fieldProps,_ref$rowProps=_ref.rowProps,rowProps=_ref$rowProps===void 0?{}:_ref$rowProps,_ref$inputProps=_ref.inputProps,inputProps=_ref$inputProps===void 0?{}:_ref$inputProps;return _react.default.createElement(_FormikInputWrapper.default,{name:name,fieldProps:fieldProps,render:function render(_ref2){var field=_ref2.field,form=_ref2.form;return formRow?_react.default.createElement(_FormikFormRow.default,{name:name,form:form,rowProps:rowProps},_react.default.createElement(FieldCheckbox,{name:name,form:form,field:field,inputProps:inputProps})):_react.default.createElement(FieldCheckbox,{name:name,field:field,inputProps:inputProps})}})};var FieldCheckbox=function FieldCheckbox(_ref3){var name=_ref3.name,_ref3$field=_ref3.field,value=_ref3$field.value,rest=_objectWithoutProperties(_ref3$field,_excluded),inputProps=_ref3.inputProps;return _react.default.createElement(_eui.EuiCheckbox,_extends({name:name,id:name,checked:value},inputProps,rest))};var _default=FormikCheckbox;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikSelect=_interopRequireDefault(__webpack_require__(160));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikSelect.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikFieldNumber=_interopRequireDefault(__webpack_require__(351));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikFieldNumber.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _excluded=["onChange","isInvalid"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikFieldNumber=function FormikFieldNumber(_ref){var name=_ref.name,_ref$formRow=_ref.formRow,formRow=_ref$formRow===void 0?false:_ref$formRow,_ref$fieldProps=_ref.fieldProps,fieldProps=_ref$fieldProps===void 0?{}:_ref$fieldProps,_ref$rowProps=_ref.rowProps,rowProps=_ref$rowProps===void 0?{}:_ref$rowProps,_ref$inputProps=_ref.inputProps,inputProps=_ref$inputProps===void 0?{}:_ref$inputProps;return _react.default.createElement(_FormikInputWrapper.default,{name:name,fieldProps:fieldProps,render:function render(_ref2){var field=_ref2.field,form=_ref2.form;return formRow?_react.default.createElement(_FormikFormRow.default,{name:name,form:form,rowProps:rowProps},_react.default.createElement(FieldNumber,{name:name,form:form,field:field,inputProps:inputProps})):_react.default.createElement(FieldNumber,{name:name,form:form,field:field,inputProps:inputProps})}})};var FieldNumber=function FieldNumber(_ref3){var name=_ref3.name,form=_ref3.form,field=_ref3.field,_ref3$inputProps=_ref3.inputProps,_onChange=_ref3$inputProps.onChange,isInvalid=_ref3$inputProps.isInvalid,rest=_objectWithoutProperties(_ref3$inputProps,_excluded);return _react.default.createElement(_eui.EuiFieldNumber,_extends({},field,rest,{onChange:function onChange(e){return typeof _onChange==="function"?_onChange(e,field,form):field.onChange(e)},isInvalid:typeof isInvalid==="function"?isInvalid(name,form):isInvalid}))};var _default=FormikFieldNumber;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikCodeEditor=_interopRequireDefault(__webpack_require__(353));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikCodeEditor.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _excluded=["onBlur","onChange"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikCodeEditor=function FormikCodeEditor(_ref){var name=_ref.name,_ref$formRow=_ref.formRow,formRow=_ref$formRow===void 0?false:_ref$formRow,_ref$fieldProps=_ref.fieldProps,fieldProps=_ref$fieldProps===void 0?{}:_ref$fieldProps,_ref$rowProps=_ref.rowProps,rowProps=_ref$rowProps===void 0?{}:_ref$rowProps,_ref$inputProps=_ref.inputProps,inputProps=_ref$inputProps===void 0?{}:_ref$inputProps;return _react.default.createElement(_FormikInputWrapper.default,{name:name,fieldProps:fieldProps,render:function render(_ref2){var field=_ref2.field,form=_ref2.form;return formRow?_react.default.createElement(_FormikFormRow.default,{name:name,form:form,rowProps:rowProps},_react.default.createElement(CodeEditor,{name:name,form:form,field:field,inputProps:inputProps})):_react.default.createElement(CodeEditor,{name:name,form:form,field:field,inputProps:inputProps})}})};var CodeEditor=function CodeEditor(_ref3){var name=_ref3.name,form=_ref3.form,field=_ref3.field,_ref3$inputProps=_ref3.inputProps,_onBlur=_ref3$inputProps.onBlur,_onChange=_ref3$inputProps.onChange,rest=_objectWithoutProperties(_ref3$inputProps,_excluded);return _react.default.createElement(_eui.EuiCodeEditor,_extends({id:name,onChange:function onChange(string){_onChange(string,field,form)},onBlur:function onBlur(e){_onBlur(e,field,form)},value:field.value},rest))};var _default=FormikCodeEditor;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikComboBox=_interopRequireDefault(__webpack_require__(355));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikComboBox.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _excluded=["onBlur","onChange","onCreateOption"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikComboBox=function FormikComboBox(_ref){var name=_ref.name,_ref$formRow=_ref.formRow,formRow=_ref$formRow===void 0?false:_ref$formRow,_ref$fieldProps=_ref.fieldProps,fieldProps=_ref$fieldProps===void 0?{}:_ref$fieldProps,_ref$rowProps=_ref.rowProps,rowProps=_ref$rowProps===void 0?{}:_ref$rowProps,_ref$inputProps=_ref.inputProps,inputProps=_ref$inputProps===void 0?{}:_ref$inputProps;return _react.default.createElement(_FormikInputWrapper.default,{name:name,fieldProps:fieldProps,render:function render(_ref2){var field=_ref2.field,form=_ref2.form;return formRow?_react.default.createElement(_FormikFormRow.default,{name:name,form:form,rowProps:rowProps},_react.default.createElement(ComboBox,{name:name,form:form,field:field,inputProps:inputProps})):_react.default.createElement(ComboBox,{name:name,form:form,field:field,inputProps:inputProps})}})};var ComboBox=function ComboBox(_ref3){var name=_ref3.name,form=_ref3.form,field=_ref3.field,_ref3$inputProps=_ref3.inputProps,onBlur=_ref3$inputProps.onBlur,onChange=_ref3$inputProps.onChange,onCreateOption=_ref3$inputProps.onCreateOption,rest=_objectWithoutProperties(_ref3$inputProps,_excluded);return _react.default.createElement(_eui.EuiComboBox,_extends({name:name,id:name,onChange:typeof onChange==="function"?function(options){onChange(options,field,form)}:onChange,onCreateOption:typeof onCreateOption==="function"?function(value){onCreateOption(value,field,form)}:onCreateOption,onBlur:typeof onBlur==="function"?function(e){onBlur(e,field,form)}:onBlur,selectedOptions:typeof field.value==="string"?field.value===""?undefined:[{label:field.value}]:field.value},rest))};var _default=FormikComboBox;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikFieldPassword=_interopRequireDefault(__webpack_require__(357));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikFieldPassword.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _excluded=["onChange","isInvalid","onFocus"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikFieldPassword=function FormikFieldPassword(_ref){var name=_ref.name,_ref$formRow=_ref.formRow,formRow=_ref$formRow===void 0?false:_ref$formRow,_ref$fieldProps=_ref.fieldProps,fieldProps=_ref$fieldProps===void 0?{}:_ref$fieldProps,_ref$rowProps=_ref.rowProps,rowProps=_ref$rowProps===void 0?{}:_ref$rowProps,_ref$inputProps=_ref.inputProps,inputProps=_ref$inputProps===void 0?{}:_ref$inputProps;return _react.default.createElement(_FormikInputWrapper.default,{name:name,fieldProps:fieldProps,render:function render(_ref2){var field=_ref2.field,form=_ref2.form;return formRow?_react.default.createElement(_FormikFormRow.default,{name:name,form:form,rowProps:rowProps},_react.default.createElement(FieldPassword,{name:name,form:form,field:field,inputProps:inputProps})):_react.default.createElement(FieldPassword,{name:name,form:form,field:field,inputProps:inputProps})}})};var FieldPassword=function FieldPassword(_ref3){var name=_ref3.name,form=_ref3.form,field=_ref3.field,_ref3$inputProps=_ref3.inputProps,_onChange=_ref3$inputProps.onChange,isInvalid=_ref3$inputProps.isInvalid,onFocus=_ref3$inputProps.onFocus,rest=_objectWithoutProperties(_ref3$inputProps,_excluded);return _react.default.createElement(_eui.EuiFieldPassword,_extends({},field,rest,{onChange:function onChange(e){return typeof _onChange==="function"?_onChange(e,field,form):field.onChange(e)},onFocus:typeof onFocus==="function"?function(e){return onFocus(e,field,form)}:onFocus,isInvalid:typeof isInvalid==="function"?isInvalid(name,form):isInvalid}))};var _default=FormikFieldPassword;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikFieldRadio=_interopRequireDefault(__webpack_require__(359));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikFieldRadio.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikInputWrapper=_interopRequireDefault(__webpack_require__(33));var _FormikFormRow=_interopRequireDefault(__webpack_require__(34));var _excluded=["onChange"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FormikFieldRadio=function FormikFieldRadio(_ref){var name=_ref.name,_ref$formRow=_ref.formRow,formRow=_ref$formRow===void 0?false:_ref$formRow,_ref$fieldProps=_ref.fieldProps,fieldProps=_ref$fieldProps===void 0?{}:_ref$fieldProps,_ref$rowProps=_ref.rowProps,rowProps=_ref$rowProps===void 0?{}:_ref$rowProps,_ref$inputProps=_ref.inputProps,inputProps=_ref$inputProps===void 0?{}:_ref$inputProps;return _react.default.createElement(_FormikInputWrapper.default,{name:name,fieldProps:fieldProps,render:function render(_ref2){var field=_ref2.field,form=_ref2.form;return formRow?_react.default.createElement(_FormikFormRow.default,{name:name,form:form,rowProps:rowProps},_react.default.createElement(FieldRadio,{name:name,form:form,field:field,inputProps:inputProps})):_react.default.createElement(FieldRadio,{name:name,form:form,field:field,inputProps:inputProps})}})};var FieldRadio=function FieldRadio(_ref3){var name=_ref3.name,form=_ref3.form,field=_ref3.field,_ref3$inputProps=_ref3.inputProps,_onChange=_ref3$inputProps.onChange,rest=_objectWithoutProperties(_ref3$inputProps,_excluded);return _react.default.createElement(_eui.EuiRadio,_extends({},field,rest,{onChange:function onChange(e){return typeof _onChange==="function"?_onChange(e,field,form):field.onChange(e)}}))};var _default=FormikFieldRadio;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _SenderEmptyPrompt=_interopRequireDefault(__webpack_require__(361));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_SenderEmptyPrompt.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var senderEmptyText="A sender specifies the sender name, sender email, port, host, "+"and encryption method for your destination(s). You can reuse the same sender across different destinations "+"or create as many senders as needed.";var SenderEmptyPrompt=function SenderEmptyPrompt(){return _react.default.createElement(_eui.EuiEmptyPrompt,{style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h1",null,"You have no sender set up"),_react.default.createElement("p",null,senderEmptyText))})};var _default=SenderEmptyPrompt;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.senderToFormik=senderToFormik;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(47);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function senderToFormik(sender){return _objectSpread(_objectSpread(_objectSpread({},_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_SENDER_VALUES)),sender),{},{state:_constants.STATE.NO_OP})}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _EmailGroup=_interopRequireDefault(__webpack_require__(364));var _EmailGroupEmptyPrompt=_interopRequireDefault(__webpack_require__(365));var _helpers=__webpack_require__(367);var _helpers2=_interopRequireDefault(__webpack_require__(163));var _constants=__webpack_require__(47);var _helpers3=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var createEmailGroupContext=function createEmailGroupContext(emailGroups){return{ctx:{emailGroups:emailGroups}}};var getInitialValues=function getInitialValues(emailGroups){return _lodash.default.isEmpty(emailGroups)?{emailGroups:[]}:{emailGroups:emailGroups.map((function(emailGroup){return(0,_helpers.emailGroupToFormik)(emailGroup)}))}};var getEmailOptions=function getEmailOptions(emailGroups){var _ref;if(_lodash.default.isEmpty(emailGroups))return[];var nestedEmails=emailGroups.map((function(emailGroup){return emailGroup.emails}));var emailOptions=(_ref=[]).concat.apply(_ref,_toConsumableArray(nestedEmails));var emails=emailOptions.map((function(email){return _lodash.default.isString(email)?email:email.label}));return _toConsumableArray(new Set(emails)).map((function(email){return{label:email}}))};var ManageEmailGroups=function(_React$Component){_inherits(ManageEmailGroups,_React$Component);var _super=_createSuper(ManageEmailGroups);function ManageEmailGroups(props){var _this;_classCallCheck(this,ManageEmailGroups);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"loadInitialValues",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var httpClient,emailGroups,initialValues;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:httpClient=_this.props.httpClient;_this.setState({loadingEmailGroups:true});_context.next=4;return(0,_helpers2.default)(httpClient);case 4:emailGroups=_context.sent;initialValues=getInitialValues(emailGroups);_this.setState({initialValues:initialValues,emailGroupsToDelete:[],loadingEmailGroups:false});case 7:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"createEmailGroup",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(emailGroup){var _this$props,httpClient,notifications,body,response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,httpClient=_this$props.httpClient,notifications=_this$props.notifications;body={name:emailGroup.name,emails:emailGroup.emails.map((function(email){return{email:email.label}}))};_context2.prev=2;_context2.next=5;return httpClient.post("../api/alerting/destinations/email_groups",{body:JSON.stringify(body)});case 5:response=_context2.sent;if(!response.ok){_this.setState({failedEmailGroups:true});notifications.toasts.addDanger({title:"Failed to create email group: ".concat(emailGroup.name),text:"Reason: ".concat(response.resp)})}_context2.next=14;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](2);console.error("Unable to create email group",_context2.t0);_this.setState({failedEmailGroups:true});notifications.toasts.addDanger({title:"Failed to create email group: ".concat(emailGroup.name),text:"Reason: ".concat(_context2.t0)});case 14:case"end":return _context2.stop()}}}),_callee2,null,[[2,9]])})));return function(_x){return _ref3.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"updateEmailGroup",function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(updatedEmailGroup){var _this$props2,httpClient,notifications,id,ifSeqNo,ifPrimaryTerm,body,response;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$props2=_this.props,httpClient=_this$props2.httpClient,notifications=_this$props2.notifications;id=updatedEmailGroup.id,ifSeqNo=updatedEmailGroup.ifSeqNo,ifPrimaryTerm=updatedEmailGroup.ifPrimaryTerm;body={name:updatedEmailGroup.name,emails:updatedEmailGroup.emails.map((function(email){return{email:email.label}}))};_context3.prev=3;_context3.next=6;return httpClient.put("../api/alerting/destinations/email_groups/".concat(id),{query:{ifSeqNo:ifSeqNo,ifPrimaryTerm:ifPrimaryTerm},body:JSON.stringify(body)});case 6:response=_context3.sent;if(!response.ok){_this.setState({failedEmailGroups:true});notifications.toasts.addDanger({title:"Failed to update email group: ".concat(updatedEmailGroup.name),text:"Reason: ".concat(response.resp)})}_context3.next=15;break;case 10:_context3.prev=10;_context3.t0=_context3["catch"](3);console.error("Unable to update email group",_context3.t0);_this.setState({failedEmailGroups:true});notifications.toasts.addDanger({title:"Failed to update email group: ".concat(updatedEmailGroup.name),text:"Reason: ".concat(_context3.t0)});case 15:case"end":return _context3.stop()}}}),_callee3,null,[[3,10]])})));return function(_x2){return _ref4.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"deleteEmailGroup",function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(emailGroup){var _this$props3,httpClient,notifications,id,response;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$props3=_this.props,httpClient=_this$props3.httpClient,notifications=_this$props3.notifications;id=emailGroup.id;_context4.prev=2;_context4.next=5;return httpClient.delete("../api/alerting/destinations/email_groups/".concat(id));case 5:response=_context4.sent;if(!response.ok){_this.setState({failedEmailGroups:true});notifications.toasts.addDanger({title:"Failed to delete email group: ".concat(emailGroup.name),text:"Reason: ".concat(respons.resp)})}_context4.next=14;break;case 9:_context4.prev=9;_context4.t0=_context4["catch"](2);console.err("Unable to delete email group",_context4.t0);_this.setState({failedEmailGroups:true});notifications.toasts.addDanger({title:"Failed to delete email group: ".concat(emailGroup.name),text:"Reason: ".concat(_context4.t0)});case 14:case"end":return _context4.stop()}}}),_callee4,null,[[2,9]])})));return function(_x3){return _ref5.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"processEmailGroups",function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(values){var emailGroupsToDelete,emailGroups,_iterator,_step,emailGroup,_iterator2,_step2,_emailGroup,failedEmailGroups;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:emailGroupsToDelete=_this.state.emailGroupsToDelete;emailGroups=values.emailGroups;_iterator=_createForOfIteratorHelper(emailGroups);_context5.prev=3;_iterator.s();case 5:if((_step=_iterator.n()).done){_context5.next=17;break}emailGroup=_step.value;if(!(emailGroup.state===_constants.STATE.CREATED)){_context5.next=12;break}_context5.next=10;return _this.createEmailGroup(emailGroup);case 10:_context5.next=15;break;case 12:if(!(emailGroup.state===_constants.STATE.UPDATED)){_context5.next=15;break}_context5.next=15;return _this.updateEmailGroup(emailGroup);case 15:_context5.next=5;break;case 17:_context5.next=22;break;case 19:_context5.prev=19;_context5.t0=_context5["catch"](3);_iterator.e(_context5.t0);case 22:_context5.prev=22;_iterator.f();return _context5.finish(22);case 25:_iterator2=_createForOfIteratorHelper(emailGroupsToDelete);_context5.prev=26;_iterator2.s();case 28:if((_step2=_iterator2.n()).done){_context5.next=34;break}_emailGroup=_step2.value;_context5.next=32;return _this.deleteEmailGroup(_emailGroup);case 32:_context5.next=28;break;case 34:_context5.next=39;break;case 36:_context5.prev=36;_context5.t1=_context5["catch"](26);_iterator2.e(_context5.t1);case 39:_context5.prev=39;_iterator2.f();return _context5.finish(39);case 42:failedEmailGroups=_this.state.failedEmailGroups;if(!failedEmailGroups){_this.props.notifications.toasts.addSuccess("Successfully saved email groups")}_this.setState({failedEmailGroups:false});case 45:case"end":return _context5.stop()}}}),_callee5,null,[[3,19,22,25],[26,36,39,42]])})));return function(_x4){return _ref6.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"renderEmailGroups",(function(_ref7){var values=_ref7.values,arrayHelpers=_ref7.arrayHelpers;var hasEmailGroups=!_lodash.default.isEmpty(values.emailGroups);var emailOptions=getEmailOptions(values.emailGroups);return hasEmailGroups?_react.default.createElement("div",null,values.emailGroups.map((function(emailGroup,index){return _react.default.createElement("div",{key:index},_react.default.createElement(_EmailGroup.default,{emailGroup:emailGroup,emailOptions:emailOptions,arrayHelpers:arrayHelpers,context:createEmailGroupContext(values.emailGroups),index:index,onDelete:function onDelete(){if(emailGroup.id){_this.setState((function(prevState){return{emailGroupsToDelete:[].concat(_toConsumableArray(prevState.emailGroupsToDelete),[emailGroup])}}))}arrayHelpers.remove(index)}}),_react.default.createElement(_eui.EuiSpacer,{className:"accordion-separator"}))}))):_react.default.createElement(_EmailGroupEmptyPrompt.default,null)}));_defineProperty(_assertThisInitialized(_this),"hasEmailGroupsToProcess",(function(values){var emailGroupsToDelete=_this.state.emailGroupsToDelete;return!_lodash.default.isEmpty(values.emailGroups)||!_lodash.default.isEmpty(emailGroupsToDelete)}));_this.state={initialValues:{},emailGroupsToDelete:[],loadingEmailGroups:true,failedEmailGroups:false};return _this}_createClass(ManageEmailGroups,[{key:"componentDidMount",value:function componentDidMount(){var isEmailAllowed=this.props.isEmailAllowed;if(isEmailAllowed){this.loadInitialValues()}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.isVisible&&!this.props.isVisible||prevProps.isEmailAllowed!==this.props.isEmailAllowed){this.loadInitialValues(this.props.emailGroups)}}},{key:"render",value:function render(){var _this2=this;var _this$props4=this.props,isEmailAllowed=_this$props4.isEmailAllowed,isVisible=_this$props4.isVisible,onClickCancel=_this$props4.onClickCancel,onClickSave=_this$props4.onClickSave;var _this$state=this.state,initialValues=_this$state.initialValues,loadingEmailGroups=_this$state.loadingEmailGroups;return isVisible?_react.default.createElement(_formik.Formik,{initialValues:initialValues,onSubmit:function onSubmit(values,formikBag){_this2.processEmailGroups(values).then((function(){return onClickSave()}))},validateOnChange:false},(function(_ref8){var values=_ref8.values,handleSubmit=_ref8.handleSubmit,isSubmitting=_ref8.isSubmitting;return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{className:"modal-manage-email",maxWidth:1e3,onClose:(0,_helpers3.ignoreEscape)(onClickCancel)},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,"Manage email groups")),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_formik.FieldArray,{name:"emailGroups",validateOnChange:true},(function(arrayHelpers){return!isEmailAllowed||loadingEmailGroups?_react.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},isEmailAllowed?"Loading Email Groups...":"Email is disallowed"):_this2.renderEmailGroups({values:values,arrayHelpers:arrayHelpers})}))),_this2.hasEmailGroupsToProcess(values)?_react.default.createElement("div",null,_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:onClickCancel},"Close"))))):null))})):null}}]);return ManageEmailGroups}(_react.default.Component);exports.default=ManageEmailGroups;ManageEmailGroups.defaultProps={isEmailAllowed:false,isVisible:false};module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _validate2=__webpack_require__(104);var _constants=__webpack_require__(47);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var onEmailGroupChange=function onEmailGroupChange(index,emailGroup,arrayHelpers){if(emailGroup.id&&emailGroup.state!==_constants.STATE.UPDATED){arrayHelpers.replace(index,_objectSpread(_objectSpread({},emailGroup),{},{state:_constants.STATE.UPDATED}))}};var _onCreateOption=function onCreateOption(fieldName,value,selectedOptions,setFieldValue){var normalizedValue=value.trim().toLowerCase();if(!normalizedValue)return false;var newOption={label:value};setFieldValue(fieldName,[].concat(_toConsumableArray(selectedOptions),[newOption]))};var EmailGroup=function EmailGroup(_ref){var emailGroup=_ref.emailGroup,emailOptions=_ref.emailOptions,arrayHelpers=_ref.arrayHelpers,context=_ref.context,index=_ref.index,onDelete=_ref.onDelete;var name=emailGroup.name;return _react.default.createElement(_eui.EuiAccordion,{id:name,buttonContent:!name?"New email group":name,paddingSize:"l"},_react.default.createElement(_FormControls.FormikFieldText,{name:"emailGroups.".concat(index,".name"),formRow:true,fieldProps:{validate:(0,_validate2.validateEmailGroupName)(context.ctx.emailGroups)},rowProps:{label:"Email group name",helpText:"A unique and descriptive name that is easy to search. "+"Valid characters are upper and lowercase a-z, 0-9, _ (underscore) and - (hyphen).",style:{padding:"10px 0px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"my-email-group",onChange:function onChange(e,field,form){field.onChange(e);onEmailGroupChange(index,emailGroup,arrayHelpers)},disabled:true}}),_react.default.createElement(_FormControls.FormikComboBox,{name:"emailGroups.".concat(index,".emails"),formRow:true,fieldProps:{validate:_validate2.validateEmailGroupEmails},rowProps:{label:"Emails",helpText:"Search for previously used email addresses or type in new ones.",isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Email addresses",options:emailOptions,onChange:function onChange(options,field,form){form.setFieldValue("emailGroups.".concat(index,".emails"),options);onEmailGroupChange(index,emailGroup,arrayHelpers)},onBlur:function onBlur(e,field,form){form.setFieldTouched("emailGroups.".concat(index,".emails"),true)},onCreateOption:function onCreateOption(value,field,form){onEmailGroupChange(index,emailGroup,arrayHelpers);_onCreateOption("emailGroups.".concat(index,".emails"),value,field.value,form.setFieldValue)},isClearable:true,isDisabled:true}}))};var _default=EmailGroup;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _EmailGroupEmptyPrompt=_interopRequireDefault(__webpack_require__(366));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_EmailGroupEmptyPrompt.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var emailGroupEmptyText="Use an email group to manage a list of email addresses you frequently send to at the same time. "+"You can create as many email groups as needed and use them together with individual email addresses when "+"specifying recipients.";var EmailGroupEmptyPrompt=function EmailGroupEmptyPrompt(){return _react.default.createElement(_eui.EuiEmptyPrompt,{style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h1",null,"You have no email group set up"),_react.default.createElement("p",null,emailGroupEmptyText))})};var _default=EmailGroupEmptyPrompt;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.emailGroupToFormik=emailGroupToFormik;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(47);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function emailGroupToFormik(emailGroup){var id=emailGroup.id,ifSeqNo=emailGroup.ifSeqNo,ifPrimaryTerm=emailGroup.ifPrimaryTerm,name=emailGroup.name,emails=emailGroup.emails;return _objectSpread(_objectSpread({},_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_EMAIL_GROUP_VALUES)),{},{id:id,ifSeqNo:ifSeqNo,ifPrimaryTerm:ifPrimaryTerm,name:name,emails:emails.map((function(e){return{label:e.email}})),state:_constants.STATE.NO_OP})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _NotificationsInfoCallOut=_interopRequireDefault(__webpack_require__(369));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_NotificationsInfoCallOut.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(30);var _constants2=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var noNotificationsTitle="Unable to send notifications. Notifications plugin is required.";var noNotificationsBodyText=_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,"Destinations will be deprecated going forward. Install the Notifications plugin for a new centralized place to manage your notification channels."),_react.default.createElement("p",null,"Existing destinations will be automatically migrated once Notifications plugin is installed."));var noNotificationsButton=_react.default.createElement(_eui.EuiButton,{external:true,href:_constants2.NOTIFICATIONS_LEARN_MORE_HREF,iconSide:"right",iconType:"popout",target:"_blank"},"View install instructions");var hasNotificationsTitle="Destinations have become channels in Notifications.";var hasNotificationsBodyText=_react.default.createElement("p",null,"Your destinations have been migrated to Notifications, a new centralized place to manage your notification channels. Destinations will be deprecated going forward. ",_react.default.createElement(_eui.EuiLink,{external:true,href:_constants2.NOTIFICATIONS_LEARN_MORE_HREF,target:"_blank"},"Learn more"));var hasNotificationsButton=_react.default.createElement(_eui.EuiButton,{href:_constants.MANAGE_CHANNELS_PATH},"View in Notifications");var NotificationsInfoCallOut=function NotificationsInfoCallOut(_ref){var hasNotificationPlugin=_ref.hasNotificationPlugin;return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiCallOut,{color:hasNotificationPlugin?"primary":"danger",iconType:hasNotificationPlugin?undefined:"alert",title:hasNotificationPlugin?hasNotificationsTitle:noNotificationsTitle},hasNotificationPlugin?hasNotificationsBodyText:noNotificationsBodyText,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),hasNotificationPlugin?hasNotificationsButton:noNotificationsButton),_react.default.createElement(_eui.EuiSpacer,{size:"l"}))};var _default=NotificationsInfoCallOut;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FullPageNotificationsInfoCallOut=_interopRequireDefault(__webpack_require__(371));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FullPageNotificationsInfoCallOut.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(30);var _constants2=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var noNotificationsTitle="Destinations will become channels in Notifications";var noNotificationsText=_react.default.createElement(_eui.EuiText,null,"Destinations will be deprecated going forward. Install the Notifications plugin for a new centralized place to manage your notification channels.");var noNotificationsButton=_react.default.createElement(_eui.EuiButton,{external:true,fill:true,href:_constants2.NOTIFICATIONS_LEARN_MORE_HREF,target:"_blank",iconSide:"right",iconType:"popout"},"View install instructions");var hasNotificationsTitle="Destinations have become channels in Notifications";var hasNotificationsText=_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,"Your destinations have been migrated as channels in Notifications, a new centralized place to manage your notification channels. Destinations will be deprecated going forward. ",_react.default.createElement(_eui.EuiLink,{external:true,href:_constants2.NOTIFICATIONS_LEARN_MORE_HREF,target:"_blank"},"Learn more")));var hasNotificationsButton=_react.default.createElement(_eui.EuiButton,{fill:true,href:_constants.MANAGE_CHANNELS_PATH},"View in Notifications");var FullPageNotificationsInfoCallOut=function FullPageNotificationsInfoCallOut(_ref){var hasNotificationPlugin=_ref.hasNotificationPlugin;return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("h2",null,hasNotificationPlugin?hasNotificationsTitle:noNotificationsTitle),body:hasNotificationPlugin?hasNotificationsText:noNotificationsText,actions:hasNotificationPlugin?hasNotificationsButton:noNotificationsButton}))};var _default=FullPageNotificationsInfoCallOut;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Breadcrumbs=_interopRequireDefault(__webpack_require__(373));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_Breadcrumbs.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.createEuiBreadcrumb=createEuiBreadcrumb;exports.default=void 0;exports.getBreadcrumb=getBreadcrumb;exports.getBreadcrumbs=_getBreadcrumbs;exports.parseLocationHash=parseLocationHash;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _queryString=_interopRequireDefault(__webpack_require__(32));var _eui=__webpack_require__(6);var _constants=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var Breadcrumbs=function(_Component){_inherits(Breadcrumbs,_Component);var _super=_createSuper(Breadcrumbs);function Breadcrumbs(props){var _this;_classCallCheck(this,Breadcrumbs);_this=_super.call(this,props);_this.state={breadcrumbs:[]};_this.getBreadcrumbs=_this.getBreadcrumbs.bind(_assertThisInitialized(_this));return _this}_createClass(Breadcrumbs,[{key:"componentDidMount",value:function componentDidMount(){this.getBreadcrumbs()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _prevProps$location=prevProps.location,prevPathname=_prevProps$location.pathname,prevSearch=_prevProps$location.search;var _this$props$location=this.props.location,pathname=_this$props$location.pathname,search=_this$props$location.search;if(prevPathname+prevSearch!==pathname+search){this.getBreadcrumbs()}}},{key:"getBreadcrumbs",value:function(){var _getBreadcrumbs2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,httpClient,history,routeState,rawBreadcrumbs,breadcrumbs;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=this.props,httpClient=_this$props.httpClient,history=_this$props.history,routeState=_this$props.location.state;_context.next=3;return _getBreadcrumbs(window.location.hash,routeState,httpClient);case 3:rawBreadcrumbs=_context.sent;breadcrumbs=rawBreadcrumbs.map((function(breadcrumb){return createEuiBreadcrumb(breadcrumb,history)}));this.setState({breadcrumbs:breadcrumbs});case 6:case"end":return _context.stop()}}}),_callee,this)})));function getBreadcrumbs(){return _getBreadcrumbs2.apply(this,arguments)}return getBreadcrumbs}()},{key:"render",value:function render(){var breadcrumbs=this.state.breadcrumbs;return _react.default.createElement(_eui.EuiBreadcrumbs,{breadcrumbs:breadcrumbs,responsive:false,truncate:true,style:{padding:"0px 15px"}})}}]);return Breadcrumbs}(_react.Component);exports.default=Breadcrumbs;function createEuiBreadcrumb(breadcrumb,history){var text=breadcrumb.text,href=breadcrumb.href;return{text:text,href:"#".concat(href),onClick:function onClick(e){e.preventDefault();history.push(href)}}}function _getBreadcrumbs(_x,_x2,_x3){return _getBreadcrumbs3.apply(this,arguments)}function _getBreadcrumbs3(){_getBreadcrumbs3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(hash,routeState,httpClient){var routes,asyncBreadcrumbs,breadcrumbs;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:routes=parseLocationHash(hash);_context2.next=3;return Promise.all(routes.map((function(route){return getBreadcrumb(route,routeState,httpClient)})));case 3:asyncBreadcrumbs=_context2.sent;breadcrumbs=_lodash.default.flatten(asyncBreadcrumbs).filter((function(breadcrumb){return!!breadcrumb}));return _context2.abrupt("return",breadcrumbs);case 6:case"end":return _context2.stop()}}}),_callee2)})));return _getBreadcrumbs3.apply(this,arguments)}function parseLocationHash(hash){return hash.split("/").filter((function(route){return!!route}))}function getBreadcrumb(_x4,_x5,_x6){return _getBreadcrumb.apply(this,arguments)}function _getBreadcrumb(){_getBreadcrumb=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(route,routeState,httpClient){var _route$split,_route$split2,base,queryParams,_queryString$parse,action,destinationName,destinationBreadcrumbs,monitorName,response,breadcrumbs;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_route$split=route.split("?"),_route$split2=_slicedToArray(_route$split,2),base=_route$split2[0],queryParams=_route$split2[1];if(base){_context3.next=3;break}return _context3.abrupt("return",null);case 3:if(!RegExp(/^[0-9a-z_-]{20}$/i).test(base)){_context3.next=28;break}_queryString$parse=_queryString.default.parse("?".concat(queryParams)),action=_queryString$parse.action;_context3.t0=action;_context3.next=_context3.t0===_constants.DESTINATION_ACTIONS.UPDATE_DESTINATION?8:12;break;case 8:destinationName=_lodash.default.get(routeState,"destinationToEdit.name",base);destinationBreadcrumbs=[{text:destinationName,href:"/destinations/".concat(base)}];if(action===_constants.DESTINATION_ACTIONS.UPDATE_DESTINATION){destinationBreadcrumbs.push({text:"Update destination",href:"/"})}return _context3.abrupt("return",destinationBreadcrumbs);case 12:monitorName=base;_context3.prev=13;_context3.next=16;return httpClient.get("../api/alerting/monitors/".concat(base));case 16:response=_context3.sent;if(response.ok){monitorName=response.resp.name}_context3.next=23;break;case 20:_context3.prev=20;_context3.t1=_context3["catch"](13);console.error(_context3.t1);case 23:breadcrumbs=[{text:monitorName,href:"/monitors/".concat(base)}];if(action===_constants.MONITOR_ACTIONS.UPDATE_MONITOR)breadcrumbs.push({text:"Update monitor",href:"/"});if(action===_constants.TRIGGER_ACTIONS.CREATE_TRIGGER)breadcrumbs.push({text:"Create trigger",href:"/"});if(action===_constants.TRIGGER_ACTIONS.UPDATE_TRIGGER)breadcrumbs.push({text:"Update trigger",href:"/"});return _context3.abrupt("return",breadcrumbs);case 28:return _context3.abrupt("return",{"#":{text:"Alerting",href:"/"},monitors:{text:"Monitors",href:"/monitors"},dashboard:{text:"Alerts",href:"/dashboard"},destinations:{text:"Destinations",href:"/destinations"},"create-monitor":[{text:"Monitors",href:"/monitors"},{text:"Create monitor",href:_constants.APP_PATH.CREATE_MONITOR}],"create-destination":[{text:"Destinations",href:"/destinations"},{text:"Create destination",href:_constants.APP_PATH.CREATE_DESTINATION}]}[base]);case 29:case"end":return _context3.stop()}}}),_callee3,null,[[13,20]])})));return _getBreadcrumb.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _CreateMonitor=_interopRequireDefault(__webpack_require__(375));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_CreateMonitor.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _queryString=_interopRequireDefault(__webpack_require__(32));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _DefineMonitor=_interopRequireDefault(__webpack_require__(376));var _constants=__webpack_require__(27);var _monitorToFormik=_interopRequireDefault(__webpack_require__(67));var _formikToMonitor=__webpack_require__(66);var _constants2=__webpack_require__(15);var _monitorQueryParams=__webpack_require__(503);var _SubmitErrorHandler=__webpack_require__(198);var _helpers=__webpack_require__(22);var _MonitorDetails=_interopRequireDefault(__webpack_require__(504));var _ConfigureTriggers=_interopRequireDefault(__webpack_require__(521));var _formikToTrigger=__webpack_require__(64);var _triggerToFormik=__webpack_require__(545);var _constants3=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CreateMonitor=function(_Component){_inherits(CreateMonitor,_Component);var _super=_createSuper(CreateMonitor);function CreateMonitor(props){var _this;_classCallCheck(this,CreateMonitor);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"setSchedule",(function(){var _this$props=_this.props,edit=_this$props.edit,monitorToEdit=_this$props.monitorToEdit;var initialValues=_this.state.initialValues;if(edit){var schedule=_lodash.default.get(monitorToEdit,"schedule",_constants.FORMIK_INITIAL_VALUES.period);var scheduleType=_lodash.default.keys(schedule)[0];switch(scheduleType){case"cron":_lodash.default.set(initialValues,"frequency","cronExpression");break;default:_lodash.default.set(initialValues,"period",schedule.period);break}}}));_defineProperty(_assertThisInitialized(_this),"prepareTriggers",(function(trigger,triggerMetadata,monitor){var edit=_this.props.edit;var _monitor$ui_metadata=monitor.ui_metadata,uiMetadata=_monitor$ui_metadata===void 0?{}:_monitor$ui_metadata,triggers=monitor.triggers,monitor_type=monitor.monitor_type;var updatedTriggers;var updatedUiMetadata;if(edit){updatedTriggers=_lodash.default.isArray(trigger)?trigger.concat(triggers):[trigger].concat(triggers);updatedUiMetadata=_objectSpread(_objectSpread({},uiMetadata),{},{triggers:_objectSpread(_objectSpread({},uiMetadata.triggers),triggerMetadata)})}else{var _this$state$triggerTo=_this.state.triggerToEdit,triggerToEdit=_this$state$triggerTo===void 0?[]:_this$state$triggerTo;var updatedTriggersMetadata=_lodash.default.cloneDeep(uiMetadata.triggers||{});var triggerType;switch(monitor_type){case _constants2.MONITOR_TYPE.BUCKET_LEVEL:triggerType=_constants3.TRIGGER_TYPE.BUCKET_LEVEL;break;case _constants2.MONITOR_TYPE.DOC_LEVEL:triggerType=_constants3.TRIGGER_TYPE.DOC_LEVEL;break;default:triggerType=_constants3.TRIGGER_TYPE.QUERY_LEVEL;break}if(_lodash.default.isArray(triggerToEdit)){var names=triggerToEdit.map((function(entry){return _lodash.default.get(entry,"".concat(triggerType,".name"))}));names.forEach((function(name){return delete updatedTriggersMetadata[name]}));updatedTriggers=_lodash.default.cloneDeep(trigger)}else{var _$get=_lodash.default.get(triggerToEdit,"".concat(triggerType)),name=_$get.name;delete updatedTriggersMetadata[name];var findTriggerName=function findTriggerName(element){return name===_lodash.default.get(element,"".concat(triggerType,".name"))};var indexToUpdate=_lodash.default.findIndex(triggers,findTriggerName);updatedTriggers=triggers.slice();updatedTriggers.splice(indexToUpdate,1,trigger)}updatedUiMetadata=_objectSpread(_objectSpread({},uiMetadata),{},{triggers:_objectSpread(_objectSpread({},updatedTriggersMetadata),triggerMetadata)})}return{triggers:updatedTriggers,ui_metadata:updatedUiMetadata}}));_defineProperty(_assertThisInitialized(_this),"onCloseTrigger",(function(){_this.props.history.push(_objectSpread(_objectSpread({},_this.props.location),{},{search:""}))}));var _initialValues=_lodash.default.mergeWith({},_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_VALUES),(0,_monitorQueryParams.initializeFromQueryParams)(_queryString.default.parse(_this.props.location.search)),(function(initialValue,queryValue){return _lodash.default.isEmpty(queryValue)?initialValue:queryValue}));_this.state={plugins:[],response:null,performanceResponse:null};if(_this.props.edit&&_this.props.monitorToEdit){var triggers=(0,_triggerToFormik.triggerToFormik)(_lodash.default.get(_this.props.monitorToEdit,"triggers",[]),_this.props.monitorToEdit);_lodash.default.set(_this.state,"triggerToEdit",triggers);_initialValues=_objectSpread(_objectSpread({},(0,_monitorToFormik.default)(_this.props.monitorToEdit)),{},{triggerDefinitions:triggers.triggerDefinitions})}_lodash.default.set(_this.state,"initialValues",_initialValues);_this.onCancel=_this.onCancel.bind(_assertThisInitialized(_this));_this.onCreate=_this.onCreate.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.onUpdate=_this.onUpdate.bind(_assertThisInitialized(_this));_this.getPlugins=_this.getPlugins.bind(_assertThisInitialized(_this));return _this}_createClass(CreateMonitor,[{key:"componentDidMount",value:function componentDidMount(){this.getPlugins();this.setSchedule()}},{key:"getPlugins",value:function(){var _getPlugins=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var httpClient,pluginsResponse;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:httpClient=this.props.httpClient;_context.prev=1;_context.next=4;return httpClient.get("../api/alerting/_plugins");case 4:pluginsResponse=_context.sent;if(pluginsResponse.ok){this.setState({plugins:pluginsResponse.resp.map((function(plugin){return plugin.component}))})}else{console.error("There was a problem getting plugins list")}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](1);console.error("There was a problem getting plugins list",_context.t0);case 11:case"end":return _context.stop()}}}),_callee,this,[[1,8]])})));function getPlugins(){return _getPlugins.apply(this,arguments)}return getPlugins}()},{key:"resetResponse",value:function resetResponse(){this.setState({response:null,performanceResponse:null})}},{key:"onCancel",value:function onCancel(){if(this.props.edit)this.props.history.goBack();else this.props.history.push("/monitors")}},{key:"onCreate",value:function(){var _onCreate=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(monitor,_ref){var setSubmitting,setErrors,_this$props2,httpClient,notifications,resp,ok,_id;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setSubmitting=_ref.setSubmitting,setErrors=_ref.setErrors;_this$props2=this.props,httpClient=_this$props2.httpClient,notifications=_this$props2.notifications;_context2.prev=2;_context2.next=5;return httpClient.post("../api/alerting/monitors",{body:JSON.stringify(monitor)});case 5:resp=_context2.sent;setSubmitting(false);ok=resp.ok,_id=resp.resp._id;if(ok){notifications.toasts.addSuccess('Monitor "'.concat(monitor.name,'" successfully created.'));this.props.history.push("/monitors/".concat(_id))}else{console.log("Failed to create:",resp);(0,_helpers.backendErrorNotification)(notifications,"create","monitor",resp.resp)}_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2["catch"](2);console.error(_context2.t0);setSubmitting(false);case 15:case"end":return _context2.stop()}}}),_callee2,this,[[2,11]])})));function onCreate(_x,_x2){return _onCreate.apply(this,arguments)}return onCreate}()},{key:"onUpdate",value:function(){var _onUpdate=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(monitor,_ref2){var setSubmitting,setErrors,_this$props3,updateMonitor,notifications,updatedMonitor,resp,ok,id;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setSubmitting=_ref2.setSubmitting,setErrors=_ref2.setErrors;_this$props3=this.props,updateMonitor=_this$props3.updateMonitor,notifications=_this$props3.notifications;updatedMonitor=_lodash.default.cloneDeep(monitor);_context3.prev=3;_context3.next=6;return updateMonitor(updatedMonitor);case 6:resp=_context3.sent;setSubmitting(false);ok=resp.ok,id=resp.id;if(ok){notifications.toasts.addSuccess('Monitor "'.concat(monitor.name,'" successfully updated.'));this.props.history.push("/monitors/".concat(id))}else{console.log("Failed to update:",resp)}_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3["catch"](3);console.error(_context3.t0);setSubmitting(false);case 16:case"end":return _context3.stop()}}}),_callee3,this,[[3,12]])})));function onUpdate(_x3,_x4){return _onUpdate.apply(this,arguments)}return onUpdate}()},{key:"onSubmit",value:function onSubmit(values,formikBag){var edit=this.props.edit;var monitor=(0,_formikToMonitor.formikToMonitor)(values);if(!_lodash.default.isEmpty(_lodash.default.get(values,"triggerDefinitions"))){var monitorUiMetadata=_lodash.default.get(monitor,"ui_metadata",{});var triggerMetadata=(0,_formikToTrigger.formikToTriggerUiMetadata)(values,monitorUiMetadata);var triggers=this.prepareTriggers((0,_formikToTrigger.formikToTrigger)(values,monitorUiMetadata),triggerMetadata,monitor);monitor=_objectSpread(_objectSpread({},monitor),triggers)}if(edit)this.onUpdate(monitor,formikBag);else this.onCreate(monitor,formikBag)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.setFlyout(null)}},{key:"render",value:function render(){var _this2=this;var _this$props4=this.props,edit=_this$props4.edit,history=_this$props4.history,httpClient=_this$props4.httpClient,location=_this$props4.location,monitorToEdit=_this$props4.monitorToEdit,notifications=_this$props4.notifications,isDarkMode=_this$props4.isDarkMode,notificationService=_this$props4.notificationService;var _this$state=this.state,initialValues=_this$state.initialValues,plugins=_this$state.plugins;return _react.default.createElement("div",{style:{padding:"25px 50px"}},_react.default.createElement(_formik.Formik,{initialValues:initialValues,onSubmit:this.onSubmit,validateOnChange:false},(function(_ref3){var values=_ref3.values,errors=_ref3.errors,handleSubmit=_ref3.handleSubmit,isSubmitting=_ref3.isSubmitting,isValid=_ref3.isValid,touched=_ref3.touched;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,edit?"Edit":"Create"," monitor")),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_MonitorDetails.default,{values:values,errors:errors,history:history,httpClient:httpClient,monitorToEdit:monitorToEdit,plugins:plugins,isAd:values.searchType===_constants2.SEARCH_TYPE.AD,detectorId:_this2.props.detectorId,setFlyout:_this2.props.setFlyout}),_react.default.createElement(_eui.EuiSpacer,null),values.searchType!==_constants2.SEARCH_TYPE.AD&&_react.default.createElement("div",null,_react.default.createElement(_DefineMonitor.default,{values:values,errors:errors,touched:touched,httpClient:httpClient,location:location,detectorId:_this2.props.detectorId,notifications:notifications,isDarkMode:isDarkMode}),_react.default.createElement(_eui.EuiSpacer,null)),_react.default.createElement(_formik.FieldArray,{name:"triggerDefinitions",validateOnChange:true},(function(triggerArrayHelpers){return _react.default.createElement(_ConfigureTriggers.default,{edit:edit,triggerArrayHelpers:triggerArrayHelpers,monitor:(0,_formikToMonitor.formikToMonitor)(values),monitorValues:values,setFlyout:_this2.props.setFlyout,triggers:_lodash.default.get((0,_formikToMonitor.formikToMonitor)(values),"triggers",[]),triggerValues:values,isDarkMode:_this2.props.isDarkMode,httpClient:httpClient,notifications:notifications,notificationService:notificationService,plugins:plugins})})),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:_this2.onCancel},"Cancel")),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,onClick:handleSubmit,isLoading:isSubmitting},edit?"Update":"Create"))),_react.default.createElement(_SubmitErrorHandler.SubmitErrorHandler,{errors:errors,isSubmitting:isSubmitting,isValid:isValid,onSubmitError:function onSubmitError(){return notifications.toasts.addDanger({title:"Failed to ".concat(edit?"update":"create"," the monitor"),text:"Fix all highlighted error(s) before continuing."})}}))})))}}]);return CreateMonitor}(_react.Component);exports.default=CreateMonitor;_defineProperty(CreateMonitor,"defaultProps",{edit:false,monitorToEdit:null,detectorId:null,updateMonitor:function updateMonitor(){}});module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _DefineMonitor=_interopRequireDefault(__webpack_require__(377));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_DefineMonitor.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _moment=_interopRequireDefault(__webpack_require__(8));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _VisualGraph=_interopRequireDefault(__webpack_require__(165));var _ExtractionQuery=_interopRequireDefault(__webpack_require__(453));var _MonitorExpressions=_interopRequireDefault(__webpack_require__(456));var _QueryPerformance=_interopRequireDefault(__webpack_require__(486));var _formikToMonitor=__webpack_require__(66);var _mappings=__webpack_require__(197);var _searchRequests=__webpack_require__(85);var _constants=__webpack_require__(15);var _helpers=__webpack_require__(22);var _DataSource=_interopRequireDefault(__webpack_require__(489));var _clusterMetricsMonitorHelpers=__webpack_require__(53);var _ClusterMetricsMonitor=_interopRequireDefault(__webpack_require__(497));var _constants2=__webpack_require__(27);var _clusterMetricsMonitorConstants=__webpack_require__(52);var _ConfigureDocumentLevelQueries=_interopRequireDefault(__webpack_require__(499));var _FindingsDashboard=_interopRequireDefault(__webpack_require__(71));var _helpers2=__webpack_require__(91);var _whereHelpers=__webpack_require__(84);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function renderEmptyMessage(message){return _react.default.createElement("div",{style:{padding:"20px",border:"1px solid #D9D9D9",borderRadius:"5px"}},_react.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"450px"}},_react.default.createElement("div",null,_lodash.default.isEmpty(message)?_react.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"}):message)))}var defaultProps={errors:{}};var DefineMonitor=function(_Component){_inherits(DefineMonitor,_Component);var _super=_createSuper(DefineMonitor);function DefineMonitor(props){var _this;_classCallCheck(this,DefineMonitor);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"getBucketMonitorGraphs",(function(aggregations,formikSnapshot,response){var graphs=[_react.default.createElement(_react.Fragment,{key:"multi-visual-graph-0"},_react.default.createElement(_VisualGraph.default,{values:formikSnapshot,fieldName:"doc_count",response:response}))];aggregations.map((function(field,index){graphs.push(_react.default.createElement(_react.Fragment,{key:"multi-visual-graph-".concat(index+1)},_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_VisualGraph.default,{values:formikSnapshot,fieldName:field.fieldName,aggregationType:field.aggregationType,response:response})))}));return graphs}));_this.state={dataTypes:{},performanceResponse:null,response:null,formikSnapshot:_this.props.values,plugins:[],loadingResponse:false};_this.renderGraph=_this.renderGraph.bind(_assertThisInitialized(_this));_this.onRunQuery=_this.onRunQuery.bind(_assertThisInitialized(_this));_this.resetResponse=_this.resetResponse.bind(_assertThisInitialized(_this));_this.onQueryMappings=_this.onQueryMappings.bind(_assertThisInitialized(_this));_this.queryMappings=_this.queryMappings.bind(_assertThisInitialized(_this));_this.renderVisualMonitor=_this.renderVisualMonitor.bind(_assertThisInitialized(_this));_this.renderExtractionQuery=_this.renderExtractionQuery.bind(_assertThisInitialized(_this));_this.renderClusterMetricsMonitor=_this.renderClusterMetricsMonitor.bind(_assertThisInitialized(_this));_this.getMonitorContent=_this.getMonitorContent.bind(_assertThisInitialized(_this));_this.getPlugins=_this.getPlugins.bind(_assertThisInitialized(_this));_this.getSupportedApiList=_this.getSupportedApiList.bind(_assertThisInitialized(_this));_this.showPluginWarning=_this.showPluginWarning.bind(_assertThisInitialized(_this));return _this}_createClass(DefineMonitor,[{key:"componentDidMount",value:function componentDidMount(){this.getPlugins();var _this$props$values=this.props.values,searchType=_this$props$values.searchType,index=_this$props$values.index,timeField=_this$props$values.timeField;var isGraph=searchType===_constants.SEARCH_TYPE.GRAPH;var hasIndices=!!index.length;var hasTimeField=!!timeField;if(isGraph&&hasIndices){this.onQueryMappings();if(hasTimeField||!this.requiresTimeField())this.onRunQuery()}if(searchType===_constants.SEARCH_TYPE.CLUSTER_METRICS)this.getSupportedApiList()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _prevProps$values=prevProps.values,prevSearchType=_prevProps$values.searchType,prevIndex=_prevProps$values.index,prevTimeField=_prevProps$values.timeField,prevMonitorType=_prevProps$values.monitor_type,prevGroupBy=_prevProps$values.groupBy,prevAggregations=_prevProps$values.aggregations,prevBucketValue=_prevProps$values.bucketValue,prevBucketUnitOfTime=_prevProps$values.bucketUnitOfTime,prevFilters=_prevProps$values.filters,prevQueries=_prevProps$values.queries;var _this$props$values2=this.props.values,searchType=_this$props$values2.searchType,index=_this$props$values2.index,timeField=_this$props$values2.timeField,monitor_type=_this$props$values2.monitor_type,groupBy=_this$props$values2.groupBy,aggregations=_this$props$values2.aggregations,bucketValue=_this$props$values2.bucketValue,bucketUnitOfTime=_this$props$values2.bucketUnitOfTime,filters=_this$props$values2.filters,queries=_this$props$values2.queries;var isGraph=searchType===_constants.SEARCH_TYPE.GRAPH;var hasIndices=!!index.length;if(isGraph&&hasIndices){var wasQuery=prevSearchType===_constants.SEARCH_TYPE.QUERY;var diffIndices=prevIndex!==index;if(wasQuery||diffIndices){this.onQueryMappings()}var hasTimeField=!!timeField;if(hasTimeField||!this.requiresTimeField()){var diffQueries=prevQueries!==queries;var diffTimeFields=prevTimeField!==timeField;var wasQueryType=prevMonitorType===_constants.MONITOR_TYPE.QUERY_LEVEL&&monitor_type===_constants.MONITOR_TYPE.BUCKET_LEVEL;if(wasQuery||diffIndices||diffTimeFields||wasQueryType||diffQueries)this.onRunQuery()}}var groupByCleared=prevGroupBy&&!groupBy;if(prevAggregations!==aggregations||prevBucketValue!==bucketValue||prevBucketUnitOfTime!==bucketUnitOfTime||prevFilters!==filters&&(0,_whereHelpers.validateWhereFilters)(filters)||prevGroupBy!==groupBy)this.onRunQuery();if(prevSearchType!==searchType||prevMonitorType!==monitor_type||groupByCleared){this.resetResponse();if(searchType===_constants.SEARCH_TYPE.CLUSTER_METRICS)this.getSupportedApiList()}}},{key:"requiresTimeField",value:function requiresTimeField(){var _this$props$values3=this.props.values,monitor_type=_this$props$values3.monitor_type,searchType=_this$props$values3.searchType;if(searchType!==_constants.SEARCH_TYPE.GRAPH)return false;switch(monitor_type){case _constants.MONITOR_TYPE.BUCKET_LEVEL:return true;case _constants.MONITOR_TYPE.CLUSTER_METRICS:return false;case _constants.MONITOR_TYPE.DOC_LEVEL:return false;default:return true}}},{key:"getPlugins",value:function(){var _getPlugins=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var httpClient,pluginsResponse;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:httpClient=this.props.httpClient;_context.prev=1;_context.next=4;return httpClient.get("../api/alerting/_plugins");case 4:pluginsResponse=_context.sent;if(pluginsResponse.ok){this.setState({plugins:pluginsResponse.resp.map((function(plugin){return plugin.component}))})}else{console.error("There was a problem getting plugins list")}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](1);console.error("There was a problem getting plugins list",_context.t0);case 11:case"end":return _context.stop()}}}),_callee,this,[[1,8]])})));function getPlugins(){return _getPlugins.apply(this,arguments)}return getPlugins}()},{key:"renderGraph",value:function renderGraph(){var _this2=this;var _this$props=this.props,errors=_this$props.errors,history=_this$props.history,httpClient=_this$props.httpClient,location=_this$props.location,notifications=_this$props.notifications,values=_this$props.values;var _this$state=this.state,response=_this$state.response,performanceResponse=_this$state.performanceResponse,formikSnapshot=_this$state.formikSnapshot,dataTypes=_this$state.dataTypes,loadingResponse=_this$state.loadingResponse;var aggregations=_lodash.default.get(values,"aggregations");var monitorExpressions=function monitorExpressions(){switch(values.monitor_type){case _constants.MONITOR_TYPE.DOC_LEVEL:return _react.default.createElement(_ConfigureDocumentLevelQueries.default,{errors:errors,dataTypes:dataTypes});default:return _react.default.createElement(_MonitorExpressions.default,{errors:errors,dataTypes:dataTypes})}};var accordionTitle="Preview query and performance";var previewContent=function previewContent(){switch(values.monitor_type){case _constants.MONITOR_TYPE.BUCKET_LEVEL:return _this2.getBucketMonitorGraphs(aggregations,formikSnapshot,response);case _constants.MONITOR_TYPE.DOC_LEVEL:var index=values.index,queries=values.queries;accordionTitle="Preview findings and performance";return _lodash.default.isEmpty(response)?renderEmptyMessage((0,_helpers2.validDocLevelGraphQueries)(queries)?"":"You must define at least one query."):_react.default.createElement(_FindingsDashboard.default,{isPreview:true,index:index[0].label,queries:queries,previewResponse:response,httpClient:httpClient});default:return _react.default.createElement(_VisualGraph.default,{values:formikSnapshot,response:response})}};return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),monitorExpressions(),_react.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react.default.createElement(_eui.EuiAccordion,{id:"preview-query-performance-accordion",buttonContent:accordionTitle},_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_QueryPerformance.default,{response:performanceResponse}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),errors.filters?renderEmptyMessage("Invalid input in data filters. Remove data filter or adjust filters."):loadingResponse?renderEmptyMessage():previewContent()),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))}},{key:"onRunQuery",value:function(){var _onRunQuery=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this$props2,httpClient,values,notifications,monitor_type,searchType,queries,canExecute,formikSnapshot,requests,startTime,promises,_yield$Promise$all,_yield$Promise$all2,queryResponse,optionalResponse,endTime,duration,response,performanceResponse,hitsCount;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props2=this.props,httpClient=_this$props2.httpClient,values=_this$props2.values,notifications=_this$props2.notifications;monitor_type=values.monitor_type,searchType=values.searchType;_context2.t0=monitor_type;_context2.next=_context2.t0===_constants.MONITOR_TYPE.DOC_LEVEL?5:9;break;case 5:queries=values.queries;canExecute=searchType===_constants.SEARCH_TYPE.GRAPH&&(0,_helpers2.validDocLevelGraphQueries)(queries);if(canExecute){_context2.next=9;break}return _context2.abrupt("return");case 9:this.setState({loadingResponse:true});formikSnapshot=_lodash.default.cloneDeep(values);_context2.t1=searchType;_context2.next=_context2.t1===_constants.SEARCH_TYPE.QUERY?14:_context2.t1===_constants.SEARCH_TYPE.GRAPH?16:_context2.t1===_constants.SEARCH_TYPE.CLUSTER_METRICS?19:21;break;case 14:requests=[(0,_searchRequests.buildRequest)(values)];return _context2.abrupt("break",21);case 16:requests=[(0,_searchRequests.buildRequest)(values)];requests.push((0,_searchRequests.buildRequest)(values,false));return _context2.abrupt("break",21);case 19:requests=[(0,_clusterMetricsMonitorHelpers.buildClusterMetricsRequest)(values)];return _context2.abrupt("break",21);case 21:startTime=(0,_moment.default)();_context2.prev=22;promises=requests.map((function(request){var monitor=(0,_formikToMonitor.formikToMonitor)(values);_lodash.default.set(monitor,"name","TEMP_MONITOR");_lodash.default.set(monitor,"triggers",[]);switch(searchType){case _constants.SEARCH_TYPE.QUERY:case _constants.SEARCH_TYPE.GRAPH:_lodash.default.set(monitor,"inputs[0]",request);break;case _constants.SEARCH_TYPE.CLUSTER_METRICS:_lodash.default.set(monitor,"inputs[0].uri",request);break;default:console.log("Unsupported searchType found: ".concat(JSON.stringify(searchType)),searchType)}return httpClient.post("../api/alerting/monitors/_execute",{body:JSON.stringify(monitor)})}));_context2.next=26;return Promise.all(promises);case 26:_yield$Promise$all=_context2.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);queryResponse=_yield$Promise$all2[0];optionalResponse=_yield$Promise$all2[1];if(queryResponse.ok){endTime=(0,_moment.default)();duration=_moment.default.duration(endTime.diff(startTime)).milliseconds();response=_lodash.default.get(queryResponse.resp,"input_results.results[0]");performanceResponse=optionalResponse?_lodash.default.get(optionalResponse,"resp.input_results.results[0]",null):response;this.setState({response:response,formikSnapshot:formikSnapshot,performanceResponse:performanceResponse});if(monitor_type===_constants.MONITOR_TYPE.DOC_LEVEL){hitsCount=0;_lodash.default.keys(response).forEach((function(resultKey){return hitsCount+=_lodash.default.values(performanceResponse[resultKey]).length}));this.setState({performanceResponse:_objectSpread(_objectSpread({},performanceResponse),{},{took:duration,invalid:{path:duration},hits:{total:{value:hitsCount}}})})}}else{console.error("There was an error running the query",queryResponse.resp);(0,_helpers.backendErrorNotification)(notifications,"run","query",queryResponse.resp);this.setState({response:null,formikSnapshot:null,performanceResponse:null})}_context2.next=36;break;case 33:_context2.prev=33;_context2.t2=_context2["catch"](22);console.error("There was an error running the query",_context2.t2);case 36:this.setState({loadingResponse:false});case 37:case"end":return _context2.stop()}}}),_callee2,this,[[22,33]])})));function onRunQuery(){return _onRunQuery.apply(this,arguments)}return onRunQuery}()},{key:"resetResponse",value:function resetResponse(){this.setState({response:null,performanceResponse:null})}},{key:"onQueryMappings",value:function(){var _onQueryMappings=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var index,mappings,dataTypes;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:index=this.props.values.index.map((function(_ref){var label=_ref.label;return label}));_context3.prev=1;_context3.next=4;return this.queryMappings(index);case 4:mappings=_context3.sent;dataTypes=(0,_mappings.getPathsPerDataType)(mappings);this.setState({dataTypes:dataTypes});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3["catch"](1);console.error("There was an error getting mappings for query",_context3.t0);case 12:case"end":return _context3.stop()}}}),_callee3,this,[[1,9]])})));function onQueryMappings(){return _onQueryMappings.apply(this,arguments)}return onQueryMappings}()},{key:"queryMappings",value:function(){var _queryMappings=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(index){var response;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(index.length){_context4.next=2;break}return _context4.abrupt("return",{});case 2:_context4.prev=2;_context4.next=5;return this.props.httpClient.post("../api/alerting/_mappings",{body:JSON.stringify({index:index})});case 5:response=_context4.sent;if(!response.ok){_context4.next=8;break}return _context4.abrupt("return",response.resp);case 8:return _context4.abrupt("return",{});case 11:_context4.prev=11;_context4.t0=_context4["catch"](2);throw _context4.t0;case 14:case"end":return _context4.stop()}}}),_callee4,this,[[2,11]])})));function queryMappings(_x){return _queryMappings.apply(this,arguments)}return queryMappings}()},{key:"renderVisualMonitor",value:function renderVisualMonitor(){var values=this.props.values;var index=values.index,timeField=values.timeField;var content;var supportsTimeField=values.monitor_type!==_constants.MONITOR_TYPE.DOC_LEVEL;if(index.length){content=_lodash.default.isEmpty(timeField)&&supportsTimeField?renderEmptyMessage("You must specify a time field."):this.renderGraph()}else{content=renderEmptyMessage("You must specify an index.")}return{actions:[],content:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("div",{style:{padding:"0px 10px"}},content))}}},{key:"renderExtractionQuery",value:function renderExtractionQuery(){var _this$props3=this.props,values=_this$props3.values,isDarkMode=_this$props3.isDarkMode;var _this$state2=this.state,response=_this$state2.response,performanceResponse=_this$state2.performanceResponse;var invalidJSON=false;try{JSON.parse(values.query)}catch(e){invalidJSON=true}var runIsDisabled=invalidJSON||!values.index.length;var content=renderEmptyMessage("You must specify an index.");if(values.index.length){content=_react.default.createElement(_ExtractionQuery.default,{response:JSON.stringify(response||"",null,4),isDarkMode:isDarkMode})}return{actions:[_react.default.createElement(_eui.EuiButton,{disabled:runIsDisabled,onClick:this.onRunQuery},"Run")],content:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("div",{style:{padding:"0px 10px"}},content),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_QueryPerformance.default,{response:performanceResponse}))}}},{key:"renderClusterMetricsMonitor",value:function renderClusterMetricsMonitor(){var values=this.props.values;var _this$state3=this.state,loadingResponse=_this$state3.loadingResponse,_this$state3$loadingS=_this$state3.loadingSupportedApiList,loadingSupportedApiList=_this$state3$loadingS===void 0?false:_this$state3$loadingS,response=_this$state3.response,supportedApiList=_this$state3.supportedApiList;return{content:_react.default.createElement("div",{style:{padding:"0px 10px"}},_react.default.createElement(_ClusterMetricsMonitor.default,{isDarkMode:this.isDarkMode,loadingResponse:loadingResponse,loadingSupportedApiList:loadingSupportedApiList,onRunQuery:this.onRunQuery,resetResponse:this.resetResponse,response:JSON.stringify(response||"",null,4),supportedApiList:supportedApiList,values:values}))}}},{key:"getSupportedApiList",value:function(){var _getSupportedApiList=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var _this$props4,httpClient,values,requests,promises,supportedApiList,clonedSupportedApiList;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:this.setState({loadingSupportedApiList:true});_this$props4=this.props,httpClient=_this$props4.httpClient,values=_this$props4.values;requests=[];_lodash.default.keys(_clusterMetricsMonitorConstants.API_TYPES).forEach((function(apiKey){var requiresPathParams=_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiKey,".paths.withoutPathParams"));requiresPathParams=_lodash.default.isEmpty(requiresPathParams);if(!requiresPathParams){var path=_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiKey,".paths.withoutPathParams"));var _values={uri:_objectSpread(_objectSpread({},_constants2.FORMIK_INITIAL_VALUES.uri),{},{path:path})};requests.push((0,_clusterMetricsMonitorHelpers.buildClusterMetricsRequest)(_values))}}));promises=requests.map((function(request){var monitor=(0,_formikToMonitor.formikToMonitor)(values);var tempMonitorName=(0,_clusterMetricsMonitorHelpers.getApiType)(request);_lodash.default.set(monitor,"name",tempMonitorName);_lodash.default.set(monitor,"triggers",[]);_lodash.default.set(monitor,"inputs[0].uri",request);return httpClient.post("../api/alerting/monitors/_execute",{body:JSON.stringify(monitor)})}));supportedApiList=[];_context5.next=8;return Promise.all(promises).then((function(responses){responses.forEach((function(response){if(response.ok){var supportedApi=_lodash.default.get(response,"resp.monitor_name");supportedApiList.push({value:supportedApi,label:_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(supportedApi,".label"))})}}))}));case 8:clonedSupportedApiList=_lodash.default.cloneDeep(supportedApiList);(0,_clusterMetricsMonitorHelpers.getApiTypesRequiringPathParams)().forEach((function(apiType){if(!supportedApiList.includes(apiType))clonedSupportedApiList.push(apiType)}));clonedSupportedApiList=_lodash.default.orderBy(clonedSupportedApiList,(function(api){return api.label}));this.setState({loadingSupportedApiList:false,supportedApiList:clonedSupportedApiList});case 12:case"end":return _context5.stop()}}}),_callee5,this)})));function getSupportedApiList(){return _getSupportedApiList.apply(this,arguments)}return getSupportedApiList}()},{key:"getMonitorContent",value:function getMonitorContent(){var values=this.props.values;switch(values.searchType){case _constants.SEARCH_TYPE.GRAPH:return this.renderVisualMonitor();case _constants.SEARCH_TYPE.CLUSTER_METRICS:return this.renderClusterMetricsMonitor();default:return this.renderExtractionQuery()}}},{key:"showPluginWarning",value:function showPluginWarning(){var values=this.props.values;var plugins=this.state.plugins;return values.searchType===_constants.SEARCH_TYPE.AD&&plugins.indexOf(_constants.OS_AD_PLUGIN)===-1}},{key:"render",value:function render(){var _this$props5=this.props,values=_this$props5.values,errors=_this$props5.errors,httpClient=_this$props5.httpClient,detectorId=_this$props5.detectorId,notifications=_this$props5.notifications,isDarkMode=_this$props5.isDarkMode;var dataTypes=this.state.dataTypes;var monitorContent=this.getMonitorContent();var searchType=this.props.values.searchType;var isGraphOrQuery=searchType===_constants.SEARCH_TYPE.GRAPH||searchType===_constants.SEARCH_TYPE.QUERY;return _react.default.createElement("div",null,isGraphOrQuery&&_react.default.createElement("div",null,_react.default.createElement(_DataSource.default,{values:values,dataTypes:dataTypes,errors:errors,httpClient:httpClient,detectorId:detectorId,notifications:notifications,isDarkMode:isDarkMode}),_react.default.createElement(_eui.EuiSpacer,null)),_react.default.createElement(_ContentPanel.default,{title:"Query",titleSize:"s",panelStyles:{paddingLeft:"10px",paddingRight:"10px"},bodyStyles:{padding:"initial"},actions:monitorContent.actions},this.showPluginWarning()?[_react.default.createElement(_eui.EuiCallOut,{color:"warning",title:"Anomaly detector plugin is not installed on OpenSearch, This monitor will not functional properly.",iconType:"help",size:"s"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"})]:null,monitorContent.content))}}]);return DefineMonitor}(_react.Component);DefineMonitor.defaultProps=defaultProps;var _default=DefineMonitor;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _reactVis=__webpack_require__(80);var _constants=__webpack_require__(189);var _helpers=__webpack_require__(452);var _constants2=__webpack_require__(15);var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _helpers2=__webpack_require__(51);var _constants3=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisualGraph=function(_Component){_inherits(VisualGraph,_Component);var _super=_createSuper(VisualGraph);function VisualGraph(){var _this;_classCallCheck(this,VisualGraph);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"state",{hint:null});_defineProperty(_assertThisInitialized(_this),"onNearestX",(function(value){_this.setState({hint:value})}));_defineProperty(_assertThisInitialized(_this),"onValueMouseOver",(function(data,seriesName){_this.setState({hint:{seriesName:seriesName,data:data}})}));_defineProperty(_assertThisInitialized(_this),"resetHint",(function(){_this.setState({hint:null})}));_defineProperty(_assertThisInitialized(_this),"renderXYPlot",(function(data){var _aggregations$,_aggregations$2;var _this$props=_this.props,annotation=_this$props.annotation,thresholdValue=_this$props.thresholdValue,values=_this$props.values;var bucketValue=values.bucketValue,bucketUnitOfTime=values.bucketUnitOfTime,groupBy=values.groupBy,aggregations=values.aggregations;var aggregationType=(_aggregations$=aggregations[0])===null||_aggregations$===void 0?void 0:_aggregations$.aggregationType;var fieldName=(_aggregations$2=aggregations[0])===null||_aggregations$2===void 0?void 0:_aggregations$2.fieldName;var hint=_this.state.hint;var xDomain=(0,_helpers.getXDomain)(data);var yDomain=(0,_helpers.getYDomain)(data);var annotations=(0,_helpers.getAnnotationData)(xDomain,yDomain,thresholdValue);var xTitle=values.timeField;var yTitle=(0,_helpers.getYTitle)(values);var leftPadding=(0,_helpers.getLeftPadding)(yDomain);var markData=(0,_helpers.getMarkData)(data);var title=aggregationType?"".concat(aggregationType===null||aggregationType===void 0?void 0:aggregationType.toUpperCase()," OF ").concat(fieldName):"COUNT of documents";var description=(0,_helpers.getGraphDescription)(bucketValue,bucketUnitOfTime,groupBy);return _react.default.createElement(_ContentPanel.default,{title:title,titleSize:"s",panelStyles:{paddingLeft:"10px"},description:description},_react.default.createElement(_reactVis.FlexibleXYPlot,{height:400,xType:"time",margin:{top:20,right:20,bottom:70,left:leftPadding},xDomain:xDomain,yDomain:yDomain,onMouseLeave:_this.resetHint},_react.default.createElement(_reactVis.XAxis,{title:xTitle}),_react.default.createElement(_reactVis.YAxis,{title:yTitle,tickFormat:_helpers.formatYAxisTick}),_react.default.createElement(_reactVis.LineSeries,{data:data,style:_constants.LINE_STYLES}),_react.default.createElement(_reactVis.MarkSeries,{data:markData,sizeRange:_constants.SIZE_RANGE,onNearestX:_this.onNearestX}),annotation&&_react.default.createElement(_reactVis.LineSeries,{data:annotations,style:_constants.ANNOTATION_STYLES}),hint&&_react.default.createElement(_reactVis.Hint,{value:hint},_react.default.createElement("div",{style:_constants.HINT_STYLES},"(",hint.y.toLocaleString(),")"))))}));_defineProperty(_assertThisInitialized(_this),"renderAggregationXYPlot",(function(data,groupedData){var _this$props2=_this.props,annotation=_this$props2.annotation,thresholdValue=_this$props2.thresholdValue,values=_this$props2.values,fieldName=_this$props2.fieldName,aggregationType=_this$props2.aggregationType;var hint=_this.state.hint;var xDomain=(0,_helpers.getBufferedXDomain)(data,values);var yDomain=(0,_helpers.getYDomain)(data);var annotations=(0,_helpers.getAnnotationData)(xDomain,yDomain,thresholdValue);var xTitle=values.timeField;var yTitle=fieldName;var leftPadding=(0,_helpers.getLeftPadding)(yDomain);var width=(0,_helpers.computeBarWidth)(xDomain);var title=aggregationType?"".concat(aggregationType===null||aggregationType===void 0?void 0:aggregationType.toUpperCase()," OF ").concat(fieldName):"COUNT of documents";var legends=groupedData.map((function(dataSeries){return dataSeries.key}));return _react.default.createElement(_ContentPanel.default,{title:title,titleSize:"s",panelStyles:{paddingLeft:"10px"},description:_react.default.createElement("span",null,"FOR THE LAST ",values.bucketValue," ",(0,_helpers2.selectOptionValueToText)(values.bucketUnitOfTime,_constants3.UNITS_OF_TIME),", GROUP BY"," ","".concat(values.groupBy),", Showing top 3 buckets.")},_react.default.createElement(_reactVis.FlexibleXYPlot,{height:400,xType:"time",margin:{top:20,right:20,bottom:70,left:leftPadding},xDomain:xDomain,yDomain:yDomain,onMouseLeave:_this.resetHint},_react.default.createElement(_reactVis.XAxis,{title:xTitle}),_react.default.createElement(_reactVis.YAxis,{title:yTitle,tickFormat:_helpers.formatYAxisTick}),_react.default.createElement(_reactVis.DiscreteColorLegend,{style:{position:"absolute",right:"50px",top:"10px"},items:legends}),groupedData.map((function(dataSeries,index,arr){var rectData=(0,_helpers.getRectData)(dataSeries.data,width,index,arr.length);return _react.default.createElement(_reactVis.VerticalRectSeries,{key:"vertical-rect-".concat(index),className:dataSeries.key,data:rectData,onValueMouseOver:function onValueMouseOver(d){return _this.onValueMouseOver(d,dataSeries.key)}})})),annotation&&_react.default.createElement(_reactVis.LineSeries,{data:annotations,style:_constants.ANNOTATION_STYLES}),hint&&_react.default.createElement(_reactVis.Hint,{value:hint},_react.default.createElement("div",{style:_constants.HINT_STYLES},(0,_helpers.getAggregationGraphHint)(hint)))))}));_defineProperty(_assertThisInitialized(_this),"renderEmptyData",(function(){return _react.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"450px"}},_react.default.createElement("div",null,"There is no data for the current selections."))}));return _this}_createClass(VisualGraph,[{key:"render",value:function render(){var _this$props3=this.props,values=_this$props3.values,response=_this$props3.response,fieldName=_this$props3.fieldName,aggregationType=_this$props3.aggregationType;var monitorType=values.monitor_type;var isQueryMonitor=monitorType===_constants2.MONITOR_TYPE.QUERY_LEVEL;var aggTypeFieldName="".concat(aggregationType,"_").concat(fieldName);var data=(0,_helpers.getDataFromResponse)(response,aggTypeFieldName,monitorType);var groupedData=isQueryMonitor?null:(0,_helpers.getMapDataFromResponse)(response,aggTypeFieldName,values.groupBy);var showEmpty=!data.length||!isQueryMonitor&&!values.groupBy.length;if(showEmpty)return _react.default.createElement(_react.default.Fragment,null,this.renderEmptyData());else if(isQueryMonitor)return _react.default.createElement(_react.default.Fragment,null,this.renderXYPlot(data));else return _react.default.createElement(_react.default.Fragment,null,this.renderAggregationXYPlot(data,groupedData))}}]);return VisualGraph}(_react.Component);exports.default=VisualGraph;_defineProperty(VisualGraph,"defaultProps",{annotation:false});module.exports=exports.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.computeBarWidth=computeBarWidth;exports.filterInvalidYValues=filterInvalidYValues;exports.formatYAxisTick=formatYAxisTick;exports.getAggregationGraphHint=getAggregationGraphHint;exports.getAnnotationData=getAnnotationData;exports.getBufferedXDomain=getBufferedXDomain;exports.getDataFromResponse=getDataFromResponse;exports.getGraphDescription=getGraphDescription;exports.getLeftPadding=getLeftPadding;exports.getMapDataFromResponse=getMapDataFromResponse;exports.getMarkData=getMarkData;exports.getRectData=getRectData;exports.getXDomain=getXDomain;exports.getXYValues=getXYValues;exports.getXYValuesByFieldName=getXYValuesByFieldName;exports.getYDomain=getYDomain;exports.getYTitle=getYTitle;var _lodash=_interopRequireDefault(__webpack_require__(7));var _moment=_interopRequireDefault(__webpack_require__(8));var _helpers=__webpack_require__(51);var _constants=__webpack_require__(23);var _constants2=__webpack_require__(189);var _constants3=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e3){didErr=true;err=_e3},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getYTitle(values){return _lodash.default.get(values,"aggregations[0].fieldName","doc_count")}function getLeftPadding(yDomain){var _yDomain=_slicedToArray(yDomain,2),min=_yDomain[0],max=_yDomain[1];var maxLength=Math.max(min.toString().length,max.toString().length);var multiplier=Math.max(maxLength-9,0);return 80+multiplier*10}function getXDomain(data){var minDate=data[0];var maxDate=data[data.length-1];return[minDate.x,maxDate.x]}function getBufferedXDomain(data,values){var bucketValue=values.bucketValue,bucketUnitOfTime=values.bucketUnitOfTime;var minDate=data[0].x;var maxDate=data[data.length-1].x;var timeRange=maxDate-minDate;if(!timeRange)timeRange=_moment.default.duration(bucketValue,bucketUnitOfTime);var minDateBuffer=minDate-timeRange*_constants2.X_DOMAIN_BUFFER;var maxDateBuffer=maxDate.getTime()+timeRange*_constants2.X_DOMAIN_BUFFER;return[minDateBuffer,maxDateBuffer]}function getYDomain(data){if(!data.length)return[0,10];var max=data.reduce((function(accu,_ref){var y=_ref.y;return Math.max(accu,y)}),0);var min=data.reduce((function(accu,_ref2){var y=_ref2.y;return Math.min(accu,y)}),0);if(max===min)return[0,10];var maxBuffer=Math.ceil(max*_constants2.Y_DOMAIN_BUFFER);var minBuffer=Math.floor(min*_constants2.Y_DOMAIN_BUFFER);return[minBuffer,maxBuffer]}function formatYAxisTick(value){return value.toLocaleString()}function getAnnotationData(xDomain,yDomain,thresholdValue){var _xDomain=_slicedToArray(xDomain,2),xMin=_xDomain[0],xMax=_xDomain[1];var _yDomain2=_slicedToArray(yDomain,2),yMin=_yDomain2[0],yMax=_yDomain2[1];var yValue=thresholdValue;if(thresholdValue>yMax)yValue=yMax;if(thresholdValue<yMin)yValue=yMin;return[{x:xMin,y:yValue},{x:xMax,y:yValue}]}function getDataFromResponse(response,fieldName,monitorType){if(!response)return[];var isQueryMonitor=monitorType===_constants3.MONITOR_TYPE.QUERY_LEVEL;if(isQueryMonitor){var buckets=_lodash.default.get(response,"aggregations.over.buckets",[]);return buckets.map(getXYValues).filter(filterInvalidYValues)}else{var _buckets=_lodash.default.get(response,"aggregations.composite_agg.buckets",[]);return _buckets.map((function(bucket){return getXYValuesByFieldName(bucket,fieldName)})).filter(filterInvalidYValues).sort((function(a,b){return a.x-b.x}))}}function getMapDataFromResponse(response,fieldName,groupByFields){if(!response)return[];var buckets=_lodash.default.get(response,"aggregations.composite_agg.buckets",[]);var allData=new Map;buckets.map((function(bucket){var dataPoint=getXYValuesByFieldName(bucket,fieldName);var key=groupByFields.map((function(field){return _lodash.default.get(bucket.key,field,"-")})).join(", ");allData.has(key)?allData.set(key,[dataPoint].concat(_toConsumableArray(allData.get(key)))):allData.set(key,[dataPoint])}));var entryLength=[];var _iterator=_createForOfIteratorHelper(allData.entries()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];allData.set(key,_lodash.default.filter(value,filterInvalidYValues));entryLength.push({key:key,length:value.length})}}catch(err){_iterator.e(err)}finally{_iterator.f()}entryLength.sort((function(entryA,entryB){return entryB.length-entryA.length}));var result=entryLength.slice(0,_constants2.BAR_KEY_COUNT).map((function(entry){return{key:entry.key,data:allData.get(entry.key)}}));return result}function getXYValuesByFieldName(bucket,fieldName){var x=new Date(bucket.key.date);var parsedFieldName=fieldName.replace(/\./g,"_");var path=bucket[parsedFieldName]?"".concat(parsedFieldName,".value"):"doc_count";var y=_lodash.default.get(bucket,path,null);return{x:x,y:y}}function getXYValues(bucket){var x=new Date(bucket.key_as_string);var path=bucket.metric?"metric.value":"doc_count";var y=_lodash.default.get(bucket,path,null);return{x:x,y:y}}function filterInvalidYValues(_ref3){var y=_ref3.y;return!isNaN(parseFloat(y))}function getMarkData(data){return data.map((function(d){return _objectSpread(_objectSpread({},d),{},{size:_constants2.DEFAULT_MARK_SIZE})}))}function getRectData(data){var width=arguments.length>1&&arguments[1]!==undefined?arguments[1]:3e4;var index=arguments.length>2?arguments[2]:undefined;var seriesCount=arguments.length>3?arguments[3]:undefined;var midIndex=seriesCount/2;var shiftAmount=(index-midIndex)*width;return data.map((function(d){var x=d.x.getTime()+shiftAmount;var x0=x-width;return{x0:x0,x:x,y:d.y,actualX:d.x}}))}function computeBarWidth(xDomain){var _xDomain2=_slicedToArray(xDomain,2),min=_xDomain2[0],max=_xDomain2[1];return Math.abs(max-min)*_constants2.BAR_PERCENTAGE}function getAggregationGraphHint(hint){return hint.seriesName+": ("+hint.data.actualX.toLocaleString()+", "+hint.data.y.toLocaleString()+")"}function getGraphDescription(bucketValue,bucketUnitOfTime,groupBy){var text="FOR THE LAST ".concat(bucketValue," ").concat((0,_helpers.selectOptionValueToText)(bucketUnitOfTime,_constants.UNITS_OF_TIME));if(_lodash.default.isEmpty(groupBy))return text;return text+" GROUP BY ".concat(groupBy)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _ExtractionQuery=_interopRequireDefault(__webpack_require__(454));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_ExtractionQuery.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);__webpack_require__(124);__webpack_require__(60);__webpack_require__(125);__webpack_require__(126);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExtractionQuery=function ExtractionQuery(_ref){var isDarkMode=_ref.isDarkMode,response=_ref.response;return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikCodeEditor,{name:"query",formRow:true,fieldProps:{validate:_validate.validateExtractionQuery},rowProps:{label:"Define extraction query",fullWidth:true,isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{mode:"json",width:"100%",height:"500px",theme:isDarkMode?"sense-dark":"github",onChange:function onChange(query,field,form){form.setFieldValue("query",query)},onBlur:function onBlur(e,field,form){form.setFieldTouched("query",true)},"data-test-subj":"extractionQueryCodeEditor"}})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{label:"Extraction query response",fullWidth:true},_react.default.createElement(_eui.EuiCodeEditor,{mode:"json",theme:isDarkMode?"sense-dark":"github",width:"100%",height:"500px",value:response,readOnly:true}))))};var _default=ExtractionQuery;exports.default=_default;module.exports=exports.default},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _MonitorExpressions=_interopRequireDefault(__webpack_require__(457));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_MonitorExpressions.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.DEFAULT_CLOSED_STATES=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);var _expressions=__webpack_require__(127);var _MetricExpression=_interopRequireDefault(__webpack_require__(192));var _formik=__webpack_require__(20);var _GroupByExpression=_interopRequireDefault(__webpack_require__(190));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULT_CLOSED_STATES={WHERE:false,METRICS:false,GROUP_BY:false,OVER:false,FOR_THE_LAST:false,THRESHOLD:false,WHEN:false,OF_FIELD:false};exports.DEFAULT_CLOSED_STATES=DEFAULT_CLOSED_STATES;var MonitorExpressions=function(_Component){_inherits(MonitorExpressions,_Component);var _super=_createSuper(MonitorExpressions);function MonitorExpressions(){var _this;_classCallCheck(this,MonitorExpressions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"state",{openedStates:DEFAULT_CLOSED_STATES,madeChanges:false});_defineProperty(_assertThisInitialized(_this),"openExpression",(function(expression){_this.setState({openedStates:_objectSpread(_objectSpread({},DEFAULT_CLOSED_STATES),{},_defineProperty({},expression,true))})}));_defineProperty(_assertThisInitialized(_this),"closeExpression",(function(expression){var _this$state=_this.state,madeChanges=_this$state.madeChanges,openedStates=_this$state.openedStates;if(madeChanges&&openedStates[expression]){_this.setState({madeChanges:false})}_this.setState({openedStates:_objectSpread(_objectSpread({},openedStates),{},_defineProperty({},expression,false))})}));_defineProperty(_assertThisInitialized(_this),"onMadeChanges",(function(){_this.setState({madeChanges:true})}));_defineProperty(_assertThisInitialized(_this),"getExpressionProps",(function(){return{openedStates:_this.state.openedStates,closeExpression:_this.closeExpression,openExpression:_this.openExpression,onMadeChanges:_this.onMadeChanges}}));return _this}_createClass(MonitorExpressions,[{key:"render",value:function render(){var _this$props=this.props,dataTypes=_this$props.dataTypes,errors=_this$props.errors;return _react.default.createElement("div",null,_react.default.createElement(_formik.FieldArray,{name:"aggregations",validateOnChange:false},(function(arrayHelpers){return _react.default.createElement(_MetricExpression.default,{errors:errors,arrayHelpers:arrayHelpers,dataTypes:dataTypes})})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_expressions.ForExpression,null),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_expressions.WhereExpression,_extends({},this.getExpressionProps(),{dataTypes:dataTypes})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_formik.FieldArray,{name:"groupBy",validateOnChange:false},(function(arrayHelpers){return _react.default.createElement(_GroupByExpression.default,{errors:errors,arrayHelpers:arrayHelpers,dataTypes:dataTypes})})),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}))}}]);return MonitorExpressions}(_react.Component);exports.default=MonitorExpressions},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(23);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _IconToolTip=_interopRequireDefault(__webpack_require__(61));var _constants2=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var ForExpression=function(_Component){_inherits(ForExpression,_Component);var _super=_createSuper(ForExpression);function ForExpression(){_classCallCheck(this,ForExpression);return _super.apply(this,arguments)}_createClass(ForExpression,[{key:"render",value:function render(){return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Time range for the last "),_react.default.createElement(_IconToolTip.default,{content:_constants2.TIME_RANGE_TOOLTIP_TEXT,iconType:"questionInCircle"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{style:{maxWidth:600}},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:150}},_react.default.createElement(_FormControls.FormikFieldNumber,{name:"bucketValue",formRow:true,fieldProps:{validate:_validate.validatePositiveInteger},inputProps:{min:1,onChange:this.onChangeWrapper},rowProps:{isInvalid:_validate.isInvalid,error:_validate.hasError}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:150}},_react.default.createElement(_FormControls.FormikSelect,{name:"bucketUnitOfTime",inputProps:{options:_constants.UNITS_OF_TIME}}))))}}]);return ForExpression}(_react.Component);var _default=ForExpression;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var IconToolTip=function IconToolTip(_ref){var iconType=_ref.iconType,content=_ref.content,_ref$position=_ref.position,position=_ref$position===void 0?"top":_ref$position;return _react.default.createElement(_eui.EuiToolTip,{position:position,content:content},_react.default.createElement(_eui.EuiIcon,{type:iconType}))};var _default=IconToolTip;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=GroupByPopover;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(23);var _FormControls=__webpack_require__(17);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function GroupByPopover(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props,values=_ref.values,options=_ref.options,closePopover=_ref.closePopover,expressionWidth=_ref.expressionWidth,index=_ref.index;var disableOption=function disableOption(label){options[0].options.forEach((function(element){if(element.label===label){element.disabled=true}}))};values.groupBy.forEach((function(label){disableOption(label)}));var onChangeFieldWrapper=function onChangeFieldWrapper(options,field,form){form.setFieldValue("groupBy.".concat(index),options[0].label)};return _react.default.createElement("div",{style:_objectSpread(_objectSpread({width:Math.max(expressionWidth,250),height:160},_constants.POPOVER_STYLE),_constants.EXPRESSION_STYLE)},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("h4",null,"Field"))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikComboBox,{name:"groupBy.".concat(index),inputProps:{placeholder:"Select a field",options:options,onChange:onChangeFieldWrapper,isClearable:false,singleSelection:{asPlainText:true},"data-test-subj":"groupBy.".concat(index,".ofFieldComboBox")}}))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:closePopover},"Cancel")),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,onClick:closePopover},"Save"))))}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=MetricItem;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _MetricPopover=_interopRequireDefault(__webpack_require__(193));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function MetricItem(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props,arrayHelpers=_ref.arrayHelpers,fieldOptions=_ref.fieldOptions,expressionWidth=_ref.expressionWidth,aggregation=_ref.aggregation,index=_ref.index;var _useState=(0,_react.useState)(aggregation.fieldName===""),_useState2=_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];var closePopover=function closePopover(){if(_lodash.default.isEmpty(aggregation.fieldName))arrayHelpers.remove(index);setIsPopoverOpen(false)};return _react.default.createElement(_eui.EuiPopover,{id:"metric-badge-popover",button:_react.default.createElement("div",null,_react.default.createElement(_eui.EuiBadge,{color:"hollow",iconSide:"right",iconType:"cross",iconOnClick:function iconOnClick(){return arrayHelpers.remove(index)},iconOnClickAriaLabel:"Remove metric",onClick:function onClick(){setIsPopoverOpen(true)},onClickAriaLabel:"Edit metric"},aggregation.aggregationType.toUpperCase()," OF ",aggregation.fieldName)),isOpen:isPopoverOpen,closePopover:closePopover,panelPaddingSize:"none",ownFocus:true,withTitle:true,anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiPopoverTitle,null," ADD METRIC "),_react.default.createElement(_MetricPopover.default,{options:fieldOptions,closePopover:closePopover,expressionWidth:expressionWidth,index:index}))}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _constants=__webpack_require__(23);var _helpers=__webpack_require__(51);var _dataTypes=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OfExpression=function(_Component){_inherits(OfExpression,_Component);var _super=_createSuper(OfExpression);function OfExpression(){var _this;_classCallCheck(this,OfExpression);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"onChangeWrapper",(function(options,field,form){_this.props.onMadeChanges();form.setFieldValue("fieldName",options)}));_defineProperty(_assertThisInitialized(_this),"renderPopover",(function(options,expressionWidth){return _react.default.createElement("div",{style:_objectSpread(_objectSpread({width:Math.max(expressionWidth,180)},_constants.POPOVER_STYLE),_constants.EXPRESSION_STYLE)},_react.default.createElement(_FormControls.FormikComboBox,{name:"fieldName",inputProps:{placeholder:"Select a field",options:options,onChange:_this.onChangeWrapper,isClearable:false,singleSelection:{asPlainText:true},"data-test-subj":"ofFieldComboBox"}}))}));return _this}_createClass(OfExpression,[{key:"render",value:function render(){var _this$props=this.props,values=_this$props.formik.values,openedStates=_this$props.openedStates,closeExpression=_this$props.closeExpression,openExpression=_this$props.openExpression,dataTypes=_this$props.dataTypes;var options=(0,_dataTypes.getIndexFields)(dataTypes,(0,_helpers.getOfExpressionAllowedTypes)(values));var expressionWidth=Math.max.apply(Math,_toConsumableArray(options.map((function(_ref){var options=_ref.options;return options.reduce((function(accu,curr){return Math.max(accu,curr.label.length)}),0)}))))*8+60;var fieldName=_lodash.default.get(values,"fieldName[0].label","Select a field");return _react.default.createElement(_eui.EuiPopover,{id:"of-popover",button:_react.default.createElement(_eui.EuiExpression,{description:"of",value:fieldName,isActive:openedStates.OF_FIELD,onClick:function onClick(){return openExpression(_constants.Expressions.OF_FIELD)}}),isOpen:openedStates.OF_FIELD,closePopover:function closePopover(){return closeExpression(_constants.Expressions.OF_FIELD)},panelPaddingSize:"none",ownFocus:true,withTitle:true,anchorPosition:"downLeft"},this.renderPopover(options,expressionWidth))}}]);return OfExpression}(_react.Component);var _default=(0,_formik.connect)(OfExpression);exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _constants=__webpack_require__(23);var _FormControls=__webpack_require__(17);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OverExpression=function(_Component){_inherits(OverExpression,_Component);var _super=_createSuper(OverExpression);function OverExpression(){var _this;_classCallCheck(this,OverExpression);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"onChangeWrapper",(function(e,field){_this.props.onMadeChanges();field.onChange(e)}));_defineProperty(_assertThisInitialized(_this),"renderTypeSelect",(function(){return _react.default.createElement(_FormControls.FormikSelect,{name:"overDocuments",inputProps:{onChange:_this.onChangeWrapper,options:_constants.OVER_TYPES}})}));_defineProperty(_assertThisInitialized(_this),"renderTopFieldNumber",(function(){return _react.default.createElement(_FormControls.FormikFieldNumber,{name:"groupedOverTop",inputProps:{onChange:_this.onChangeWrapper}})}));_defineProperty(_assertThisInitialized(_this),"renderTermField",(function(){var fields=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return _react.default.createElement(_FormControls.FormikSelect,{name:"groupedOverFieldName",inputProps:{onChange:_this.onChangeWrapper,options:fields}})}));_defineProperty(_assertThisInitialized(_this),"renderOverPopover",(function(){return _react.default.createElement("div",{style:_objectSpread(_objectSpread({},_constants.POPOVER_STYLE),_constants.EXPRESSION_STYLE)},_this.renderTypeSelect())}));_defineProperty(_assertThisInitialized(_this),"renderGroupedPopover",(function(){return _react.default.createElement("div",{style:_constants.POPOVER_STYLE},_react.default.createElement(_eui.EuiFlexGroup,{style:_objectSpread({maxWidth:600,width:Math.max(expressionWidth,180)},_constants.EXPRESSION_STYLE)},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:100}},_this.renderTypeSelect()),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:100}},_this.renderTopFieldNumber()),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:180}},_this.renderTermField())))}));return _this}_createClass(OverExpression,[{key:"render",value:function render(){var _this$props=this.props,values=_this$props.formik.values,openedStates=_this$props.openedStates,closeExpression=_this$props.closeExpression,openExpression=_this$props.openExpression;var isGroupedOver=values.overDocuments==="top";var buttonValue=isGroupedOver?"".concat(values.overDocuments," ").concat(values.groupedOverTop," ").concat(values.groupedOverFieldName):values.overDocuments;return _react.default.createElement(_eui.EuiPopover,{id:"over-popover",button:_react.default.createElement(_eui.EuiExpression,{description:isGroupedOver?"grouped over":"over",value:buttonValue,isActive:openedStates.OVER,onClick:function onClick(){return openExpression(_constants.Expressions.OVER)}}),isOpen:openedStates.OVER,closePopover:function closePopover(){return closeExpression(_constants.Expressions.OVER)},panelPaddingSize:"none",ownFocus:true,withTitle:true,anchorPosition:"downLeft"},this.renderOverPopover())}}]);return OverExpression}(_react.Component);var _default=(0,_formik.connect)(OverExpression);exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _constants=__webpack_require__(23);var _helpers=__webpack_require__(51);var _FormControls=__webpack_require__(17);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var WhenExpression=function(_Component){_inherits(WhenExpression,_Component);var _super=_createSuper(WhenExpression);function WhenExpression(){var _this;_classCallCheck(this,WhenExpression);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"onChangeWrapper",(function(e,field){_this.props.onMadeChanges();field.onChange(e)}));_defineProperty(_assertThisInitialized(_this),"renderPopover",(function(){return _react.default.createElement("div",{style:_objectSpread(_objectSpread({width:180},_constants.POPOVER_STYLE),_constants.EXPRESSION_STYLE)},_react.default.createElement(_FormControls.FormikSelect,{name:"aggregationType",inputProps:{onChange:_this.onChangeWrapper,options:_constants.AGGREGATION_TYPES}}))}));return _this}_createClass(WhenExpression,[{key:"render",value:function render(){var _this$props=this.props,values=_this$props.formik.values,openedStates=_this$props.openedStates,closeExpression=_this$props.closeExpression,openExpression=_this$props.openExpression;return _react.default.createElement(_eui.EuiPopover,{id:"when-popover",button:_react.default.createElement(_eui.EuiExpression,{description:"when",value:(0,_helpers.selectOptionValueToText)(values.aggregationType,_constants.AGGREGATION_TYPES),isActive:openedStates.WHEN,onClick:function onClick(){return openExpression(_constants.Expressions.WHEN)}}),isOpen:openedStates.WHEN,closePopover:function closePopover(){return closeExpression(_constants.Expressions.WHEN)},panelPaddingSize:"none",ownFocus:true,withTitle:true,anchorPosition:"downLeft"},this.renderPopover())}}]);return WhenExpression}(_react.Component);var _default=(0,_formik.connect)(WhenExpression);exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _AddTriggerConditionButton=_interopRequireDefault(__webpack_require__(466));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_AddTriggerConditionButton.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _constants=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AddTriggerConditionButton=function AddTriggerConditionButton(_ref){var arrayHelpers=_ref.arrayHelpers,disabled=_ref.disabled;return _react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return arrayHelpers.push(_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_TRIGGER_CONDITION_VALUES))},disabled:disabled,size:"xs","data-test-subj":"addTriggerConditionButton"},"+ Add condition")};var _default=AddTriggerConditionButton;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _BucketLevelTriggerExpression=_interopRequireDefault(__webpack_require__(468));var _DefineBucketLevelTrigger=__webpack_require__(63);var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(30);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BucketLevelTriggerGraph=function BucketLevelTriggerGraph(_ref){var arrayHelpers=_ref.arrayHelpers,index=_ref.index,fieldPath=_ref.fieldPath,monitorValues=_ref.monitorValues,triggerValues=_ref.triggerValues,response=_ref.response,queryMetrics=_ref.queryMetrics;var fieldNamePath="".concat(fieldPath,"triggerConditions[").concat(index,"].");var andOrCondition=_lodash.default.get(triggerValues,"".concat(fieldNamePath,"andOrCondition"));if(index>0&&_lodash.default.isEmpty(andOrCondition)){andOrCondition=_constants.DEFAULT_AND_OR_CONDITION;_lodash.default.set(triggerValues,"".concat(fieldNamePath,"andOrCondition"),andOrCondition)}var queryMetric=_lodash.default.get(triggerValues,"".concat(fieldNamePath,"queryMetric"),_DefineBucketLevelTrigger.DEFAULT_METRIC_AGGREGATION.value);_lodash.default.set(triggerValues,"".concat(fieldNamePath,"queryMetric"),queryMetric);var thresholdEnum=_lodash.default.get(triggerValues,"".concat(fieldNamePath,"thresholdEnum"));var thresholdValue=_lodash.default.get(triggerValues,"".concat(fieldNamePath,"thresholdValue"));return _react.default.createElement("div",{style:{padding:"0px 10px"}},_react.default.createElement(_BucketLevelTriggerExpression.default,{arrayHelpers:arrayHelpers,index:index,andOrCondition:andOrCondition,queryMetric:queryMetric,queryMetrics:queryMetrics,thresholdEnum:thresholdEnum,thresholdValue:thresholdValue,andOrConditionFieldName:"".concat(fieldNamePath,"andOrCondition"),queryMetricFieldName:"".concat(fieldNamePath,"queryMetric"),enumFieldName:"".concat(fieldNamePath,"thresholdEnum"),valueFieldName:"".concat(fieldNamePath,"thresholdValue"),label:"Trigger conditions"}))};var _default=BucketLevelTriggerGraph;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _BucketLevelTriggerExpression=_interopRequireDefault(__webpack_require__(469));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_BucketLevelTriggerExpression.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.Expressions=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _constants=__webpack_require__(30);var _excluded=["onBlur"],_excluded2=["onBlur"],_excluded3=["onBlur"];function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var Expressions={THRESHOLD:"THRESHOLD"};exports.Expressions=Expressions;var GUTTER_WIDTH=16;var AND_OR_FIELD_WIDTH=90;var METRIC_FIELD_WIDTH=300;var THRESHOLD_FIELD_WIDTH=200;var VALUE_FIELD_WIDTH=200;var BucketLevelTriggerExpression=function(_Component){_inherits(BucketLevelTriggerExpression,_Component);var _super=_createSuper(BucketLevelTriggerExpression);function BucketLevelTriggerExpression(props){_classCallCheck(this,BucketLevelTriggerExpression);return _super.call(this,props)}_createClass(BucketLevelTriggerExpression,[{key:"render",value:function render(){var _this$props=this.props,arrayHelpers=_this$props.arrayHelpers,queryMetrics=_this$props.queryMetrics,index=_this$props.index,andOrConditionFieldName=_this$props.andOrConditionFieldName,queryMetricFieldName=_this$props.queryMetricFieldName,enumFieldName=_this$props.enumFieldName,valueFieldName=_this$props.valueFieldName;var isFirstCondition=index===0;return _react.default.createElement(_eui.EuiFlexGroup,{style:{maxWidth:1200,paddingLeft:"10px",paddingTop:"10px",whiteSpace:"nowrap"},gutterSize:"m",alignItems:"flexStart"},!isFirstCondition?_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:"".concat(AND_OR_FIELD_WIDTH,"px")}},_react.default.createElement(_formik.Field,{name:andOrConditionFieldName},(function(_ref){var _ref$field=_ref.field,onBlur=_ref$field.onBlur,rest=_objectWithoutProperties(_ref$field,_excluded),_ref$form=_ref.form,touched=_ref$form.touched,errors=_ref$form.errors;return _react.default.createElement(_eui.EuiFormRow,{isInvalid:touched.andOrCondition&&!!errors.andOrCondition,error:errors.andOrCondition},_react.default.createElement(_eui.EuiSelect,_extends({options:_constants.AND_OR_CONDITION_OPTIONS},rest)))}))):null,_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{minWidth:isFirstCondition?"".concat(METRIC_FIELD_WIDTH+AND_OR_FIELD_WIDTH+GUTTER_WIDTH,"px"):"".concat(METRIC_FIELD_WIDTH,"px")}},_react.default.createElement(_formik.Field,{name:queryMetricFieldName,fullWidth:true},(function(_ref2){var _ref2$field=_ref2.field,onBlur=_ref2$field.onBlur,rest=_objectWithoutProperties(_ref2$field,_excluded2),_ref2$form=_ref2.form,touched=_ref2$form.touched,errors=_ref2$form.errors;return _react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:isFirstCondition?"Metric":null,isInvalid:touched.queryMetric&&!!errors.queryMetric,error:errors.queryMetric},_react.default.createElement(_eui.EuiSelect,_extends({fullWidth:true,options:queryMetrics},rest)))}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:"".concat(THRESHOLD_FIELD_WIDTH,"px")}},_react.default.createElement(_formik.Field,{name:enumFieldName,fullWidth:true},(function(_ref3){var _ref3$field=_ref3.field,onBlur=_ref3$field.onBlur,rest=_objectWithoutProperties(_ref3$field,_excluded3),_ref3$form=_ref3.form,touched=_ref3$form.touched,errors=_ref3$form.errors;return _react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:isFirstCondition?"Threshold":null,isInvalid:touched.thresholdEnum&&!!errors.thresholdEnum,error:errors.thresholdEnum},_react.default.createElement(_eui.EuiSelect,_extends({options:_constants.THRESHOLD_ENUM_OPTIONS},rest)))}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:"".concat(VALUE_FIELD_WIDTH,"px")}},_react.default.createElement(_formik.Field,{name:valueFieldName},(function(_ref4){var field=_ref4.field,_ref4$form=_ref4.form,touched=_ref4$form.touched,errors=_ref4$form.errors;return _react.default.createElement(_eui.EuiFormRow,{label:isFirstCondition?"Value":null,isInvalid:touched.thresholdValue&&!!errors.thresholdValue,error:errors.thresholdValue},_react.default.createElement(_eui.EuiFieldNumber,field))}))),!isFirstCondition?_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{color:"danger",onClick:function onClick(){arrayHelpers.remove(index)}},"Remove condition")):null)}}]);return BucketLevelTriggerExpression}(_react.Component);var _default=BucketLevelTriggerExpression;exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _BucketLevelTriggerQuery=_interopRequireDefault(__webpack_require__(471));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_BucketLevelTriggerQuery.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getResultsBuckets=exports.getExecuteMessage=exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _formik=__webpack_require__(20);var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);__webpack_require__(124);__webpack_require__(60);__webpack_require__(125);__webpack_require__(126);var _formikToTrigger=__webpack_require__(64);var _validate=__webpack_require__(18);var _constants=__webpack_require__(28);var _constants2=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getExecuteMessage=function getExecuteMessage(response){if(!response)return"No response";var triggerResults=_lodash.default.get(response,"trigger_results");if(!triggerResults)return"No trigger results";var triggerId=Object.keys(triggerResults)[0];if(!triggerId)return"No trigger results";var executeResults=_lodash.default.get(triggerResults,"".concat(triggerId));if(!executeResults)return"No execute results";var error=executeResults.error;return error||getResultsBuckets(executeResults)};exports.getExecuteMessage=getExecuteMessage;var getResultsBuckets=function getResultsBuckets(executeResults){var results=_lodash.default.get(executeResults,"agg_result_buckets",{});var resultsKeys=_lodash.default.keys(results);if(_lodash.default.isEmpty(resultsKeys))return"No execute results";var displayResults=resultsKeys.map((function(key){return _lodash.default.get(results,"".concat(key,".agg_alert_content.bucket"),{})}));return JSON.stringify(displayResults,null,4)};exports.getResultsBuckets=getResultsBuckets;var BucketLevelTriggerQuery=function BucketLevelTriggerQuery(_ref){var context=_ref.context,executeResponse=_ref.executeResponse,onRun=_ref.onRun,setFlyout=_ref.setFlyout,triggerValues=_ref.triggerValues,isDarkMode=_ref.isDarkMode,fieldPath=_ref.fieldPath;var currentTrigger=_lodash.default.isEmpty(fieldPath)?triggerValues:_lodash.default.get(triggerValues,"".concat(fieldPath.slice(0,-1)),{});var trigger=(0,_formikToTrigger.formikToTrigger)(currentTrigger,{monitor_type:_constants2.MONITOR_TYPE.BUCKET_LEVEL});_lodash.default.set(trigger,"".concat(_constants.TRIGGER_TYPE.BUCKET_LEVEL,".actions"),[]);var fieldName="".concat(fieldPath,"bucketSelector");return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",style:{paddingLeft:"20px",paddingRight:"20px"}},_react.default.createElement(_eui.EuiFlexItem,{style:{marginBottom:"20px"}},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"stretch",gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_formik.Field,{name:fieldName,validate:_validate.validateExtractionQuery},(function(_ref2){var value=_ref2.field.value,_ref2$form=_ref2.form,errors=_ref2$form.errors,touched=_ref2$form.touched,setFieldValue=_ref2$form.setFieldValue,setFieldTouched=_ref2$form.setFieldTouched;return _react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Trigger condition"))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){setFlyout({type:"triggerCondition",payload:context})}},"Info")))),fullWidth:true,isInvalid:_lodash.default.get(touched,fieldName,false)&&!!_lodash.default.get(errors,fieldName),error:_lodash.default.get(errors,fieldName)},_react.default.createElement(_eui.EuiCodeEditor,{grow:true,mode:"json",theme:isDarkMode?"sense-dark":"github",height:"200px",width:"100%",onChange:function onChange(source){setFieldValue(fieldName,source)},onBlur:function onBlur(){return setFieldTouched(fieldName,true)},value:value}))}))),_react.default.createElement(_eui.EuiFlexItem,{grow:1,style:{paddingTop:"6px"}},_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Trigger condition response"))},_react.default.createElement(_eui.EuiCodeEditor,{grow:true,mode:"plain_text",theme:isDarkMode?"sense-dark":"github",height:"200px",width:"100%",value:getExecuteMessage(executeResponse),readOnly:true})))))),_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onRun(_lodash.default.isArray(trigger)?trigger:[trigger])},size:"s",style:{marginLeft:"10px"}},"Preview condition response"))};var _default=BucketLevelTriggerQuery;exports.default=_default},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var OverviewStat=function OverviewStat(_ref){var header=_ref.header,value=_ref.value;return _react.default.createElement(_eui.EuiFlexItem,{key:header},_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,header),_react.default.createElement("div",null,value)))};var _default=OverviewStat;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.checkForError=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _Action=_interopRequireDefault(__webpack_require__(475));var _ActionEmptyPrompt=_interopRequireDefault(__webpack_require__(482));var _AddActionButton=_interopRequireDefault(__webpack_require__(196));var _constants=__webpack_require__(30);var _helpers=__webpack_require__(48);var _constants2=__webpack_require__(15);var _helpers2=__webpack_require__(22);var _constants3=__webpack_require__(28);var _formikToTrigger=__webpack_require__(64);var _helper=__webpack_require__(65);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createActionContext=function createActionContext(context,action){return{ctx:_objectSpread(_objectSpread({},context),{},{action:action})}};var checkForError=function checkForError(response,error){for(var trigger_name in response.resp.trigger_results){if(!response.resp.trigger_results[trigger_name].error){for(var action_result in response.resp.trigger_results[trigger_name].action_results){error=response.resp.trigger_results[trigger_name].action_results[action_result].error}}else{error=response.resp.trigger_results[trigger_name].error}}return error};exports.checkForError=checkForError;var ConfigureActions=function(_React$Component){_inherits(ConfigureActions,_React$Component);var _super=_createSuper(ConfigureActions);function ConfigureActions(props){var _this;_classCallCheck(this,ConfigureActions);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"getChannels",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var plugins,hasNotificationPlugin,channels,index,getChannels;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:plugins=_this.props.plugins;hasNotificationPlugin=plugins.indexOf(_constants2.OS_NOTIFICATION_PLUGIN)!==-1;channels=[];index=0;getChannels=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var getChannelsQuery,channelsResponse;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getChannelsQuery={from_index:index,max_items:_constants2.MAX_CHANNELS_RESULT_SIZE,config_type:_constants.CHANNEL_TYPES,sort_field:"name",sort_order:"asc"};_context.next=3;return _this.props.notificationService.getChannels(getChannelsQuery);case 3:channelsResponse=_context.sent;channels=channels.concat(channelsResponse.items.map((function(channel){return{label:"[Channel] ".concat(channel.name),value:channel.config_id,type:channel.config_type,description:channel.description}})));if(!(channelsResponse.total&&channels.length<channelsResponse.total)){_context.next=9;break}index+=_constants2.MAX_CHANNELS_RESULT_SIZE;_context.next=9;return getChannels();case 9:case"end":return _context.stop()}}}),_callee)})));return function getChannels(){return _ref2.apply(this,arguments)}}();if(!hasNotificationPlugin){_context2.next=8;break}_context2.next=8;return getChannels();case 8:return _context2.abrupt("return",channels);case 9:case"end":return _context2.stop()}}}),_callee2)}))));_defineProperty(_assertThisInitialized(_this),"loadDestinations",_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var searchText,_this$props,httpClient,values,arrayHelpers,notifications,fieldPath,_this$state,allowList,actionDeleted,response,destinations,channels,destinationsAndChannels,channelOptionsByType,monitorType,initialActionValues,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:searchText=_args3.length>0&&_args3[0]!==undefined?_args3[0]:"";_this$props=_this.props,httpClient=_this$props.httpClient,values=_this$props.values,arrayHelpers=_this$props.arrayHelpers,notifications=_this$props.notifications,fieldPath=_this$props.fieldPath;_this$state=_this.state,allowList=_this$state.allowList,actionDeleted=_this$state.actionDeleted;_this.setState({loadingDestinations:true});_context3.prev=4;_context3.next=7;return httpClient.get("../api/alerting/destinations",{query:{search:searchText,size:_constants2.MAX_QUERY_RESULT_SIZE}});case 7:response=_context3.sent;destinations=[];if(response.ok){destinations=response.destinations.filter((function(destination){return allowList.includes(destination.type)})).map((function(destination){return{label:"[Destination] ".concat(destination.name),value:destination.id,type:(0,_helper.toChannelType)(destination.type),description:""}}))}else{(0,_helpers2.backendErrorNotification)(notifications,"load","destinations",response.err)}_context3.next=12;return _this.getChannels();case 12:channels=_context3.sent;destinationsAndChannels=destinations.concat(channels);channelOptionsByType=(0,_helper.getChannelOptions)(destinationsAndChannels,_constants.CHANNEL_TYPES);_this.setState({destinations:channelOptionsByType,flattenedDestinations:destinationsAndChannels,loadingDestinations:false});monitorType=_lodash.default.get(arrayHelpers,"form.values.monitor_type",_constants2.MONITOR_TYPE.QUERY_LEVEL);initialActionValues=_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_ACTION_VALUES);_context3.t0=monitorType;_context3.next=_context3.t0===_constants2.MONITOR_TYPE.BUCKET_LEVEL?21:23;break;case 21:_lodash.default.set(initialActionValues,"message_template.source",_constants.DEFAULT_MESSAGE_SOURCE.BUCKET_LEVEL_MONITOR);return _context3.abrupt("break",25);case 23:_lodash.default.set(initialActionValues,"message_template.source",_constants.DEFAULT_MESSAGE_SOURCE.QUERY_LEVEL_MONITOR);return _context3.abrupt("break",25);case 25:if(destinationsAndChannels.length>0&&!_lodash.default.get(values,"".concat(fieldPath,"actions"))&&!actionDeleted){arrayHelpers.insert(0,initialActionValues)}_context3.next=32;break;case 28:_context3.prev=28;_context3.t1=_context3["catch"](4);console.error(_context3.t1);_this.setState({destinations:[],flattenedDestinations:[],loadingDestinations:false});case 32:case"end":return _context3.stop()}}}),_callee3,null,[[4,28]])}))));_defineProperty(_assertThisInitialized(_this),"sendTestMessage",function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(index){var _this$props2,monitor,httpClient,notifications,triggerIndex,values,flattenedDestinations,testTrigger,action,condition,testMonitor,response,error,destinationName,errorMessage;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$props2=_this.props,monitor=_this$props2.context.monitor,httpClient=_this$props2.httpClient,notifications=_this$props2.notifications,triggerIndex=_this$props2.triggerIndex,values=_this$props2.values;flattenedDestinations=_this.state.flattenedDestinations;testTrigger=_lodash.default.cloneDeep((0,_formikToTrigger.formikToTrigger)(values,monitor.ui_metadata)[triggerIndex]);_context4.t0=monitor.monitor_type;_context4.next=_context4.t0===_constants2.MONITOR_TYPE.BUCKET_LEVEL?6:_context4.t0===_constants2.MONITOR_TYPE.DOC_LEVEL?11:16;break;case 6:action=_lodash.default.get(testTrigger,"".concat(_constants3.TRIGGER_TYPE.BUCKET_LEVEL,".actions[").concat(index,"]"));condition=_objectSpread(_objectSpread({},_lodash.default.get(testTrigger,"".concat(_constants3.TRIGGER_TYPE.BUCKET_LEVEL,".condition"))),{},{buckets_path:{_count:"_count"},script:{source:"params._count >= 0"}});_lodash.default.set(testTrigger,"".concat(_constants3.TRIGGER_TYPE.BUCKET_LEVEL,".actions"),[action]);_lodash.default.set(testTrigger,"".concat(_constants3.TRIGGER_TYPE.BUCKET_LEVEL,".condition"),condition);return _context4.abrupt("break",21);case 11:action=_lodash.default.get(testTrigger,"".concat(_constants3.TRIGGER_TYPE.DOC_LEVEL,".actions[").concat(index,"]"));condition=_objectSpread(_objectSpread({},_lodash.default.get(testTrigger,"".concat(_constants3.TRIGGER_TYPE.DOC_LEVEL,".condition"))),{},{script:{lang:"painless",source:"return true"}});_lodash.default.set(testTrigger,"".concat(_constants3.TRIGGER_TYPE.DOC_LEVEL,".actions"),[action]);_lodash.default.set(testTrigger,"".concat(_constants3.TRIGGER_TYPE.DOC_LEVEL,".condition"),condition);return _context4.abrupt("break",21);case 16:action=_lodash.default.get(testTrigger,"actions[".concat(index,"]"));condition=_objectSpread(_objectSpread({},_lodash.default.get(testTrigger,"condition")),{},{script:{lang:"painless",source:"return true"}});_lodash.default.set(testTrigger,"actions",[action]);_lodash.default.set(testTrigger,"condition",condition);return _context4.abrupt("break",21);case 21:testMonitor=_objectSpread(_objectSpread({},monitor),{},{triggers:[_objectSpread({},testTrigger)]});_context4.prev=22;_context4.next=25;return httpClient.post("../api/alerting/monitors/_execute",{query:{dryrun:false},body:JSON.stringify(testMonitor)});case 25:response=_context4.sent;error=null;if(response.ok){error=checkForError(response,error);if(!_lodash.default.isEmpty(action.destination_id)){destinationName=_lodash.default.get(_lodash.default.find(flattenedDestinations,{value:action.destination_id}),"label");notifications.toasts.addSuccess('Test message sent to "'.concat(destinationName,'."'))}}if(error||!response.ok){errorMessage=error==null?response.resp:error;console.error("There was an error trying to send test message",errorMessage);(0,_helpers2.backendErrorNotification)(notifications,"send","test message",errorMessage)}_context4.next=34;break;case 31:_context4.prev=31;_context4.t1=_context4["catch"](22);console.error("There was an error trying to send test message",_context4.t1);case 34:case"end":return _context4.stop()}}}),_callee4,null,[[22,31]])})));return function(_x){return _ref4.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"renderActions",(function(arrayHelpers){var _this$props3=_this.props,context=_this$props3.context,setFlyout=_this$props3.setFlyout,values=_this$props3.values,fieldPath=_this$props3.fieldPath,httpClient=_this$props3.httpClient,plugins=_this$props3.plugins;var _this$state2=_this.state,destinations=_this$state2.destinations,flattenedDestinations=_this$state2.flattenedDestinations;var hasDestinations=!_lodash.default.isEmpty(destinations);var hasActions=!_lodash.default.isEmpty(_lodash.default.get(values,"".concat(fieldPath,"actions")));var shouldRenderActions=hasActions||hasDestinations&&hasActions;var hasNotificationPlugin=plugins.indexOf(_constants2.OS_NOTIFICATION_PLUGIN)!==-1;return shouldRenderActions?_lodash.default.get(values,"".concat(fieldPath,"actions")).map((function(action,index){return _react.default.createElement(_Action.default,{key:index,action:action,arrayHelpers:arrayHelpers,context:createActionContext(context,action),destinations:destinations,flattenedDestinations:flattenedDestinations,index:index,onDelete:function onDelete(){_this.setState({actionDeleted:true});arrayHelpers.remove(index)},sendTestMessage:_this.sendTestMessage,setFlyout:setFlyout,httpClient:httpClient,fieldPath:fieldPath,values:values,hasNotificationPlugin:hasNotificationPlugin,loadDestinations:_this.loadDestinations})})):_react.default.createElement(_ActionEmptyPrompt.default,{arrayHelpers:arrayHelpers,hasDestinations:hasDestinations,httpClient:httpClient,hasNotificationPlugin:hasNotificationPlugin})}));_this.state={destinations:[],flattenedDestinations:[],allowList:[],loadingDestinations:true,actionDeleted:false,hasNotificationPlugin:false};return _this}_createClass(ConfigureActions,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var _this$props4,httpClient,plugins,allowList;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this$props4=this.props,httpClient=_this$props4.httpClient,plugins=_this$props4.plugins;_context5.next=3;return(0,_helpers.getAllowList)(httpClient);case 3:allowList=_context5.sent;this.setState({allowList:allowList});if(plugins.indexOf(_constants2.OS_NOTIFICATION_PLUGIN)!==-1){this.setState({hasNotificationPlugin:true})}this.loadDestinations();case 7:case"end":return _context5.stop()}}}),_callee5,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this.props.plugins!==prevProps.plugins){if(this.props.plugins.indexOf(_constants2.OS_NOTIFICATION_PLUGIN)!==-1){this.setState({hasNotificationPlugin:true})}this.loadDestinations()}}},{key:"render",value:function render(){var loadingDestinations=this.state.loadingDestinations;var _this$props5=this.props,arrayHelpers=_this$props5.arrayHelpers,values=_this$props5.values,fieldPath=_this$props5.fieldPath;var numOfActions=_lodash.default.get(values,"".concat(fieldPath,"actions"),[]).length;var displayAddActionButton=numOfActions>0;return _react.default.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h4",null,"Actions (".concat(numOfActions,")"))),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs",style:{paddingBottom:"5px"}},"Define actions when trigger conditions are met."),_react.default.createElement(_eui.EuiPanel,{style:{backgroundColor:"#F7F7F7",padding:"20px"}},loadingDestinations&&numOfActions<1?_react.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},"Loading Destinations..."):this.renderActions(arrayHelpers),displayAddActionButton?_react.default.createElement("div",{style:{paddingBottom:"5px",paddingTop:"20px"}},_react.default.createElement(_AddActionButton.default,{arrayHelpers:arrayHelpers,numOfActions:numOfActions})):null))}}]);return ConfigureActions}(_react.default.Component);var _default=ConfigureActions;exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Action=_interopRequireDefault(__webpack_require__(476));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_Action.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _constants=__webpack_require__(477);var _validate2=__webpack_require__(479);var _constants2=__webpack_require__(30);var _NotificationsCallOut=_interopRequireDefault(__webpack_require__(480));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var Action=function Action(_ref){var action=_ref.action,arrayHelpers=_ref.arrayHelpers,context=_ref.context,destinations=_ref.destinations,flattenedDestinations=_ref.flattenedDestinations,index=_ref.index,onDelete=_ref.onDelete,sendTestMessage=_ref.sendTestMessage,setFlyout=_ref.setFlyout,httpClient=_ref.httpClient,fieldPath=_ref.fieldPath,values=_ref.values,hasNotificationPlugin=_ref.hasNotificationPlugin,loadDestinations=_ref.loadDestinations;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),loadingDestinations=_useState2[0],setLoadingDestinations=_useState2[1];var selectedDestination=flattenedDestinations.filter((function(item){return item.value===action.destination_id}));var type=_lodash.default.get(selectedDestination,"0.type",_constants2.DEFAULT_ACTION_TYPE);var name=action.name;var ActionComponent=_constants.ActionsMap[type].component;var actionLabel=_constants.ActionsMap[type].label;var manageChannelsUrl=httpClient.basePath.prepend(_constants2.MANAGE_CHANNELS_PATH);var isFirstAction=index!==undefined&&index===0;function refreshDestinations(){return _refreshDestinations.apply(this,arguments)}function _refreshDestinations(){_refreshDestinations=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoadingDestinations(true);_context.next=3;return loadDestinations();case 3:setLoadingDestinations(false);case 4:case"end":return _context.stop()}}}),_callee)})));return _refreshDestinations.apply(this,arguments)}var renderChannels=function renderChannels(){return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiFlexGroup,{wrap:true},_react.default.createElement(_eui.EuiFlexItem,{style:{maxWidth:400}},_react.default.createElement(_FormControls.FormikComboBox,{name:"".concat(fieldPath,"actions.").concat(index,".destination_id"),formRow:true,fieldProps:{validate:(0,_validate2.validateDestination)(flattenedDestinations)},rowProps:{label:"Channels",isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Select channel to notify",options:destinations,selectedOptions:selectedDestination,isDisabled:!hasNotificationPlugin,onChange:function onChange(options){var _options$;arrayHelpers.replace(index,_objectSpread(_objectSpread({},action),{},{destination_id:(_options$=options[0])===null||_options$===void 0?void 0:_options$.value}))},onBlur:function onBlur(e,field,form){refreshDestinations();form.setFieldTouched("".concat(fieldPath,"actions.").concat(index,".destination_id"),true)},singleSelection:{asPlainText:true},isClearable:false,renderOption:function renderOption(option){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s"},option.label),_react.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},option.description))},rowHeight:45,isLoading:loadingDestinations}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_eui.EuiButton,{disabled:!hasNotificationPlugin,iconType:"popout",iconSide:"right",onClick:function onClick(){return window.open(manageChannelsUrl)}},"Manage channels"))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),!hasNotificationPlugin&&_react.default.createElement(_NotificationsCallOut.default,null))};return _react.default.createElement("div",{style:{paddingTop:isFirstAction?undefined:"20px"}},_react.default.createElement(_eui.EuiPanel,{styles:{backgroundColor:"#FFFFFF"}},_react.default.createElement(_eui.EuiAccordion,{id:name,initialIsOpen:!name,className:"accordion-action",buttonContent:_react.default.createElement(_eui.EuiText,null,!_lodash.default.get(selectedDestination,"0.type",undefined)?"Notification":"".concat(actionLabel,": ").concat(name)),extraAction:_react.default.createElement(_eui.EuiButton,{color:"danger",onClick:onDelete,size:"s"},"Remove action"),paddingSize:"s"},_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react.default.createElement("div",{style:{paddingLeft:"20px",paddingRight:"20px",paddingTop:"10px"}},_react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(fieldPath,"actions.").concat(index,".name"),formRow:true,fieldProps:{validate:(0,_validate.validateActionName)(context.ctx.monitor,context.ctx.trigger)},rowProps:{label:"Action name",helpText:"Names can only contain letters, numbers, and special characters",isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Enter action name",isInvalid:_validate.isInvalid}}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),renderChannels(),_react.default.createElement(ActionComponent,{action:action,context:context,index:index,sendTestMessage:sendTestMessage,setFlyout:setFlyout,fieldPath:fieldPath,values:values})))))};var _default=Action;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ActionsMap=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _index=_interopRequireDefault(__webpack_require__(478));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var ActionsMap={slack:{label:"Slack notification",component:function component(props){return _react.default.createElement(_index.default,props)}},chime:{label:"Amazon Chime notification",component:function component(props){return _react.default.createElement(_index.default,props)}},custom_webhook:{label:"Custom webhook",component:function component(props){return _react.default.createElement(_index.default,_extends({isSubjectDisabled:true},props))}},webhook:{label:"Custom webhook",component:function component(props){return _react.default.createElement(_index.default,_extends({isSubjectDisabled:true},props))}},email:{label:"Email notification",component:function component(props){return _react.default.createElement(_index.default,props)}}};exports.ActionsMap=ActionsMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Message=_interopRequireDefault(__webpack_require__(128));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_Message.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateDestination=void 0;var validateDestination=function validateDestination(destinations){return function(value){if(!value)return"Required.";var destinationMatches=destinations.filter((function(destination){return destination.value===value}));if(destinationMatches.length===0){return"Required."}}};exports.validateDestination=validateDestination},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _NotificationsCallOut=_interopRequireDefault(__webpack_require__(481));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_NotificationsCallOut.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NotificationsCallOut=function NotificationsCallOut(){return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiCallOut,{title:"Notifications plugin is not installed",color:"danger",iconType:"alert"},_react.default.createElement("p",null,"Install the notifications plugin in order to create and select channels to send out notifications."," ",_react.default.createElement(_eui.EuiLink,{href:"#",external:true},"Learn more"),".")),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))};var _default=NotificationsCallOut;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _ActionEmptyPrompt=_interopRequireDefault(__webpack_require__(483));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_ActionEmptyPrompt.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _AddActionButton=_interopRequireDefault(__webpack_require__(196));var _constants=__webpack_require__(30);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var actionEmptyText="Add an action to perform when this trigger is triggered.";var destinationEmptyText="There are no existing channels. Add a channel to create an action.";var manageChannelsButton=function manageChannelsButton(httpClient,hasNotificationPlugin){return _react.default.createElement(_eui.EuiButton,{fill:true,disabled:!hasNotificationPlugin,iconType:"popout",iconSide:"right",onClick:function onClick(){return window.open(httpClient.basePath.prepend(_constants.MANAGE_CHANNELS_PATH))}},"Manage channels")};var addActionButton=function addActionButton(arrayHelpers){return _react.default.createElement(_AddActionButton.default,{arrayHelpers:arrayHelpers})};var ActionEmptyPrompt=function ActionEmptyPrompt(_ref){var arrayHelpers=_ref.arrayHelpers,hasDestinations=_ref.hasDestinations,httpClient=_ref.httpClient,hasNotificationPlugin=_ref.hasNotificationPlugin;return _react.default.createElement(_eui.EuiEmptyPrompt,{style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,hasDestinations?actionEmptyText:destinationEmptyText)),actions:hasDestinations?addActionButton(arrayHelpers):manageChannelsButton(httpClient,hasNotificationPlugin)})};var _default=ActionEmptyPrompt;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _constants=__webpack_require__(30);var _constants2=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AddActionButton=function AddActionButton(_ref){var arrayHelpers=_ref.arrayHelpers,_ref$type=_ref.type,type=_ref$type===void 0?"slack":_ref$type,numOfActions=_ref.numOfActions;var buttonText=numOfActions===undefined||numOfActions===0?"Add action":"Add another action";var monitorType=_lodash.default.get(arrayHelpers,"form.values.monitor_type",_constants2.MONITOR_TYPE.QUERY_LEVEL);var initialActionValues=_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_ACTION_VALUES);switch(monitorType){case _constants2.MONITOR_TYPE.BUCKET_LEVEL:_lodash.default.set(initialActionValues,"message_template.source",_constants.DEFAULT_MESSAGE_SOURCE.BUCKET_LEVEL_MONITOR);break;case _constants2.MONITOR_TYPE.QUERY_LEVEL:case _constants2.MONITOR_TYPE.CLUSTER_METRICS:_lodash.default.set(initialActionValues,"message_template.source",_constants.DEFAULT_MESSAGE_SOURCE.QUERY_LEVEL_MONITOR);break}return _react.default.createElement(_eui.EuiButton,{fill:false,size:"s",onClick:function onClick(){return arrayHelpers.push(initialActionValues)}},buttonText)};var _default=AddActionButton;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(23);var _whereHelpers=__webpack_require__(84);var _validate=__webpack_require__(18);var _FormControls=__webpack_require__(17);var _dataTypes=__webpack_require__(62);var _DefineBucketLevelTrigger=__webpack_require__(63);var _constants2=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var WherePopover=function(_Component){_inherits(WherePopover,_Component);var _super=_createSuper(WherePopover);function WherePopover(props){var _this;_classCallCheck(this,WherePopover);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"handleFieldChange",(function(option,field,form){_this.props.onMadeChanges();form.setFieldValue(field.name,option);if(option.length===0){_this.resetValues();form.setFieldError(_this.props.fieldPath,undefined)}}));_defineProperty(_assertThisInitialized(_this),"handleOperatorChange",(function(e,field,form){_this.props.onMadeChanges();field.onChange(e);form.setFieldError(_this.props.fieldPath,undefined)}));_defineProperty(_assertThisInitialized(_this),"handleChangeWrapper",(function(e,field){_this.props.onMadeChanges();field.onChange(e)}));_defineProperty(_assertThisInitialized(_this),"renderBetweenAnd",(function(){var _this$props=_this.props,_this$props$fieldPath=_this$props.fieldPath,fieldPath=_this$props$fieldPath===void 0?"":_this$props$fieldPath,values=_this$props.values;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikFieldNumber,{name:"".concat(fieldPath,"fieldRangeStart"),fieldProps:{validate:function validate(value){return(0,_whereHelpers.validateRange)(value,values)}},formRow:true,rowProps:{isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Enter a value",onChange:_this.handleChangeWrapper}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{textAlign:"center"},"TO")),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikFieldNumber,{name:"".concat(fieldPath,"fieldRangeEnd"),fieldProps:{validate:function validate(value){return(0,_whereHelpers.validateRange)(value,values)}},formRow:true,rowProps:{isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Enter a value",onChange:_this.handleChangeWrapper}})))}));_defineProperty(_assertThisInitialized(_this),"renderValueField",(function(fieldType,fieldOperator){var _this$props$fieldPath2=_this.props.fieldPath,fieldPath=_this$props$fieldPath2===void 0?"":_this$props$fieldPath2;if(fieldType===_constants2.DATA_TYPES.NUMBER){return(0,_whereHelpers.isRangeOperator)(fieldOperator)?_this.renderBetweenAnd():_react.default.createElement(_FormControls.FormikFieldNumber,{name:"".concat(fieldPath,"fieldValue"),inputProps:{placeholder:"Enter a value",onChange:_this.handleChangeWrapper},formRow:true,rowProps:{isInvalid:_validate.isInvalid,error:_validate.hasError}})}else if(fieldType===_constants2.DATA_TYPES.BOOLEAN){return _react.default.createElement(_FormControls.FormikSelect,{name:"".concat(fieldPath,"fieldValue"),inputProps:{onChange:_this.handleChangeWrapper,options:_constants.WHERE_BOOLEAN_FILTERS,isInvalid:_validate.isInvalid}})}else{return _react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(fieldPath,"fieldValue"),inputProps:{placeholder:"Enter a value",onChange:_this.handleChangeWrapper,isInvalid:_validate.isInvalid}})}}));_defineProperty(_assertThisInitialized(_this),"resetValues",(function(){var _this$props2=_this.props,index=_this$props2.index,filtersArrayHelpers=_this$props2.filtersArrayHelpers;filtersArrayHelpers.remove(index)}));_defineProperty(_assertThisInitialized(_this),"openPopover",(function(){_this.props.openPopover();_this.setState({isOpen:true})}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){var _this$props3=_this.props,closePopover=_this$props3.closePopover,formik=_this$props3.formik,values=_this$props3.values;closePopover();_this.setState({isOpen:false});if((0,_whereHelpers.validateWhereFilter)(values))formik.validateForm();else _this.resetValues()}));_defineProperty(_assertThisInitialized(_this),"onCancel",(function(){_this.closePopover();_this.resetValues()}));_this.state={isOpen:props.openedState||false};return _this}_createClass(WherePopover,[{key:"render",value:function render(){var _this$props4=this.props,dataTypes=_this$props4.dataTypes,fieldPath=_this$props4.fieldPath,indexFieldFilters=_this$props4.indexFieldFilters,_this$props4$useTrigg=_this$props4.useTriggerFieldOperators,useTriggerFieldOperators=_this$props4$useTrigg===void 0?false:_this$props4$useTrigg,values=_this$props4.values,whereFilterHeader=_this$props4.whereFilterHeader;var isOpen=this.state.isOpen;var indexFields=indexFieldFilters!==undefined?(0,_dataTypes.getFilteredIndexFields)(dataTypes,_constants.WHERE_FILTER_ALLOWED_TYPES,indexFieldFilters):(0,_dataTypes.getIndexFields)(dataTypes,_constants.WHERE_FILTER_ALLOWED_TYPES);var fieldType=_lodash.default.get(values,"fieldName[0].type","number");var fieldOperator=_lodash.default.get(values,"operator","is");var fieldOperators=useTriggerFieldOperators?_DefineBucketLevelTrigger.TRIGGER_COMPARISON_OPERATORS:(0,_whereHelpers.getOperators)(fieldType);return _react.default.createElement(_eui.EuiPopover,{id:"".concat(whereFilterHeader,"-").concat(fieldPath,"-badge-popover"),button:_react.default.createElement("div",{style:{paddingBottom:"5px"}},_react.default.createElement(_eui.EuiBadge,{color:"hollow",iconSide:"right",iconType:"cross",iconOnClick:this.onCancel,iconOnClickAriaLabel:"Remove filter",onClick:this.openPopover,onClickAriaLabel:"Edit where filter"},(0,_whereHelpers.displayText)(values))),isOpen:isOpen,closePopover:this.closePopover,panelPaddingSize:"none",ownFocus:true,anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiPopoverTitle,null," ADD ",_lodash.default.upperCase(whereFilterHeader)," "),_react.default.createElement("div",{style:_constants.POPOVER_STYLE},_react.default.createElement(_eui.EuiFlexGroup,{style:_objectSpread({},_constants.EXPRESSION_STYLE)},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:200}},_react.default.createElement(_FormControls.FormikComboBox,{name:"".concat(fieldPath,"fieldName"),inputProps:{placeholder:"Select a field",options:indexFields,onChange:this.handleFieldChange,isClearable:false,singleSelection:{asPlainText:true}}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormControls.FormikSelect,{name:"".concat(fieldPath,"operator"),inputProps:{onChange:this.handleOperatorChange,options:fieldOperators}})),!(0,_whereHelpers.isNullOperator)(fieldOperator)&&_react.default.createElement(_eui.EuiFlexItem,null,this.renderValueField(fieldType,fieldOperator)))))}}]);return WherePopover}(_react.Component);exports.default=WherePopover;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _QueryPerformance=_interopRequireDefault(__webpack_require__(487));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_QueryPerformance.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _constants=__webpack_require__(15);var _constants2=__webpack_require__(0);var _ContentPanel=_interopRequireDefault(__webpack_require__(29));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var QueryPerformance=function QueryPerformance(_ref){var response=_ref.response,actions=_ref.actions;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_ContentPanel.default,{title:"Monitor performance",titleSize:"s",panelStyles:{paddingLeft:"10px",paddingRight:"10px"},description:_react.default.createElement("span",null,"Check the performance of your query and make sure to follow best practices."," ",_react.default.createElement(_eui.EuiLink,{external:true,href:_constants2.URL.DOCUMENTATION,target:"_blank"},"Learn more")),actions:actions},_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"xl"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Monitor duration"),_react.default.createElement("span",{style:{display:"block"}},"".concat(_lodash.default.get(response,"took",_constants.DEFAULT_EMPTY_DATA)," ms")))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Request duration"),_react.default.createElement("span",{style:{display:"block"}},_lodash.default.get(response,"invalid.path",_constants.DEFAULT_EMPTY_DATA)))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Hits"),_react.default.createElement("span",{style:{display:"block"}},_lodash.default.get(response,"hits.total.value",_constants.DEFAULT_EMPTY_DATA)))))))};var _default=QueryPerformance;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OPERATORS_QUERY_MAP=void 0;var _constants=__webpack_require__(23);var _constants2=__webpack_require__(15);var _OPERATORS_QUERY_MAP;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var OPERATORS_QUERY_MAP=(_OPERATORS_QUERY_MAP={},_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.IS.value,{query:function query(_ref){var _ref$fieldName=_slicedToArray(_ref.fieldName,1),_ref$fieldName$=_ref$fieldName[0],label=_ref$fieldName$.label,type=_ref$fieldName$.type,fieldValue=_ref.fieldValue;return type===_constants2.DATA_TYPES.TEXT?{match_phrase:_defineProperty({},label,fieldValue)}:{term:_defineProperty({},label,fieldValue)}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.IS_NOT.value,{query:function query(_ref2){var _ref2$fieldName=_slicedToArray(_ref2.fieldName,1),_ref2$fieldName$=_ref2$fieldName[0],label=_ref2$fieldName$.label,type=_ref2$fieldName$.type,fieldValue=_ref2.fieldValue;return type===_constants2.DATA_TYPES.TEXT?{bool:{must_not:{match_phrase:_defineProperty({},label,fieldValue)}}}:{bool:{must_not:{term:_defineProperty({},label,fieldValue)}}}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.IS_NULL.value,{query:function query(_ref3){var _ref3$fieldName=_slicedToArray(_ref3.fieldName,1),fieldKey=_ref3$fieldName[0].label;return{bool:{must_not:{exists:{field:fieldKey}}}}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.IS_NOT_NULL.value,{query:function query(_ref4){var _ref4$fieldName=_slicedToArray(_ref4.fieldName,1),fieldKey=_ref4$fieldName[0].label;return{exists:{field:fieldKey}}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.IS_GREATER.value,{query:function query(_ref5){var _ref5$fieldName=_slicedToArray(_ref5.fieldName,1),fieldKey=_ref5$fieldName[0].label,fieldValue=_ref5.fieldValue;return{range:_defineProperty({},fieldKey,{gt:fieldValue})}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.IS_GREATER_EQUAL.value,{query:function query(_ref6){var _ref6$fieldName=_slicedToArray(_ref6.fieldName,1),fieldKey=_ref6$fieldName[0].label,fieldValue=_ref6.fieldValue;return{range:_defineProperty({},fieldKey,{gte:fieldValue})}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.IS_LESS.value,{query:function query(_ref7){var _ref7$fieldName=_slicedToArray(_ref7.fieldName,1),fieldKey=_ref7$fieldName[0].label,fieldValue=_ref7.fieldValue;return{range:_defineProperty({},fieldKey,{lt:fieldValue})}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.IS_LESS_EQUAL.value,{query:function query(_ref8){var _ref8$fieldName=_slicedToArray(_ref8.fieldName,1),fieldKey=_ref8$fieldName[0].label,fieldValue=_ref8.fieldValue;return{range:_defineProperty({},fieldKey,{lte:fieldValue})}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.IN_RANGE.value,{query:function query(_ref9){var _ref9$fieldName=_slicedToArray(_ref9.fieldName,1),fieldKey=_ref9$fieldName[0].label,fieldRangeStart=_ref9.fieldRangeStart,fieldRangeEnd=_ref9.fieldRangeEnd;return{range:_defineProperty({},fieldKey,{gte:fieldRangeStart,lte:fieldRangeEnd})}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.NOT_IN_RANGE.value,{query:function query(_ref10){var _ref10$fieldName=_slicedToArray(_ref10.fieldName,1),fieldKey=_ref10$fieldName[0].label,fieldRangeStart=_ref10.fieldRangeStart,fieldRangeEnd=_ref10.fieldRangeEnd;return{bool:{must_not:{range:_defineProperty({},fieldKey,{gte:fieldRangeStart,lte:fieldRangeEnd})}}}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.STARTS_WITH.value,{query:function query(_ref11){var _ref11$fieldName=_slicedToArray(_ref11.fieldName,1),fieldKey=_ref11$fieldName[0].label,fieldValue=_ref11.fieldValue;return{prefix:_defineProperty({},fieldKey,fieldValue)}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.ENDS_WITH.value,{query:function query(_ref12){var _ref12$fieldName=_slicedToArray(_ref12.fieldName,1),fieldKey=_ref12$fieldName[0].label,fieldValue=_ref12.fieldValue;return{wildcard:_defineProperty({},fieldKey,"*".concat(fieldValue))}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.CONTAINS.value,{query:function query(_ref13){var _ref13$fieldName=_slicedToArray(_ref13.fieldName,1),_ref13$fieldName$=_ref13$fieldName[0],label=_ref13$fieldName$.label,type=_ref13$fieldName$.type,fieldValue=_ref13.fieldValue;return type===_constants2.DATA_TYPES.TEXT?{query_string:{query:"*".concat(fieldValue,"*"),default_field:label}}:{wildcard:_defineProperty({},label,"*".concat(fieldValue,"*"))}}}),_defineProperty(_OPERATORS_QUERY_MAP,_constants.OPERATORS_MAP.DOES_NOT_CONTAINS.value,{query:function query(_ref14){var _ref14$fieldName=_slicedToArray(_ref14.fieldName,1),_ref14$fieldName$=_ref14$fieldName[0],label=_ref14$fieldName$.label,type=_ref14$fieldName$.type,fieldValue=_ref14.fieldValue;return type===_constants2.DATA_TYPES.TEXT?{bool:{must_not:{query_string:{query:"*".concat(fieldValue,"*"),default_field:label}}}}:{bool:{must_not:{wildcard:_defineProperty({},label,"*".concat(fieldValue,"*"))}}}}}),_OPERATORS_QUERY_MAP);exports.OPERATORS_QUERY_MAP=OPERATORS_QUERY_MAP},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _DataSource=_interopRequireDefault(__webpack_require__(490));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_DataSource.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);var _MonitorIndex=_interopRequireDefault(__webpack_require__(491));var _MonitorTimeField=_interopRequireDefault(__webpack_require__(494));var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _constants=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var DataSource=function(_Component){_inherits(DataSource,_Component);var _super=_createSuper(DataSource);function DataSource(props){var _this;_classCallCheck(this,DataSource);_this=_super.call(this,props);_this.state={performanceResponse:null,response:null,formikSnapshot:_this.props.values};return _this}_createClass(DataSource,[{key:"render",value:function render(){var _this$props$values=this.props.values,monitor_type=_this$props$values.monitor_type,searchType=_this$props$values.searchType;var displayTimeField=searchType===_constants.SEARCH_TYPE.GRAPH&&monitor_type!==_constants.MONITOR_TYPE.DOC_LEVEL;return _react.default.createElement(_ContentPanel.default,{title:"Data source",titleSize:"s",panelStyles:{paddingLeft:"10px",paddingRight:"10px"},bodyStyles:{padding:"initial"}},_react.default.createElement(_MonitorIndex.default,{httpClient:this.props.httpClient,monitorType:monitor_type}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),displayTimeField&&_react.default.createElement(_MonitorTimeField.default,{dataTypes:this.props.dataTypes}))}}]);return DataSource}(_react.Component);var _default=DataSource;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _MonitorIndex=_interopRequireDefault(__webpack_require__(492));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_MonitorIndex.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _helpers=__webpack_require__(493);var _constants=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var CustomOption=function CustomOption(_ref){var option=_ref.option,searchValue=_ref.searchValue,contentClassName=_ref.contentClassName;var health=option.health,label=option.label,index=option.index;var isAlias=!!index;var healthToColor={green:"success",yellow:"warning",red:"danger",undefined:"subdued"};var color=healthToColor[health];return _react.default.createElement(_eui.EuiHealth,{color:color},_react.default.createElement("span",{className:contentClassName},_react.default.createElement(_eui.EuiHighlight,{search:searchValue},label),isAlias&&_react.default.createElement("span",null," (",index,")")))};var MonitorIndex=function(_React$Component){_inherits(MonitorIndex,_React$Component);var _super=_createSuper(MonitorIndex);function MonitorIndex(props){var _this;_classCallCheck(this,MonitorIndex);_this=_super.call(this,props);_this.lastQuery=null;_this.state={isLoading:false,appendedWildcard:false,showingIndexPatternQueryErrors:false,options:[],allIndices:[],partialMatchedIndices:[],exactMatchedIndices:[],allAliases:[],partialMatchedAliases:[],exactMatchedAliases:[]};_this.onCreateOption=_this.onCreateOption.bind(_assertThisInitialized(_this));_this.onSearchChange=_this.onSearchChange.bind(_assertThisInitialized(_this));_this.handleQueryIndices=_this.handleQueryIndices.bind(_assertThisInitialized(_this));_this.handleQueryAliases=_this.handleQueryAliases.bind(_assertThisInitialized(_this));_this.onFetch=_this.onFetch.bind(_assertThisInitialized(_this));return _this}_createClass(MonitorIndex,[{key:"componentDidMount",value:function componentDidMount(){this.onSearchChange("")}},{key:"onCreateOption",value:function onCreateOption(searchValue,selectedOptions,setFieldValue,supportMultipleIndices){var normalizedSearchValue=searchValue.trim().toLowerCase();if(!normalizedSearchValue)return;var newOption={label:searchValue};if(supportMultipleIndices)setFieldValue("index",selectedOptions.concat(newOption));else setFieldValue("index",[newOption])}},{key:"onSearchChange",value:function(){var _onSearchChange=_asyncToGenerator(regeneratorRuntime.mark((function _callee(searchValue){var appendedWildcard,query;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:appendedWildcard=this.state.appendedWildcard;query=searchValue;if(query.length===1&&(0,_helpers.canAppendWildcard)(query)){query+="*";this.setState({appendedWildcard:true})}else{if(query==="*"&&appendedWildcard){query="";this.setState({appendedWildcard:false})}}this.lastQuery=query;this.setState({query:query,showingIndexPatternQueryErrors:!!query.length});_context.next=7;return this.onFetch(query);case 7:case"end":return _context.stop()}}}),_callee,this)})));function onSearchChange(_x){return _onSearchChange.apply(this,arguments)}return onSearchChange}()},{key:"handleQueryIndices",value:function(){var _handleQueryIndices=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(rawIndex){var index,response,indices;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:index=rawIndex.trim();if(!(index==="*:")){_context2.next=3;break}return _context2.abrupt("return",[]);case 3:if(!(index==="")){_context2.next=5;break}return _context2.abrupt("return",[]);case 5:_context2.prev=5;_context2.next=8;return this.props.httpClient.post("../api/alerting/_indices",{body:JSON.stringify({index:index})});case 8:response=_context2.sent;if(!response.ok){_context2.next=12;break}indices=response.resp.map((function(_ref2){var health=_ref2.health,index=_ref2.index,status=_ref2.status;return{label:index,health:health,status:status}}));return _context2.abrupt("return",_lodash.default.sortBy(indices,"label"));case 12:return _context2.abrupt("return",[]);case 15:_context2.prev=15;_context2.t0=_context2["catch"](5);console.error(_context2.t0);return _context2.abrupt("return",[]);case 19:case"end":return _context2.stop()}}}),_callee2,this,[[5,15]])})));function handleQueryIndices(_x2){return _handleQueryIndices.apply(this,arguments)}return handleQueryIndices}()},{key:"handleQueryAliases",value:function(){var _handleQueryAliases=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(rawAlias){var alias,response,indices;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:alias=rawAlias.trim();if(!(alias==="*:")){_context3.next=3;break}return _context3.abrupt("return",[]);case 3:if(!(alias==="")){_context3.next=5;break}return _context3.abrupt("return",[]);case 5:_context3.prev=5;_context3.next=8;return this.props.httpClient.post("../api/alerting/_aliases",{body:JSON.stringify({alias:alias})});case 8:response=_context3.sent;if(!response.ok){_context3.next=12;break}indices=response.resp.map((function(_ref3){var alias=_ref3.alias,index=_ref3.index;return{label:alias,index:index}}));return _context3.abrupt("return",_lodash.default.sortBy(indices,"label"));case 12:return _context3.abrupt("return",[]);case 15:_context3.prev=15;_context3.t0=_context3["catch"](5);console.error(_context3.t0);return _context3.abrupt("return",[]);case 19:case"end":return _context3.stop()}}}),_callee3,this,[[5,15]])})));function handleQueryAliases(_x3){return _handleQueryAliases.apply(this,arguments)}return handleQueryAliases}()},{key:"onFetch",value:function(){var _onFetch=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(query){var _this2=this;var exactMatchedIndices,exactMatchedAliases,partialMatchedIndices,_exactMatchedIndices,partialMatchedAliases,_exactMatchedAliases;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.setState({isLoading:true,indexPatternExists:false});if(!query.endsWith("*")){_context4.next=11;break}_context4.next=4;return this.handleQueryIndices(query);case 4:exactMatchedIndices=_context4.sent;_context4.next=7;return this.handleQueryAliases(query);case 7:exactMatchedAliases=_context4.sent;(0,_helpers.createReasonableWait)((function(){if(query!==_this2.lastQuery){return}_this2.setState({exactMatchedIndices:exactMatchedIndices,exactMatchedAliases:exactMatchedAliases,isLoading:false})}));_context4.next=24;break;case 11:_context4.next=13;return this.handleQueryIndices("".concat(query,"*"));case 13:partialMatchedIndices=_context4.sent;_context4.next=16;return this.handleQueryIndices(query);case 16:_exactMatchedIndices=_context4.sent;_context4.next=19;return this.handleQueryAliases("".concat(query,"*"));case 19:partialMatchedAliases=_context4.sent;_context4.next=22;return this.handleQueryAliases(query);case 22:_exactMatchedAliases=_context4.sent;(0,_helpers.createReasonableWait)((function(){if(query!==_this2.lastQuery){return}_this2.setState({partialMatchedIndices:partialMatchedIndices,exactMatchedIndices:_exactMatchedIndices,partialMatchedAliases:partialMatchedAliases,exactMatchedAliases:_exactMatchedAliases,isLoading:false})}));case 24:case"end":return _context4.stop()}}}),_callee4,this)})));function onFetch(_x4){return _onFetch.apply(this,arguments)}return onFetch}()},{key:"renderOption",value:function renderOption(option,searchValue,contentClassName){return _react.default.createElement(CustomOption,{option:option,searchValue:searchValue,contentClassName:contentClassName})}},{key:"render",value:function render(){var _this3=this;var _this$state=this.state,isLoading=_this$state.isLoading,allIndices=_this$state.allIndices,partialMatchedIndices=_this$state.partialMatchedIndices,exactMatchedIndices=_this$state.exactMatchedIndices,allAliases=_this$state.allAliases,partialMatchedAliases=_this$state.partialMatchedAliases,exactMatchedAliases=_this$state.exactMatchedAliases;var _getMatchedOptions=(0,_helpers.getMatchedOptions)(allIndices,partialMatchedIndices,exactMatchedIndices,allAliases,partialMatchedAliases,exactMatchedAliases,false),visibleOptions=_getMatchedOptions.visibleOptions;var supportMultipleIndices=this.props.monitorType!==_constants.MONITOR_TYPE.DOC_LEVEL;return _react.default.createElement(_FormControls.FormikComboBox,{name:"index",formRow:true,fieldProps:{validate:_validate.validateIndex},rowProps:{label:"Index",helpText:"You can use a * as a wildcard or date math index resolution in your index pattern",isInvalid:_validate.isInvalid,error:_validate.hasError,style:{paddingLeft:"10px"}},inputProps:{placeholder:supportMultipleIndices?"Select indices":"Select an index",async:true,isLoading:isLoading,options:visibleOptions,onBlur:function onBlur(e,field,form){form.setFieldTouched("index",true)},onChange:function onChange(options,field,form){form.setFieldValue("index",options)},onCreateOption:function onCreateOption(value,field,form){_this3.onCreateOption(value,field.value,form.setFieldValue,supportMultipleIndices)},onSearchChange:this.onSearchChange,renderOption:this.renderOption,isClearable:true,singleSelection:supportMultipleIndices?false:{asPlainText:true},"data-test-subj":"indicesComboBox"}})}}]);return MonitorIndex}(_react.default.Component);var _default=MonitorIndex;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.canAppendWildcard=canAppendWildcard;exports.createReasonableWait=createReasonableWait;exports.filterSystemIndices=filterSystemIndices;exports.getMatchedOptions=getMatchedOptions;function canAppendWildcard(keyPressed){if(!keyPressed||!/[a-z0-9]/i.test(keyPressed)||keyPressed.length!==1){return false}return true}function createReasonableWait(cb){return setTimeout(cb,100)}var MAX_NUMBER_OF_MATCHING_INDICES=100;function filterSystemIndices(indices,isIncludingSystemIndices){if(!indices){return indices}var acceptableIndices=isIncludingSystemIndices?indices:indices.filter((function(index){return!index.label.startsWith(".")}));return acceptableIndices.slice(0,MAX_NUMBER_OF_MATCHING_INDICES)}function getMatchedOptions(unfilteredAllIndices,unfilteredPartialMatchedIndices,unfilteredExactMatchedIndices,unfilteredAllAliases,unfilteredPartialMatchedAliases,unfilteredExactMatchedAliases,isIncludingSystemIndices){var allIndices=filterSystemIndices(unfilteredAllIndices,isIncludingSystemIndices);var partialMatchedIndices=filterSystemIndices(unfilteredPartialMatchedIndices,isIncludingSystemIndices);var exactMatchedIndices=filterSystemIndices(unfilteredExactMatchedIndices,isIncludingSystemIndices);var allAliases=filterSystemIndices(unfilteredAllAliases,isIncludingSystemIndices);var partialMatchedAliases=filterSystemIndices(unfilteredPartialMatchedAliases,isIncludingSystemIndices);var exactMatchedAliases=filterSystemIndices(unfilteredExactMatchedAliases,isIncludingSystemIndices);var visibleOptions=[];if(exactMatchedAliases.length||exactMatchedIndices.length){visibleOptions=[{label:"Aliases",options:exactMatchedAliases},{label:"Indices",options:exactMatchedIndices}]}else if(partialMatchedAliases.length||partialMatchedIndices.length){visibleOptions=[{label:"Aliases",options:partialMatchedAliases},{label:"Indices",options:partialMatchedIndices}]}else{visibleOptions=[{label:"Aliases",options:allAliases},{label:"Indices",options:allIndices}]}return{visibleOptions:visibleOptions}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _MonitorTimeField=_interopRequireDefault(__webpack_require__(495));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_MonitorTimeField.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _FormikSelect=_interopRequireDefault(__webpack_require__(160));var _validate=__webpack_require__(18);var _validation=__webpack_require__(496);var _FormControls=__webpack_require__(17);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MonitorTimeField=function MonitorTimeField(_ref){var dataTypes=_ref.dataTypes;var dateFields=Array.from(dataTypes.date||[]);var options=[].concat(dateFields).map((function(option){return{label:option}}));return _react.default.createElement(_FormControls.FormikComboBox,{name:"timeField",formRow:true,fieldProps:{validate:(0,_validation.validateTimeField)(dateFields)},rowProps:{label:"Time field",helpText:"Choose the time field you want to use for your x-axis",isInvalid:_validate.isInvalid,error:_validate.hasError,style:{paddingLeft:"10px"}},inputProps:{placeholder:"Select a time field",options:options,onChange:function onChange(options,field,form){form.setFieldValue("timeField",options[0].label)},isClearable:false,singleSelection:{asPlainText:true}}})};var _default=MonitorTimeField;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateTimeField=void 0;var validateTimeField=function validateTimeField(dateFields){return function(value){if(!value)return"Select a time field.";if(!dateFields.filter((function(opt){return opt===value})).length)return'The field "'.concat(value,'" does not exist in the selected index mappings, please choose a new time field.')}};exports.validateTimeField=validateTimeField},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _ClusterMetricsMonitor=_interopRequireDefault(__webpack_require__(498));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_ClusterMetricsMonitor.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _validate=__webpack_require__(18);var _FormControls=__webpack_require__(17);var _clusterMetricsMonitorConstants=__webpack_require__(52);var _clusterMetricsMonitorHelpers=__webpack_require__(53);var _constants=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var setApiType=function setApiType(form,apiType){var pathParams=_lodash.default.get(form,"uri.path_params",_constants.FORMIK_INITIAL_VALUES.uri.path_params);form.setFieldValue("uri.api_type",apiType);form.setFieldValue("uri.path",(0,_clusterMetricsMonitorHelpers.getApiPath)(_lodash.default.isEmpty(pathParams),apiType))};var renderModal=function renderModal(closeModal,prevApiType,selectedApiType,form){var onClear=function onClear(){setApiType(form,selectedApiType);form.setFieldValue("triggerDefinitions",[]);closeModal()};var onKeep=function onKeep(){setApiType(form,selectedApiType);closeModal()};var onClose=function onClose(){setApiType(form,prevApiType);closeModal()};return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:onClose,"data-test-subj":"clusterMetricsClearTriggersModal"},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,"Clear all trigger conditions?")),_react.default.createElement(_eui.EuiModalBody,null,"You are about to change the request type. The existing trigger conditions may not be supported. Would you like to clear the existing trigger conditions?"),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{fullWidth:false,onClick:onKeep,"data-test-subj":"clusterMetricsClearTriggersModalKeepButton"},"Keep")),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{color:"danger",fill:true,fullWidth:false,onClick:onClear,"data-test-subj":"clusterMetricsClearTriggersModalClearButton"},"Clear"))))))};var ClusterMetricsMonitor=function ClusterMetricsMonitor(_ref){var isDarkMode=_ref.isDarkMode,_ref$loadingResponse=_ref.loadingResponse,loadingResponse=_ref$loadingResponse===void 0?false:_ref$loadingResponse,_ref$loadingSupported=_ref.loadingSupportedApiList,loadingSupportedApiList=_ref$loadingSupported===void 0?false:_ref$loadingSupported,onRunQuery=_ref.onRunQuery,resetResponse=_ref.resetResponse,response=_ref.response,_ref$supportedApiList=_ref.supportedApiList,supportedApiList=_ref$supportedApiList===void 0?[]:_ref$supportedApiList,values=_ref.values;var apiType=_lodash.default.get(values,"uri.api_type");var path=_lodash.default.get(values,"uri.path");var pathIsEmpty=_lodash.default.isEmpty(path);var pathParams=_lodash.default.get(values,"uri.path_params",_constants.FORMIK_INITIAL_VALUES.uri.path_params);var supportsPathParams=!_lodash.default.isEmpty(_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".paths.withPathParams")));var requirePathParams=_lodash.default.isEmpty(_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".paths.withoutPathParams")));var hidePathParams=pathIsEmpty||loadingSupportedApiList||!supportsPathParams;var disableRunButton=pathIsEmpty||_lodash.default.isEmpty(pathParams)&&requirePathParams;var hasTriggers=_lodash.default.get(values,"triggerDefinitions",[]).length>0;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),displayingModal=_useState2[0],setDisplayingModal=_useState2[1];var _useState3=(0,_react.useState)(undefined),_useState4=_slicedToArray(_useState3,2),clearTriggersModal=_useState4[0],setClearTriggersModal=_useState4[1];var closeModal=function closeModal(){setDisplayingModal(false);setClearTriggersModal(undefined)};var openModal=function openModal(prevApiType,selectedApiType,form){setDisplayingModal(true);setClearTriggersModal(renderModal(closeModal,prevApiType,selectedApiType,form))};return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_FormControls.FormikComboBox,{name:"uri.api_type",formRow:true,rowProps:{label:_react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Request type")),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},"Specify a request type to monitor cluster metrics such as health, JVM, and CPU usage."," ",_react.default.createElement(_eui.EuiLink,{external:true,href:_clusterMetricsMonitorConstants.REST_API_REFERENCE,target:"_blank"},"Learn more"))),isInvalid:_validate.isInvalidApiPath,error:_clusterMetricsMonitorConstants.API_PATH_REQUIRED_PLACEHOLDER_TEXT},inputProps:{placeholder:loadingSupportedApiList?"Loading API options":"Select an API",options:supportedApiList,onBlur:function onBlur(e,field,form){form.setFieldTouched("uri.api_type")},onChange:function onChange(options,field,form){var selectedApiType=_lodash.default.get(options,"0.value");var changingApiType=true;if(selectedApiType!==apiType){var doesNotUsePathParams=_lodash.default.isEmpty(_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(selectedApiType,".paths.withPathParams")));if(doesNotUsePathParams)form.setFieldValue("uri.path_params",_constants.FORMIK_INITIAL_VALUES.uri.path_params);if(hasTriggers&&!_lodash.default.isEmpty(apiType)){changingApiType=false;openModal(apiType,selectedApiType,form)}resetResponse();form.setFieldTouched("uri.path_params",false)}if(changingApiType)setApiType(form,selectedApiType)},isClearable:false,singleSelection:{asPlainText:true},selectedOptions:!_lodash.default.isEmpty(apiType)?[{value:_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".type")),label:_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".label"))}]:undefined,isDisabled:loadingSupportedApiList,isLoading:loadingSupportedApiList,"data-test-subj":"clusterMetricsApiTypeComboBox"}}),displayingModal&&clearTriggersModal,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),!hidePathParams?_react.default.createElement("div",null,_react.default.createElement(_FormControls.FormikFieldText,{name:"uri.path_params",formRow:true,fieldProps:{validate:function validate(value,field){return(0,_clusterMetricsMonitorHelpers.validateApiPathParameter)(field,hidePathParams,pathParams,requirePathParams)}},rowProps:{label:_react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Query parameters"),!requirePathParams&&_react.default.createElement("i",null," - optional ")),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},"Filter responses by providing path parameters for the"," ",_lodash.default.lowerCase(_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".label")))||"selected"," API."," ",!pathIsEmpty&&!_lodash.default.isEmpty(_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".documentation")))&&_react.default.createElement(_eui.EuiLink,{external:true,href:_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".documentation")),target:"_blank"},"Learn more"))),style:{maxWidth:"600px"},isInvalid:function isInvalid(value,field){return(0,_clusterMetricsMonitorHelpers.isInvalidApiPathParameter)(field,hidePathParams,pathParams,requirePathParams)},error:function error(value,field){return(0,_clusterMetricsMonitorHelpers.validateApiPathParameter)(field,hidePathParams,pathParams,requirePathParams)}},inputProps:{placeholder:pathIsEmpty?_clusterMetricsMonitorConstants.EMPTY_PATH_PARAMS_TEXT:(0,_clusterMetricsMonitorHelpers.getExamplePathParams)(apiType),fullWidth:true,prepend:_react.default.createElement(_eui.EuiText,{size:"s",style:{backgroundColor:"transparent",paddingRight:!hidePathParams&&"0px"}},"GET ",_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".prependText"))),append:!_lodash.default.isEmpty(_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".appendText")))&&_react.default.createElement(_eui.EuiText,{size:"s",style:{backgroundColor:"transparent",paddingLeft:!hidePathParams&&"0px"}},_lodash.default.get(_clusterMetricsMonitorConstants.API_TYPES,"".concat(apiType,".appendText"))),"data-test-subj":"clusterMetricsParamsFieldText"}}),_react.default.createElement(_eui.EuiSpacer,{size:"l"})):null,_react.default.createElement(_eui.EuiButton,{disabled:disableRunButton,fill:false,isLoading:loadingResponse,onClick:onRunQuery,size:"s","data-test-subj":"clusterMetricsPreviewButton"},"Preview query"),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_eui.EuiFormRow,{label:"Response",fullWidth:true},_react.default.createElement(_eui.EuiCodeEditor,{mode:"json",theme:isDarkMode?"sense-dark":"github",height:"500px",width:"100%",value:pathIsEmpty||loadingResponse?undefined:response,readOnly:true,"data-test-subj":"clusterMetricsRunResponseBox"})))};var _default=ClusterMetricsMonitor;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.MAX_QUERIES=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _helpers=__webpack_require__(22);var _DocumentLevelQuery=_interopRequireDefault(__webpack_require__(500));var _constants=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MAX_QUERIES=10;exports.MAX_QUERIES=MAX_QUERIES;var ConfigureDocumentLevelQueries=function(_Component){_inherits(ConfigureDocumentLevelQueries,_Component);var _super=_createSuper(ConfigureDocumentLevelQueries);function ConfigureDocumentLevelQueries(props){var _this;_classCallCheck(this,ConfigureDocumentLevelQueries);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"renderQueries",(function(arrayHelpers){var _this$props=_this.props,dataTypes=_this$props.dataTypes,values=_this$props.formik.values;if(_lodash.default.isEmpty(values.queries))arrayHelpers.push(_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES));var numOfQueries=values.queries.length;return _react.default.createElement("div",null,values.queries.map((function(query,index){return _react.default.createElement(_DocumentLevelQuery.default,{key:"query".concat(index),dataTypes:dataTypes,formFieldName:"queries.".concat(index),queryIndex:index,queriesArrayHelpers:arrayHelpers,query:query})})),_react.default.createElement("div",{style:{paddingLeft:"10px"}},_react.default.createElement(_eui.EuiButton,{fill:false,size:"s",onClick:function onClick(){return arrayHelpers.push(_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_DOCUMENT_LEVEL_QUERY_VALUES))},disabled:numOfQueries>=MAX_QUERIES,"data-test-subj":"addDocLevelQueryButton"},numOfQueries===0?"Add query":"Add another query"),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),(0,_helpers.inputLimitText)(numOfQueries,MAX_QUERIES,"query","queries")))}));_this.state={};return _this}_createClass(ConfigureDocumentLevelQueries,[{key:"render",value:function render(){var _this2=this;return _react.default.createElement(_formik.FieldArray,{name:"queries",validateOnChange:false},(function(arrayHelpers){return _this2.renderQueries(arrayHelpers)}))}}]);return ConfigureDocumentLevelQueries}(_react.Component);var _default=(0,_formik.connect)(ConfigureDocumentLevelQueries);exports.default=_default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.ILLEGAL_QUERY_NAME_CHARACTERS=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _ConfigureDocumentLevelQueryTags=_interopRequireDefault(__webpack_require__(501));var _dataTypes=__webpack_require__(62);var _constants=__webpack_require__(15);var _whereHelpers=__webpack_require__(84);var _helpers=__webpack_require__(91);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var ALLOWED_DATA_TYPES=["number","text","keyword","boolean"];var ILLEGAL_QUERY_NAME_CHARACTERS=[" "];exports.ILLEGAL_QUERY_NAME_CHARACTERS=ILLEGAL_QUERY_NAME_CHARACTERS;var DocumentLevelQuery=function(_Component){_inherits(DocumentLevelQuery,_Component);var _super=_createSuper(DocumentLevelQuery);function DocumentLevelQuery(props){var _this;_classCallCheck(this,DocumentLevelQuery);_this=_super.call(this,props);_this.state={fieldDataType:_constants.DATA_TYPES.TEXT,indexFieldOptions:[],supportedOperators:(0,_helpers.getDocLevelQueryOperators)()};return _this}_createClass(DocumentLevelQuery,[{key:"componentDidMount",value:function componentDidMount(){this.initializeFieldDataType()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.dataTypes!==this.props.dataTypes)this.initializeFieldDataType()}},{key:"initializeFieldDataType",value:function initializeFieldDataType(){var _this$props=this.props,dataTypes=_this$props.dataTypes,query=_this$props.query;var indexFieldOptions=(0,_dataTypes.getIndexFields)(dataTypes,ALLOWED_DATA_TYPES);var fieldDataType=(0,_dataTypes.getTypeForField)(query.field,indexFieldOptions);this.setState({fieldDataType:fieldDataType,indexFieldOptions:indexFieldOptions})}},{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,_this$props2$formFiel=_this$props2.formFieldName,formFieldName=_this$props2$formFiel===void 0?"":_this$props2$formFiel,query=_this$props2.query,queryIndex=_this$props2.queryIndex,queriesArrayHelpers=_this$props2.queriesArrayHelpers;var _this$state=this.state,fieldDataType=_this$state.fieldDataType,indexFieldOptions=_this$state.indexFieldOptions,supportedOperators=_this$state.supportedOperators;return _react.default.createElement("div",{style:{padding:"0px 10px"}},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(formFieldName,".queryName"),formRow:true,fieldProps:{validate:(0,_validate.validateIllegalCharacters)(ILLEGAL_QUERY_NAME_CHARACTERS)},rowProps:{label:"Query name",style:{width:"300px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Enter a name for the query",isInvalid:_validate.isInvalid,"data-test-subj":"documentLevelQuery_queryName".concat(queryIndex)}})),queryIndex>0&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{color:"danger",onClick:function onClick(){return queriesArrayHelpers.remove(queryIndex)},"data-test-subj":"documentLevelQuery_removeQueryButton".concat(queryIndex)},"Remove query"))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexStart",direction:"row",gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormControls.FormikComboBox,{name:"".concat(formFieldName,".field"),formRow:true,fieldProps:{validate:_validate.required},rowProps:{label:"Field",style:{width:"300px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Enter the field to query",options:indexFieldOptions,onChange:function onChange(e,field,form){_this2.setState({fieldDataType:e[0].type});form.setFieldValue(field.name,e[0].label)},onBlur:function onBlur(e,field,form){return form.setFieldTouched(field.name,true)},singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"documentLevelQuery_field".concat(queryIndex)}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormControls.FormikSelect,{name:"".concat(formFieldName,".operator"),formRow:true,rowProps:{hasEmptyLabelSpace:true,style:{width:"200px"}},inputProps:{onChange:function onChange(e,field){return field.onChange(e)},options:(0,_whereHelpers.getOperators)(fieldDataType,supportedOperators),"data-test-subj":"documentLevelQuery_operator".concat(queryIndex)}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},fieldDataType===_constants.DATA_TYPES.NUMBER?_react.default.createElement(_FormControls.FormikFieldNumber,{name:"".concat(formFieldName,".query"),formRow:true,fieldProps:{validate:_validate.requiredNumber},rowProps:{hasEmptyLabelSpace:true,style:{width:"300px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Enter the search value",fullWidth:true,isInvalid:_validate.isInvalid,"data-test-subj":"documentLevelQuery_query".concat(queryIndex)}}):_react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(formFieldName,".query"),formRow:true,fieldProps:{validate:_validate.required},rowProps:{hasEmptyLabelSpace:true,style:{width:"300px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Enter the search term",fullWidth:true,isInvalid:_validate.isInvalid,"data-test-subj":"documentLevelQuery_query".concat(queryIndex)}}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_ConfigureDocumentLevelQueryTags.default,{formFieldName:formFieldName,query:query,queryIndex:queryIndex}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"l"}))}}]);return DocumentLevelQuery}(_react.Component);var _default=(0,_formik.connect)(DocumentLevelQuery);exports.default=_default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.MAX_TAGS=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _helpers=__webpack_require__(22);var _DocumentLevelQueryTag=_interopRequireWildcard(__webpack_require__(502));var _IconToolTip=_interopRequireDefault(__webpack_require__(61));var _lodash=_interopRequireDefault(__webpack_require__(7));var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var MAX_TAGS=10;exports.MAX_TAGS=MAX_TAGS;var ConfigureDocumentLevelQueryTags=function(_Component){_inherits(ConfigureDocumentLevelQueryTags,_Component);var _super=_createSuper(ConfigureDocumentLevelQueryTags);function ConfigureDocumentLevelQueryTags(props){var _this;_classCallCheck(this,ConfigureDocumentLevelQueryTags);_this=_super.call(this,props);_this.state={};return _this}_createClass(ConfigureDocumentLevelQueryTags,[{key:"renderTags",value:function renderTags(arrayHelpers){var _this$props=this.props,_this$props$formik=_this$props.formik,errors=_this$props$formik.errors,values=_this$props$formik.values,_this$props$formField=_this$props.formFieldName,formFieldName=_this$props$formField===void 0?"":_this$props$formField,query=_this$props.query,queryIndex=_this$props.queryIndex;var numOfTags=query.tags.length;var tagsErrors=_lodash.default.get(errors,"".concat(formFieldName,".tags"),[]);var containsErrors=!_lodash.default.isEmpty(tagsErrors);return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,{size:"xs",color:containsErrors?"danger":undefined},_react.default.createElement("strong",null,"Tags"),_react.default.createElement("i",null," - optional "),_react.default.createElement(_IconToolTip.default,{content:_DocumentLevelQueryTag.DOC_LEVEL_TAG_TOOLTIP,iconType:"questionInCircle"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_lodash.default.isEmpty(query.tags)&&_react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,{size:"xs"},"No tags defined.")),_react.default.createElement(_FormControls.FormikFormRow,{form:this.props.formik,name:"".concat(formFieldName,".tags"),rowProps:{error:_validate.hasError,isInvalid:_validate.isInvalid}},_react.default.createElement("div",null,values.queries[queryIndex].tags.map((function(tag,index){return _react.default.createElement("span",{style:{paddingRight:"5px"},key:"".concat(formFieldName,".tags.").concat(index)},_react.default.createElement(_DocumentLevelQueryTag.default,{tag:tag,tagIndex:index,queryIndex:queryIndex,arrayHelpers:arrayHelpers,formFieldName:"".concat(formFieldName,".tags.").concat(index)}))})))),_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){return arrayHelpers.push("")},disabled:numOfTags>=MAX_TAGS,style:{paddingTop:"5px"},"data-test-subj":"addDocLevelQueryTagButton_query".concat(queryIndex)},"+ Add tag"),(0,_helpers.inputLimitText)(numOfTags,MAX_TAGS,"tag","tags"))}},{key:"render",value:function render(){var _this2=this;var formFieldName=this.props.formFieldName;return _react.default.createElement(_formik.FieldArray,{name:"".concat(formFieldName,".tags"),validateOnChange:true},(function(arrayHelpers){return _this2.renderTags(arrayHelpers)}))}}]);return ConfigureDocumentLevelQueryTags}(_react.Component);var _default=(0,_formik.connect)(ConfigureDocumentLevelQueryTags);exports.default=_default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.TAG_PLACEHOLDER_TEXT=exports.ILLEGAL_TAG_CHARACTERS=exports.DOC_LEVEL_TAG_TOOLTIP=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _constants=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var DOC_LEVEL_TAG_TOOLTIP="Tags to associate with your queries.";exports.DOC_LEVEL_TAG_TOOLTIP=DOC_LEVEL_TAG_TOOLTIP;var TAG_PLACEHOLDER_TEXT="Enter the search term";exports.TAG_PLACEHOLDER_TEXT=TAG_PLACEHOLDER_TEXT;var ILLEGAL_TAG_CHARACTERS=[" "];exports.ILLEGAL_TAG_CHARACTERS=ILLEGAL_TAG_CHARACTERS;var DocumentLevelQueryTag=function(_Component){_inherits(DocumentLevelQueryTag,_Component);var _super=_createSuper(DocumentLevelQueryTag);function DocumentLevelQueryTag(props){var _this;_classCallCheck(this,DocumentLevelQueryTag);_this=_super.call(this,props);var tag=props.tag;_this.state={isPopoverOpen:_lodash.default.isEmpty(tag)};_this.closePopover=_this.closePopover.bind(_assertThisInitialized(_this));_this.openPopover=_this.openPopover.bind(_assertThisInitialized(_this));return _this}_createClass(DocumentLevelQueryTag,[{key:"closePopover",value:function closePopover(){var _this$props=this.props,arrayHelpers=_this$props.arrayHelpers,tag=_this$props.tag,tagIndex=_this$props.tagIndex;if(_lodash.default.isEmpty(tag))arrayHelpers.remove(tagIndex);this.setState({isPopoverOpen:false})}},{key:"openPopover",value:function openPopover(){this.setState({isPopoverOpen:true})}},{key:"renderPopover",value:function renderPopover(){var _this$props2=this.props,formFieldName=_this$props2.formFieldName,queryIndex=_this$props2.queryIndex,tagIndex=_this$props2.tagIndex;return _react.default.createElement("div",{style:_objectSpread(_objectSpread({width:250,height:160},_constants.POPOVER_STYLE),_constants.EXPRESSION_STYLE)},_react.default.createElement(_FormControls.FormikFieldText,{name:formFieldName,formRow:true,fieldProps:{validate:(0,_validate.validateIllegalCharacters)(ILLEGAL_TAG_CHARACTERS)},rowProps:{style:{maxWidth:"100%"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:TAG_PLACEHOLDER_TEXT,fullWidth:true,isInvalid:_validate.isInvalid,"data-test-subj":"documentLevelQueryTag_text_field_query".concat(queryIndex,"_tag").concat(tagIndex)}}),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:this.closePopover},"Cancel")),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButton,{fill:true,onClick:this.closePopover},"Save"))))}},{key:"render",value:function render(){var _this$props3=this.props,errors=_this$props3.formik.errors,arrayHelpers=_this$props3.arrayHelpers,formFieldName=_this$props3.formFieldName,queryIndex=_this$props3.queryIndex,_this$props3$tag=_this$props3.tag,tag=_this$props3$tag===void 0?"":_this$props3$tag,_this$props3$tagIndex=_this$props3.tagIndex,tagIndex=_this$props3$tagIndex===void 0?0:_this$props3$tagIndex;var isPopoverOpen=this.state.isPopoverOpen;var errorText;if(!_lodash.default.isEmpty(tag))errorText=(0,_validate.validateIllegalCharacters)(ILLEGAL_TAG_CHARACTERS)(tag);if(_lodash.default.isEmpty(errorText))delete errors[formFieldName];else _lodash.default.set(errors,formFieldName,(0,_validate.validateIllegalCharacters)(ILLEGAL_TAG_CHARACTERS)(tag));return _react.default.createElement(_eui.EuiPopover,{id:"tag-badge-popover",button:_react.default.createElement("div",null,_react.default.createElement(_eui.EuiBadge,{color:"hollow",iconSide:"right",iconType:"cross",iconOnClick:function iconOnClick(){return arrayHelpers.remove(tagIndex)},iconOnClickAriaLabel:"Remove tag",onClick:this.openPopover,onClickAriaLabel:"Edit tag","data-test-subj":"documentLevelQueryTag_badge_query".concat(queryIndex,"_tag").concat(tagIndex)},_lodash.default.isEmpty(tag)?TAG_PLACEHOLDER_TEXT:tag)),isOpen:isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",ownFocus:true,withTitle:true,anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiPopoverTitle,null," ADD TAG "),this.renderPopover())}}]);return DocumentLevelQueryTag}(_react.Component);var _default=(0,_formik.connect)(DocumentLevelQueryTag);exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initializeFromQueryParams=void 0;var _constants=__webpack_require__(15);var initializeFromQueryParams=function initializeFromQueryParams(queryParams){return{searchType:queryParams.searchType||undefined,name:queryParams.name?"".concat(queryParams.name,"-Monitor"):undefined,detectorId:queryParams.adId||undefined,period:queryParams.interval&&queryParams.unit?{interval:parseInt(queryParams.interval),unit:queryParams.unit}:undefined,adResultIndex:queryParams.adResultIndex||undefined}};exports.initializeFromQueryParams=initializeFromQueryParams},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _MonitorDetails=_interopRequireDefault(__webpack_require__(505));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_MonitorDetails.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _FormikFieldText=_interopRequireDefault(__webpack_require__(158));var _validate=__webpack_require__(18);var _Schedule=_interopRequireDefault(__webpack_require__(506));var _MonitorDefinitionCard=_interopRequireDefault(__webpack_require__(515));var _MonitorType=_interopRequireDefault(__webpack_require__(517));var _AnomalyDetectors=_interopRequireDefault(__webpack_require__(520));var _constants=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var renderAnomalyDetector=function renderAnomalyDetector(httpClient,values,detectorId){return{actions:[],content:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_AnomalyDetectors.default,{httpClient:httpClient,values:values,renderEmptyMessage:renderEmptyMessage,detectorId:detectorId}))}};function renderEmptyMessage(message){return _react.default.createElement("div",{style:{padding:"20px",border:"1px solid #D9D9D9",borderRadius:"5px"}},_react.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"450px"}},_react.default.createElement("div",null,message)))}var MonitorDetails=function MonitorDetails(_ref){var values=_ref.values,errors=_ref.errors,httpClient=_ref.httpClient,monitorToEdit=_ref.monitorToEdit,isAd=_ref.isAd,plugins=_ref.plugins,detectorId=_ref.detectorId;var anomalyDetectorContent=isAd&&renderAnomalyDetector(httpClient,values,detectorId);var displayMonitorDefinitionCards=values.monitor_type!==_constants.MONITOR_TYPE.CLUSTER_METRICS;return _react.default.createElement(_ContentPanel.default,{title:"Monitor details",titleSize:"s",panelStyles:{paddingBottom:"20px",paddingLeft:"10px",paddingRight:"10px",paddingTop:"20px"},actions:anomalyDetectorContent.actions},_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_FormikFieldText.default,{name:"name",formRow:true,fieldProps:{validate:(0,_validate.validateMonitorName)(httpClient,monitorToEdit)},rowProps:{label:"Monitor name",isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{isInvalid:_validate.isInvalid,onChange:function onChange(e,field,form){field.onChange(e);form.setFieldError("name",(0,_validate.required)(e.target.value))}}}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_MonitorType.default,{values:values}),displayMonitorDefinitionCards?_react.default.createElement("div",null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_MonitorDefinitionCard.default,{values:values,plugins:plugins})):null,isAd?_react.default.createElement("div",null,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),anomalyDetectorContent.content):null,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_Schedule.default,{isAd:isAd}))};var _default=MonitorDetails;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Schedule=_interopRequireDefault(__webpack_require__(507));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_Schedule.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);var _Frequencies=__webpack_require__(508);var _Interval=_interopRequireDefault(__webpack_require__(200));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var Schedule=function Schedule(_ref){var isAd=_ref.isAd;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{style:{marginBottom:"0px"}},_react.default.createElement("h4",null,"Schedule")),isAd?_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs",style:{maxWidth:"400px"}},_react.default.createElement("p",null,"Define how often the monitor collects data and how often you may receive alerts. We recommend setting this frequency to two times the detector interval to avoid missing anomalous results from delayed processing time.")):null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement("div",{style:{maxWidth:"400px"}},isAd?_react.default.createElement(_Interval.default,null):_react.default.createElement("div",null,_react.default.createElement(_Frequencies.Frequency,null),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_Frequencies.FrequencyPicker,null))))};var _default=Schedule;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Frequency",{enumerable:true,get:function get(){return _Frequency.default}});Object.defineProperty(exports,"FrequencyPicker",{enumerable:true,get:function get(){return _FrequencyPicker.default}});var _Frequency=_interopRequireDefault(__webpack_require__(509));var _FrequencyPicker=_interopRequireDefault(__webpack_require__(510));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var frequencies=[{value:"interval",text:"By interval"},{value:"daily",text:"Daily"},{value:"weekly",text:"Weekly"},{value:"monthly",text:"Monthly"},{value:"cronExpression",text:"Custom cron expression"}];var Frequency=function Frequency(){return _react.default.createElement(_FormControls.FormikSelect,{name:"frequency",formRow:true,rowProps:{label:"Frequency",isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{options:frequencies,isInvalid:_validate.isInvalid,"data-test-subj":"frequency_field"}})};var _default=Frequency;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _formik=__webpack_require__(20);var _CustomCron=_interopRequireDefault(__webpack_require__(511));var _Daily=_interopRequireDefault(__webpack_require__(131));var _Interval=_interopRequireDefault(__webpack_require__(200));var _Monthly=_interopRequireDefault(__webpack_require__(512));var _Weekly=_interopRequireDefault(__webpack_require__(514));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var components={daily:_Daily.default,weekly:_Weekly.default,monthly:_Monthly.default,cronExpression:_CustomCron.default,interval:_Interval.default};var FrequencyPicker=function FrequencyPicker(props){var type=props.formik.values.frequency;var Component=components[type];return _react.default.createElement(Component,null)};var _default=(0,_formik.connect)(FrequencyPicker);exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikTextArea=_interopRequireDefault(__webpack_require__(159));var _TimezoneComboBox=_interopRequireDefault(__webpack_require__(199));var _validate=__webpack_require__(18);var _constants=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var cronHelpLink=_react.default.createElement(_eui.EuiLink,{target:"_blank",href:_constants.URL.DOCUMENTATION,external:true},"cron expressions");var cronHelpText=_react.default.createElement(_eui.EuiText,{size:"s"},"Use ",cronHelpLink," for complex schedules");var CustomCron=function CustomCron(){return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column",style:{marginTop:"5px"}},_react.default.createElement(_eui.EuiFlexItem,{style:{marginTop:"0px"}},_react.default.createElement(_FormikTextArea.default,{name:"cronExpression",formRow:true,rowProps:{label:"Run every",helpText:cronHelpText,isInvalid:_validate.isInvalid,error:_validate.hasError,style:{marginTop:"0px"}},inputProps:{"data-test-subj":"customCron_cronExpression_field"}})),_react.default.createElement(_eui.EuiFlexItem,{style:{marginTop:"0px"}},_react.default.createElement(_TimezoneComboBox.default,null)))};var _default=CustomCron;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);var _Daily=_interopRequireDefault(__webpack_require__(131));var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _constants=__webpack_require__(513);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var Monthly=function Monthly(){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexStart"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikSelect,{name:"monthly.type",formRow:true,rowProps:{label:"On the",isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{options:_constants.monthlyTypes,onChange:function onChange(e,field,form){form.setFieldValue("monthly.type",e.target.value)}}})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_FormControls.FormikFieldNumber,{name:"monthly.day",formRow:true,fieldProps:{validate:_validate.validateMonthlyDay},rowProps:{hasEmptyLabelSpace:true,isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{min:1,max:31}}))),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_Daily.default,null))};var _default=Monthly;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.monthlyTypes=void 0;var monthlyTypes=[{value:"day",text:"Day"}];exports.monthlyTypes=monthlyTypes},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _Daily=_interopRequireDefault(__webpack_require__(131));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var days=["mon","tue","wed","thu","fri","sat","sun"];var checkboxFlexItem=function checkboxFlexItem(day,checked,setFieldValue,setFieldTouched){return _react.default.createElement(_eui.EuiFlexItem,{key:day,grow:false,style:{marginRight:"0px"}},_react.default.createElement(_eui.EuiCheckbox,{id:day,label:_lodash.default.startCase(day),checked:checked,onChange:function onChange(e){setFieldValue("weekly.".concat(day),e.target.checked)},onBlur:function onBlur(){return setFieldTouched("weekly")},compressed:true}))};var validate=function validate(value){var booleans=Object.values(value);if(!booleans.some((function(bool){return bool})))return"Must select at least one weekday"};var Weekly=function Weekly(){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_formik.Field,{name:"weekly",validate:validate},(function(_ref){var value=_ref.field.value,_ref$form=_ref.form,touched=_ref$form.touched,errors=_ref$form.errors,setFieldValue=_ref$form.setFieldValue,setFieldTouched=_ref$form.setFieldTouched;return _react.default.createElement(_eui.EuiFormRow,{label:"Run every",isInvalid:touched.weekly&&!!errors.weekly,error:errors.weekly,style:{marginTop:"5px"}},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},days.map((function(day){return checkboxFlexItem(day,value[day],setFieldValue,setFieldTouched)}))))})),_react.default.createElement(_Daily.default,null))};var _default=Weekly;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _MonitorDefinitionCard=_interopRequireDefault(__webpack_require__(516));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_MonitorDefinitionCard.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikCheckableCard=_interopRequireDefault(__webpack_require__(201));var _constants=__webpack_require__(15);var _constants2=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MONITOR_DEFINITION_CARD_WIDTH="275";var onChangeDefinition=function onChangeDefinition(e,form){var type=e.target.value;form.setFieldValue("searchType",type,false)};var MonitorDefinitionCard=function MonitorDefinitionCard(_ref){var values=_ref.values,plugins=_ref.plugins;var hasADPlugin=plugins.indexOf(_constants.OS_AD_PLUGIN)!==-1;var supportsADOption;switch(values.monitor_type){case _constants.MONITOR_TYPE.QUERY_LEVEL:supportsADOption=true;break;default:supportsADOption=false}return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,{size:"xs",style:{paddingBottom:"0px",marginBottom:"0px"}},_react.default.createElement("h4",null,"Monitor defining method")),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},"Specify the way you want to define your query and triggers."," ",_react.default.createElement(_eui.EuiLink,{external:true,href:_constants2.URL.CREATE_MONITOR_DOCUMENTATION,target:"_blank"},"Learn more")),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s",style:{paddingTop:"0px",marginTop:"0px"}},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:"".concat(MONITOR_DEFINITION_CARD_WIDTH,"px")}},_react.default.createElement(_FormikCheckableCard.default,{name:"searchTypeGraph",formRow:true,inputProps:{id:"visualEditorRadioCard",label:"Visual editor",checked:values.searchType===_constants.SEARCH_TYPE.GRAPH,value:_constants.SEARCH_TYPE.GRAPH,onChange:function onChange(e,field,form){onChangeDefinition(e,form)},"data-test-subj":"visualEditorRadioCard"}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:"".concat(MONITOR_DEFINITION_CARD_WIDTH,"px")}},_react.default.createElement(_FormikCheckableCard.default,{name:"searchTypeQuery",formRow:true,inputProps:{id:"extractionQueryEditorRadioCard",label:"Extraction query editor",checked:values.searchType===_constants.SEARCH_TYPE.QUERY,value:_constants.SEARCH_TYPE.QUERY,onChange:function onChange(e,field,form){onChangeDefinition(e,form)},"data-test-subj":"extractionQueryEditorRadioCard"}})),hasADPlugin&&supportsADOption&&_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:"".concat(MONITOR_DEFINITION_CARD_WIDTH,"px")}},_react.default.createElement(_FormikCheckableCard.default,{name:"searchTypeAD",inputProps:{id:"anomalyDetectorRadioCard",label:"Anomaly detector",checked:values.searchType===_constants.SEARCH_TYPE.AD,value:_constants.SEARCH_TYPE.AD,onChange:function onChange(e,field,form){onChangeDefinition(e,form)},"data-test-subj":"anomalyDetectorRadioCard"}}))))};var _default=MonitorDefinitionCard;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _MonitorType=_interopRequireDefault(__webpack_require__(518));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_MonitorType.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.MONITOR_TYPE_CARD_WIDTH=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormikCheckableCard=_interopRequireDefault(__webpack_require__(519));var _constants=__webpack_require__(15);var _constants2=__webpack_require__(28);var _constants3=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MONITOR_TYPE_CARD_WIDTH=400;exports.MONITOR_TYPE_CARD_WIDTH=MONITOR_TYPE_CARD_WIDTH;var onChangeDefinition=function onChangeDefinition(e,form){var type=e.target.value;form.setFieldValue("monitor_type",type);form.setFieldValue("index",_constants3.FORMIK_INITIAL_VALUES.index);form.setFieldValue("searchType",_constants3.FORMIK_INITIAL_VALUES.searchType);form.setFieldValue("triggerDefinitions",_constants2.FORMIK_INITIAL_TRIGGER_VALUES.triggerConditions);switch(type){case _constants.MONITOR_TYPE.CLUSTER_METRICS:form.setFieldValue("searchType",_constants.SEARCH_TYPE.CLUSTER_METRICS);break;case _constants.MONITOR_TYPE.DOC_LEVEL:form.setFieldValue("query",_constants3.DEFAULT_DOCUMENT_LEVEL_QUERY);break;default:form.setFieldValue("query",_constants3.FORMIK_INITIAL_VALUES.query)}};var queryLevelDescription=_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs",style:{paddingBottom:"10px",paddingTop:"0px"}},"Per query monitors run a specified query and define triggers that check the results of that query.");var bucketLevelDescription=_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs",style:{paddingBottom:"10px",paddingTop:"0px"}},"Per bucket monitors allow you to group results into buckets and define triggers that check each bucket.");var clusterMetricsDescription=_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs",style:{paddingBottom:"10px",paddingTop:"0px"}},"Per cluster metrics monitors allow you to alert based on responses to common REST APIs.");var documentLevelDescription=_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs",style:{paddingBottom:"10px",paddingTop:"0px"}},"Per document monitors allow you to run queries on new documents as they're indexed.");var MonitorType=function MonitorType(_ref){var values=_ref.values;return _react.default.createElement(_eui.EuiFlexGrid,{gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormikCheckableCard.default,{name:"monitorTypeQueryLevel",formRow:true,rowProps:{label:"Monitor type"},inputProps:{id:"queryLevelMonitorRadioCard",label:"Per query monitor",checked:values.monitor_type===_constants.MONITOR_TYPE.QUERY_LEVEL,value:_constants.MONITOR_TYPE.QUERY_LEVEL,onChange:function onChange(e,field,form){return onChangeDefinition(e,form)},children:queryLevelDescription,"data-test-subj":"queryLevelMonitorRadioCard"}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormikCheckableCard.default,{name:"monitorTypeBucketLevel",formRow:true,rowProps:{hasEmptyLabelSpace:true},inputProps:{id:"bucketLevelMonitorRadioCard",label:"Per bucket monitor",checked:values.monitor_type===_constants.MONITOR_TYPE.BUCKET_LEVEL,value:_constants.MONITOR_TYPE.BUCKET_LEVEL,onChange:function onChange(e,field,form){return onChangeDefinition(e,form)},children:bucketLevelDescription,"data-test-subj":"bucketLevelMonitorRadioCard"}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormikCheckableCard.default,{name:"monitorTypeClusterMetrics",formRow:true,rowProps:{hasEmptyLabelSpace:true},inputProps:{id:"clusterMetricsMonitorRadioCard",label:"Per cluster metrics monitor",checked:values.monitor_type===_constants.MONITOR_TYPE.CLUSTER_METRICS,value:_constants.MONITOR_TYPE.CLUSTER_METRICS,onChange:function onChange(e,field,form){return onChangeDefinition(e,form)},children:clusterMetricsDescription,"data-test-subj":"clusterMetricsMonitorRadioCard"}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormikCheckableCard.default,{name:"monitorTypeDocLevel",formRow:true,rowProps:{hasEmptyLabelSpace:true},inputProps:{id:"docLevelMonitorRadioCard",label:"Per document monitor",checked:values.monitor_type===_constants.MONITOR_TYPE.DOC_LEVEL,value:_constants.MONITOR_TYPE.DOC_LEVEL,onChange:function onChange(e,field,form){return onChangeDefinition(e,form)},children:documentLevelDescription,"data-test-subj":"docLevelMonitorRadioCard"}})))};var _default=MonitorType;exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _FormikCheckableCard=_interopRequireDefault(__webpack_require__(201));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_FormikCheckableCard.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=__webpack_require__(7);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _CoreContext=__webpack_require__(68);var _helpers=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AnomalyDetectors=function(_React$Component){_inherits(AnomalyDetectors,_React$Component);var _super=_createSuper(AnomalyDetectors);function AnomalyDetectors(props){var _this;_classCallCheck(this,AnomalyDetectors);_this=_super.call(this,props);_this.state={detectorOptions:[],isLoading:false};_this.searchDetectors=_this.searchDetectors.bind(_assertThisInitialized(_this));return _this}_createClass(AnomalyDetectors,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.searchDetectors();case 2:case"end":return _context.stop()}}}),_callee,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"searchDetectors",value:function(){var _searchDetectors=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this$context,httpClient,notifications,response,detectorOptions;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$context=this.context,httpClient=_this$context.http,notifications=_this$context.notifications;_context2.prev=1;_context2.next=4;return httpClient.post("../api/alerting/detectors/_search");case 4:response=_context2.sent;if(response.ok){detectorOptions=response.detectors.filter((function(detector){return detector.detectionDateRange===undefined})).map((function(detector){return{label:detector.name,value:detector.id,features:detector.featureAttributes,interval:detector.detectionInterval,resultIndex:detector.resultIndex}}));this.setState({detectorOptions:detectorOptions})}else{}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](1);console.error(_context2.t0);case 11:case"end":return _context2.stop()}}}),_callee2,this,[[1,8]])})));function searchDetectors(){return _searchDetectors.apply(this,arguments)}return searchDetectors}()},{key:"render",value:function render(){var detectorOptions=this.state.detectorOptions;var _this$props=this.props,values=_this$props.values,detectorId=_this$props.detectorId;var selectedOptions=[];if(detectorOptions.length>0){var adId=values.detectorId?values.detectorId:detectorId;var selectedValue=detectorOptions.find((function(detector){return adId===detector.value}));if(selectedValue){selectedOptions=[selectedValue]}}return _react.default.createElement("div",{style:{maxWidth:"390px"}},_react.default.createElement(_FormControls.FormikComboBox,{name:"detectorId",formRow:true,rowProps:{label:"Detector",isInvalid:_validate.isInvalid,error:_validate.hasError},fieldProps:{validate:function validate(value){return(0,_validate.validateDetector)(value,selectedOptions[0])}},inputProps:{placeholder:"Select a detector",options:detectorOptions,onBlur:function onBlur(e,field,form){form.setFieldTouched("detectorId",true)},onChange:function onChange(options,field,form){form.setFieldError("detectorId",undefined);form.setFieldValue("detectorId",(0,_lodash.get)(options,"0.value",""));form.setFieldValue("period",{interval:2*(0,_lodash.get)(options,"0.interval.period.interval"),unit:(0,_lodash.get)(options,"0.interval.period.unit","MINUTES").toUpperCase()});form.setFieldValue("adResultIndex",(0,_lodash.get)(options,"0.resultIndex"))},singleSelection:{asPlaintext:true},isClearable:false,selectedOptions:selectedOptions}}))}}]);return AnomalyDetectors}(_react.default.Component);_defineProperty(AnomalyDetectors,"contextType",_CoreContext.CoreContext);var _default=AnomalyDetectors;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _ConfigureTriggers=_interopRequireDefault(__webpack_require__(522));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_ConfigureTriggers.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _lodash=_interopRequireDefault(__webpack_require__(7));var _DefineBucketLevelTrigger=_interopRequireDefault(__webpack_require__(523));var _AddTriggerButton=_interopRequireDefault(__webpack_require__(202));var _TriggerEmptyPrompt=_interopRequireDefault(__webpack_require__(525));var _Triggers=__webpack_require__(132);var _DefineTrigger=_interopRequireDefault(__webpack_require__(530));var _constants=__webpack_require__(15);var _mappings=__webpack_require__(197);var _monitorToFormik=_interopRequireDefault(__webpack_require__(67));var _searchRequests=__webpack_require__(85);var _helpers=__webpack_require__(22);var _DefineDocumentLevelTrigger=_interopRequireDefault(__webpack_require__(543));var _clusterMetricsMonitorHelpers=__webpack_require__(53);var _constants2=__webpack_require__(27);var _helper=__webpack_require__(65);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ConfigureTriggers=function(_React$Component){_inherits(ConfigureTriggers,_React$Component);var _super=_createSuper(ConfigureTriggers);function ConfigureTriggers(props){var _this;_classCallCheck(this,ConfigureTriggers);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"monitorSetupByType",(function(){var _this$props=_this.props,monitor_type=_this$props.monitor.monitor_type,uri=_this$props.monitorValues.uri;switch(monitor_type){case _constants.MONITOR_TYPE.BUCKET_LEVEL:_this.onQueryMappings();break;case _constants.MONITOR_TYPE.CLUSTER_METRICS:if((0,_clusterMetricsMonitorHelpers.canExecuteClusterMetricsMonitor)(uri))_this.onRunExecute();break}}));_defineProperty(_assertThisInitialized(_this),"prepareAddTriggerButton",(function(){var _this$props2=_this.props,monitorValues=_this$props2.monitorValues,triggerArrayHelpers=_this$props2.triggerArrayHelpers,triggerValues=_this$props2.triggerValues;var disableAddTriggerButton=_lodash.default.get(triggerValues,"triggerDefinitions",[]).length>=_Triggers.MAX_TRIGGERS;return _react.default.createElement(_AddTriggerButton.default,{arrayHelpers:triggerArrayHelpers,disabled:disableAddTriggerButton,script:(0,_helper.getDefaultScript)(monitorValues)})}));_defineProperty(_assertThisInitialized(_this),"prepareTriggerEmptyPrompt",(function(){var _this$props3=_this.props,monitorValues=_this$props3.monitorValues,triggerArrayHelpers=_this$props3.triggerArrayHelpers;return _react.default.createElement(_TriggerEmptyPrompt.default,{arrayHelpers:triggerArrayHelpers,script:(0,_helper.getDefaultScript)(monitorValues)})}));_defineProperty(_assertThisInitialized(_this),"onRunExecute",(function(){var triggers=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var _this$props4=_this.props,httpClient=_this$props4.httpClient,monitor=_this$props4.monitor,notifications=_this$props4.notifications;var formikValues=(0,_monitorToFormik.default)(monitor);var searchType=formikValues.searchType;var monitorToExecute=_lodash.default.cloneDeep(monitor);_lodash.default.set(monitorToExecute,"triggers",triggers);switch(searchType){case _constants.SEARCH_TYPE.QUERY:case _constants.SEARCH_TYPE.GRAPH:var searchRequest=(0,_searchRequests.buildRequest)(formikValues);_lodash.default.set(monitorToExecute,"inputs[0]",searchRequest);break;case _constants.SEARCH_TYPE.CLUSTER_METRICS:var clusterMetricsRequest=(0,_clusterMetricsMonitorHelpers.buildClusterMetricsRequest)(formikValues);_lodash.default.set(monitorToExecute,"inputs[0].uri",clusterMetricsRequest);break;default:console.log("Unsupported searchType found: ".concat(JSON.stringify(searchType)),searchType)}httpClient.post("../api/alerting/monitors/_execute",{body:JSON.stringify(monitorToExecute)}).then((function(resp){if(resp.ok){_this.setState({executeResponse:resp.resp})}else{console.error("err:",resp);(0,_helpers.backendErrorNotification)(notifications,"run","trigger",resp.resp)}})).catch((function(err){console.log("err:",err)}))}));_defineProperty(_assertThisInitialized(_this),"renderDefineTrigger",(function(triggerArrayHelpers,index){var _this$props5=_this.props,edit=_this$props5.edit,monitor=_this$props5.monitor,monitorValues=_this$props5.monitorValues,notifications=_this$props5.notifications,setFlyout=_this$props5.setFlyout,triggers=_this$props5.triggers,triggerValues=_this$props5.triggerValues,isDarkMode=_this$props5.isDarkMode,httpClient=_this$props5.httpClient,notificationService=_this$props5.notificationService,plugins=_this$props5.plugins;var executeResponse=_this.state.executeResponse;return _react.default.createElement(_DefineTrigger.default,{edit:edit,triggerArrayHelpers:triggerArrayHelpers,executeResponse:executeResponse,monitor:monitor,monitorValues:monitorValues,onRun:_this.onRunExecute,setFlyout:setFlyout,triggers:triggers,triggerValues:triggerValues,isDarkMode:isDarkMode,triggerIndex:index,httpClient:httpClient,notifications:notifications,notificationService:notificationService,plugins:plugins})}));_defineProperty(_assertThisInitialized(_this),"renderDefineBucketLevelTrigger",(function(triggerArrayHelpers,index){var _this$props6=_this.props,edit=_this$props6.edit,monitor=_this$props6.monitor,monitorValues=_this$props6.monitorValues,setFlyout=_this$props6.setFlyout,triggers=_this$props6.triggers,triggerValues=_this$props6.triggerValues,isDarkMode=_this$props6.isDarkMode,httpClient=_this$props6.httpClient,notifications=_this$props6.notifications,notificationService=_this$props6.notificationService,plugins=_this$props6.plugins;var _this$state=_this.state,dataTypes=_this$state.dataTypes,executeResponse=_this$state.executeResponse;return _react.default.createElement(_DefineBucketLevelTrigger.default,{edit:edit,triggerArrayHelpers:triggerArrayHelpers,executeResponse:executeResponse,monitor:monitor,monitorValues:monitorValues,onRun:_this.onRunExecute,setFlyout:setFlyout,triggers:triggers,triggerValues:triggerValues,isDarkMode:isDarkMode,dataTypes:dataTypes,triggerIndex:index,httpClient:httpClient,notifications:notifications,notificationService:notificationService,plugins:plugins})}));_defineProperty(_assertThisInitialized(_this),"renderDefineDocumentLevelTrigger",(function(triggerArrayHelpers,index){var _this$props7=_this.props,edit=_this$props7.edit,monitor=_this$props7.monitor,monitorValues=_this$props7.monitorValues,setFlyout=_this$props7.setFlyout,triggers=_this$props7.triggers,triggerValues=_this$props7.triggerValues,isDarkMode=_this$props7.isDarkMode,httpClient=_this$props7.httpClient,notifications=_this$props7.notifications,notificationService=_this$props7.notificationService,plugins=_this$props7.plugins;var _this$state2=_this.state,dataTypes=_this$state2.dataTypes,executeResponse=_this$state2.executeResponse;return _react.default.createElement(_DefineDocumentLevelTrigger.default,{edit:edit,triggerArrayHelpers:triggerArrayHelpers,executeResponse:executeResponse,monitor:monitor,monitorValues:monitorValues,onRun:_this.onRunExecute,setFlyout:setFlyout,triggers:triggers,triggerValues:triggerValues,isDarkMode:isDarkMode,dataTypes:dataTypes,triggerIndex:index,httpClient:httpClient,notifications:notifications,notificationService:notificationService,plugins:plugins})}));_defineProperty(_assertThisInitialized(_this),"renderTriggers",(function(triggerArrayHelpers){var _this$props8=_this.props,monitorValues=_this$props8.monitorValues,triggerValues=_this$props8.triggerValues;var triggerEmptyPrompt=_this.state.triggerEmptyPrompt;var hasTriggers=!_lodash.default.isEmpty(_lodash.default.get(triggerValues,"triggerDefinitions"));var triggerContent=function triggerContent(arrayHelpers,index){switch(monitorValues.monitor_type){case _constants.MONITOR_TYPE.BUCKET_LEVEL:return _this.renderDefineBucketLevelTrigger(arrayHelpers,index);case _constants.MONITOR_TYPE.DOC_LEVEL:return _this.renderDefineDocumentLevelTrigger(arrayHelpers,index);default:return _this.renderDefineTrigger(arrayHelpers,index)}};return hasTriggers?triggerValues.triggerDefinitions.map((function(trigger,index){return _react.default.createElement("div",{key:index},triggerContent(triggerArrayHelpers,index),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}))})):triggerEmptyPrompt}));_this.state={dataTypes:{},executeResponse:null,triggerDeleted:false,addTriggerButton:_this.prepareAddTriggerButton(),triggerEmptyPrompt:_this.prepareTriggerEmptyPrompt()};_this.onQueryMappings=_this.onQueryMappings.bind(_assertThisInitialized(_this));_this.onRunExecute=_this.onRunExecute.bind(_assertThisInitialized(_this));_this.prepareAddTriggerButton=_this.prepareAddTriggerButton.bind(_assertThisInitialized(_this));_this.prepareTriggerEmptyPrompt=_this.prepareTriggerEmptyPrompt.bind(_assertThisInitialized(_this));return _this}_createClass(ConfigureTriggers,[{key:"componentDidMount",value:function componentDidMount(){this.monitorSetupByType()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var prevSearchType=_lodash.default.get(prevProps,"monitorValues.searchType",_constants2.FORMIK_INITIAL_VALUES.searchType);var currSearchType=_lodash.default.get(this.props,"monitorValues.searchType",_constants2.FORMIK_INITIAL_VALUES.searchType);var prevApiType=_lodash.default.get(prevProps,"monitorValues.uri.api_type",_constants2.FORMIK_INITIAL_VALUES.uri.api_type);var currApiType=_lodash.default.get(this.props,"monitorValues.uri.api_type",_constants2.FORMIK_INITIAL_VALUES.uri.api_type);if(prevSearchType!==currSearchType||prevApiType!==currApiType){this.setState({addTriggerButton:this.prepareAddTriggerButton()});this.setState({triggerEmptyPrompt:this.prepareTriggerEmptyPrompt()})}var prevInputs=prevProps.monitor.inputs[0];var currInputs=this.props.monitor.inputs[0];if(!_lodash.default.isEqual(prevInputs,currInputs))this.monitorSetupByType()}},{key:"queryMappings",value:function(){var _queryMappings=_asyncToGenerator(regeneratorRuntime.mark((function _callee(index){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(index.length){_context.next=2;break}return _context.abrupt("return",{});case 2:_context.prev=2;_context.next=5;return this.props.httpClient.post("../api/alerting/_mappings",{body:JSON.stringify({index:index})});case 5:response=_context.sent;if(!response.ok){_context.next=8;break}return _context.abrupt("return",response.resp);case 8:return _context.abrupt("return",{});case 11:_context.prev=11;_context.t0=_context["catch"](2);throw _context.t0;case 14:case"end":return _context.stop()}}}),_callee,this,[[2,11]])})));function queryMappings(_x){return _queryMappings.apply(this,arguments)}return queryMappings}()},{key:"onQueryMappings",value:function(){var _onQueryMappings=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var indices,mappings,dataTypes;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:indices=this.props.monitor.inputs[0].search.indices;_context2.prev=1;_context2.next=4;return this.queryMappings(indices);case 4:mappings=_context2.sent;dataTypes=(0,_mappings.getPathsPerDataType)(mappings);this.setState({dataTypes:dataTypes});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](1);console.error("There was an error getting mappings for query",_context2.t0);case 12:case"end":return _context2.stop()}}}),_callee2,this,[[1,9]])})));function onQueryMappings(){return _onQueryMappings.apply(this,arguments)}return onQueryMappings}()},{key:"render",value:function render(){var _this$props9=this.props,triggerArrayHelpers=_this$props9.triggerArrayHelpers,triggerValues=_this$props9.triggerValues;var addTriggerButton=this.state.addTriggerButton;var numOfTriggers=_lodash.default.get(triggerValues,"triggerDefinitions",[]).length;var displayAddTriggerButton=numOfTriggers>0;return _react.default.createElement(_ContentPanel.default,{title:"Triggers (".concat(numOfTriggers,")"),titleSize:"s",panelStyles:{paddingBottom:"0px",paddingLeft:"20px",paddingRight:"20px"},bodyStyles:{paddingLeft:"0px",padding:"10px"},horizontalRuleClassName:"accordion-horizontal-rule"},this.renderTriggers(triggerArrayHelpers),displayAddTriggerButton?_react.default.createElement("div",{style:{paddingBottom:"20px",paddingTop:"15px"}},addTriggerButton,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),(0,_helpers.inputLimitText)(numOfTriggers,_Triggers.MAX_TRIGGERS,"trigger","triggers")):null)}}]);return ConfigureTriggers}(_react.default.Component);var _default=ConfigureTriggers;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _DefineBucketLevelTrigger=_interopRequireDefault(__webpack_require__(63));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_DefineBucketLevelTrigger.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _constants=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AddTriggerButton=function AddTriggerButton(_ref){var arrayHelpers=_ref.arrayHelpers,disabled=_ref.disabled,_ref$script=_ref.script,script=_ref$script===void 0?_constants.FORMIK_INITIAL_TRIGGER_VALUES.script:_ref$script;var buttonText=_lodash.default.get(arrayHelpers,"form.values.triggerDefinitions",[]).length===0?"Add trigger":"Add another trigger";var values=_lodash.default.cloneDeep(_objectSpread(_objectSpread({},_constants.FORMIK_INITIAL_TRIGGER_VALUES),{},{script:script}));return _react.default.createElement(_eui.EuiButton,{fill:false,size:"s",onClick:function onClick(){return arrayHelpers.push(values)},disabled:disabled},buttonText)};var _default=AddTriggerButton;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _TriggerEmptyPrompt=_interopRequireDefault(__webpack_require__(526));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_TriggerEmptyPrompt.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _AddTriggerButton=_interopRequireDefault(__webpack_require__(202));var _constants=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var addTriggerButton=function addTriggerButton(arrayHelpers,script){return _react.default.createElement(_AddTriggerButton.default,{arrayHelpers:arrayHelpers,script:script})};var TriggerEmptyPrompt=function TriggerEmptyPrompt(_ref){var arrayHelpers=_ref.arrayHelpers,_ref$script=_ref.script,script=_ref$script===void 0?_constants.FORMIK_INITIAL_TRIGGER_VALUES.script:_ref$script;return _react.default.createElement(_eui.EuiEmptyPrompt,{style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h4",null,"No triggers"),_react.default.createElement("p",null,"Add a trigger to define conditions and actions.")),actions:addTriggerButton(arrayHelpers,script)})};var _default=TriggerEmptyPrompt;exports.default=_default;module.exports=exports.default},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _DefineTrigger=_interopRequireDefault(__webpack_require__(531));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_DefineTrigger.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);__webpack_require__(60);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _TriggerQuery=_interopRequireDefault(__webpack_require__(203));var _TriggerGraph=_interopRequireDefault(__webpack_require__(533));var _validation=__webpack_require__(129);var _constants=__webpack_require__(15);var _AnomalyDetectorTrigger=__webpack_require__(535);var _constants2=__webpack_require__(28);var _formik=__webpack_require__(20);var _ConfigureActions=_interopRequireDefault(__webpack_require__(130));var _monitorToFormik=_interopRequireDefault(__webpack_require__(67));var _searchRequests=__webpack_require__(85);var _helpers=__webpack_require__(22);var _clusterMetricsMonitorHelpers=__webpack_require__(53);var _constants3=__webpack_require__(30);var _helper=__webpack_require__(65);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultRowProps={label:"Trigger name",style:{paddingLeft:"10px"},isInvalid:_validate.isInvalid,error:_validate.hasError};var defaultInputProps={isInvalid:_validate.isInvalid};var selectFieldProps={validate:function validate(){}};var selectRowProps={label:"Severity level",style:{paddingLeft:"10px",marginTop:"0px"},isInvalid:_validate.isInvalid,error:_validate.hasError};var triggerOptions=[{value:_constants2.TRIGGER_TYPE.AD,text:"Anomaly detector grade and confidence"},{value:_constants2.TRIGGER_TYPE.ALERT_TRIGGER,text:"Extraction query response"}];var selectInputProps={options:_constants3.SEVERITY_OPTIONS};var DefineTrigger=function(_Component){_inherits(DefineTrigger,_Component);var _super=_createSuper(DefineTrigger);function DefineTrigger(props){var _this;_classCallCheck(this,DefineTrigger);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"onRunExecute",(function(){var triggers=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var _this$props=_this.props,httpClient=_this$props.httpClient,monitor=_this$props.monitor,notifications=_this$props.notifications;var formikValues=(0,_monitorToFormik.default)(monitor);var searchType=formikValues.searchType;var monitorToExecute=_lodash.default.cloneDeep(monitor);_lodash.default.set(monitorToExecute,"triggers",triggers);switch(searchType){case _constants.SEARCH_TYPE.QUERY:case _constants.SEARCH_TYPE.GRAPH:var searchRequest=(0,_searchRequests.buildRequest)(formikValues);_lodash.default.set(monitorToExecute,"inputs[0]",searchRequest);break;case _constants.SEARCH_TYPE.AD:break;case _constants.SEARCH_TYPE.CLUSTER_METRICS:var clusterMetricsRequest=(0,_clusterMetricsMonitorHelpers.buildClusterMetricsRequest)(formikValues);_lodash.default.set(monitorToExecute,"inputs[0].uri",clusterMetricsRequest);break;default:console.log("Unsupported searchType found: ".concat(JSON.stringify(searchType)),searchType)}httpClient.post("../api/alerting/monitors/_execute",{body:JSON.stringify(monitorToExecute)}).then((function(resp){if(resp.ok){_this.setState({executeResponse:resp.resp})}else{console.error("err:",resp);(0,_helpers.backendErrorNotification)(notifications,"run","trigger",resp.resp)}})).catch((function(err){console.log("err:",err)}))}));_this.state={};return _this}_createClass(DefineTrigger,[{key:"componentDidMount",value:function componentDidMount(){var _this$props$monitorVa=this.props.monitorValues,searchType=_this$props$monitorVa.searchType,uri=_this$props$monitorVa.uri;switch(searchType){case _constants.SEARCH_TYPE.CLUSTER_METRICS:if((0,_clusterMetricsMonitorHelpers.canExecuteClusterMetricsMonitor)(uri))this.onRunExecute();break;default:this.onRunExecute()}}},{key:"render",value:function render(){var _this$props2=this.props,edit=_this$props2.edit,triggerArrayHelpers=_this$props2.triggerArrayHelpers,monitor=_this$props2.monitor,monitorValues=_this$props2.monitorValues,onRun=_this$props2.onRun,setFlyout=_this$props2.setFlyout,triggers=_this$props2.triggers,triggerValues=_this$props2.triggerValues,isDarkMode=_this$props2.isDarkMode,triggerIndex=_this$props2.triggerIndex,httpClient=_this$props2.httpClient,notifications=_this$props2.notifications,notificationService=_this$props2.notificationService,plugins=_this$props2.plugins;var executeResponse=_lodash.default.get(this.state,"executeResponse",this.props.executeResponse);var context=(0,_helper.getTriggerContext)(executeResponse,monitor,triggerValues,triggerIndex);var fieldPath=triggerIndex!==undefined?"triggerDefinitions[".concat(triggerIndex,"]."):"";var isGraph=_lodash.default.get(monitorValues,"searchType")===_constants.SEARCH_TYPE.GRAPH;var isAd=_lodash.default.get(monitorValues,"searchType")===_constants.SEARCH_TYPE.AD;var detectorId=_lodash.default.get(monitorValues,"detectorId");var response=_lodash.default.get(executeResponse,"input_results.results[0]");var error=_lodash.default.get(executeResponse,"error")||_lodash.default.get(executeResponse,"input_results.error");var thresholdEnum=_lodash.default.get(triggerValues,"".concat(fieldPath,"thresholdEnum"));var thresholdValue=_lodash.default.get(triggerValues,"".concat(fieldPath,"thresholdValue"));var adTriggerType=_lodash.default.get(triggerValues,"".concat(fieldPath,"anomalyDetector.triggerType"));var triggerName=_lodash.default.get(triggerValues,"".concat(fieldPath,"name"),_constants3.DEFAULT_TRIGGER_NAME);var triggerContent=_react.default.createElement(_TriggerQuery.default,{context:context,error:error,executeResponse:executeResponse,onRun:_lodash.default.isEmpty(fieldPath)?onRun:this.onRunExecute,response:response,setFlyout:setFlyout,triggerValues:triggerValues,isDarkMode:isDarkMode,fieldPath:fieldPath,isAd:isAd});if(isAd&&adTriggerType===_constants2.TRIGGER_TYPE.AD){var adValues=_lodash.default.get(triggerValues,"".concat(fieldPath,"anomalyDetector"));triggerContent=_react.default.createElement(_AnomalyDetectorTrigger.AnomalyDetectorTrigger,{detectorId:detectorId,adValues:adValues,fieldPath:fieldPath})}if(isGraph){triggerContent=_react.default.createElement(_TriggerGraph.default,{monitorValues:monitorValues,response:response,thresholdEnum:thresholdEnum,thresholdValue:thresholdValue,fieldPath:fieldPath})}return _react.default.createElement(_eui.EuiAccordion,{id:triggerName,buttonContent:_react.default.createElement(_eui.EuiTitle,{size:"s","data-test-subj":"".concat(fieldPath,"_triggerAccordion")},_react.default.createElement("h1",null,_lodash.default.isEmpty(triggerName)?_constants3.DEFAULT_TRIGGER_NAME:triggerName)),initialIsOpen:edit?false:triggerIndex===0,extraAction:_react.default.createElement(_eui.EuiButton,{color:"danger",onClick:function onClick(){triggerArrayHelpers.remove(triggerIndex)},size:"s"},"Remove trigger"),style:{paddingBottom:"15px",paddingTop:"10px"}},_react.default.createElement("div",{style:{padding:"0px 20px",paddingTop:"20px"}},_react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(fieldPath,"name"),fieldProps:{validate:(0,_validation.validateTriggerName)(triggers,triggerValues,fieldPath)},formRow:true,rowProps:defaultRowProps,inputProps:defaultInputProps}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_FormControls.FormikSelect,{name:"".concat(fieldPath,"severity"),formRow:true,fieldProps:selectFieldProps,rowProps:selectRowProps,inputProps:selectInputProps}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),isAd?_react.default.createElement("div",{style:{paddingLeft:"10px",marginTop:"0px"}},_react.default.createElement(_eui.EuiText,{size:"xs",style:{paddingBottom:"0px",marginBottom:"0px"}},_react.default.createElement("h4",null,"Trigger type")),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs",style:{paddingBottom:"5px"}},"Define type of anomaly detector trigger"),_react.default.createElement(_FormControls.FormikSelect,{name:"".concat(fieldPath,"anomalyDetector.triggerType"),formRow:true,rowProps:{style:{paddingTop:"0px",marginTop:"0px",width:"390px"}},inputProps:{options:triggerOptions}}),_react.default.createElement(_eui.EuiSpacer,{size:"m"})):null,triggerContent,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_formik.FieldArray,{name:"".concat(fieldPath,"actions"),validateOnChange:true},(function(arrayHelpers){return _react.default.createElement(_ConfigureActions.default,{arrayHelpers:arrayHelpers,context:context,httpClient:httpClient,setFlyout:setFlyout,values:triggerValues,notifications:notifications,fieldPath:fieldPath,triggerIndex:triggerIndex,notificationService:notificationService,plugins:plugins})}))))}}]);return DefineTrigger}(_react.Component);var _default=DefineTrigger;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getExecuteMessage=exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _formik=__webpack_require__(20);var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);__webpack_require__(124);__webpack_require__(60);__webpack_require__(125);__webpack_require__(126);var _formikToTrigger=__webpack_require__(64);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getExecuteMessage=function getExecuteMessage(response){if(!response)return"No response";var triggerResults=_lodash.default.get(response,"trigger_results");if(!triggerResults)return"No trigger results";var triggerId=Object.keys(triggerResults)[0];if(!triggerId)return"No trigger results";var executeResults=_lodash.default.get(triggerResults,triggerId);if(!executeResults)return"No execute results";var error=executeResults.error,triggered=executeResults.triggered,triggeredDocs=executeResults.triggeredDocs;if(!_lodash.default.isNull(error)&&!_lodash.default.isUndefined(error))return error;if(!_lodash.default.isNull(triggered)&&!_lodash.default.isUndefined(triggered))return"".concat(triggered);if(!_lodash.default.isNull(triggeredDocs)&&!_lodash.default.isUndefined(triggeredDocs))return JSON.stringify(triggeredDocs,null,4)};exports.getExecuteMessage=getExecuteMessage;var TriggerQuery=function TriggerQuery(_ref){var context=_ref.context,error=_ref.error,executeResponse=_ref.executeResponse,onRun=_ref.onRun,response=_ref.response,triggerValues=_ref.triggerValues,setFlyout=_ref.setFlyout,isDarkMode=_ref.isDarkMode,fieldPath=_ref.fieldPath,_ref$isAd=_ref.isAd,isAd=_ref$isAd===void 0?false:_ref$isAd;var currentTrigger=_lodash.default.isEmpty(fieldPath)?triggerValues:_lodash.default.get(triggerValues,"".concat(fieldPath.slice(0,-1)),{});var trigger=_objectSpread(_objectSpread({},(0,_formikToTrigger.formikToTrigger)(currentTrigger)),{},{actions:[]});var responseToFormat=_lodash.default.isEmpty(response)&&isAd?onRun([trigger]):response;var formattedResponse=JSON.stringify(responseToFormat,null,4);var fieldName="".concat(fieldPath,"script.source");return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"column"},_react.default.createElement(_eui.EuiFlexItem,{style:{paddingLeft:"10px",paddingRight:"10px"}},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"stretch",gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:1,style:{marginBottom:"20px"}},_react.default.createElement("div",null,isAd?_react.default.createElement("div",null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFormRow,{label:"Response",fullWidth:true},_react.default.createElement(_eui.EuiCodeEditor,{grow:true,mode:"json",theme:isDarkMode?"sense-dark":"github",height:"200px",width:"100%",value:error||formattedResponse,readOnly:true})),_react.default.createElement(_eui.EuiSpacer,{size:"l"})):null,_react.default.createElement(_formik.Field,{name:fieldName},(function(_ref2){var value=_ref2.field.value,_ref2$form=_ref2.form,errors=_ref2$form.errors,touched=_ref2$form.touched,setFieldValue=_ref2$form.setFieldValue,setFieldTouched=_ref2$form.setFieldTouched;return _react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Trigger condition"))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){setFlyout({type:"triggerCondition",payload:context})}},"Info")))),fullWidth:true,isInvalid:_lodash.default.get(touched,fieldName,false)&&!!_lodash.default.get(errors,fieldName),error:_lodash.default.get(errors,fieldName)},_react.default.createElement(_eui.EuiCodeEditor,{grow:true,mode:"plain_text",theme:isDarkMode?"sense-dark":"github",height:"200px",width:"100%",onChange:function onChange(source){setFieldValue(fieldName,source)},onBlur:function onBlur(){return setFieldTouched(fieldName,true)},value:value,"data-test-subj":"triggerQueryCodeEditor"}))})))),_react.default.createElement(_eui.EuiFlexItem,{grow:1,style:{marginBottom:"0px",paddingTop:"6px"}},_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,"Trigger condition response"))},_react.default.createElement(_eui.EuiCodeEditor,{grow:true,mode:"plain_text",theme:isDarkMode?"sense-dark":"github",height:"200px",width:"100%",value:getExecuteMessage(executeResponse),readOnly:true})))))),_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onRun([trigger])},size:"s",style:{marginLeft:"10px"}},"Preview condition response"))};var _default=TriggerQuery;exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _VisualGraph=_interopRequireDefault(__webpack_require__(165));var _TriggerExpressions=_interopRequireDefault(__webpack_require__(204));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TriggerGraph=function TriggerGraph(_ref){var monitorValues=_ref.monitorValues,response=_ref.response,thresholdValue=_ref.thresholdValue,thresholdEnum=_ref.thresholdEnum,fieldPath=_ref.fieldPath;return _react.default.createElement("div",{style:{padding:"0px 10px"}},_react.default.createElement(_TriggerExpressions.default,{thresholdValue:thresholdValue,thresholdEnum:thresholdEnum,keyFieldName:"".concat(fieldPath,"thresholdEnum"),valueFieldName:"".concat(fieldPath,"thresholdValue"),label:"Trigger condition"}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_VisualGraph.default,{annotation:true,values:monitorValues,thresholdValue:thresholdValue,response:response}))};var _default=TriggerGraph;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.Expressions=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _constants=__webpack_require__(30);var _excluded=["onBlur"];function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var Expressions={THRESHOLD:"THRESHOLD"};exports.Expressions=Expressions;var TriggerExpressions=function(_Component){_inherits(TriggerExpressions,_Component);var _super=_createSuper(TriggerExpressions);function TriggerExpressions(props){_classCallCheck(this,TriggerExpressions);return _super.call(this,props)}_createClass(TriggerExpressions,[{key:"render",value:function render(){var _this$props=this.props,label=_this$props.label,keyFieldName=_this$props.keyFieldName,valueFieldName=_this$props.valueFieldName;return _react.default.createElement(_eui.EuiFormRow,{label:label,style:{width:"390px"}},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_formik.Field,{name:keyFieldName},(function(_ref){var _ref$field=_ref.field,onBlur=_ref$field.onBlur,rest=_objectWithoutProperties(_ref$field,_excluded),_ref$form=_ref.form,touched=_ref$form.touched,errors=_ref$form.errors;return _react.default.createElement(_eui.EuiFormRow,{isInvalid:touched.thresholdEnum&&!!errors.thresholdEnum,error:errors.thresholdEnum},_react.default.createElement(_eui.EuiSelect,_extends({options:_constants.THRESHOLD_ENUM_OPTIONS,"data-test-subj":"".concat(keyFieldName,"_conditionEnumField")},rest)))}))),_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_formik.Field,{name:valueFieldName},(function(_ref2){var field=_ref2.field,_ref2$form=_ref2.form,touched=_ref2$form.touched,errors=_ref2$form.errors;return _react.default.createElement(_eui.EuiFormRow,{isInvalid:touched.thresholdValue&&!!errors.thresholdValue,error:errors.thresholdValue},_react.default.createElement(_eui.EuiFieldNumber,_extends({"data-test-subj":"".concat(valueFieldName,"_conditionValueField")},field)))})))))}}]);return TriggerExpressions}(_react.Component);var _default=TriggerExpressions;exports.default=_default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AnomalyDetectorTrigger=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _AnomalyDetectorData=__webpack_require__(536);var _TriggerExpressions=_interopRequireDefault(__webpack_require__(204));var _AnomaliesChart=__webpack_require__(537);var _EmptyFeaturesMessage=__webpack_require__(541);var _EmptyDetectorMessage=__webpack_require__(542);var _constants=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function getPreviewErrorType(err,features){if(features===undefined||features.length==0){return _constants.PREVIEW_ERROR_TYPE.NO_FEATURE}var enabledFeatures=features.filter((function(feature){return feature.featureEnabled}));if(enabledFeatures.length==0){return _constants.PREVIEW_ERROR_TYPE.NO_ENABLED_FEATURES}if(err)return _constants.PREVIEW_ERROR_TYPE.PREVIEW_EXCEPTION;return _constants.PREVIEW_ERROR_TYPE.SPARSE_DATA}var AnomalyDetectorTrigger=function(_React$Component){_inherits(AnomalyDetectorTrigger,_React$Component);var _super=_createSuper(AnomalyDetectorTrigger);function AnomalyDetectorTrigger(props){_classCallCheck(this,AnomalyDetectorTrigger);return _super.call(this,props)}_createClass(AnomalyDetectorTrigger,[{key:"render",value:function render(){var _this$props=this.props,adValues=_this$props.adValues,detectorId=_this$props.detectorId,fieldPath=_this$props.fieldPath;var _this$context=this.context,httpClient=_this$context.httpClient,notifications=_this$context.notifications;return _react.default.createElement("div",{style:{padding:"0px 10px"}},_react.default.createElement(_AnomalyDetectorData.AnomalyDetectorData,{detectorId:detectorId,render:function render(anomalyData){var features=_lodash.default.get(anomalyData,"detector.featureAttributes",[]);var isHCDetector=!_lodash.default.isEmpty(_lodash.default.get(anomalyData,"detector.categoryField",[]));var previewErrorType=getPreviewErrorType(anomalyData.error,features);if(_lodash.default.get(anomalyData,"anomalyResult.anomalies",[]).length>0){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_TriggerExpressions.default,{thresholdValue:adValues.anomalyGradeThresholdValue,thresholdEnum:adValues.anomalyGradeThresholdEnum,keyFieldName:"".concat(fieldPath,"anomalyDetector.anomalyGradeThresholdEnum"),valueFieldName:"".concat(fieldPath,"anomalyDetector.anomalyGradeThresholdValue"),label:"Anomaly grade threshold"}),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_AnomaliesChart.AnomaliesChart,{showTitle:false,showSettings:false,startDateTime:anomalyData.previewStartTime,endDateTime:anomalyData.previewEndTime,anomalies:anomalyData.anomalyResult.anomalies,isLoading:anomalyData.isLoading,displayGrade:true,annotationData:[{dataValue:adValues.anomalyGradeThresholdValue}]}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_TriggerExpressions.default,{thresholdValue:adValues.anomalyConfidenceThresholdValue,thresholdEnum:adValues.anomalyConfidenceThresholdEnum,keyFieldName:"".concat(fieldPath,"anomalyDetector.anomalyConfidenceThresholdEnum"),valueFieldName:"".concat(fieldPath,"anomalyDetector.anomalyConfidenceThresholdValue"),label:"Anomaly confidence threshold"}),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_AnomaliesChart.AnomaliesChart,{showTitle:false,showSettings:false,startDateTime:anomalyData.previewStartTime,endDateTime:anomalyData.previewEndTime,anomalies:anomalyData.anomalyResult.anomalies,isLoading:anomalyData.isLoading,displayConfidence:true,annotationData:[{dataValue:adValues.anomalyConfidenceThresholdValue}]}))}else if(_lodash.default.isEmpty(detectorId)){return _react.default.createElement(_EmptyDetectorMessage.EmptyDetectorMessage,null)}else if(previewErrorType===_constants.PREVIEW_ERROR_TYPE.EXCEPTION||previewErrorType===_constants.PREVIEW_ERROR_TYPE.SPARSE_DATA){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_TriggerExpressions.default,{thresholdValue:adValues.anomalyGradeThresholdValue,thresholdEnum:adValues.anomalyGradeThresholdEnum,keyFieldName:"".concat(fieldPath,"anomalyDetector.anomalyGradeThresholdEnum"),valueFieldName:"".concat(fieldPath,"anomalyDetector.anomalyGradeThresholdValue"),label:"Anomaly grade threshold"}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_TriggerExpressions.default,{thresholdValue:adValues.anomalyConfidenceThresholdValue,thresholdEnum:adValues.anomalyConfidenceThresholdEnum,keyFieldName:"".concat(fieldPath,"anomalyDetector.anomalyConfidenceThresholdEnum"),valueFieldName:"".concat(fieldPath,"anomalyDetector.anomalyConfidenceThresholdValue"),label:"Anomaly confidence threshold"}))}else{return _react.default.createElement(_EmptyFeaturesMessage.EmptyFeaturesMessage,{detectorId:detectorId,isLoading:anomalyData.isLoading,error:anomalyData.error,isHCDetector:isHCDetector,previewErrorType:previewErrorType})}}}))}}]);return AnomalyDetectorTrigger}(_react.default.Component);exports.AnomalyDetectorTrigger=AnomalyDetectorTrigger},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AnomalyDetectorData=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _moment=_interopRequireDefault(__webpack_require__(8));var _CoreContext=__webpack_require__(68);var _constants=__webpack_require__(15);var _helpers=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AnomalyDetectorData=function(_React$Component){_inherits(AnomalyDetectorData,_React$Component);var _super=_createSuper(AnomalyDetectorData);function AnomalyDetectorData(props){var _this;_classCallCheck(this,AnomalyDetectorData);_this=_super.call(this,props);_this.state={anomalyResult:{anomalies:[],featureData:{}},detector:{featureAttributes:[]},previewStartTime:0,previewEndTime:0,isLoading:false,error:""};_this.getPreviewData=_this.getPreviewData.bind(_assertThisInitialized(_this));return _this}_createClass(AnomalyDetectorData,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.getPreviewData();case 2:case"end":return _context.stop()}}}),_callee,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentDidUpdate",value:function(){var _componentDidUpdate=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(prevProps){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(prevProps.detectorId!==this.props.detectorId)){_context2.next=3;break}_context2.next=3;return this.getPreviewData();case 3:case"end":return _context2.stop()}}}),_callee2,this)})));function componentDidUpdate(_x){return _componentDidUpdate.apply(this,arguments)}return componentDidUpdate}()},{key:"getPreviewErrorMessage",value:function getPreviewErrorMessage(err){if(typeof err==="string")return err;if(err){if(err.msg==="Bad Request"){return err.response||_constants.DEFAULT_PREVIEW_ERROR_MSG}if(err.msg)return err.msg}return _constants.DEFAULT_PREVIEW_ERROR_MSG}},{key:"getPreviewData",value:function(){var _getPreviewData=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var _this$props,detectorId,startTime,endTime,_this$context,httpClient,notifications,requestParams,response,_response$response,anomalyResult,detector;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$props=this.props,detectorId=_this$props.detectorId,startTime=_this$props.startTime,endTime=_this$props.endTime;_this$context=this.context,httpClient=_this$context.http,notifications=_this$context.notifications;this.setState({isLoading:true});if(detectorId){_context3.next=5;break}return _context3.abrupt("return");case 5:requestParams={startTime:startTime,endTime:endTime,preview:this.props.preview};_context3.prev=6;_context3.next=9;return httpClient.get("../api/alerting/detectors/".concat(detectorId,"/results"),{query:requestParams});case 9:response=_context3.sent;if(response.ok){_response$response=response.response,anomalyResult=_response$response.anomalyResult,detector=_response$response.detector;this.setState(_objectSpread(_objectSpread({},this.state),{},{anomalyResult:anomalyResult,detector:detector,previewStartTime:requestParams.startTime,previewEndTime:requestParams.endTime,isLoading:false}))}else{this.setState({isLoading:false,error:getPreviewErrorMessage(response.error)});(0,_helpers.backendErrorNotification)(notifications,"get","detector results",response.error)}_context3.next=17;break;case 13:_context3.prev=13;_context3.t0=_context3["catch"](6);console.error("Unable to get detectorResults",_context3.t0);this.setState({isLoading:false,error:_context3.t0});case 17:case"end":return _context3.stop()}}}),_callee3,this,[[6,13]])})));function getPreviewData(){return _getPreviewData.apply(this,arguments)}return getPreviewData}()},{key:"render",value:function render(){var render=this.props.render;return render(_objectSpread({},this.state))}}]);return AnomalyDetectorData}(_react.default.Component);exports.AnomalyDetectorData=AnomalyDetectorData;_defineProperty(AnomalyDetectorData,"contextType",_CoreContext.CoreContext);AnomalyDetectorData.defaultProps={preview:true,startTime:(0,_moment.default)().subtract(_constants.AD_PREVIEW_DAYS,"d").valueOf(),endTime:(0,_moment.default)().valueOf()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AnomaliesChart",{enumerable:true,get:function get(){return _AnomaliesChart.AnomaliesChart}});var _AnomaliesChart=__webpack_require__(538)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.prepareDataForChart=exports.MAX_DATA_POINTS=exports.AnomaliesChart=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _charts=__webpack_require__(14);var _ChartContainer=__webpack_require__(539);var _DelayedLoader=_interopRequireDefault(__webpack_require__(205));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MAX_DATA_POINTS=1e3;exports.MAX_DATA_POINTS=MAX_DATA_POINTS;var getAxisTitle=function getAxisTitle(displayGrade,displayConfidence){if(displayGrade&&displayConfidence){return"Anomaly grade / confidence"}return displayGrade?"Anomaly grade":"Anomaly confidence"};var prepareDataForChart=function prepareDataForChart(data){if(data&&data.length>MAX_DATA_POINTS){return sampleMaxAnomalyGrade(data)}else{return data}};exports.prepareDataForChart=prepareDataForChart;var calculateStep=function calculateStep(total){return Math.ceil(total/MAX_DATA_POINTS)};var findAnomalyWithMaxAnomalyGrade=function findAnomalyWithMaxAnomalyGrade(anomalies){var anomalyWithMaxGrade=anomalies[0];for(var i=1;i<anomalies.length;i++){if(anomalies[i].anomalyGrade>anomalyWithMaxGrade.anomalyGrade){anomalyWithMaxGrade=anomalies[i]}}return anomalyWithMaxGrade};var sampleMaxAnomalyGrade=function sampleMaxAnomalyGrade(data){var sortedData=data.sort((function(a,b){return a.plotTime>b.plotTime?1:-1}));var step=calculateStep(sortedData.length);var index=0;var sampledAnomalies=[];while(index<sortedData.length){var arr=sortedData.slice(index,index+step);sampledAnomalies.push(findAnomalyWithMaxAnomalyGrade(arr));index=index+step}return sampledAnomalies};var AnomaliesChart=function AnomaliesChart(props){var timeFormatter=(0,_charts.niceTimeFormatter)([props.startDateTime,props.endDateTime]);var preparedAnomalies=prepareDataForChart(props.anomalies);return _react.default.createElement(_DelayedLoader.default,{isLoading:props.isLoading},(function(showLoader){return _react.default.createElement(_react.default.Fragment,null,props.showTitle?_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,props.title)):null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement("div",null,_react.default.createElement(_ChartContainer.ChartContainer,{style:{height:"300px",width:"100%",opacity:showLoader?.2:1}},_react.default.createElement(_charts.Chart,null,props.showSettings?_react.default.createElement(_charts.Settings,{showLegend:true,legendPosition:_charts.Position.Bottom,showLegendDisplayValue:false}):null,_react.default.createElement(_charts.Axis,{id:"bottom",position:"bottom",tickFormat:timeFormatter}),_react.default.createElement(_charts.Axis,{id:"left",title:getAxisTitle(props.displayGrade,props.displayConfidence),position:"left",domain:{min:0,max:1}}),props.annotationData?_react.default.createElement(_charts.LineAnnotation,{annotationId:"anomalyAnnotation",domainType:"yDomain",dataValues:props.annotationData,style:{line:{strokeWidth:1.5,stroke:"#f00"}}}):null,props.displayGrade?_react.default.createElement(_charts.LineSeries,{id:"Anomaly grade",xScaleType:"time",yScaleType:"linear",xAccessor:"plotTime",yAccessors:["anomalyGrade"],data:preparedAnomalies}):null,props.displayConfidence?_react.default.createElement(_charts.LineSeries,{id:"Confidence",xScaleType:"time",yScaleType:"linear",xAccessor:"plotTime",yAccessors:["confidence"],data:preparedAnomalies}):null))))}))};exports.AnomaliesChart=AnomaliesChart;AnomaliesChart.defaultProps={isLoading:false,showTitle:true,showSettings:true,anomalies:undefined,title:"Sample preview for anomaly score"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ChartContainer=void 0;var _react=_interopRequireDefault(__webpack_require__(5));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ChartContainer=function ChartContainer(_ref){var children=_ref.children,style=_ref.style;return _react.default.createElement("div",{style:_objectSpread({borderRadius:"5px",padding:"10px",border:"1px solid #D9D9D9",height:"250px",width:"100%"},style)},children)};exports.ChartContainer=ChartContainer;ChartContainer.defaultPropTypes={style:{}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DelayedLoader=function(_React$Component){_inherits(DelayedLoader,_React$Component);var _super=_createSuper(DelayedLoader);function DelayedLoader(props){var _this;_classCallCheck(this,DelayedLoader);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"clearTimer",(function(){if(_this.timer){clearTimeout(_this.timer);_this.timer=null}}));_defineProperty(_assertThisInitialized(_this),"setTimer",(function(){_this.timer=setTimeout(_this.handleDisplayLoader,1e3)}));_defineProperty(_assertThisInitialized(_this),"handleDisplayLoader",(function(){return _this.setState({displayLoader:true})}));_this.state={displayLoader:false};if(typeof props.children!=="function"){throw new Error("Children should be function")}return _this}_createClass(DelayedLoader,[{key:"componentDidMount",value:function componentDidMount(){if(this.props.isLoading){this.setTimer()}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var isLoading=this.props.isLoading;if(isLoading!==prevProps.isLoading){if(isLoading){this.setTimer()}else{this.clearTimer();this.setState({displayLoader:false})}}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.clearTimer()}},{key:"render",value:function render(){var displayLoader=this.state.displayLoader;return this.props.children(displayLoader)}}]);return DelayedLoader}(_react.default.Component);var _default=DelayedLoader;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyFeaturesMessage=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getErrorMsg(errorType,err,isHCDetector){switch(errorType){case _constants.PREVIEW_ERROR_TYPE.NO_FEATURE:return"No features have been added to this anomaly detector. A feature is a metric that is used for anomaly detection. A detector can discover anomalies across one or more features.";case _constants.PREVIEW_ERROR_TYPE.NO_ENABLED_FEATURES:return"No features have been enabled in this anomaly detector. A feature is a metric that is used for anomaly detection. A detector can discover anomalies across one or more features.";default:console.log("We only deal with feature related error type in this page: "+errorType);return""}}var ActionUI=function ActionUI(_ref){var errorType=_ref.errorType,detectorId=_ref.detectorId;switch(errorType){case _constants.PREVIEW_ERROR_TYPE.NO_FEATURE:return _react.default.createElement(_eui.EuiButton,{"data-test-subj":"createButton",href:"".concat(_constants.OPENSEARCH_DASHBOARDS_AD_PLUGIN,"#/detectors/").concat(detectorId,"/features"),target:"_blank"},"Add Feature");case _constants.PREVIEW_ERROR_TYPE.NO_ENABLED_FEATURES:return _react.default.createElement(_eui.EuiButton,{"data-test-subj":"editButton",href:"".concat(_constants.OPENSEARCH_DASHBOARDS_AD_PLUGIN,"#/detectors/").concat(detectorId,"/features"),target:"_blank"},"Enable Feature");default:console.log("We only deal with feature related error type in this page: "+errorType);return _react.default.createElement(_eui.EuiText,{"data-test-subj":"callOut"},"''")}};var EmptyFeaturesMessage=function EmptyFeaturesMessage(props){var errorMsg=getErrorMsg(props.previewErrorType,props.error,props.isHCDetector);return _react.default.createElement("div",{style:_objectSpread({borderRadius:"5px",padding:"10px",border:"1px solid #D9D9D9",height:"250px",width:"100%"},props.containerStyle)},props.isLoading?_react.default.createElement(_eui.EuiEmptyPrompt,{style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiLoadingChart,{size:"xl"})}):_react.default.createElement(_eui.EuiEmptyPrompt,{"data-test-subj":"empty-prompt",style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiText,null,errorMsg),actions:[_react.default.createElement(ActionUI,{errorType:props.previewErrorType,detectorId:props.detectorId})]}))};exports.EmptyFeaturesMessage=EmptyFeaturesMessage;EmptyFeaturesMessage.defaultProps={detectorId:"",containerStyle:{}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyDetectorMessage=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmptyDetectorMessage=function EmptyDetectorMessage(props){return _react.default.createElement("div",{style:_objectSpread({borderRadius:"5px",padding:"10px",border:"1px solid #D9D9D9",height:"250px",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},props.containerStyle)},_react.default.createElement(_eui.EuiEmptyPrompt,{style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiText,null,"You must specify a detector.")}))};exports.EmptyDetectorMessage=EmptyDetectorMessage;EmptyDetectorMessage.defaultProps={containerStyle:{}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.QUERY_IDENTIFIERS=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _constants=__webpack_require__(15);var _constants2=__webpack_require__(30);var _validation=__webpack_require__(129);var _ConfigureActions=_interopRequireDefault(__webpack_require__(130));var _TriggerQuery=_interopRequireDefault(__webpack_require__(203));var _constants3=__webpack_require__(28);var _DocumentLevelTriggerExpression=_interopRequireDefault(__webpack_require__(544));var _helpers=__webpack_require__(22);var _monitorToFormik=_interopRequireDefault(__webpack_require__(67));var _searchRequests=__webpack_require__(85);var _helper=__webpack_require__(65);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MAX_TRIGGER_CONDITIONS=10;var defaultRowProps={label:"Trigger name",style:{paddingLeft:"10px"},isInvalid:_validate.isInvalid,error:_validate.hasError};var defaultInputProps={isInvalid:_validate.isInvalid};var selectFieldProps={validate:function validate(){}};var selectRowProps={label:"Severity level",style:{paddingLeft:"10px",marginTop:"0px"},isInvalid:_validate.isInvalid,error:_validate.hasError};var selectInputProps={options:_constants2.SEVERITY_OPTIONS};var QUERY_IDENTIFIERS={ID:"id=",NAME:"name=",TAG:"tag="};exports.QUERY_IDENTIFIERS=QUERY_IDENTIFIERS;var DefineDocumentLevelTrigger=function(_Component){_inherits(DefineDocumentLevelTrigger,_Component);var _super=_createSuper(DefineDocumentLevelTrigger);function DefineDocumentLevelTrigger(props){var _this;_classCallCheck(this,DefineDocumentLevelTrigger);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"onRunExecute",(function(){var triggers=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var _this$props=_this.props,httpClient=_this$props.httpClient,monitor=_this$props.monitor,notifications=_this$props.notifications;var formikValues=(0,_monitorToFormik.default)(monitor);var searchType=formikValues.searchType;var docLevelTriggers=triggers.map((function(trigger){return _defineProperty({},_constants3.TRIGGER_TYPE.DOC_LEVEL,trigger)}));var monitorToExecute=_lodash.default.cloneDeep(monitor);_lodash.default.set(monitorToExecute,"triggers",docLevelTriggers);switch(searchType){case _constants.SEARCH_TYPE.QUERY:case _constants.SEARCH_TYPE.GRAPH:var request=(0,_searchRequests.buildRequest)(formikValues);_lodash.default.set(monitorToExecute,"inputs[0]",request);break;default:console.log("Unsupported searchType found: ".concat(JSON.stringify(searchType)),searchType)}httpClient.post("../api/alerting/monitors/_execute",{body:JSON.stringify(monitorToExecute)}).then((function(resp){if(resp.ok){_this.setState({executeResponse:resp.resp})}else{console.error("err:",resp);(0,_helpers.backendErrorNotification)(notifications,"run","trigger",resp.resp)}})).catch((function(err){console.log("err:",err)}))}));_defineProperty(_assertThisInitialized(_this),"renderDocumentLevelTriggerGraph",(function(arrayHelpers,fieldPath,monitor,monitorValues,response,triggerValues){var triggerConditions=_lodash.default.get(triggerValues,"".concat(fieldPath,"triggerConditions"),[]);var selectedQueriesAndTags=triggerConditions.map((function(condition){return _lodash.default.get(condition,"query.queryName")}));var queries=_lodash.default.get(monitorValues,"queries",[]);var tagSelectOptions=[];var querySelectOptions=queries.map((function(query){query.tags.forEach((function(tag){var tagOption={label:tag,value:{queryName:tag,operator:"==",expression:"".concat(QUERY_IDENTIFIERS.TAG).concat(tag)},disabled:_lodash.default.includes(selectedQueriesAndTags,tag)};if(!_lodash.default.includes(tagSelectOptions,tagOption))tagSelectOptions.push(tagOption)}));return{label:query.queryName,value:_objectSpread(_objectSpread({},query),{},{expression:"".concat(QUERY_IDENTIFIERS.NAME).concat(query.queryName)}),disabled:_lodash.default.includes(selectedQueriesAndTags,query.queryName)}}));if(_lodash.default.isEmpty(triggerConditions))arrayHelpers.push(_lodash.default.cloneDeep(_constants3.FORMIK_INITIAL_TRIGGER_CONDITION_VALUES));return triggerConditions.map((function(triggerCondition,index){return _react.default.createElement("div",{key:"".concat(fieldPath,"triggerConditions.").concat(index),style:{paddingLeft:"10px"}},_react.default.createElement(_DocumentLevelTriggerExpression.default,{arrayHelpers:arrayHelpers,formFieldName:"".concat(fieldPath,"triggerConditions.").concat(index),index:index,querySelectOptions:querySelectOptions,tagSelectOptions:tagSelectOptions,values:triggerCondition}))}))}));_this.state={};return _this}_createClass(DefineDocumentLevelTrigger,[{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,edit=_this$props2.edit,triggerArrayHelpers=_this$props2.triggerArrayHelpers,monitor=_this$props2.monitor,monitorValues=_this$props2.monitorValues,onRun=_this$props2.onRun,setFlyout=_this$props2.setFlyout,triggers=_this$props2.triggers,triggerValues=_this$props2.triggerValues,isDarkMode=_this$props2.isDarkMode,triggerIndex=_this$props2.triggerIndex,httpClient=_this$props2.httpClient,notifications=_this$props2.notifications,notificationService=_this$props2.notificationService,plugins=_this$props2.plugins;var executeResponse=_lodash.default.get(this.state,"executeResponse",this.props.executeResponse);var context=(0,_helper.getTriggerContext)(executeResponse,monitor,triggerValues,triggerIndex);var fieldPath=triggerIndex!==undefined?"triggerDefinitions[".concat(triggerIndex,"]."):"";var isGraph=_lodash.default.get(monitorValues,"searchType")===_constants.SEARCH_TYPE.GRAPH;var response=_lodash.default.get(executeResponse,"input_results.results[0]");var error=_lodash.default.get(executeResponse,"error")||_lodash.default.get(executeResponse,"input_results.error");var triggerName=_lodash.default.get(triggerValues,"".concat(fieldPath,"name"),_constants2.DEFAULT_TRIGGER_NAME);var disableAddTriggerConditionButton=_lodash.default.get(triggerValues,"".concat(fieldPath,"triggerConditions"),[]).length>=MAX_TRIGGER_CONDITIONS;var triggerContent=isGraph?_react.default.createElement(_formik.FieldArray,{name:"".concat(fieldPath,"triggerConditions"),validateOnChange:true},(function(conditionsArrayHelpers){return _react.default.createElement("div",null,_react.default.createElement("div",{style:{paddingLeft:"10px",paddingTop:"10px"}},_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h4",null,"Trigger conditions")),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},"Triggers on documents that match the following conditions")),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_this2.renderDocumentLevelTriggerGraph(conditionsArrayHelpers,fieldPath,monitor,monitorValues,response,triggerValues),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return conditionsArrayHelpers.push(_lodash.default.cloneDeep(_constants3.FORMIK_INITIAL_TRIGGER_CONDITION_VALUES))},disabled:disableAddTriggerConditionButton,size:"xs","data-test-subj":"addTriggerConditionButton"},"+ Add condition"),(0,_helpers.inputLimitText)(_lodash.default.get(triggerValues,"".concat(fieldPath,"triggerConditions"),[]).length,MAX_TRIGGER_CONDITIONS,"trigger condition","trigger conditions",{paddingLeft:"10px"}))})):_react.default.createElement(_TriggerQuery.default,{context:context,error:error,executeResponse:executeResponse,onRun:_lodash.default.isEmpty(fieldPath)?onRun:this.onRunExecute,response:response,setFlyout:setFlyout,triggerValues:triggerValues,isDarkMode:isDarkMode,fieldPath:fieldPath,isAd:false});return _react.default.createElement(_eui.EuiAccordion,{id:triggerName,buttonContent:_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h1",null,_lodash.default.isEmpty(triggerName)?_constants2.DEFAULT_TRIGGER_NAME:triggerName)),initialIsOpen:edit?false:triggerIndex===0,extraAction:_react.default.createElement(_eui.EuiButton,{color:"danger",onClick:function onClick(){triggerArrayHelpers.remove(triggerIndex)},size:"s"},"Remove trigger"),style:{paddingBottom:"15px",paddingTop:"10px"}},_react.default.createElement("div",{style:{padding:"0px 10px",paddingTop:"10px"}},_react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(fieldPath,"name"),fieldProps:{validate:(0,_validation.validateTriggerName)(triggers,triggerValues,fieldPath)},formRow:true,rowProps:defaultRowProps,inputProps:defaultInputProps}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_FormControls.FormikSelect,{name:"".concat(fieldPath,"severity"),formRow:true,fieldProps:selectFieldProps,rowProps:selectRowProps,inputProps:selectInputProps}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),triggerContent,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},_react.default.createElement(_formik.FieldArray,{name:"".concat(fieldPath,"actions"),validateOnChange:true},(function(arrayHelpers){return _react.default.createElement(_ConfigureActions.default,{arrayHelpers:arrayHelpers,context:context,httpClient:httpClient,setFlyout:setFlyout,values:triggerValues,notifications:notifications,fieldPath:fieldPath,triggerIndex:triggerIndex,notificationService:notificationService,plugins:plugins})})))))}}]);return DefineDocumentLevelTrigger}(_react.Component);var _default=DefineDocumentLevelTrigger;exports.default=_default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _constants=__webpack_require__(30);var _validate=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var DocumentLevelTriggerExpression=function(_Component){_inherits(DocumentLevelTriggerExpression,_Component);var _super=_createSuper(DocumentLevelTriggerExpression);function DocumentLevelTriggerExpression(props){var _this;_classCallCheck(this,DocumentLevelTriggerExpression);_this=_super.call(this,props);_this.state={};return _this}_createClass(DocumentLevelTriggerExpression,[{key:"render",value:function render(){var _this$props=this.props,arrayHelpers=_this$props.arrayHelpers,formFieldName=_this$props.formFieldName,index=_this$props.index,_this$props$querySele=_this$props.querySelectOptions,querySelectOptions=_this$props$querySele===void 0?[]:_this$props$querySele,_this$props$tagSelect=_this$props.tagSelectOptions,tagSelectOptions=_this$props$tagSelect===void 0?[]:_this$props$tagSelect,values=_this$props.values;var isFirstCondition=index===0;if(index>0)values["andOrCondition"]=values.andOrCondition||_constants.AND_OR_CONDITION_OPTIONS[0].value;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"m"},!isFirstCondition&&_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:"100px"}},_react.default.createElement(_FormControls.FormikSelect,{name:"".concat(formFieldName,".andOrCondition"),formRow:true,rowProps:{hasEmptyLabelSpace:true},inputProps:{onChange:function onChange(e,field){return field.onChange(e)},options:_constants.AND_OR_CONDITION_OPTIONS,"data-test-subj":"documentLevelTriggerExpression_andOr_".concat(formFieldName)}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:"300px"}},_react.default.createElement(_FormControls.FormikComboBox,{name:"".concat(formFieldName,".query"),formRow:true,fieldProps:{validate:_validate.required},rowProps:{label:isFirstCondition?"Specify queries or tags":undefined,hasEmptyLabelSpace:!isFirstCondition,isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Select another query or tag",onChange:function onChange(e,field,form){return form.setFieldValue(field.name,e[0].value)},onBlur:function onBlur(e,field,form){return form.setFieldTouched(field.name,true)},isClearable:false,singleSelection:{asPlainText:true},options:[{label:"Queries",options:querySelectOptions},{label:"Tags",options:tagSelectOptions}],selectedOptions:!_lodash.default.isEmpty(values.query)&&!_lodash.default.isEmpty(values.query.queryName)?[{value:values.query.queryName,label:values.query.queryName,query:values.query}]:undefined,"data-test-subj":"documentLevelTriggerExpression_query_".concat(formFieldName)}})),!isFirstCondition&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{hasEmptyLabelSpace:true},_react.default.createElement(_eui.EuiButton,{color:"danger",onClick:function onClick(){return arrayHelpers.remove(index)},"data-test-subj":"documentLevelTriggerExpression_removeConditionButton_".concat(formFieldName)},"Remove condition"))))}}]);return DocumentLevelTriggerExpression}(_react.Component);var _default=DocumentLevelTriggerExpression;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketLevelTriggerToFormik=bucketLevelTriggerToFormik;exports.convertToTriggerCondition=convertToTriggerCondition;exports.documentLevelTriggerToFormik=documentLevelTriggerToFormik;exports.getBucketLevelTriggerConditions=getBucketLevelTriggerConditions;exports.getExecutionPolicyActions=getExecutionPolicyActions;exports.getWhereFilters=getWhereFilters;exports.queryLevelTriggerToFormik=queryLevelTriggerToFormik;exports.segmentArray=segmentArray;exports.triggerDefinitionToFormik=triggerDefinitionToFormik;exports.triggerDefinitionsToFormik=triggerDefinitionsToFormik;exports.triggerToFormik=triggerToFormik;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(28);var _constants2=__webpack_require__(15);var _Message=__webpack_require__(128);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function triggerToFormik(trigger,monitor){return _lodash.default.isArray(trigger)?triggerDefinitionsToFormik(trigger,monitor):triggerDefinitionToFormik(trigger,monitor)}function triggerDefinitionsToFormik(triggers,monitor){var triggerDefinitions=triggers.map((function(trigger){return triggerDefinitionToFormik(trigger,monitor)}));return{triggerDefinitions:_lodash.default.orderBy(triggerDefinitions,(function(trigger){return trigger.name}))}}function triggerDefinitionToFormik(trigger,monitor){var monitorType=_lodash.default.get(monitor,"monitor_type",_constants2.MONITOR_TYPE.QUERY_LEVEL);switch(monitorType){case _constants2.MONITOR_TYPE.BUCKET_LEVEL:return bucketLevelTriggerToFormik(trigger,monitor);case _constants2.MONITOR_TYPE.DOC_LEVEL:return documentLevelTriggerToFormik(trigger,monitor);default:return queryLevelTriggerToFormik(trigger,monitor)}}function queryLevelTriggerToFormik(trigger,monitor){var _trigger$query_level_=trigger.query_level_trigger,id=_trigger$query_level_.id,name=_trigger$query_level_.name,severity=_trigger$query_level_.severity,script=_trigger$query_level_.condition.script,actions=_trigger$query_level_.actions,minTimeBetweenExecutions=_trigger$query_level_.min_time_between_executions,rollingWindowSize=_trigger$query_level_.rolling_window_size;var triggersUiMetadata=_lodash.default.get(monitor,"ui_metadata.triggers",{});var thresholdEnum=_lodash.default.get(triggersUiMetadata[name],"enum",_constants.FORMIK_INITIAL_TRIGGER_VALUES.thresholdEnum);var thresholdValue=_lodash.default.get(triggersUiMetadata[name],"value",_constants.FORMIK_INITIAL_TRIGGER_VALUES.thresholdValue);var adTriggerMetadata=_lodash.default.get(triggersUiMetadata[name],"adTriggerMetadata",{});var triggerType=_lodash.default.get(adTriggerMetadata,"triggerType",_constants.TRIGGER_TYPE.ALERT_TRIGGER);var anomalyConfidenceThresholdValue=_lodash.default.get(adTriggerMetadata,"anomalyConfidence.value",_constants.FORMIK_INITIAL_TRIGGER_VALUES.anomalyDetector.anomalyConfidenceThresholdValue);var anomalyConfidenceThresholdEnum=_lodash.default.get(adTriggerMetadata,"anomalyConfidence.enum",_constants.FORMIK_INITIAL_TRIGGER_VALUES.anomalyDetector.anomalyConfidenceThresholdEnum);var anomalyGradeThresholdValue=_lodash.default.get(adTriggerMetadata,"anomalyGrade.value",_constants.FORMIK_INITIAL_TRIGGER_VALUES.anomalyDetector.anomalyGradeThresholdValue);var anomalyGradeThresholdEnum=_lodash.default.get(adTriggerMetadata,"anomalyGrade.enum",_constants.FORMIK_INITIAL_TRIGGER_VALUES.anomalyDetector.anomalyGradeThresholdEnum);return _objectSpread(_objectSpread({},_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_TRIGGER_VALUES)),{},{id:id,name:name,severity:severity,script:script,actions:actions,minTimeBetweenExecutions:minTimeBetweenExecutions,rollingWindowSize:rollingWindowSize,thresholdEnum:thresholdEnum,thresholdValue:thresholdValue,anomalyDetector:{triggerType:triggerType,anomalyGradeThresholdValue:anomalyGradeThresholdValue,anomalyGradeThresholdEnum:anomalyGradeThresholdEnum,anomalyConfidenceThresholdValue:anomalyConfidenceThresholdValue,anomalyConfidenceThresholdEnum:anomalyConfidenceThresholdEnum}})}function bucketLevelTriggerToFormik(trigger,monitor){var _trigger$bucket_level=trigger.bucket_level_trigger,id=_trigger$bucket_level.id,name=_trigger$bucket_level.name,severity=_trigger$bucket_level.severity,condition=_trigger$bucket_level.condition,_trigger$bucket_level2=_trigger$bucket_level.condition,script=_trigger$bucket_level2.script,composite_agg_filter=_trigger$bucket_level2.composite_agg_filter,actions=_trigger$bucket_level.actions,minTimeBetweenExecutions=_trigger$bucket_level.min_time_between_executions,rollingWindowSize=_trigger$bucket_level.rolling_window_size;var bucketSelector=JSON.stringify(condition,null,4);var triggerConditions=getBucketLevelTriggerConditions(condition);var whereFilters=getWhereFilters(composite_agg_filter);var triggersUiMetadata=_lodash.default.get(monitor,"ui_metadata.triggers",{});var thresholdEnum=_lodash.default.get(triggersUiMetadata[name],"enum",_constants.FORMIK_INITIAL_TRIGGER_VALUES.thresholdEnum);var thresholdValue=_lodash.default.get(triggersUiMetadata,"value",_constants.FORMIK_INITIAL_TRIGGER_VALUES.thresholdValue);var adTriggerMetadata=_lodash.default.get(triggersUiMetadata[name],"adTriggerMetadata",{});var triggerType=_lodash.default.get(adTriggerMetadata,"triggerType",_constants.TRIGGER_TYPE.ALERT_TRIGGER);var anomalyConfidenceThresholdValue=_lodash.default.get(adTriggerMetadata,"anomalyConfidence.value",_constants.FORMIK_INITIAL_TRIGGER_VALUES.anomalyDetector.anomalyConfidenceThresholdValue);var anomalyConfidenceThresholdEnum=_lodash.default.get(adTriggerMetadata,"anomalyConfidence.enum",_constants.FORMIK_INITIAL_TRIGGER_VALUES.anomalyDetector.anomalyConfidenceThresholdEnum);var anomalyGradeThresholdValue=_lodash.default.get(adTriggerMetadata,"anomalyGrade.value",_constants.FORMIK_INITIAL_TRIGGER_VALUES.anomalyDetector.anomalyGradeThresholdValue);var anomalyGradeThresholdEnum=_lodash.default.get(adTriggerMetadata,"anomalyGrade.enum",_constants.FORMIK_INITIAL_TRIGGER_VALUES.anomalyDetector.anomalyGradeThresholdEnum);return _objectSpread(_objectSpread({},_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_TRIGGER_VALUES)),{},{id:id,name:name,severity:severity,script:script,bucketSelector:bucketSelector,actions:getExecutionPolicyActions(actions),triggerConditions:triggerConditions,minTimeBetweenExecutions:minTimeBetweenExecutions,rollingWindowSize:rollingWindowSize,thresholdEnum:thresholdEnum,thresholdValue:thresholdValue,filters:whereFilters,anomalyDetector:{triggerType:triggerType,anomalyGradeThresholdValue:anomalyGradeThresholdValue,anomalyGradeThresholdEnum:anomalyGradeThresholdEnum,anomalyConfidenceThresholdValue:anomalyConfidenceThresholdValue,anomalyConfidenceThresholdEnum:anomalyConfidenceThresholdEnum}})}function documentLevelTriggerToFormik(trigger,monitor){var _trigger$TRIGGER_TYPE=trigger[_constants.TRIGGER_TYPE.DOC_LEVEL],id=_trigger$TRIGGER_TYPE.id,name=_trigger$TRIGGER_TYPE.name,severity=_trigger$TRIGGER_TYPE.severity,script=_trigger$TRIGGER_TYPE.condition.script,actions=_trigger$TRIGGER_TYPE.actions,minTimeBetweenExecutions=_trigger$TRIGGER_TYPE.minTimeBetweenExecutions,rollingWindowSize=_trigger$TRIGGER_TYPE.rollingWindowSize;var triggerUiMetadata=_lodash.default.get(monitor,"ui_metadata.triggers[".concat(name,"]"));return _objectSpread(_objectSpread({},_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_TRIGGER_VALUES)),{},{id:id,name:name,severity:severity,script:script,actions:getExecutionPolicyActions(actions),minTimeBetweenExecutions:minTimeBetweenExecutions,rollingWindowSize:rollingWindowSize,triggerConditions:triggerUiMetadata})}function getExecutionPolicyActions(actions){var executionPolicyPath="action_execution_policy.action_execution_scope";return _lodash.default.cloneDeep(actions).map((function(action){var actionExecutionPolicy=_lodash.default.get(action,"".concat(executionPolicyPath));switch(_lodash.default.keys(actionExecutionPolicy)[0]){case _Message.NOTIFY_OPTIONS_VALUES.PER_ALERT:var actionableAlerts=_lodash.default.get(action,"".concat(executionPolicyPath,".").concat(_Message.NOTIFY_OPTIONS_VALUES.PER_ALERT,".actionable_alerts"),[]);return _lodash.default.set(action,"".concat(executionPolicyPath,".").concat(_Message.NOTIFY_OPTIONS_VALUES.PER_ALERT,".actionable_alerts"),actionableAlerts.map((function(entry){return{value:entry,label:_Message.ACTIONABLE_ALERTS_OPTIONS_LABELS[entry]}})));case _Message.NOTIFY_OPTIONS_VALUES.PER_EXECUTION:return _lodash.default.set(action,"".concat(executionPolicyPath),_Message.NOTIFY_OPTIONS_VALUES.PER_EXECUTION)}}))}function getBucketLevelTriggerConditions(condition){return segmentArray(condition.script.source,4).map((function(conditionArray){return convertToTriggerCondition(conditionArray,condition)}))}function convertToTriggerCondition(conditionArray,condition){var buckets_path=condition.buckets_path,gap_policy=condition.gap_policy,parent_bucket_path=condition.parent_bucket_path,script=condition.script;var relationalEnumOptions={">":"ABOVE","<":"BELOW","==":"EXACTLY"};var logicalEnumOptions={"&&":"AND","||":"OR"};var queryMetric;var thresholdEnum;var thresholdValue;var andOrCondition;if(conditionArray.length===4){andOrCondition=logicalEnumOptions[conditionArray[0]];queryMetric=conditionArray[1].replace(/params\./g,"");thresholdEnum=relationalEnumOptions[conditionArray[2]];thresholdValue=conditionArray[3]}else{andOrCondition=_constants.FORMIK_INITIAL_TRIGGER_CONDITION_VALUES.andOrCondition;queryMetric=conditionArray[0].replace(/params\./g,"");thresholdEnum=relationalEnumOptions[conditionArray[1]];thresholdValue=conditionArray[2]}return _objectSpread(_objectSpread({},_lodash.default.cloneDeep(_constants.FORMIK_INITIAL_TRIGGER_CONDITION_VALUES)),{},{buckets_path:buckets_path,parent_bucket_path:parent_bucket_path,script:script,gap_policy:gap_policy,queryMetric:queryMetric,thresholdEnum:thresholdEnum,thresholdValue:thresholdValue,andOrCondition:andOrCondition})}function getWhereFilters(composite_agg_filter){if(composite_agg_filter===undefined)return[];var fields=_lodash.default.keys(composite_agg_filter);var filters=[];fields.forEach((function(field){var filter=composite_agg_filter[field];var operators=_lodash.default.keys(filter);operators.forEach((function(operator){var fieldValue=filter[operator];var filterItem={fieldName:[{label:field,type:"keyword"}],operator:operator,fieldValue:fieldValue};filters.push(filterItem)}))}));return filters}function segmentArray(scriptSource,segmentSize){var conditions=scriptSource.split(/\s/);var output=[];if(conditions.length>0)output.push(conditions.slice(0,segmentSize-1));for(var i=3;i<conditions.length;i+=segmentSize){var segment=conditions.slice(i,i+segmentSize);output.push(segment)}return output}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _queryString=_interopRequireDefault(__webpack_require__(32));var _eui=__webpack_require__(6);var _CreateMonitor=_interopRequireDefault(__webpack_require__(164));var _MonitorOverview=_interopRequireDefault(__webpack_require__(547));var _MonitorHistory=_interopRequireDefault(__webpack_require__(551));var _Dashboard=_interopRequireDefault(__webpack_require__(134));var _Triggers=_interopRequireDefault(__webpack_require__(562));var _constants=__webpack_require__(15);var _helpers=__webpack_require__(563);var _helpers2=__webpack_require__(22);var _Triggers2=__webpack_require__(132);var _formikToMonitor=__webpack_require__(66);var _monitorToFormik=_interopRequireDefault(__webpack_require__(67));var _FindingsDashboard=_interopRequireDefault(__webpack_require__(71));var _findingsUtils=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MonitorDetails=function(_Component){_inherits(MonitorDetails,_Component);var _super=_createSuper(MonitorDetails);function MonitorDetails(props){var _this;_classCallCheck(this,MonitorDetails);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"getDetector",(function(id){var _this$props=_this.props,httpClient=_this$props.httpClient,notifications=_this$props.notifications;httpClient.get("../api/alerting/detectors/".concat(id)).then((function(resp){var ok=resp.ok,detector=resp.detector,detectorVersion=resp.version,seqNo=resp.seqNo,primaryTerm=resp.primaryTerm;if(ok){_this.setState({detector:detector,detectorVersion:detectorVersion})}else{console.log("can not get detector",id)}})).catch((function(err){console.log("error while getting detector",err)}))}));_defineProperty(_assertThisInitialized(_this),"getMonitor",(function(id){var httpClient=_this.props.httpClient;httpClient.get("../api/alerting/monitors/".concat(id)).then((function(resp){var ok=resp.ok,monitor=resp.resp,monitorVersion=resp.version,dayCount=resp.dayCount,activeCount=resp.activeCount,ifSeqNo=resp.ifSeqNo,ifPrimaryTerm=resp.ifPrimaryTerm;if(ok){_this.setState({ifSeqNo:ifSeqNo,ifPrimaryTerm:ifPrimaryTerm,monitor:(0,_helpers.migrateTriggerMetadata)(monitor),monitorVersion:monitorVersion,dayCount:dayCount,activeCount:activeCount,loading:false,error:null});var adId=_lodash.default.get(monitor,_constants.MONITOR_INPUT_DETECTOR_ID,undefined);if(adId){_this.getDetector(adId)}_this.setState({tabContent:_this.renderAlertsTable()})}else{_this.props.history.push("/monitors")}})).catch((function(err){console.log("err",err)}))}));_defineProperty(_assertThisInitialized(_this),"updateMonitor",(function(update){var actionKeywords=arguments.length>1&&arguments[1]!==undefined?arguments[1]:["update","monitor"];var _this$props2=_this.props,monitorId=_this$props2.match.params.monitorId,httpClient=_this$props2.httpClient,notifications=_this$props2.notifications;var _this$state=_this.state,monitor=_this$state.monitor,ifSeqNo=_this$state.ifSeqNo,ifPrimaryTerm=_this$state.ifPrimaryTerm;var query={ifSeqNo:ifSeqNo,ifPrimaryTerm:ifPrimaryTerm};switch(monitor.monitor_type){case _constants.MONITOR_TYPE.DOC_LEVEL:query={};break}_this.setState({updating:true});return httpClient.put("../api/alerting/monitors/".concat(monitorId),{query:_objectSpread({},query),body:JSON.stringify(_objectSpread(_objectSpread({},monitor),update))}).then((function(resp){if(resp.ok){var monitorVersion=resp.version;_this.setState({monitorVersion:monitorVersion,updating:false})}else{console.error("Failed to update the monitor:",resp);_helpers2.backendErrorNotification.apply(void 0,[notifications].concat(_toConsumableArray(actionKeywords),[resp.resp]));_this.setState({updating:false})}return resp})).catch((function(err){console.log("err",err);_this.setState({updating:false});return err}))}));_defineProperty(_assertThisInitialized(_this),"onCreateTrigger",(function(){_this.props.history.push(_objectSpread(_objectSpread({},_this.props.location),{},{search:"?action=".concat(_constants.TRIGGER_ACTIONS.CREATE_TRIGGER)}))}));_defineProperty(_assertThisInitialized(_this),"onCloseTrigger",(function(){_this.props.history.push(_objectSpread(_objectSpread({},_this.props.location),{},{search:""}));_this.setState({triggerToEdit:null})}));_defineProperty(_assertThisInitialized(_this),"onEditTrigger",(function(trigger){_this.setState({triggerToEdit:trigger});_this.props.history.push(_objectSpread(_objectSpread({},_this.props.location),{},{search:"?action=".concat(_constants.TRIGGER_ACTIONS.UPDATE_TRIGGER)}))}));_defineProperty(_assertThisInitialized(_this),"renderNoTriggersCallOut",(function(){var _this$state2=_this.state,monitor=_this$state2.monitor,editMonitor=_this$state2.editMonitor;if(!monitor.triggers.length){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement("span",null,"This monitor has no triggers configured. To receive alerts from this monitor you must first create a trigger."," ",_react.default.createElement(_eui.EuiLink,{style:{textDecoration:"underline"},onClick:editMonitor},"Edit monitor")),iconType:"alert",size:"s"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))}return null}));_defineProperty(_assertThisInitialized(_this),"showJsonModal",(function(){_this.setState({isJsonModalOpen:true})}));_defineProperty(_assertThisInitialized(_this),"closeJsonModal",(function(){_this.setState({isJsonModalOpen:false})}));_defineProperty(_assertThisInitialized(_this),"getJsonForExport",(function(monitor){var monitorValues=(0,_monitorToFormik.default)(monitor);var triggers=_lodash.default.get(monitor,"triggers",[]);return _objectSpread(_objectSpread({},(0,_formikToMonitor.formikToMonitor)(monitorValues)),{},{triggers:triggers})}));_defineProperty(_assertThisInitialized(_this),"renderAlertsTable",(function(){var _this$state3=_this.state,monitor=_this$state3.monitor,editMonitor=_this$state3.editMonitor;var _this$props3=_this.props,location=_this$props3.location,monitorId=_this$props3.match.params.monitorId,history=_this$props3.history,httpClient=_this$props3.httpClient,notifications=_this$props3.notifications,setFlyout=_this$props3.setFlyout;var detectorId=_lodash.default.get(monitor,_constants.MONITOR_INPUT_DETECTOR_ID,undefined);var groupBy=_lodash.default.get(monitor,_constants.MONITOR_GROUP_BY);return _react.default.createElement(_Dashboard.default,{monitorIds:[monitorId],detectorIds:detectorId?[detectorId]:[],onCreateTrigger:editMonitor,httpClient:httpClient,location:location,history:history,notifications:notifications,monitorType:monitor.monitor_type,perAlertView:true,groupBy:groupBy,setFlyout:setFlyout})}));_defineProperty(_assertThisInitialized(_this),"renderFindingsTable",(function(){var _this$props4=_this.props,httpClient=_this$props4.httpClient,history=_this$props4.history,location=_this$props4.location,notifications=_this$props4.notifications,monitorId=_this$props4.match.params.monitorId;return _react.default.createElement(_FindingsDashboard.default,{monitorId:monitorId,httpClient:httpClient,location:location,history:history,notifications:notifications})}));_defineProperty(_assertThisInitialized(_this),"renderTableTabs",(function(){var tabId=_this.state.tabId;var tabs=[_objectSpread(_objectSpread({},_findingsUtils.TABLE_TAB_IDS.ALERTS),{},{content:_this.renderAlertsTable()}),_objectSpread(_objectSpread({},_findingsUtils.TABLE_TAB_IDS.FINDINGS),{},{content:_this.renderFindingsTable()})];return tabs.map((function(tab,index){return _react.default.createElement(_eui.EuiTab,{key:"".concat(tab.id).concat(index),isSelected:tab.id===tabId,onClick:function onClick(){_this.setState({tabId:tab.id,tabContent:tab.content})},style:{paddingTop:"0px"}},tab.name)}))}));_this.state={monitor:null,monitorVersion:0,ifSeqNo:0,ifPrimaryTerm:0,dayCount:0,activeCount:0,loading:true,updating:false,error:null,triggerToEdit:null,editMonitor:function editMonitor(){_this.props.history.push(_objectSpread(_objectSpread({},_this.props.location),{},{search:"?action=".concat(_constants.MONITOR_ACTIONS.UPDATE_MONITOR)}))},isJsonModalOpen:false,tabId:_findingsUtils.TABLE_TAB_IDS.ALERTS.id};return _this}_createClass(MonitorDetails,[{key:"componentDidMount",value:function componentDidMount(){this.getMonitor(this.props.match.params.monitorId)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){if(this.state.monitorVersion!==prevState.monitorVersion&&!prevState.loading){this.getMonitor(this.props.match.params.monitorId)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.setFlyout(null)}},{key:"render",value:function render(){var _this2=this;var _this$state4=this.state,monitor=_this$state4.monitor,detector=_this$state4.detector,monitorVersion=_this$state4.monitorVersion,activeCount=_this$state4.activeCount,updating=_this$state4.updating,loading=_this$state4.loading,editMonitor=_this$state4.editMonitor,isJsonModalOpen=_this$state4.isJsonModalOpen;var _this$props5=this.props,location=_this$props5.location,monitorId=_this$props5.match.params.monitorId,httpClient=_this$props5.httpClient,notifications=_this$props5.notifications,isDarkMode=_this$props5.isDarkMode,setFlyout=_this$props5.setFlyout;var _queryString$parse=_queryString.default.parse(location.search),action=_queryString$parse.action;var updatingMonitor=action===_constants.MONITOR_ACTIONS.UPDATE_MONITOR;var detectorId=_lodash.default.get(monitor,_constants.MONITOR_INPUT_DETECTOR_ID,undefined);if(loading){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center",style:{marginTop:"100px"}},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"}))}if(updatingMonitor){return _react.default.createElement(_CreateMonitor.default,_extends({edit:true,updateMonitor:this.updateMonitor,monitorToEdit:monitor,detectorId:detectorId,notifications:notifications,setFlyout:setFlyout},this.props))}var displayTableTabs=monitor.monitor_type===_constants.MONITOR_TYPE.DOC_LEVEL;return _react.default.createElement("div",{style:{padding:"25px 50px"}},this.renderNoTriggersCallOut(),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"l",style:{whiteSpace:"nowrap",overflow:"hidden"}},_react.default.createElement("h1",{style:{whiteSpace:"nowrap",maxWidth:"90%",textOverflow:"ellipsis",overflow:"hidden"}},monitor.name))),_react.default.createElement(_eui.EuiFlexItem,{style:{paddingBottom:"5px",marginLeft:"0px"}},monitor.enabled?_react.default.createElement(_eui.EuiHealth,{color:"success"},"Enabled"):_react.default.createElement(_eui.EuiHealth,{color:"subdued"},"Disabled")),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{onClick:editMonitor},"Edit")),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{isLoading:updating,onClick:function onClick(){return _this2.updateMonitor({enabled:!monitor.enabled})}},monitor.enabled?"Disable":"Enable")),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{onClick:this.showJsonModal},"Export as JSON"))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_MonitorOverview.default,{monitor:monitor,monitorId:monitorId,monitorVersion:monitorVersion,activeCount:activeCount,detector:detector,detectorId:detectorId}),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_Triggers.default,{monitor:monitor,updateMonitor:this.updateMonitor,onEditTrigger:this.onEditTrigger,onCreateTrigger:this.onCreateTrigger}),_react.default.createElement("div",{className:"eui-hideFor--xs eui-hideFor--s eui-hideFor--m"},_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_MonitorHistory.default,{httpClient:httpClient,monitorId:monitorId,onShowTrigger:editMonitor,triggers:(0,_Triggers2.getUnwrappedTriggers)(monitor),isDarkMode:isDarkMode,notifications:notifications,monitorType:monitor.monitor_type})),_react.default.createElement(_eui.EuiSpacer,null),displayTableTabs?_react.default.createElement("div",null,_react.default.createElement(_eui.EuiTabs,null,this.renderTableTabs()),this.state.tabContent):this.renderAlertsTable(),isJsonModalOpen&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:this.closeJsonModal,style:{padding:"5px 30px"}},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,"View JSON of "+monitor.name," ")),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiCodeBlock,{language:"json",fontSize:"m",paddingSize:"m",overflowHeight:600,inline:false,isCopyable:true},JSON.stringify(this.getJsonForExport(monitor),null,3))),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:this.closeJsonModal},"Close")))))}}]);return MonitorDetails}(_react.Component);exports.default=MonitorDetails;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _MonitorOverview=_interopRequireDefault(__webpack_require__(548));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_MonitorOverview.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _index=_interopRequireDefault(__webpack_require__(29));var _index2=_interopRequireDefault(__webpack_require__(195));var _getOverviewStats=_interopRequireDefault(__webpack_require__(206));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var MonitorOverview=function MonitorOverview(_ref){var monitor=_ref.monitor,monitorId=_ref.monitorId,monitorVersion=_ref.monitorVersion,activeCount=_ref.activeCount,detector=_ref.detector,detectorId=_ref.detectorId;var items=(0,_getOverviewStats.default)(monitor,monitorId,monitorVersion,activeCount,detector,detectorId);return _react.default.createElement(_index.default,{title:"Overview",titleSize:"s"},_react.default.createElement(_eui.EuiFlexGrid,{columns:4},items.map((function(props){return _react.default.createElement(_index2.default,_extends({key:props.header},props))}))))};var _default=MonitorOverview;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=getScheduleFromMonitor;var _lodash=_interopRequireDefault(__webpack_require__(7));var _momentTimezone=_interopRequireDefault(__webpack_require__(9));var _constants=__webpack_require__(550);var _constants2=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getScheduleFromMonitor(monitor){try{var uiMetadata=_lodash.default.get(monitor,"ui_metadata");if(uiMetadata){var _$get=_lodash.default.get(uiMetadata,"schedule",{}),frequency=_$get.frequency,_$get$period=_$get.period,interval=_$get$period.interval,unit=_$get$period.unit,daily=_$get.daily,weekly=_$get.weekly,day=_$get.monthly.day,cronExpression=_$get.cronExpression,timezone=_$get.timezone;if(frequency==="interval"){return"Every ".concat(interval," ").concat(unit.toLowerCase())}if(frequency==="daily"){return"Every day around ".concat(_momentTimezone.default.tz(timezone).hours(daily).minutes(0).format("h:mm a z"))}if(frequency==="weekly"){var daysOfWeek=Object.entries(weekly).filter((function(_ref){var _ref2=_slicedToArray(_ref,2),day=_ref2[0],checked=_ref2[1];return checked})).map((function(_ref3){var _ref4=_slicedToArray(_ref3,1),day=_ref4[0];return day}));var fullDays=_lodash.default.intersectionWith(_constants.weekdays,daysOfWeek,(function(arrVal,otherVal){return arrVal.abbr===otherVal})).map((function(weekday){return weekday.full})).join(", ");return"Every ".concat(fullDays," around ").concat(_momentTimezone.default.tz(timezone).hours(daily).minutes(0).format("h:mm a z"))}if(frequency==="monthly"){return"Every month on the ".concat((0,_momentTimezone.default)(day,"DD").format("Do")," around ").concat(_momentTimezone.default.tz(timezone).hours(daily).minutes(0).format("h:mm a z"))}if(frequency==="cronExpression"){return cronExpression}}var period=_lodash.default.get(monitor,"schedule.period");if(period){return"Every ".concat(period.interval," ").concat(period.unit.toLowerCase())}var cron=_lodash.default.get(monitor,"schedule.cron");if(cron){return"".concat(cron.expression," ").concat(cron.timezone)}}catch(err){return _constants2.DEFAULT_EMPTY_DATA}return _constants2.DEFAULT_EMPTY_DATA}module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.weekdays=void 0;var weekdays=[{abbr:"mon",full:"Monday"},{abbr:"tue",full:"Tuesday"},{abbr:"wed",full:"Wednesday"},{abbr:"thu",full:"Thursday"},{abbr:"fri",full:"Friday"},{abbr:"sat",full:"Saturday"},{abbr:"sun",full:"Sunday"}];exports.weekdays=weekdays},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _MonitorHistory=_interopRequireDefault(__webpack_require__(552));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_MonitorHistory.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=__webpack_require__(7);var _eui=__webpack_require__(6);var _moment=_interopRequireDefault(__webpack_require__(8));var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _MonitorHistory=__webpack_require__(553);var _timeUtils=__webpack_require__(207);var _DateRangePicker=_interopRequireDefault(__webpack_require__(560));var _chartHelpers=__webpack_require__(561);var HistoryConstants=_interopRequireWildcard(__webpack_require__(54));var _constants2=__webpack_require__(0);var _helpers=__webpack_require__(22);var _constants3=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MonitorHistory=function(_PureComponent){_inherits(MonitorHistory,_PureComponent);var _super=_createSuper(MonitorHistory);function MonitorHistory(props){var _this;_classCallCheck(this,MonitorHistory);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"handleRangeChange",(function(startTime,endTime){_this.setState({poiTimeWindow:{startTime:startTime,endTime:endTime}},(function(){return _this.getPOIData()}))}));_defineProperty(_assertThisInitialized(_this),"generatePlotData",(function(alertsData){var monitorType=_this.props.monitorType;var _this$state$timeSerie=_this.state.timeSeriesWindow,windowStartTime=_this$state$timeSerie.startTime,windowEndTime=_this$state$timeSerie.endTime;if(alertsData.length===0){return[{x0:windowStartTime,x:windowEndTime,state:HistoryConstants.TIME_SERIES_ALERT_STATE.NO_ALERTS,meta:{startTime:windowStartTime,endTime:windowEndTime}}]}var _alertsData=_toArray(alertsData),firstAlert=_alertsData[0],restAlerts=_alertsData.slice(1);var firstAlertDataPoints=(0,_chartHelpers.generateFirstDataPoints)({startTime:(0,_lodash.get)(firstAlert,"_source.start_time"),acknowledgedTime:(0,_lodash.get)(firstAlert,"_source.acknowledged_time"),endTime:(0,_lodash.get)(firstAlert,"_source.end_time"),state:(0,_lodash.get)(firstAlert,"_source.state"),windowStartTime:windowStartTime,windowEndTime:windowEndTime,errorsCount:(0,_lodash.get)(firstAlert,"_source.alert_history.length",0)});var lastEndTime=(0,_lodash.get)(firstAlert,"_source.end_time");var restAlertsDataPoints=restAlerts.reduce((function(acc,currentAlert){var _currentAlert$_source=currentAlert._source,startTime=_currentAlert$_source.start_time,acknowledgedTime=_currentAlert$_source.acknowledged_time,currentEndTime=_currentAlert$_source.end_time,state=_currentAlert$_source.state,_currentAlert$_source2=_currentAlert$_source.alert_history,alert_history=_currentAlert$_source2===void 0?[]:_currentAlert$_source2;acc.push.apply(acc,_toConsumableArray((0,_chartHelpers.dataPointsGenerator)({startTime:startTime,acknowledgedTime:acknowledgedTime,endTime:currentEndTime,lastEndTime:lastEndTime,windowStartTime:windowStartTime,windowEndTime:windowEndTime,meta:{startTime:startTime,acknowledgedTime:acknowledgedTime,endTime:currentEndTime,state:state,errorsCount:alert_history.length}},lastEndTime)));lastEndTime=currentEndTime;return acc}),[]);var lastAlertDataPoint=[];if(lastEndTime&&lastEndTime<windowEndTime){lastAlertDataPoint.push({x0:lastEndTime,x:windowEndTime,state:HistoryConstants.TIME_SERIES_ALERT_STATE.NO_ALERTS,meta:{startTime:lastEndTime,endTime:windowEndTime}})}var triggerData=[].concat(_toConsumableArray(firstAlertDataPoints),_toConsumableArray(restAlertsDataPoints),lastAlertDataPoint);var isBucketMonitor=monitorType===_constants3.MONITOR_TYPE.BUCKET_LEVEL;return isBucketMonitor?(0,_chartHelpers.parseGroupedData)(triggerData):triggerData}));_defineProperty(_assertThisInitialized(_this),"getWindowSize",(function(poiData,intervalDuration){var endTime=_this.state.poiTimeWindow.endTime;var brushAreaStartDuration=intervalDuration.asMinutes()<10?_moment.default.duration(HistoryConstants.MIN_HIGHLIGHT_WINDOW_DURATION,"m"):intervalDuration;return{startTime:endTime.valueOf()-brushAreaStartDuration.asMilliseconds(),endTime:endTime.valueOf()}}));_defineProperty(_assertThisInitialized(_this),"getPOIData",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,httpClient,monitorId,poiTimeWindow,intervalDuration,requestBody,resp,poiData,parsedError;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,httpClient=_this$props.httpClient,monitorId=_this$props.monitorId;poiTimeWindow=_this.state.poiTimeWindow;intervalDuration=(0,_timeUtils.calculateInterval)(_moment.default.duration(poiTimeWindow.endTime-poiTimeWindow.startTime,"ms"));_context.prev=3;requestBody={query:(0,_chartHelpers.getPOISearchQuery)(monitorId,poiTimeWindow.startTime.valueOf(),poiTimeWindow.endTime.valueOf(),intervalDuration),index:_constants2.INDEX.ALL_ALERTS};_context.next=7;return httpClient.post("../api/alerting/monitors/_search",{body:JSON.stringify(requestBody)});case 7:resp=_context.sent;if(resp.ok){poiData=(0,_lodash.get)(resp,"resp.aggregations.alerts_over_time.buckets",[]).map((function(item){return{x:item.key,y:item.doc_count}}));_this.setState({poiData:poiData,maxAlerts:(0,_lodash.get)(resp,"resp.aggregations.max_alerts.value",0),timeSeriesWindow:_objectSpread({},_this.getWindowSize(poiData,intervalDuration))},(function(){return _this.getAlerts()}))}else{parsedError=JSON.parse(resp.resp.response);_this.setState({queryResponse:parsedError})}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context["catch"](3);console.log("err",_context.t0);case 14:case"end":return _context.stop()}}}),_callee,null,[[3,11]])}))));_defineProperty(_assertThisInitialized(_this),"getAlerts",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var timeSeriesWindow,_this$props2,httpClient,triggers,monitorId,notifications,params,resp,alerts,triggerTemp,triggersData;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({isLoading:true});timeSeriesWindow=_this.state.timeSeriesWindow;_this$props2=_this.props,httpClient=_this$props2.httpClient,triggers=_this$props2.triggers,monitorId=_this$props2.monitorId,notifications=_this$props2.notifications;_context2.prev=3;params={size:HistoryConstants.MAX_DOC_COUNT_FOR_ALERTS,sortField:"start_time",sortDirection:"asc",monitorIds:monitorId};_context2.next=7;return httpClient.get("../api/alerting/alerts",{query:params});case 7:resp=_context2.sent;if(resp.ok){alerts=resp.alerts}else{console.log("error getting alerts:",resp);(0,_helpers.backendErrorNotification)(notifications,"get","alerts",resp.err);alerts=[]}triggerTemp={};alerts.forEach((function(alert){if(alert.start_time<=timeSeriesWindow.endTime&&(alert.end_time==null||alert.end_time>=timeSeriesWindow.startTime)){if(!(alert.trigger_id in triggerTemp)){triggerTemp[alert.trigger_id]=[]}triggerTemp[alert.trigger_id].push({_source:alert})}}));triggersData={};triggers.forEach((function(trigger){triggersData[trigger.id]=_this.generatePlotData((0,_lodash.get)(triggerTemp,trigger.id,[]))}));_this.setState({isLoading:false,triggersData:triggersData,prevTimeSeriesWindow:timeSeriesWindow});_context2.next=19;break;case 16:_context2.prev=16;_context2.t0=_context2["catch"](3);console.log("err",_context2.t0);case 19:case"end":return _context2.stop()}}}),_callee2,null,[[3,16]])}))));_defineProperty(_assertThisInitialized(_this),"handleDragEnd",(function(area){var timeSeriesWindow=_this.state.timeSeriesWindow;if(area&&area.left.getTime()===timeSeriesWindow.startTime||_this.state.isLoading)return;_this.setState({prevTimeSeriesWindow:timeSeriesWindow,timeSeriesWindow:{startTime:area.left.getTime(),endTime:area.right.getTime()}},(function(){return _this.getAlerts()}))}));_this.initialStartTime=(0,_moment.default)(Date.now()).subtract(HistoryConstants.DEFAULT_POI_TIME_WINDOW_DAYS,"days").startOf("day");_this.initialEndTime=(0,_moment.default)(Date.now());_this.state={poiData:[],triggersData:{},isLoading:true,maxAlerts:0,timeSeriesWindow:{},poiTimeWindow:{startTime:_this.initialStartTime,endTime:_this.initialEndTime}};return _this}_createClass(MonitorHistory,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var triggers;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:triggers=this.props.triggers;if(!(triggers.length>0)){_context3.next=4;break}_context3.next=4;return this.getPOIData();case 4:case"end":return _context3.stop()}}}),_callee3,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(!(0,_lodash.isEqual)(this.props.triggers,prevProps.triggers)){this.getPOIData()}}},{key:"render",value:function render(){var _this2=this;var _this$state=this.state,poiData=_this$state.poiData,timeSeriesWindow=_this$state.timeSeriesWindow,isLoading=_this$state.isLoading,triggersData=_this$state.triggersData,poiTimeWindow=_this$state.poiTimeWindow,maxAlerts=_this$state.maxAlerts,prevTimeSeriesWindow=_this$state.prevTimeSeriesWindow;var _this$props3=this.props,triggers=_this$props3.triggers,onShowTrigger=_this$props3.onShowTrigger,monitorType=_this$props3.monitorType;var isBucketMonitor=monitorType===_constants3.MONITOR_TYPE.BUCKET_LEVEL;return _react.default.createElement(_ContentPanel.default,{title:"History",titleSize:"s",bodyStyles:{minHeight:200,padding:0},actions:[_react.default.createElement(_DateRangePicker.default,{initialStartTime:this.initialStartTime,initialEndTime:this.initialEndTime,onRangeChange:this.handleRangeChange})]},triggers.length>0?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_MonitorHistory.TriggersTimeSeries,{triggers:triggers,isLoading:isLoading,triggersData:triggersData,domainBounds:prevTimeSeriesWindow||timeSeriesWindow,monitorType:this.props.monitorType}),_react.default.createElement(_MonitorHistory.POIChart,{isLoading:isLoading,data:poiData,onDragStart:function onDragStart(){return _this2.setState({loading:false})},highlightedArea:timeSeriesWindow,onDragEnd:this.handleDragEnd,xDomain:[poiTimeWindow.startTime,poiTimeWindow.endTime],yDomain:[0,maxAlerts<=HistoryConstants.MIN_POI_Y_SCALE?HistoryConstants.MIN_POI_Y_SCALE:maxAlerts],isDarkMode:this.props.isDarkMode}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"}),_react.default.createElement(_MonitorHistory.Legend,{showBucketLegend:isBucketMonitor})):_react.default.createElement(_MonitorHistory.EmptyHistory,{onShowTrigger:onShowTrigger}))}}]);return MonitorHistory}(_react.PureComponent);var _default=MonitorHistory;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EmptyHistory",{enumerable:true,get:function get(){return _EmptyHistory.default}});Object.defineProperty(exports,"Legend",{enumerable:true,get:function get(){return _Legend.default}});Object.defineProperty(exports,"POIChart",{enumerable:true,get:function get(){return _POIChart.default}});Object.defineProperty(exports,"TriggersTimeSeries",{enumerable:true,get:function get(){return _TriggersTimeSeries.default}});var _TriggersTimeSeries=_interopRequireDefault(__webpack_require__(554));var _POIChart=_interopRequireDefault(__webpack_require__(556));var _Legend=_interopRequireDefault(__webpack_require__(558));var _EmptyHistory=_interopRequireDefault(__webpack_require__(559));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);var _reactVis=__webpack_require__(80);var _constants=__webpack_require__(54);var _helpers=__webpack_require__(555);var _DelayedLoader=_interopRequireDefault(__webpack_require__(205));var _constants2=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TriggersTimeSeries=function(_Component){_inherits(TriggersTimeSeries,_Component);var _super=_createSuper(TriggersTimeSeries);function TriggersTimeSeries(props){var _this;_classCallCheck(this,TriggersTimeSeries);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"handleValueMouseInOut",(function(triggerId,dataPoint){_this.setState({hints:_defineProperty({},triggerId,dataPoint)})}));_this.state={hints:{}};return _this}_createClass(TriggersTimeSeries,[{key:"xDomain",get:function get(){var _this$props$domainBou=this.props.domainBounds,domainBounds=_this$props$domainBou===void 0?{}:_this$props$domainBou;return[domainBounds.startTime,domainBounds.endTime]}},{key:"render",value:function render(){var _this2=this;var _this$props=this.props,triggersData=_this$props.triggersData,isLoading=_this$props.isLoading,triggers=_this$props.triggers,monitorType=_this$props.monitorType;var hints=this.state.hints;var isBucketMonitor=monitorType===_constants2.MONITOR_TYPE.BUCKET_LEVEL;return _react.default.createElement(_DelayedLoader.default,{isLoading:isLoading},(function(showLoader){return _react.default.createElement("div",{style:{minHeight:triggers.length*40,opacity:showLoader?"0.2":"1"}},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"none"},triggers.map((function(currentTrigger){return _react.default.createElement(_eui.EuiFlexItem,{key:currentTrigger.name},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center",gutterSize:"none",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{style:{alignItems:"center",maxWidth:"10%",padding:"0 10px",wordBreak:"break-all"}},_react.default.createElement(_eui.EuiText,{size:"s",grow:false,textAlign:"center"},currentTrigger.name)),_react.default.createElement(_eui.EuiFlexItem,{style:{width:"90%"}},triggersData[currentTrigger.id]&&_react.default.createElement(_reactVis.FlexibleWidthXYPlot,{height:30,margin:{left:0,top:25},xDomain:_this2.xDomain,xType:"time",yType:"ordinal",getColor:function getColor(dataPoint){return _constants.ALERT_TIMELINE_COLORS_MAP[dataPoint.meta.state===_constants.TIME_SERIES_ALERT_STATE.ERROR?_constants.TIME_SERIES_ALERT_STATE.ERROR:dataPoint.state]},getY:function getY(){return 0}},_react.default.createElement(_reactVis.HorizontalBarSeries,{data:triggersData[currentTrigger.id],colorType:"literal",onValueMouseOut:function onValueMouseOut(){return _this2.handleValueMouseInOut(currentTrigger.name)},onValueMouseOver:function onValueMouseOver(dataPoint){return _this2.handleValueMouseInOut(currentTrigger.name,dataPoint)}}),!showLoader&&hints[currentTrigger.name]?_react.default.createElement(_reactVis.Hint,{align:{vertical:"top",horizontal:"auto"},value:hints[currentTrigger.name],format:isBucketMonitor?_helpers.formatTooltipAlertCount:_helpers.formatTooltip,style:{title:{fontWeight:"bold"}}}):null))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"}))})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",style:{paddingLeft:"10%"}},_react.default.createElement(_reactVis.FlexibleWidthXYPlot,{margin:{left:25,right:25},xDomain:_this2.xDomain,height:35,xType:"time",dontCheckIfEmpty:true},_react.default.createElement(_reactVis.XAxis,{hideLine:true,tickTotal:14}))))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"}))}))}}]);return TriggersTimeSeries}(_react.Component);var _default=TriggersTimeSeries;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatTooltipAlertCount=exports.formatTooltip=void 0;var _moment=_interopRequireDefault(__webpack_require__(8));var _constants=__webpack_require__(54);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var formatTooltip=function formatTooltip(_ref){var _ref$meta=_ref.meta,meta=_ref$meta===void 0?{}:_ref$meta,dataPointState=_ref.state;var formatHintDisplayDate=function formatHintDisplayDate(date){return(0,_moment.default)(date).format("MMM Do YYYY, h:mm A")};if(dataPointState==_constants.TIME_SERIES_ALERT_STATE.NO_ALERTS){return meta.startTime&&meta.endTime?[{title:"No Alerts",value:"Between ".concat(formatHintDisplayDate(meta.startTime)," and ").concat(formatHintDisplayDate(meta.endTime))}]:[]}else{var alertsToolTip=[];alertsToolTip.push({title:"Alert Started at",value:formatHintDisplayDate(meta.startTime)});if(meta.acknowledgedTime){alertsToolTip.push({title:"Alert Acknowledged at",value:formatHintDisplayDate(meta.acknowledgedTime)})}if(meta.endTime){alertsToolTip.push({title:"Alert Ended at",value:formatHintDisplayDate(meta.endTime)})}alertsToolTip.push({title:"State",value:meta.state});if(meta.errorsCount){alertsToolTip.push({title:"Errors",value:meta.errorsCount})}return alertsToolTip}};exports.formatTooltip=formatTooltip;var formatTooltipAlertCount=function formatTooltipAlertCount(_ref2){var _ref2$meta=_ref2.meta,meta=_ref2$meta===void 0?{}:_ref2$meta,dataPointState=_ref2.state,serieStartTime=_ref2.x0,seriesEndTime=_ref2.x;var formatHintDisplayDate=function formatHintDisplayDate(date){return(0,_moment.default)(date).format("MMM Do YYYY, h:mm A")};if(dataPointState==_constants.TIME_SERIES_ALERT_STATE.NO_ALERTS){return meta.startTime&&meta.endTime?[{title:"No Alerts",value:"Between ".concat(formatHintDisplayDate(meta.startTime)," and ").concat(formatHintDisplayDate(meta.endTime))}]:[]}else{return[{title:"".concat(formatHintDisplayDate(serieStartTime)," to  ").concat(formatHintDisplayDate(seriesEndTime))},{title:"Active",value:meta[_constants.TIME_SERIES_ALERT_STATE.TRIGGERED]},{title:"Acknowledged",value:meta[_constants.TIME_SERIES_ALERT_STATE.ACKNOWLEDGED]},{title:"Error",value:meta[_constants.TIME_SERIES_ALERT_STATE.ERROR]}]}};exports.formatTooltipAlertCount=formatTooltipAlertCount},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _reactVis=__webpack_require__(80);var _Highlight=_interopRequireDefault(__webpack_require__(557));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var POIChart=function POIChart(_ref){var data=_ref.data,onDragStart=_ref.onDragStart,onDragEnd=_ref.onDragEnd,xDomain=_ref.xDomain,yDomain=_ref.yDomain,highlightedArea=_ref.highlightedArea,isLoading=_ref.isLoading,isDarkMode=_ref.isDarkMode;return _react.default.createElement(_eui.EuiFlexGroup,{style:{paddingLeft:"10%"},justifyContent:"center",gutterSize:"none",alignItems:"center"},_react.default.createElement(_reactVis.FlexibleWidthXYPlot,{height:90,margin:{left:25,right:20},xType:"time",xDomain:xDomain,yDomain:yDomain,dontCheckIfEmpty:true},_react.default.createElement(_reactVis.AreaSeries,{color:"darkgray",data:data,curve:"curveStep"}),_react.default.createElement(_reactVis.XAxis,{left:20}),_react.default.createElement(_reactVis.YAxis,{tickValues:yDomain}),_react.default.createElement(_Highlight.default,{drag:!isLoading,color:isDarkMode?"black":"white",opacity:.3,enableY:false,highlightHeight:50,isDarkMode:isDarkMode,onDragStart:onDragStart,onDragEnd:onDragEnd,highlightedArea:{left:highlightedArea.startTime,right:highlightedArea.endTime}})))};var _default=POIChart;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _reactVis=__webpack_require__(80);var _lodash=__webpack_require__(7);var _propTypes=_interopRequireDefault(__webpack_require__(16));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getLocs=function getLocs(evt){var targetBounding=evt.currentTarget.getBoundingClientRect();var offsetX=evt.clientX-targetBounding.left;var offsetY=evt.clientY-targetBounding.top;return{xLoc:offsetX,yLoc:offsetY}};var Highlight=function(_AbstractSeries){_inherits(Highlight,_AbstractSeries);var _super=_createSuper(Highlight);function Highlight(props){var _this;_classCallCheck(this,Highlight);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"setHighlightedArea",(function(highlightArea){var _this$props=_this.props,highlightHeight=_this$props.highlightHeight,highlightWidth=_this$props.highlightWidth,innerWidth=_this$props.innerWidth,innerHeight=_this$props.innerHeight,marginLeft=_this$props.marginLeft,marginBottom=_this$props.marginBottom,marginTop=_this$props.marginTop,marginRight=_this$props.marginRight;var xScale=_reactVis.ScaleUtils.getAttributeScale(_this.props,"x");var yScale=_reactVis.ScaleUtils.getAttributeScale(_this.props,"y");var plotHeight=innerHeight+marginTop+marginBottom;var plotWidth=innerWidth+marginLeft+marginRight;var bottomPos=highlightHeight||plotHeight;if(highlightArea.bottom){bottomPos=yScale(highlightArea.bottom)+marginTop}var topPos=0;if(highlightArea.top){topPos=yScale(highlightArea.top)+marginTop}var leftPos=0+marginLeft;if(highlightArea.left){leftPos=xScale(highlightArea.left)+marginLeft}var rightPos=highlightWidth||plotWidth;if(highlightArea.right){rightPos=xScale(highlightArea.right)+marginLeft}var brushArea={bottom:bottomPos,right:rightPos,left:leftPos,top:topPos};_this.setState({brushArea:brushArea,dragArea:brushArea})}));_this.state={dragging:false,brushArea:{bottom:0,right:0,left:0,top:0},brushing:false,startLocX:0,startLocY:0,dragArea:null};return _this}_createClass(Highlight,[{key:"componentDidMount",value:function componentDidMount(){var highlightRef=this.props.highlightRef;if(highlightRef){highlightRef({setHighlightedArea:this.setHighlightedArea})}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(!(0,_lodash.isEqual)(this.props,prevProps)){this.setHighlightedArea(_objectSpread({},this.props.highlightedArea))}}},{key:"_getDrawArea",value:function _getDrawArea(xLoc,yLoc){var _this$state=this.state,startLocX=_this$state.startLocX,startLocY=_this$state.startLocY;var _this$props2=this.props,enableX=_this$props2.enableX,enableY=_this$props2.enableY,highlightWidth=_this$props2.highlightWidth,highlightHeight=_this$props2.highlightHeight,innerWidth=_this$props2.innerWidth,innerHeight=_this$props2.innerHeight,marginLeft=_this$props2.marginLeft,marginRight=_this$props2.marginRight,marginBottom=_this$props2.marginBottom,marginTop=_this$props2.marginTop;var plotHeight=innerHeight+marginTop+marginBottom;var plotWidth=innerWidth+marginLeft+marginRight;var touchWidth=highlightWidth||plotWidth;var touchHeight=highlightHeight||plotHeight;return{bottom:enableY?Math.max(startLocY,yLoc):touchHeight,right:enableX?Math.max(startLocX,xLoc):touchWidth,left:enableX?Math.min(xLoc,startLocX):0,top:enableY?Math.min(yLoc,startLocY):0}}},{key:"_getDragArea",value:function _getDragArea(xLoc,yLoc){var _this$props3=this.props,enableX=_this$props3.enableX,enableY=_this$props3.enableY;var _this$state2=this.state,startLocX=_this$state2.startLocX,startLocY=_this$state2.startLocY,dragArea=_this$state2.dragArea;return{bottom:dragArea.bottom+(enableY?yLoc-startLocY:0),left:dragArea.left+(enableX?xLoc-startLocX:0),right:dragArea.right+(enableX?xLoc-startLocX:0),top:dragArea.top+(enableY?yLoc-startLocY:0)}}},{key:"_clickedOutsideDrag",value:function _clickedOutsideDrag(xLoc,yLoc){var _this$props4=this.props,enableX=_this$props4.enableX,enableY=_this$props4.enableY,marginLeft=_this$props4.marginLeft,marginTop=_this$props4.marginTop;var _this$state3=this.state,dragArea=_this$state3.dragArea,_this$state3$brushAre=_this$state3.brushArea,left=_this$state3$brushAre.left,right=_this$state3$brushAre.right,top=_this$state3$brushAre.top,bottom=_this$state3$brushAre.bottom;var actualXLoc=xLoc+marginLeft;var actualYLoc=yLoc+marginTop;var clickedOutsideDragX=dragArea&&(actualXLoc<left||actualXLoc>right);var clickedOutsideDragY=dragArea&&(actualYLoc<top||actualYLoc>bottom);if(enableX&&enableY){return clickedOutsideDragX||clickedOutsideDragY}if(enableX){return clickedOutsideDragX}if(enableY){return clickedOutsideDragY}return true}},{key:"_convertAreaToCoordinates",value:function _convertAreaToCoordinates(brushArea){var _this$props5=this.props,enableX=_this$props5.enableX,enableY=_this$props5.enableY,marginLeft=_this$props5.marginLeft,marginTop=_this$props5.marginTop;var xScale=_reactVis.ScaleUtils.getAttributeScale(this.props,"x");var yScale=_reactVis.ScaleUtils.getAttributeScale(this.props,"y");if(enableX&&enableY){return{bottom:yScale.invert(brushArea.bottom),left:xScale.invert(brushArea.left-marginLeft),right:xScale.invert(brushArea.right-marginLeft),top:yScale.invert(brushArea.top)}}if(enableY){return{bottom:yScale.invert(brushArea.bottom-marginTop),top:yScale.invert(brushArea.top-marginTop)}}if(enableX){return{left:xScale.invert(brushArea.left-marginLeft),right:xScale.invert(brushArea.right-marginLeft)}}return{}}},{key:"startBrushing",value:function startBrushing(e){e.preventDefault();var _this$props6=this.props,onDragStart=_this$props6.onDragStart,drag=_this$props6.drag;var dragArea=this.state.dragArea;var _getLocs=getLocs(e),xLoc=_getLocs.xLoc,yLoc=_getLocs.yLoc;var clickedOutsideDrag=this._clickedOutsideDrag(xLoc,yLoc);if(!clickedOutsideDrag&&drag){this.setState({dragging:true,brushArea:dragArea,brushing:false,startLocX:xLoc,startLocY:yLoc});if(onDragStart){onDragStart(e)}}}},{key:"stopBrushing",value:function stopBrushing(e){var _this$state4=this.state,brushing=_this$state4.brushing,dragging=_this$state4.dragging,brushArea=_this$state4.brushArea;if(!brushing&&!dragging){return}var _this$props7=this.props,onBrushEnd=_this$props7.onBrushEnd,onDragEnd=_this$props7.onDragEnd,drag=_this$props7.drag;var noHorizontal=Math.abs(brushArea.right-brushArea.left)<5;var noVertical=Math.abs(brushArea.top-brushArea.bottom)<5;var isNulled=noVertical||noHorizontal;this.setState({brushing:false,dragging:false,brushArea:drag?brushArea:{top:0,right:0,bottom:0,left:0},startLocX:0,startLocY:0,dragArea:drag&&!isNulled&&brushArea});if(brushing&&onBrushEnd){onBrushEnd(!isNulled?this._convertAreaToCoordinates(brushArea):null)}if(drag&&onDragEnd){onDragEnd(!isNulled?this._convertAreaToCoordinates(brushArea):null)}}},{key:"onBrush",value:function onBrush(e){var _this$props8=this.props,marginLeft=_this$props8.marginLeft,marginRight=_this$props8.marginRight,innerWidth=_this$props8.innerWidth,onBrush=_this$props8.onBrush,onDrag=_this$props8.onDrag,drag=_this$props8.drag;var _this$state5=this.state,brushing=_this$state5.brushing,dragging=_this$state5.dragging;var _getLocs2=getLocs(e),xLoc=_getLocs2.xLoc,yLoc=_getLocs2.yLoc;if(brushing){var brushArea=this._getDrawArea(xLoc,yLoc);this.setState({brushArea:brushArea});if(onBrush){onBrush(this._convertAreaToCoordinates(brushArea))}}if(drag&&dragging){var _brushArea=this._getDragArea(xLoc,yLoc);var rightBoundary=innerWidth+marginRight;var leftBoundary=marginLeft;if(_brushArea.right<=rightBoundary&&_brushArea.left>=leftBoundary){this.setState({brushArea:_brushArea});if(onDrag){onDrag(this._convertAreaToCoordinates(_brushArea))}}}}},{key:"getHighlighterStyles",value:function getHighlighterStyles(){var isDarkMode=this.props.isDarkMode;if(isDarkMode){return{fill:"black",opacity:.1}}return{fill:"white",opacity:.8}}},{key:"render",value:function render(){var _this2=this;var _this$props9=this.props,color=_this$props9.color,className=_this$props9.className,highlightHeight=_this$props9.highlightHeight,highlightWidth=_this$props9.highlightWidth,highlightX=_this$props9.highlightX,highlightY=_this$props9.highlightY,innerWidth=_this$props9.innerWidth,innerHeight=_this$props9.innerHeight,marginLeft=_this$props9.marginLeft,marginRight=_this$props9.marginRight,marginTop=_this$props9.marginTop,marginBottom=_this$props9.marginBottom,opacity=_this$props9.opacity;var _this$state$brushArea=this.state.brushArea,left=_this$state$brushArea.left,right=_this$state$brushArea.right,top=_this$state$brushArea.top,bottom=_this$state$brushArea.bottom;var leftPos=0;if(highlightX){var xScale=_reactVis.ScaleUtils.getAttributeScale(this.props,"x");leftPos=xScale(highlightX)}var topPos=0;if(highlightY){var yScale=_reactVis.ScaleUtils.getAttributeScale(this.props,"y");topPos=yScale(highlightY)}var plotWidth=marginLeft+marginRight+innerWidth;var plotHeight=marginTop+marginBottom+innerHeight;var touchWidth=highlightWidth||plotWidth;var touchHeight=highlightHeight||plotHeight;return _react.default.createElement("g",{transform:"translate(".concat(leftPos,", ").concat(topPos,")"),className:"".concat(className," rv-highlight-container")},_react.default.createElement("rect",{className:"rv-mouse-target",opacity:"0",cursor:"move",x:marginLeft,y:0,width:Math.max(touchWidth,0),height:Math.max(touchHeight,0),onMouseDown:function onMouseDown(e){return _this2.startBrushing(e)},onMouseMove:function onMouseMove(e){return _this2.onBrush(e)},onMouseUp:function onMouseUp(e){return _this2.stopBrushing(e)},onMouseLeave:function onMouseLeave(e){return _this2.stopBrushing(e)},onTouchEnd:function onTouchEnd(e){e.preventDefault();_this2.stopBrushing(e)},onTouchCancel:function onTouchCancel(e){e.preventDefault();_this2.stopBrushing(e)},onContextMenu:function onContextMenu(e){return e.preventDefault()},onContextMenuCapture:function onContextMenuCapture(e){return e.preventDefault()}}),_react.default.createElement("rect",_extends({pointerEvents:"none",className:"rv-mouse-target",x:marginLeft,y:"0",width:Math.max(left-marginLeft,0),height:Math.max(touchHeight,0),onMouseLeave:function onMouseLeave(e){return e.preventDefault()}},this.getHighlighterStyles())),_react.default.createElement("rect",{pointerEvents:"none",opacity:opacity,fill:color,x:left,y:top,width:Math.max(0,right-left),height:Math.max(0,bottom-top),onMouseLeave:function onMouseLeave(e){return e.preventDefault()}}),_react.default.createElement("rect",_extends({pointerEvents:"none",className:"rv-mouse-target",x:right,y:"0",width:Math.max(touchWidth-right,0),height:Math.max(touchHeight,0),onMouseLeave:function onMouseLeave(e){return e.preventDefault()}},this.getHighlighterStyles())),_react.default.createElement("g",null,_react.default.createElement("rect",{pointerEvents:"none",x:left,y:top,width:"1",height:Math.max(0,bottom-top),fill:"rgb(151,151,151)",stroke:"none",onMouseLeave:function onMouseLeave(e){return e.preventDefault()}}),_react.default.createElement("rect",{pointerEvents:"none",x:right,y:top,width:"1",height:Math.max(0,bottom-top),fill:"rgb(151,151,151)",stroke:"none",onMouseLeave:function onMouseLeave(e){return e.preventDefault()}}),_react.default.createElement("line",{pointerEvents:"none",x1:left,x2:right,stroke:"rgb(151,151,151)",strokeWidth:2,onMouseLeave:function onMouseLeave(e){return e.preventDefault()}})))}}]);return Highlight}(_reactVis.AbstractSeries);Highlight.displayName="HighlightOverlay";Highlight.defaultProps={color:"rgb(77, 182, 172)",className:"",enableX:true,enableY:true,highlightRef:null,opacity:.3};Highlight.propTypes=_objectSpread(_objectSpread({},_reactVis.AbstractSeries.propTypes),{},{enableX:_propTypes.default.bool,enableY:_propTypes.default.bool,highlightHeight:_propTypes.default.number,highlightWidth:_propTypes.default.number,highlightX:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),highlightY:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),highlightRef:_propTypes.default.func,onBrushStart:_propTypes.default.func,onDragStart:_propTypes.default.func,onBrush:_propTypes.default.func,onDrag:_propTypes.default.func,onBrushEnd:_propTypes.default.func,onDragEnd:_propTypes.default.func});var _default=Highlight;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(54);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var timeSeriesLegend=[{title:"Triggered",color:_constants.ALERT_TIMELINE_COLORS_MAP.TRIGGERED},{title:"Error",color:_constants.ALERT_TIMELINE_COLORS_MAP.ERROR},{title:"Acknowledge",color:_constants.ALERT_TIMELINE_COLORS_MAP.ACKNOWLEDGED},{title:"No alerts",color:_constants.ALERT_TIMELINE_COLORS_MAP.NO_ALERTS}];var bucketTimeSeriesLegend=[{title:"Triggered",color:_constants.ALERT_TIMELINE_COLORS_MAP.TRIGGERED},{title:"No alerts",color:_constants.ALERT_TIMELINE_COLORS_MAP.NO_ALERTS}];var Legend=function Legend(_ref){var showBucketLegend=_ref.showBucketLegend;var legend=showBucketLegend?bucketTimeSeriesLegend:timeSeriesLegend;return _react.default.createElement(_eui.EuiFlexGroup,{style:{marginLeft:"20px"},alignItems:"center"},legend.map((function(legendItem){return _react.default.createElement(_eui.EuiFlexItem,{grow:false,key:legendItem.title},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xs",style:{height:"30px"},alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{style:{height:"30px"}},_react.default.createElement("div",{style:{height:"100%",width:"15px",backgroundColor:legendItem.color}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"xs"},legendItem.title))))})))};var _default=Legend;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmptyHistory=function EmptyHistory(_ref){var onShowTrigger=_ref.onShowTrigger;return _react.default.createElement(_eui.EuiEmptyPrompt,{style:{maxWidth:"45em"},body:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,"There are no triggers. Create a trigger to start alerting. Once an alarm is triggered, the state will be displayed in time series.")),actions:_react.default.createElement(_eui.EuiButton,{fill:true,onClick:onShowTrigger},"Edit monitor")})};var _default=EmptyHistory;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _moment=_interopRequireDefault(__webpack_require__(8));var _eui=__webpack_require__(6);var _constants=__webpack_require__(54);var _timeUtils=__webpack_require__(207);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DateRangePicker=function(_React$PureComponent){_inherits(DateRangePicker,_React$PureComponent);var _super=_createSuper(DateRangePicker);function DateRangePicker(props){var _this;_classCallCheck(this,DateRangePicker);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"getStartDatePickerProps",(function(startDateTime){return{selected:startDateTime.isAfter((0,_moment.default)())?(0,_moment.default)().startOf("day"):startDateTime,minTime:startDateTime.clone().startOf("day"),maxTime:(0,_timeUtils.getRangeMaxTime)(startDateTime),maxDate:(0,_moment.default)()}}));_defineProperty(_assertThisInitialized(_this),"getEndDatePickerProps",(function(startDateTime,endDateTime){var maxDate=startDateTime.clone().add(_constants.MAX_DAYS_ALLOWED_IN_RANGE,"days");var now=(0,_moment.default)();return{selected:endDateTime,minTime:endDateTime.clone().startOf("day"),maxTime:(0,_timeUtils.getRangeMaxTime)(endDateTime),maxDate:maxDate>now?now:maxDate,injectTimes:(0,_timeUtils.isToday)(endDateTime)?[now]:[]}}));_defineProperty(_assertThisInitialized(_this),"handleChangeStart",(function(startDateTime){var onRangeChange=_this.props.onRangeChange;_this.setState((function(state){var endTime=state.rangeEndDateTime.selected;if(endTime.isSame(startDateTime)){endTime=startDateTime.clone().add(30,"m")}else if(endTime.isBefore(startDateTime)||endTime.diff(startDateTime,"days")>_constants.MAX_DAYS_ALLOWED_IN_RANGE){endTime=startDateTime.clone().add(1,"d")}onRangeChange(startDateTime,endTime);return{rangeStartDateTime:_objectSpread({},_this.getStartDatePickerProps(startDateTime,endTime)),rangeEndDateTime:_objectSpread({},_this.getEndDatePickerProps(startDateTime,endTime))}}))}));_defineProperty(_assertThisInitialized(_this),"handleChangeEnd",(function(endDateTime){var onRangeChange=_this.props.onRangeChange;_this.setState((function(_ref){var rangeStartDateTime=_ref.rangeStartDateTime,rangeEndDateTime=_ref.rangeEndDateTime;var startTime=rangeStartDateTime.selected;if(startTime.isSame(endDateTime)){startTime=endDateTime.clone().subtract(30,"m")}else if(startTime.isAfter(endDateTime)){startTime=endDateTime.clone().subtract(30,"m")}onRangeChange(startTime,endDateTime);return{rangeStartDateTime:_objectSpread(_objectSpread({},rangeStartDateTime),{},{selected:startTime}),rangeEndDateTime:_objectSpread(_objectSpread({},rangeEndDateTime),{},{selected:endDateTime})}}))}));_this.state={rangeStartDateTime:_objectSpread({},_this.getStartDatePickerProps(props.initialStartTime,props.initialStartTime)),rangeEndDateTime:_objectSpread({},_this.getEndDatePickerProps(props.initialStartTime,props.initialEndTime))};return _this}_createClass(DateRangePicker,[{key:"render",value:function render(){var _this$state=this.state,rangeStartDateTime=_this$state.rangeStartDateTime,rangeEndDateTime=_this$state.rangeEndDateTime;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{padding:"0 10px"}},_react.default.createElement(_eui.EuiDatePickerRange,{fullWidth:true,startDateControl:_react.default.createElement(_eui.EuiDatePicker,_extends({selected:rangeStartDateTime.selected,onChange:this.handleChangeStart,startDate:rangeStartDateTime.selected,endDate:rangeEndDateTime.selected,isInvalid:rangeStartDateTime.selected>rangeStartDateTime.selected,"aria-label":"Start date",showTimeSelect:true,popperClassName:"euiRangePicker--popper",shouldCloseOnSelect:true},rangeStartDateTime)),endDateControl:_react.default.createElement(_eui.EuiDatePicker,_extends({selected:rangeEndDateTime.selected,onChange:this.handleChangeEnd,startDate:rangeStartDateTime.selected,endDate:rangeEndDateTime.selected,isInvalid:rangeStartDateTime.selected>rangeStartDateTime.selected,"aria-label":"End date",showTimeSelect:true,popperClassName:"euiRangePicker--popper",shouldCloseOnSelect:true},rangeEndDateTime))})))}}]);return DateRangePicker}(_react.default.PureComponent);var _default=DateRangePicker;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseGroupedData=exports.getPOISearchQuery=exports.generateFirstDataPoints=exports.dataPointsGenerator=void 0;var _constants=__webpack_require__(15);var _constants2=__webpack_require__(54);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var dataPointsGenerator=function dataPointsGenerator(_ref){var startTime=_ref.startTime,acknowledgedTime=_ref.acknowledgedTime,endTime=_ref.endTime,lastEndTime=_ref.lastEndTime,windowEndTime=_ref.windowEndTime,meta=_ref.meta;var alertDataPoints=[];if(lastEndTime){alertDataPoints.push({x0:lastEndTime,x:startTime,state:_constants2.TIME_SERIES_ALERT_STATE.NO_ALERTS,meta:{startTime:lastEndTime,endTime:startTime}})}if(acknowledgedTime){alertDataPoints.push({x0:startTime,x:acknowledgedTime<windowEndTime?acknowledgedTime:windowEndTime,state:_constants2.TIME_SERIES_ALERT_STATE.TRIGGERED,meta:meta});if(acknowledgedTime<windowEndTime){alertDataPoints.push({x0:acknowledgedTime,x:endTime&&endTime<windowEndTime?endTime:windowEndTime,state:_constants2.TIME_SERIES_ALERT_STATE.ACKNOWLEDGED,meta:meta})}}else{alertDataPoints.push({x0:startTime,x:endTime&&endTime<windowEndTime?endTime:windowEndTime,state:_constants2.TIME_SERIES_ALERT_STATE.TRIGGERED,meta:meta})}return alertDataPoints};exports.dataPointsGenerator=dataPointsGenerator;var generateFirstDataPoints=function generateFirstDataPoints(_ref2){var startTime=_ref2.startTime,acknowledgedTime=_ref2.acknowledgedTime,endTime=_ref2.endTime,state=_ref2.state,windowStartTime=_ref2.windowStartTime,windowEndTime=_ref2.windowEndTime,errorsCount=_ref2.errorsCount;var firstAlertData={startTime:startTime,acknowledgedTime:acknowledgedTime,endTime:endTime,windowStartTime:windowStartTime,windowEndTime:windowEndTime,meta:{startTime:startTime,acknowledgedTime:acknowledgedTime,endTime:endTime,state:state,errorsCount:errorsCount}};if(windowStartTime<firstAlertData.startTime){return dataPointsGenerator(_objectSpread(_objectSpread({},firstAlertData),{},{lastEndTime:windowStartTime}))}return dataPointsGenerator(_objectSpread(_objectSpread({},firstAlertData),{},{startTime:windowStartTime,acknowledgedTime:acknowledgedTime&&acknowledgedTime<windowStartTime?windowStartTime:acknowledgedTime,lastEndTime:null}))};exports.generateFirstDataPoints=generateFirstDataPoints;var getPOISearchQuery=function getPOISearchQuery(monitorId,startTime,endTime,intervalDuration){return{query:{bool:{filter:[{term:{monitor_id:monitorId}},{bool:{should:[{range:{start_time:{gte:startTime,lte:endTime}}},{range:{end_time:{gte:startTime,lte:endTime}}},{bool:{should:[{range:{start_time:{lte:startTime}}},{range:{end_time:{gte:endTime}}},{bool:{must_not:{exists:{field:"monitor.schedule.period"}}}}],minimum_should_match:2}}],minimum_should_match:1}}]}},aggs:{alerts_over_time:{date_histogram:{interval:"".concat(intervalDuration.asMinutes(),"m"),extended_bounds:{min:startTime,max:endTime},script:{lang:"painless",source:"def alertsWindow = new ArrayList();\n                      def startTime = doc.start_time.value.millis < params.startTime ? params.startTime : doc.start_time.value.millis;\n                      def endTime;\n                      /*\n                        Painless script returns default dateTime epoch for null date fields instead of returning null.\n                        In case of alert is in one of the state (ACTIVE / ERROR / ACKNOWLEDGE) end_time can be null.\n                        We are setting default end time to window end time.\n                        More details can be found here https://github.com/elastic/elasticsearch/pull/30975\n                      */\n\n                      if(doc.end_time.size() == 0) {\n                        endTime = params.endTime\n                      } else {\n                        endTime = doc.end_time.value.millis;\n                      }\n                      while(startTime <= endTime) {\n                           alertsWindow.add(startTime);\n                           startTime = startTime + params.interval;\n                       }\n                       return alertsWindow;",params:{startTime:startTime,endTime:endTime,interval:intervalDuration.asMilliseconds()}}}},max_alerts:{max_bucket:{buckets_path:"alerts_over_time._count"}}}}};exports.getPOISearchQuery=getPOISearchQuery;var parseGroupedData=function parseGroupedData(triggerData){var result=[];triggerData.map((function(data){if(data.state===_constants2.TIME_SERIES_ALERT_STATE.NO_ALERTS)result.push(data);else{var foundIndex=result.findIndex((function(element){return(element.x0<=data.x0||element.x>=data.x)&&element.state!==_constants2.TIME_SERIES_ALERT_STATE.NO_ALERTS}));var state=data.state;if(foundIndex<0){var dataToPush=_objectSpread(_objectSpread({},data),{},{state:_constants2.TIME_SERIES_ALERT_STATE.TRIGGERED,meta:_objectSpread(_objectSpread({},data.meta),_constants2.EMPTY_ALERT_COUNT)});dataToPush.meta[state]++;result.push(dataToPush)}else{var prevData=result[foundIndex];result.splice(foundIndex,1,_objectSpread(_objectSpread({},prevData),{},{x0:Math.min(prevData.x0,data.x0),x:Math.max(prevData.x,data.x),meta:_objectSpread(_objectSpread({},prevData.meta),{},_defineProperty({startTime:Math.min(prevData.meta.startTime,data.meta.startTime)},state,prevData.meta[state]+1))}))}}}));return result};exports.parseGroupedData=parseGroupedData},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Triggers=_interopRequireDefault(__webpack_require__(132));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_Triggers.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateTriggerMetadata=void 0;var _lodash=__webpack_require__(7);var _excluded=["thresholds"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var migrateTriggerMetadata=function migrateTriggerMetadata(monitor){var uiMetadata=(0,_lodash.get)(monitor,"ui_metadata",{});if((0,_lodash.isEmpty)(uiMetadata))return monitor;if(uiMetadata.triggers)return monitor;var _uiMetadata$threshold=uiMetadata.thresholds,thresholds=_uiMetadata$threshold===void 0?{}:_uiMetadata$threshold,rest=_objectWithoutProperties(uiMetadata,_excluded);return _objectSpread(_objectSpread({},monitor),{},{ui_metadata:_objectSpread(_objectSpread({},rest),{},{triggers:_objectSpread({},thresholds)})})};exports.migrateTriggerMetadata=migrateTriggerMetadata},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _CreateDestination=_interopRequireDefault(__webpack_require__(565));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_CreateDestination.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _formik=__webpack_require__(20);var _eui=__webpack_require__(6);var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _validate=__webpack_require__(18);var _FormControls=__webpack_require__(17);var _SubHeader=_interopRequireDefault(__webpack_require__(133));var _constants=__webpack_require__(86);var _constants2=__webpack_require__(31);var _validations=__webpack_require__(567);var _formikToDestination=__webpack_require__(568);var _destinationToFormik=__webpack_require__(569);var _createDestinations=__webpack_require__(570);var _SubmitErrorHandler=__webpack_require__(198);var _helpers=__webpack_require__(48);var _helpers2=__webpack_require__(22);var _destinationType;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var destinationType=(_destinationType={},_defineProperty(_destinationType,_constants2.DESTINATION_TYPE.SLACK,(function(props){return _react.default.createElement(_createDestinations.Webhook,props)})),_defineProperty(_destinationType,_constants2.DESTINATION_TYPE.CHIME,(function(props){return _react.default.createElement(_createDestinations.Webhook,props)})),_defineProperty(_destinationType,_constants2.DESTINATION_TYPE.CUSTOM_HOOK,(function(props){return _react.default.createElement(_createDestinations.CustomWebhook,props)})),_defineProperty(_destinationType,_constants2.DESTINATION_TYPE.EMAIL,(function(props){return _react.default.createElement(_createDestinations.Email,props)})),_destinationType);var CreateDestination=function(_React$Component){_inherits(CreateDestination,_React$Component);var _super=_createSuper(CreateDestination);function CreateDestination(props){var _this;_classCallCheck(this,CreateDestination);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"getDestination",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(destinationId){var _this$props,httpClient,history,notifications,resp,ifSeqNo,ifPrimaryTerm;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,httpClient=_this$props.httpClient,history=_this$props.history,notifications=_this$props.notifications;_context.prev=1;_context.next=4;return httpClient.get("../api/alerting/destinations/".concat(destinationId));case 4:resp=_context.sent;if(resp.ok){ifSeqNo=_lodash.default.get(resp,"ifSeqNo");ifPrimaryTerm=_lodash.default.get(resp,"ifPrimaryTerm");_this.setState({ifSeqNo:ifSeqNo,ifPrimaryTerm:ifPrimaryTerm})}else{(0,_helpers2.backendErrorNotification)(notifications,"get","destination",resp.resp);history.push("/destinations")}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](1);console.log("Unable to get the data");case 11:case"end":return _context.stop()}}}),_callee,null,[[1,8]])})));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"handleUpdate",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(requestData,_ref2){var setSubmitting,_this$props2,httpClient,destinationId,history,notifications,_this$state,ifSeqNo,ifPrimaryTerm,resp;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setSubmitting=_ref2.setSubmitting;_this$props2=_this.props,httpClient=_this$props2.httpClient,destinationId=_this$props2.match.params.destinationId,history=_this$props2.history,notifications=_this$props2.notifications;_this$state=_this.state,ifSeqNo=_this$state.ifSeqNo,ifPrimaryTerm=_this$state.ifPrimaryTerm;_context2.prev=3;_context2.next=6;return httpClient.put("../api/alerting/destinations/".concat(destinationId),{query:{ifSeqNo:ifSeqNo,ifPrimaryTerm:ifPrimaryTerm},body:JSON.stringify(requestData)});case 6:resp=_context2.sent;if(resp.ok){history.push("/destinations")}else{(0,_helpers2.backendErrorNotification)(notifications,"update","destination",resp.resp);setSubmitting(false);_this.getDestination(destinationId)}_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2["catch"](3);console.log("Unable to update destination",_context2.t0);setSubmitting(false);case 14:case"end":return _context2.stop()}}}),_callee2,null,[[3,10]])})));return function(_x2,_x3){return _ref3.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"handleCreate",function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(requestData,_ref4){var setSubmitting,_this$props3,httpClient,history,notifications,resp;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setSubmitting=_ref4.setSubmitting;_this$props3=_this.props,httpClient=_this$props3.httpClient,history=_this$props3.history,notifications=_this$props3.notifications;_context3.prev=2;_context3.next=5;return httpClient.post("../api/alerting/destinations",{body:JSON.stringify(requestData)});case 5:resp=_context3.sent;setSubmitting(false);if(resp.ok){history.push("/destinations")}else{(0,_helpers2.backendErrorNotification)(notifications,"create","destination",resp.resp)}_context3.next=14;break;case 10:_context3.prev=10;_context3.t0=_context3["catch"](2);setSubmitting(false);console.error("Unable to create destination",_context3.t0);case 14:case"end":return _context3.stop()}}}),_callee3,null,[[2,10]])})));return function(_x4,_x5){return _ref5.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"handleSubmit",(function(values,formikBag){var destinationRequest=(0,_formikToDestination.formikToDestination)(values);if(_this.props.edit){_this.handleUpdate(destinationRequest,formikBag)}else{_this.handleCreate(destinationRequest,formikBag)}}));_defineProperty(_assertThisInitialized(_this),"handleCancel",(function(){var _this$props4=_this.props,edit=_this$props4.edit,history=_this$props4.history;if(edit){history.goBack()}else{history.push("/destinations")}}));_this.state={initialValues:_constants.formikInitialValues,allowList:[]};return _this}_createClass(CreateDestination,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var _this$props5,httpClient,location,edit,history,allowList,ifSeqNo,ifPrimaryTerm,destinationToEdit,initialValues;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$props5=this.props,httpClient=_this$props5.httpClient,location=_this$props5.location,edit=_this$props5.edit,history=_this$props5.history;_context4.next=3;return(0,_helpers.getAllowList)(httpClient);case 3:allowList=_context4.sent;this.setState({allowList:allowList});if(!edit){_context4.next=20;break}destinationToEdit=_lodash.default.get(location,"state.destinationToEdit",null);if(!destinationToEdit){_context4.next=19;break}_context4.t0=_objectSpread;_context4.t1={};_context4.next=12;return(0,_destinationToFormik.destinationToFormik)(httpClient,destinationToEdit);case 12:_context4.t2=_context4.sent;initialValues=(0,_context4.t0)(_context4.t1,_context4.t2);ifSeqNo=destinationToEdit.ifSeqNo;ifPrimaryTerm=destinationToEdit.ifPrimaryTerm;this.setState({initialValues:initialValues,ifSeqNo:ifSeqNo,ifPrimaryTerm:ifPrimaryTerm});_context4.next=20;break;case 19:history.push("/destinations");case 20:case"end":return _context4.stop()}}}),_callee4,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"getAllowedDestinationOptions",value:function getAllowedDestinationOptions(){var allowList=this.state.allowList;return _constants2.DESTINATION_OPTIONS.filter((function(option){return allowList.includes(option.value)}))}},{key:"render",value:function render(){var _this2=this;var _this$props6=this.props,edit=_this$props6.edit,httpClient=_this$props6.httpClient,location=_this$props6.location,notifications=_this$props6.notifications;var initialValues=this.state.initialValues;return _react.default.createElement("div",{style:{padding:"25px 50px"}},_react.default.createElement(_formik.Formik,{initialValues:initialValues,enableReinitialize:true,validateOnChange:false,onSubmit:this.handleSubmit},(function(_ref6){var values=_ref6.values,handleSubmit=_ref6.handleSubmit,isSubmitting=_ref6.isSubmitting,errors=_ref6.errors,isValid=_ref6.isValid;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,edit?"View":"Add"," destination")),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_ContentPanel.default,{title:"Destination",titleSize:"s",bodyStyles:{padding:"initial"}},_react.default.createElement("div",{style:{padding:"0px 10px"}},_react.default.createElement(_FormControls.FormikFieldText,{name:"name",formRow:true,fieldProps:{validate:(0,_validations.validateDestinationName)(httpClient,_lodash.default.get(location,"state.destinationToEdit"))},rowProps:{label:"Name",helpText:"Specify a name of the destination.",style:{paddingLeft:"10px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{isInvalid:_validate.isInvalid,onChange:function onChange(e,field,form){field.onChange(e);form.setFieldError("name",(0,_validate.required)(e.target.value))},disabled:true}}),_react.default.createElement(_FormControls.FormikSelect,{name:"type",formRow:true,fieldProps:{validate:(0,_validations.validateDestinationType)(httpClient,notifications)},rowProps:{label:"Type",style:{paddingLeft:"10px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{disabled:true,options:_this2.getAllowedDestinationOptions(),isInvalid:_validate.isInvalid}}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_SubHeader.default,{title:_react.default.createElement("h4",null,"Settings"),description:""}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),destinationType[values.type]({httpClient:httpClient,values:values,type:values.type,notifications:notifications})),_react.default.createElement(_eui.EuiSpacer,{size:"m"})),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:_this2.handleCancel},"Close"))),_react.default.createElement(_SubmitErrorHandler.SubmitErrorHandler,{errors:errors,isSubmitting:isSubmitting,isValid:isValid,onSubmitError:function onSubmitError(){return _this2.props.notifications.toasts.addDanger({title:"Failed to ".concat(edit?"update":"create"," the destination"),text:"Fix all highlighted error(s) before continuing."})}}))})))}}]);return CreateDestination}(_react.default.Component);CreateDestination.defaultProps={edit:false};var _default=CreateDestination;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var DEFAULT_PROPS={size:"xs",style:{paddingLeft:"10px"}};var SubHeader=function SubHeader(_ref){var description=_ref.description,_ref$descriptionProps=_ref.descriptionProps,descriptionProps=_ref$descriptionProps===void 0?DEFAULT_PROPS:_ref$descriptionProps,_ref$horizontalRuleMa=_ref.horizontalRuleMargin,horizontalRuleMargin=_ref$horizontalRuleMa===void 0?"xs":_ref$horizontalRuleMa,title=_ref.title,_ref$titleProps=_ref.titleProps,titleProps=_ref$titleProps===void 0?DEFAULT_PROPS:_ref$titleProps;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiTitle,titleProps,title),_react.default.createElement(_eui.EuiHorizontalRule,{margin:horizontalRuleMargin}),_react.default.createElement(_eui.EuiText,descriptionProps,description))};var _default=SubHeader;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateDestinationType=exports.validateDestinationName=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));var _helpers=__webpack_require__(48);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var validateDestinationName=function validateDestinationName(httpClient,destinationToEdit){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(value){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(value){_context.next=3;break}return _context.abrupt("return","Required");case 3:_context.next=5;return httpClient.get("../api/alerting/destinations",{query:{search:value,sortField:"destination.name.keyword"}});case 5:response=_context.sent;if(!_lodash.default.get(response,"totalDestinations",0)){_context.next=11;break}if(destinationToEdit){_context.next=9;break}return _context.abrupt("return","Destination name is already used");case 9:if(!(destinationToEdit&&destinationToEdit.name!==value)){_context.next=11;break}return _context.abrupt("return","Destination name is already used");case 11:_context.next=18;break;case 13:_context.prev=13;_context.t0=_context["catch"](0);if(!(typeof _context.t0==="string")){_context.next=17;break}return _context.abrupt("return",_context.t0);case 17:return _context.abrupt("return","There was a problem validating destination name. Please try again.");case 18:case"end":return _context.stop()}}}),_callee,null,[[0,13]])})));return function(_x){return _ref.apply(this,arguments)}}()};exports.validateDestinationName=validateDestinationName;var validateDestinationType=function validateDestinationType(httpClient){return function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(value){var allowList;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_helpers.getAllowList)(httpClient);case 2:allowList=_context2.sent;if(!(allowList.length===0)){_context2.next=7;break}return _context2.abrupt("return","To select a type of destination, contact your administrator to obtain the following required permission for at least one of your Security role(s): cluster:monitor/state");case 7:if(allowList.includes(value)){_context2.next=9;break}return _context2.abrupt("return","Destination type [".concat(value,"] is disallowed"));case 9:case"end":return _context2.stop()}}}),_callee2)})));return function(_x2){return _ref2.apply(this,arguments)}}()};exports.validateDestinationType=validateDestinationType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formikToDestination=void 0;var _constants=__webpack_require__(31);var _constants2=__webpack_require__(87);var _excluded=["queryParams","headerParams","urlType"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var getCustomWebhookValues=function getCustomWebhookValues(_ref){var queryParams=_ref.queryParams,headerParams=_ref.headerParams,urlType=_ref.urlType,rest=_objectWithoutProperties(_ref,_excluded);var updatedHeaders=headerParams.reduce((function(acc,_ref2){var key=_ref2.key,value=_ref2.value;return _objectSpread(_objectSpread({},acc),{},_defineProperty({},key,value))}),{});var updatedQueryParams=queryParams.reduce((function(acc,_ref3){var key=_ref3.key,value=_ref3.value;return _objectSpread(_objectSpread({},acc),{},_defineProperty({},key,value))}),{});return _objectSpread(_objectSpread({},rest),{},{port:rest.port?rest.port:-1,header_params:updatedHeaders,query_params:updatedQueryParams})};var getEmailValues=function getEmailValues(_ref4){var emailSender=_ref4.emailSender,emailRecipients=_ref4.emailRecipients;var emailAccountId=emailSender[0].value;var recipients=emailRecipients.map((function(recipient){return recipient.type===_constants2.RECIPIENT_TYPE.EMAIL?{type:recipient.type,email:recipient.value}:{type:recipient.type,email_group_id:recipient.value}}));return{email_account_id:emailAccountId,recipients:recipients}};var formikToDestination=function formikToDestination(values){var type=values.type;var destinationValues={name:values.name,type:type};switch(type){case _constants.DESTINATION_TYPE.CUSTOM_HOOK:destinationValues[type]=getCustomWebhookValues(values[type]);break;case _constants.DESTINATION_TYPE.EMAIL:destinationValues[type]=getEmailValues(values[type]);break;case _constants.DESTINATION_TYPE.SLACK:case _constants.DESTINATION_TYPE.CHIME:destinationValues[type]=values[type];break}return destinationValues};exports.formikToDestination=formikToDestination},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.destinationToFormik=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(86);var _constants2=__webpack_require__(31);var _constants3=__webpack_require__(87);var _excluded=["query_params","header_params","port","url"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var getAttributeArrayFromValues=function getAttributeArrayFromValues(attributes){return Object.keys(attributes).map((function(currentKey){return{key:currentKey,value:attributes[currentKey]}}))};var customWebhookToFormik=function customWebhookToFormik(_ref){var _ref$query_params=_ref.query_params,queryParams=_ref$query_params===void 0?{}:_ref$query_params,_ref$header_params=_ref.header_params,headerParams=_ref$header_params===void 0?{}:_ref$header_params,port=_ref.port,url=_ref.url,rest=_objectWithoutProperties(_ref,_excluded);var updatedValues={};var contentType=headerParams[_constants.CONTENT_TYPE_KEY],otherHeaders=_objectWithoutProperties(headerParams,[_constants.CONTENT_TYPE_KEY].map(_toPropertyKey));updatedValues.headerParams=[{key:_constants.CONTENT_TYPE_KEY,value:contentType}].concat(_toConsumableArray(getAttributeArrayFromValues(otherHeaders||{})));updatedValues.queryParams=getAttributeArrayFromValues(queryParams);updatedValues.port=port===-1?null:port;updatedValues.urlType=_lodash.default.isEmpty(url)?_constants.URL_TYPE.ATTRIBUTE_URL:_constants.URL_TYPE.FULL_URL;return _objectSpread(_objectSpread(_objectSpread({},rest),updatedValues),{},{url:url})};var getSender=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(httpClient,id){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return httpClient.get("../api/alerting/destinations/email_accounts/".concat(id));case 3:response=_context.sent;if(!response.ok){_context.next=6;break}return _context.abrupt("return",response.resp);case 6:return _context.abrupt("return",null);case 9:_context.prev=9;_context.t0=_context["catch"](0);console.log("Unable to get email account",_context.t0);return _context.abrupt("return",null);case 13:case"end":return _context.stop()}}}),_callee,null,[[0,9]])})));return function getSender(_x,_x2){return _ref2.apply(this,arguments)}}();var getEmailGroup=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(httpClient,id){var response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return httpClient.get("../api/alerting/destinations/email_groups/".concat(id));case 3:response=_context2.sent;if(!response.ok){_context2.next=6;break}return _context2.abrupt("return",response.resp);case 6:return _context2.abrupt("return",null);case 9:_context2.prev=9;_context2.t0=_context2["catch"](0);console.log("Unable to get email group",_context2.t0);return _context2.abrupt("return",null);case 13:case"end":return _context2.stop()}}}),_callee2,null,[[0,9]])})));return function getEmailGroup(_x3,_x4){return _ref3.apply(this,arguments)}}();var emailToFormik=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(httpClient,email){var senderId,sender,senderValue,recipientValues,_iterator,_step,recipient,emailGroup;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:senderId=email.email_account_id;_context3.next=3;return getSender(httpClient,senderId);case 3:sender=_context3.sent;senderValue=!sender?[]:[{label:sender.name,value:senderId}];recipientValues=[];_iterator=_createForOfIteratorHelper(email.recipients);_context3.prev=7;_iterator.s();case 9:if((_step=_iterator.n()).done){_context3.next=21;break}recipient=_step.value;if(!(recipient.type===_constants3.RECIPIENT_TYPE.EMAIL)){_context3.next=15;break}recipientValues.push({label:recipient.email,value:recipient.email,type:_constants3.RECIPIENT_TYPE.EMAIL});_context3.next=19;break;case 15:_context3.next=17;return getEmailGroup(httpClient,recipient.email_group_id);case 17:emailGroup=_context3.sent;if(emailGroup){recipientValues.push({label:emailGroup.name,value:recipient.email_group_id,type:_constants3.RECIPIENT_TYPE.EMAIL_GROUP})}case 19:_context3.next=9;break;case 21:_context3.next=26;break;case 23:_context3.prev=23;_context3.t0=_context3["catch"](7);_iterator.e(_context3.t0);case 26:_context3.prev=26;_iterator.f();return _context3.finish(26);case 29:return _context3.abrupt("return",{emailSender:senderValue,emailRecipients:recipientValues});case 30:case"end":return _context3.stop()}}}),_callee3,null,[[7,23,26,29]])})));return function emailToFormik(_x5,_x6){return _ref4.apply(this,arguments)}}();var destinationToFormik=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(httpClient,values){var updatedValues,customWebhookValues,emailValues;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:updatedValues=_objectSpread({},_lodash.default.omit(values,["id","version","last_update_time"]));if(!(values.type===_constants2.DESTINATION_TYPE.CUSTOM_HOOK)){_context4.next=6;break}customWebhookValues=customWebhookToFormik(updatedValues[values.type]);updatedValues[values.type]=_objectSpread({},customWebhookValues);_context4.next=11;break;case 6:if(!(values.type===_constants2.DESTINATION_TYPE.EMAIL)){_context4.next=11;break}_context4.next=9;return emailToFormik(httpClient,updatedValues[values.type]);case 9:emailValues=_context4.sent;updatedValues[values.type]=_objectSpread({},emailValues);case 11:return _context4.abrupt("return",updatedValues);case 12:case"end":return _context4.stop()}}}),_callee4)})));return function destinationToFormik(_x7,_x8){return _ref5.apply(this,arguments)}}();exports.destinationToFormik=destinationToFormik},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CustomWebhook",{enumerable:true,get:function get(){return _CustomWebhook.default}});Object.defineProperty(exports,"Email",{enumerable:true,get:function get(){return _Email.default}});Object.defineProperty(exports,"Webhook",{enumerable:true,get:function get(){return _Webhook.default}});var _Webhook=_interopRequireDefault(__webpack_require__(571));var _CustomWebhook=_interopRequireDefault(__webpack_require__(572));var _Email=_interopRequireDefault(__webpack_require__(580));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var validateURL=function validateURL(value){if(!value)return"Required";var isValidUrl=/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$/.test(value);if(!isValidUrl)return"Invalid URL"};var Webhook=function Webhook(_ref){var type=_ref.type;return _react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(type,".url"),formRow:true,fieldProps:{validate:validateURL},rowProps:{label:"Webhook URL:",style:{paddingLeft:"10px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{isInvalid:_validate.isInvalid,onChange:function onChange(e,field,form){field.onChange(e);form.setFieldError("name",(0,_validate.required)(e.target.value))},disabled:true}})};var _default=Webhook;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _CustomWebhook=_interopRequireDefault(__webpack_require__(573));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_CustomWebhook.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _HeaderParamsEditor=_interopRequireDefault(__webpack_require__(574));var _MethodEditor=_interopRequireDefault(__webpack_require__(576));var _URLInfo=_interopRequireDefault(__webpack_require__(577));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CustomWebhook=function CustomWebhook(_ref){var type=_ref.type,values=_ref.values;return _react.default.createElement("div",null,_react.default.createElement(_URLInfo.default,{type:type,values:values}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_MethodEditor.default,{type:type}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_HeaderParamsEditor.default,{type:type,headerParams:values[type].headerParams}))};var _default=CustomWebhook;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _AttributeEditor=_interopRequireDefault(__webpack_require__(208));var _SubHeader=_interopRequireDefault(__webpack_require__(133));var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var handleRenderKeyField=function handleRenderKeyField(fieldName,index,isEnabled){return _react.default.createElement(_FormControls.FormikFieldText,{formRow:index===0,fieldProps:{validate:_validate.required},rowProps:{label:index===0?"Key":null,isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{isInvalid:_validate.isInvalid,disabled:!isEnabled},name:fieldName})};var handleRenderValueField=function handleRenderValueField(fieldName,index,isEnabled){return _react.default.createElement(_FormControls.FormikFieldText,{formRow:index===0,fieldProps:{validate:_validate.required},rowProps:{label:index===0?"Value":null},inputProps:{isInvalid:_validate.isInvalid,disabled:!isEnabled},name:fieldName})};var HeaderParamsEditor=function HeaderParamsEditor(_ref){var type=_ref.type,headerParams=_ref.headerParams;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_SubHeader.default,{title:_react.default.createElement("h6",null,"Header information"),description:""}),_react.default.createElement(_formik.FieldArray,{name:"".concat(type,".headerParams"),validateOnChange:true},(function(arrayHelpers){return _react.default.createElement(_AttributeEditor.default,{onAdd:function onAdd(){return arrayHelpers.push({key:"",value:""})},onRemove:function onRemove(index){return index!==0&&arrayHelpers.remove(index)},items:headerParams,name:"".concat(type,".headerParams"),addButtonText:"Add header",removeButtonText:"Remove header",onRenderKeyField:handleRenderKeyField,onRenderValueField:handleRenderValueField,isEnabled:false})})))};var _default=HeaderParamsEditor;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var defaultProps={titleText:"",emptyText:"No attributes found.",addButtonText:"Add",removeButtonText:"Remove",isEnabled:true};var AttributeEditor=function AttributeEditor(_ref){var titleText=_ref.titleText,emptyText=_ref.emptyText,name=_ref.name,items=_ref.items,onAdd=_ref.onAdd,onRemove=_ref.onRemove,onRenderKeyField=_ref.onRenderKeyField,onRenderValueField=_ref.onRenderValueField,addButtonText=_ref.addButtonText,removeButtonText=_ref.removeButtonText,isEnabled=_ref.isEnabled;return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column",alignItems:"flexStart",style:{paddingLeft:"10px"}},!_lodash.default.isEmpty(titleText)?_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"xs"},titleText)):null,!_lodash.default.isEmpty(items)?items.map((function(item,index){return _react.default.createElement(_eui.EuiFlexItem,{style:{marginBottom:0},key:"".concat(name,".").concat(index,".key")},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,onRenderKeyField("".concat(name,".").concat(index,".key"),index,isEnabled)),_react.default.createElement(_eui.EuiFlexItem,null,onRenderValueField("".concat(name,".").concat(index,".value"),index,isEnabled)),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{style:{marginTop:10},size:"s",onClick:function onClick(e){return onRemove(index)},disabled:!isEnabled},removeButtonText))))})):_react.default.createElement(_eui.EuiFlexItem,{style:{marginBottom:0}},_react.default.createElement(_eui.EuiText,{size:"xs"}," ",emptyText," ")),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButton,{size:"s",onClick:onAdd,disabled:!isEnabled},addButtonText)))};AttributeEditor.defaultProps=defaultProps;var _default=AttributeEditor;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _formik=__webpack_require__(20);var _SubHeader=_interopRequireDefault(__webpack_require__(133));var _FormControls=__webpack_require__(17);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var methodOptions=[{value:"POST",text:"POST"},{value:"PUT",text:"PUT"},{value:"PATCH",text:"PATCH"}];var MethodEditor=function MethodEditor(_ref){var type=_ref.type;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_SubHeader.default,{title:_react.default.createElement("h6",null,"Method Selection"),description:""}),_react.default.createElement(_FormControls.FormikSelect,{name:"".concat(type,".method"),formRow:true,rowProps:{label:"Method",style:{paddingLeft:"10px"}},inputProps:{disabled:true,options:methodOptions}}))};var _default=MethodEditor;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _validate2=__webpack_require__(578);var _constants=__webpack_require__(86);var _constants2=__webpack_require__(31);var _QueryParamsEditor=_interopRequireDefault(__webpack_require__(579));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var protocolOptions=[{value:"HTTPS",text:"HTTPS"},{value:"HTTP",text:"HTTP"}];var URLInfo=function URLInfo(_ref){var type=_ref.type,values=_ref.values;var isUrlEnabled=values[type].urlType===_constants.URL_TYPE.FULL_URL;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_FormControls.FormikFieldRadio,{name:"".concat(type,".urlType"),formRow:true,inputProps:{id:"fullUrl",value:_constants.URL_TYPE.FULL_URL,checked:isUrlEnabled,label:"Define endpoint by URL",onChange:function onChange(e,field,form){if(field.value===_constants.URL_TYPE.ATTRIBUTE_URL){var customValues=_objectSpread(_objectSpread({},values),{},_defineProperty({},type,_objectSpread(_objectSpread({},values[type]),{},{scheme:"",host:"",port:"",path:"",queryParams:_constants.formikInitialValues[_constants2.DESTINATION_TYPE.CUSTOM_HOOK].queryParams})));form.setTouched(_defineProperty({},type,{scheme:false,host:false,port:false,path:false}));form.setValues(customValues)}field.onChange(e)},disabled:true}}),_react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(type,".url"),formRow:true,fieldProps:{validate:function validate(fieldValue){return(0,_validate2.validateUrl)(fieldValue,values)}},rowProps:{label:"Webhook URL",style:{paddingLeft:"10px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{disabled:true,isInvalid:_validate.isInvalid,onChange:function onChange(e,field,form){field.onChange(e);form.setFieldError("".concat(type,".url"),(0,_validate.required)(e.target.value))}}}),_react.default.createElement(_FormControls.FormikFieldRadio,{name:"".concat(type,".urlType"),formRow:true,value:"customUrl",inputProps:{id:"customUrl",value:_constants.URL_TYPE.ATTRIBUTE_URL,checked:!isUrlEnabled,label:"Define endpoint by custom attributes URL",onChange:function onChange(e,field,form){if(field.value===_constants.URL_TYPE.FULL_URL){form.setFieldTouched("".concat(type,".url"),false,false);form.setFieldValue("".concat(type,".url"),"")}field.onChange(e)},disabled:true}}),_react.default.createElement(_FormControls.FormikSelect,{name:"".concat(type,".scheme"),formRow:true,rowProps:{label:"Type",style:{paddingLeft:"10px"}},inputProps:{disabled:true,options:protocolOptions}}),_react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(type,".host"),formRow:true,fieldProps:{validate:function validate(fieldValue){return(0,_validate2.validateHost)(fieldValue,values)}},rowProps:{label:"Host",style:{paddingLeft:"10px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{disabled:true,isInvalid:_validate.isInvalid,onChange:function onChange(e,field,form){field.onChange(e);form.setFieldError("".concat(type,".host"),(0,_validate.required)(e.target.value))}}}),_react.default.createElement(_FormControls.FormikFieldNumber,{name:"".concat(type,".port"),formRow:true,rowProps:{label:"Port",style:{paddingLeft:"10px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{disabled:true,isInvalid:_validate.isInvalid}}),_react.default.createElement(_FormControls.FormikFieldText,{name:"".concat(type,".path"),formRow:true,rowProps:{label:"Path",style:{paddingLeft:"10px"},isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{disabled:true,isInvalid:_validate.isInvalid}}),_react.default.createElement(_QueryParamsEditor.default,{type:type,queryParams:values[type].queryParams,isEnabled:false}))};var _default=URLInfo;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateUrl=exports.validateHost=void 0;var _constants=__webpack_require__(86);var fqdn="(?:[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(?:\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})*)";var regname="(?:[a-zA-Z0-9._-]+(?::[^@]*)?@)?".concat(fqdn);var ipv4="(((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))";var h16="([0-9a-fA-F]{1,4})";var ls32="((".concat(h16,":").concat(h16,")|").concat(ipv4,")");var ipv6="\\[("+"((".concat(h16,":){6}").concat(ls32,")|")+"(::(".concat(h16,":){5}").concat(ls32,")|")+"(".concat(h16,"?::(").concat(h16,":){4}").concat(ls32,")|")+"(((".concat(h16,":){0,1}").concat(h16,")?::(").concat(h16,":){3}").concat(ls32,")|")+"(((".concat(h16,":){0,2}").concat(h16,")?::(").concat(h16,":){2}").concat(ls32,")|")+"(((".concat(h16,":){0,3}").concat(h16,")?::").concat(h16,":").concat(ls32,")|")+"(((".concat(h16,":){0,4}").concat(h16,")?::").concat(ls32,")|")+"(((".concat(h16,":){0,5}").concat(h16,")?::").concat(h16,")|")+"((".concat(h16,":){0,6}").concat(h16,")?::")+")\\]";var validateUrl=function validateUrl(value,allValues){var type=allValues.type;if(allValues[type].urlType!==_constants.URL_TYPE.FULL_URL)return;if(!value)return"Required";var regexUrl="^https?:\\/\\/(".concat(regname,"|").concat(ipv4,"|").concat(ipv6,")(:[0-9]{1,5})?([/?#][-a-zA-Z0-9@:%_\\+.~#?&//=]*)?$");var isValidUrl=new RegExp(regexUrl).test(value);if(!isValidUrl)return"Invalid URL"};exports.validateUrl=validateUrl;var validateHost=function validateHost(value,allValues){var type=allValues.type;if(allValues[type].urlType!==_constants.URL_TYPE.ATTRIBUTE_URL)return;if(!value)return"Required";var regexHost="^".concat(fqdn,"|").concat(ipv4,"|").concat(ipv6,"$");var isValidUrl=new RegExp(regexHost).test(value);if(!isValidUrl)return"Invalid Host"};exports.validateHost=validateHost},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _formik=__webpack_require__(20);var _AttributeEditor=_interopRequireDefault(__webpack_require__(208));var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var handleRenderKeyField=function handleRenderKeyField(fieldName,index,isEnabled){return _react.default.createElement(_FormControls.FormikFieldText,{formRow:index===0,fieldProps:{validate:isEnabled?_validate.required:null},rowProps:{label:index===0?"Key":null},inputProps:{isInvalid:_validate.isInvalid,disabled:!isEnabled},name:fieldName})};var handleRenderValueField=function handleRenderValueField(fieldName,index,isEnabled){return _react.default.createElement(_FormControls.FormikFieldText,{formRow:index===0,fieldProps:{validate:isEnabled?_validate.required:null},rowProps:{label:index===0?"Value":null},inputProps:{isInvalid:_validate.isInvalid,disabled:!isEnabled},name:fieldName})};var QueryParamsEditor=function QueryParamsEditor(_ref){var type=_ref.type,queryParams=_ref.queryParams,_ref$isEnabled=_ref.isEnabled,isEnabled=_ref$isEnabled===void 0?true:_ref$isEnabled;return _react.default.createElement(_formik.FieldArray,{name:"".concat(type,".queryParams"),validateOnChange:true},(function(arrayHelpers){return _react.default.createElement(_AttributeEditor.default,{titleText:"Query parameters",onAdd:function onAdd(){return arrayHelpers.push({key:"",value:""})},onRemove:function onRemove(index){return arrayHelpers.remove(index)},items:queryParams,name:"".concat(type,".queryParams"),addButtonText:"Add parameter",removeButtonText:"Remove parameter",onRenderKeyField:handleRenderKeyField,onRenderValueField:handleRenderValueField,isEnabled:false})}))};var _default=QueryParamsEditor;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Email=_interopRequireDefault(__webpack_require__(581));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_Email.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _EmailSender=_interopRequireDefault(__webpack_require__(582));var _EmailRecipients=_interopRequireDefault(__webpack_require__(585));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Email=function Email(_ref){var httpClient=_ref.httpClient,type=_ref.type,values=_ref.values,notifications=_ref.notifications;return _react.default.createElement("div",null,_react.default.createElement(_EmailSender.default,{httpClient:httpClient,type:type,notifications:notifications}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_EmailRecipients.default,{httpClient:httpClient,type:type,notifications:notifications}))};var _default=Email;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _EmailSender=_interopRequireDefault(__webpack_require__(583));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_EmailSender.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(584);var _validate2=__webpack_require__(18);var _ManageSenders=_interopRequireDefault(__webpack_require__(138));var _helpers=_interopRequireDefault(__webpack_require__(161));var _helpers2=__webpack_require__(48);var _constants=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmailSender=function(_React$Component){_inherits(EmailSender,_React$Component);var _super=_createSuper(EmailSender);function EmailSender(props){var _this;_classCallCheck(this,EmailSender);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"onClickSave",(function(){_this.loadSenders().then((function(r){return _this.setState({showManageSendersModal:false})}))}));_defineProperty(_assertThisInitialized(_this),"loadSenders",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var httpClient,senders,senderOptions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:httpClient=_this.props.httpClient;_this.setState({loadingSenders:true});_context.next=4;return(0,_helpers.default)(httpClient);case 4:senders=_context.sent;senderOptions=senders.map((function(sender){return{label:sender.name,value:sender.id}}));_this.setState({senderOptions:senderOptions,loadingSenders:false});case 7:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"isEmailAllowed",(function(){var allowList=_this.state.allowList;return allowList.includes(_constants.DESTINATION_TYPE.EMAIL)}));_this.state={senderOptions:[],loadingSenders:true,showManageSendersModal:false,allowList:[]};_this.onClickManageSenders=_this.onClickManageSenders.bind(_assertThisInitialized(_this));_this.onClickCancel=_this.onClickCancel.bind(_assertThisInitialized(_this));_this.onClickSave=_this.onClickSave.bind(_assertThisInitialized(_this));return _this}_createClass(EmailSender,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var httpClient,allowList;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:httpClient=this.props.httpClient;_context2.next=3;return(0,_helpers2.getAllowList)(httpClient);case 3:allowList=_context2.sent;this.setState({allowList:allowList});this.loadSenders();case 6:case"end":return _context2.stop()}}}),_callee2,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"onClickManageSenders",value:function onClickManageSenders(){this.setState({showManageSendersModal:true})}},{key:"onClickCancel",value:function onClickCancel(){this.setState({showManageSendersModal:false})}},{key:"render",value:function render(){var _this$props=this.props,httpClient=_this$props.httpClient,type=_this$props.type,notifications=_this$props.notifications;var _this$state=this.state,senderOptions=_this$state.senderOptions,loadingSenders=_this$state.loadingSenders,showManageSendersModal=_this$state.showManageSendersModal;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"flexStart",style:{paddingLeft:"10px"}},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormControls.FormikComboBox,{name:"".concat(type,".emailSender"),formRow:true,fieldProps:{validate:(0,_validate.validateEmailSender)(senderOptions)},rowProps:{label:"Sender",helpText:"A destination only allows one sender. "+'Use "Manage senders" to create a sender with its email address, host, port, etc.',isInvalid:_validate2.isInvalid,error:_validate2.hasError},inputProps:{placeholder:"Sender name",async:true,isLoading:loadingSenders,options:senderOptions,onChange:function onChange(options,field,form){form.setFieldValue("".concat(type,".emailSender"),options)},onBlur:function onBlur(e,field,form){form.setFieldTouched("".concat(type,".emailSender"),true)},singleSelection:{asPlainText:true},isClearable:false,isDisabled:true}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{style:{marginTop:22},onClick:this.onClickManageSenders},"Manage senders"))),_react.default.createElement(_ManageSenders.default,{httpClient:httpClient,isEmailAllowed:this.isEmailAllowed(),isVisible:showManageSendersModal,onClickCancel:this.onClickCancel,onClickSave:this.onClickSave,notifications:notifications}))}}]);return EmailSender}(_react.default.Component);exports.default=EmailSender;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateEmailSender=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var validateEmailSender=function validateEmailSender(senders){return function(value){if(_lodash.default.isEmpty(value))return"Required";var senderMatches=senders.filter((function(sender){return sender.value===value[0].value}));if(senderMatches.length===0){return"Matching sender required"}}};exports.validateEmailSender=validateEmailSender},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _EmailRecipients=_interopRequireDefault(__webpack_require__(586));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_EmailRecipients.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _eui=__webpack_require__(6);var _FormControls=__webpack_require__(17);var _validate=__webpack_require__(18);var _ManageEmailGroups=_interopRequireDefault(__webpack_require__(162));var _validate2=__webpack_require__(587);var _constants=__webpack_require__(87);var _helpers=_interopRequireDefault(__webpack_require__(163));var _helpers2=__webpack_require__(48);var _constants2=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmailRecipients=function(_React$Component){_inherits(EmailRecipients,_React$Component);var _super=_createSuper(EmailRecipients);function EmailRecipients(props){var _this;_classCallCheck(this,EmailRecipients);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"onCreateOption",(function(fieldName,value,selectedOptions,setFieldValue){var normalizedValue=value.trim().toLowerCase();if(!normalizedValue)return;var newOption={label:value,value:value,type:_constants.RECIPIENT_TYPE.EMAIL};setFieldValue(fieldName,[].concat(_toConsumableArray(selectedOptions),[newOption]))}));_defineProperty(_assertThisInitialized(_this),"onClickSave",(function(){_this.loadData().then((function(r){return _this.setState({showManageEmailGroupsModal:false})}))}));_defineProperty(_assertThisInitialized(_this),"loadData",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var searchText,httpClient,emailGroups,emailGroupOptions,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchText=_args.length>0&&_args[0]!==undefined?_args[0]:"";httpClient=_this.props.httpClient;_this.setState({isLoading:true});_context.next=5;return(0,_helpers.default)(httpClient);case 5:emailGroups=_context.sent;emailGroupOptions=emailGroups.map((function(emailGroup){return{label:emailGroup.name,value:emailGroup.id,type:_constants.RECIPIENT_TYPE.EMAIL_GROUP}}));_this.setState({recipientOptions:emailGroupOptions,isLoading:false});case 8:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"isEmailAllowed",(function(){var allowList=_this.state.allowList;return allowList.includes(_constants2.DESTINATION_TYPE.EMAIL)}));_this.state={emailGroups:[],recipientOptions:[],isLoading:true,showManageEmailGroupsModal:false,allowList:[]};_this.onClickManageEmailGroups=_this.onClickManageEmailGroups.bind(_assertThisInitialized(_this));_this.onClickCancel=_this.onClickCancel.bind(_assertThisInitialized(_this));return _this}_createClass(EmailRecipients,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var httpClient,allowList;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:httpClient=this.props.httpClient;_context2.next=3;return(0,_helpers2.getAllowList)(httpClient);case 3:allowList=_context2.sent;this.setState({allowList:allowList});this.loadData();case 6:case"end":return _context2.stop()}}}),_callee2,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"onClickManageEmailGroups",value:function onClickManageEmailGroups(){this.setState({showManageEmailGroupsModal:true})}},{key:"onClickCancel",value:function onClickCancel(){this.setState({showManageEmailGroupsModal:false})}},{key:"render",value:function render(){var _this2=this;var _this$props=this.props,httpClient=_this$props.httpClient,type=_this$props.type,notifications=_this$props.notifications;var _this$state=this.state,recipientOptions=_this$state.recipientOptions,isLoading=_this$state.isLoading,showManageEmailGroupsModal=_this$state.showManageEmailGroupsModal;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"flexStart",style:{paddingLeft:"10px"}},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_FormControls.FormikComboBox,{name:"".concat(type,".emailRecipients"),formRow:true,fieldProps:{validate:_validate2.validateEmailRecipients},rowProps:{label:"Recipients",helpText:"Add recipient(s) using an email address or a pre-created email group. "+'Use "Manage email groups" to create or remove email groups.',isInvalid:_validate.isInvalid,error:_validate.hasError},inputProps:{placeholder:"Email address, email group name",async:true,isLoading:isLoading,options:recipientOptions,onChange:function onChange(options,field,form){form.setFieldValue("".concat(type,".emailRecipients"),options)},onBlur:function onBlur(e,field,form){form.setFieldTouched("".concat(type,".emailRecipients"),true)},onCreateOption:function onCreateOption(value,field,form){_this2.onCreateOption("".concat(type,".emailRecipients"),value,field.value,form.setFieldValue)},isDisabled:true}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{style:{marginTop:22},onClick:this.onClickManageEmailGroups},"Manage email groups"))),_react.default.createElement(_ManageEmailGroups.default,{httpClient:httpClient,isEmailAllowed:this.isEmailAllowed(),isVisible:showManageEmailGroupsModal,onClickCancel:this.onClickCancel,onClickSave:this.onClickSave,notifications:notifications}))}}]);return EmailRecipients}(_react.default.Component);exports.default=EmailRecipients;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateEmailRecipients=void 0;var _lodash=_interopRequireDefault(__webpack_require__(7));var _constants=__webpack_require__(87);var _validate=__webpack_require__(104);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var validateEmailRecipients=function validateEmailRecipients(options){if(_lodash.default.isEmpty(options))return"Required";var invalidEmails=[];var _iterator=_createForOfIteratorHelper(options),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var option=_step.value;if(option.type===_constants.RECIPIENT_TYPE.EMAIL&&!(0,_validate.isValidEmail)(option.value)){invalidEmails.push(option.value)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(invalidEmails.length>0)return"Invalid emails: ".concat(invalidEmails.join(", "))};exports.validateEmailRecipients=validateEmailRecipients},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Flyout=_interopRequireDefault(__webpack_require__(589));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_Flyout.default;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _flyouts=_interopRequireDefault(__webpack_require__(590));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var getFlyoutData=function getFlyoutData(_ref){var type=_ref.type,payload=_ref.payload;var flyout=_flyouts.default[type];if(!flyout||typeof flyout!=="function")return null;return flyout(payload)};var Flyout=function Flyout(_ref2){var flyout=_ref2.flyout,onClose=_ref2.onClose;if(!flyout)return null;var flyoutData=getFlyoutData(flyout);if(!flyoutData)return null;var _flyoutData$flyoutPro=flyoutData.flyoutProps,flyoutProps=_flyoutData$flyoutPro===void 0?{}:_flyoutData$flyoutPro,_flyoutData$headerPro=flyoutData.headerProps,headerProps=_flyoutData$headerPro===void 0?{}:_flyoutData$headerPro,_flyoutData$bodyProps=flyoutData.bodyProps,bodyProps=_flyoutData$bodyProps===void 0?{}:_flyoutData$bodyProps,_flyoutData$footerPro=flyoutData.footerProps,footerProps=_flyoutData$footerPro===void 0?{}:_flyoutData$footerPro,_flyoutData$header=flyoutData.header,header=_flyoutData$header===void 0?null:_flyoutData$header,_flyoutData$body=flyoutData.body,body=_flyoutData$body===void 0?null:_flyoutData$body,_flyoutData$footer=flyoutData.footer,footer=_flyoutData$footer===void 0?null:_flyoutData$footer;var flyoutHeader=header&&_react.default.createElement(_eui.EuiFlyoutHeader,headerProps,header);var flyoutBody=body&&_react.default.createElement(_eui.EuiFlyoutBody,bodyProps,body);var flyoutFooter=footer&&_react.default.createElement(_eui.EuiFlyoutFooter,footerProps,footer);return _react.default.createElement(_eui.EuiFlyout,_extends({onClose:onClose},flyoutProps),flyoutHeader,flyoutBody,flyoutFooter)};var _default=Flyout;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _message=_interopRequireDefault(__webpack_require__(591));var _messageFrequency=_interopRequireDefault(__webpack_require__(592));var _triggerCondition=_interopRequireDefault(__webpack_require__(593));var _alertsDashboard=_interopRequireDefault(__webpack_require__(594));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Flyouts={messageFrequency:_messageFrequency.default,message:_message.default,triggerCondition:_triggerCondition.default,alertsDashboard:_alertsDashboard.default};var _default=Flyouts;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _constants=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var message=function message(){return{flyoutProps:{"aria-labelledby":"messageFlyout",maxWidth:500,size:"m"},headerProps:{hasBorder:true},header:_react.default.createElement(_eui.EuiTitle,{size:"m",style:{fontSize:"25px"}},_react.default.createElement("h2",null,_react.default.createElement("strong",null,"Message"))),body:_react.default.createElement(_eui.EuiText,{style:{fontSize:"14px"}},_react.default.createElement("p",null,'You have access to a "ctx" variable in your painless scripts and action mustache templates.'),_react.default.createElement("h3",null,"Learn More"),_react.default.createElement("ul",null,_react.default.createElement("li",null,_react.default.createElement(_eui.EuiLink,{target:"_blank",href:_constants.URL.MUSTACHE,external:true},"HTML Templates with Mustache.js"))))}};var _default=message;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var messageFrequency=function messageFrequency(){return{flyoutProps:{"aria-labelledby":"messageFrequencyFlyout",maxWidth:500,size:"m"},headerProps:{hasBorder:true},header:_react.default.createElement(_eui.EuiTitle,{size:"m",style:{fontSize:"25px"}},_react.default.createElement("h2",null,_react.default.createElement("strong",null,"Message frequency"))),body:_react.default.createElement(_eui.EuiText,{style:{fontSize:"14px"}},_react.default.createElement("p",null,"Specify message frequency to limit the number of notifications you receive within a given span of time. This setting is especially useful for low severity trigger conditions."),_react.default.createElement("p",null,"Consider the following example:"),_react.default.createElement("ul",null,_react.default.createElement("li",null,"A trigger condition is met."),_react.default.createElement("li",null,"The monitor sends a message"),_react.default.createElement("li",null,"Message frequency is set to 10 minutes.")),_react.default.createElement("p",null,"For the next 10 minutes, even if a trigger condition is met dozens of times, the monitor sends no additional messages. If the trigger condition is met 11 minutes later, the monitor sends another message."))}};var _default=messageFrequency;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CONTEXT_VARIABLES=JSON.stringify({monitor:"...",trigger:"...",results:"...",periodStart:"...",periodEnd:"...",alert:"...",error:"..."},null,4);var triggerCondition=function triggerCondition(context){return{flyoutProps:{"aria-labelledby":"triggerConditionFlyout",maxWidth:500,size:"m"},headerProps:{hasBorder:true},header:_react.default.createElement(_eui.EuiTitle,{size:"m",style:{fontSize:"25px"}},_react.default.createElement("h2",null,_react.default.createElement("strong",null,"Trigger condition"))),body:_react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,{style:{fontSize:"14px"}},_react.default.createElement("p",null,'You have access to a "ctx" variable in your painless scripts'),_react.default.createElement("p",null,'Below shows a quick JSON example of what\'s available under the "ctx" variable along with the actual results (where possible) for you to reference.')),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiCodeBlock,{language:"json"},CONTEXT_VARIABLES),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiCodeEditor,{mode:"json",theme:"github",width:"100%",height:"700px",readOnly:true,value:JSON.stringify(context,null,4),setOptions:{fontSize:"12px"}}))}};var _default=triggerCondition;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(6);var _AlertsDashboardFlyoutComponent=_interopRequireDefault(__webpack_require__(595));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var alertsDashboard=function alertsDashboard(payload){var closeFlyout=payload.closeFlyout,trigger_name=payload.trigger_name;return{flyoutProps:{"aria-labelledby":"alertsDashboardFlyout",size:"m",hideCloseButton:true,"data-test-subj":"alertsDashboardFlyout_".concat(trigger_name)},headerProps:{hasBorder:true},header:_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{className:"eui-textTruncate"},_react.default.createElement(_eui.EuiTitle,{className:"eui-textTruncate",size:"m","data-test-subj":"alertsDashboardFlyout_header_".concat(trigger_name)},_react.default.createElement("h3",null,"Alerts by ".concat(trigger_name)))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{"data-test-subj":"alertsDashboardFlyout_closeButton_".concat(trigger_name),iconType:"cross",display:"empty",iconSize:"m",onClick:closeFlyout}))),footerProps:{style:{backgroundColor:"#F5F7FA"}},body:_react.default.createElement(_AlertsDashboardFlyoutComponent.default,payload)}};var _default=alertsDashboard;exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.DEFAULT_NUM_FLYOUT_ROWS=void 0;var _react=_interopRequireWildcard(__webpack_require__(5));var _lodash=_interopRequireDefault(__webpack_require__(7));var _eui=__webpack_require__(6);var _getOverviewStats=__webpack_require__(206);var _constants=__webpack_require__(0);var _constants2=__webpack_require__(15);var _constants3=__webpack_require__(28);var _constants4=__webpack_require__(23);var _whereHelpers=__webpack_require__(84);var _helpers=__webpack_require__(22);var _helpers2=__webpack_require__(69);var _DashboardControls=_interopRequireDefault(__webpack_require__(90));var _ContentPanel=_interopRequireDefault(__webpack_require__(29));var _tableUtils=__webpack_require__(55);var _constants5=__webpack_require__(45);var _queryString=_interopRequireDefault(__webpack_require__(32));var _constants6=__webpack_require__(70);var _constants7=__webpack_require__(30);var _findingsUtils=__webpack_require__(38);var _FindingsDashboard=_interopRequireDefault(__webpack_require__(71));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULT_NUM_FLYOUT_ROWS=10;exports.DEFAULT_NUM_FLYOUT_ROWS=DEFAULT_NUM_FLYOUT_ROWS;var AlertsDashboardFlyoutComponent=function(_Component){_inherits(AlertsDashboardFlyoutComponent,_Component);var _super=_createSuper(AlertsDashboardFlyoutComponent);function AlertsDashboardFlyoutComponent(props){var _this;_classCallCheck(this,AlertsDashboardFlyoutComponent);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),"getMultipleGraphConditions",(function(trigger){var conditions=_lodash.default.get(trigger,"condition.script.source");if(_lodash.default.isEmpty(conditions)){return"-"}else{conditions=conditions.replaceAll(" && ","&AND&");conditions=conditions.replaceAll(" || ","&OR&");conditions=conditions.split(/&/);return conditions.join("\n")}}));_defineProperty(_assertThisInitialized(_this),"getSeverityText",(function(severity){return _lodash.default.get(_lodash.default.find(_constants7.SEVERITY_OPTIONS,{value:severity}),"text")}));_defineProperty(_assertThisInitialized(_this),"getBucketLevelGraphFilter",(function(trigger){var compositeAggFilter=_lodash.default.get(trigger,"condition.composite_agg_filter");if(_lodash.default.isEmpty(compositeAggFilter))return _whereHelpers.DEFAULT_WHERE_EXPRESSION_TEXT;var keyword=_lodash.default.keys(compositeAggFilter)[0];var operator=_lodash.default.keys(compositeAggFilter[keyword])[0];var value=_lodash.default.get(compositeAggFilter,"".concat(keyword,".").concat(operator));return"".concat(keyword," ").concat(_lodash.default.upperCase(operator),"S ").concat(value)}));_defineProperty(_assertThisInitialized(_this),"getAlerts",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$state,from,search,sortField,sortDirection,severityLevel,alertState,monitorIds,_this$props,httpClient,history,notifications,triggerID,params,queryParamsString;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({loading:true,tabContent:undefined});_this$state=_this.state,from=_this$state.from,search=_this$state.search,sortField=_this$state.sortField,sortDirection=_this$state.sortDirection,severityLevel=_this$state.severityLevel,alertState=_this$state.alertState,monitorIds=_this$state.monitorIds;_this$props=_this.props,httpClient=_this$props.httpClient,history=_this$props.history,notifications=_this$props.notifications,triggerID=_this$props.triggerID;params={from:from,size:_constants6.MAX_ALERT_COUNT,search:search,sortField:sortField,sortDirection:sortDirection,severityLevel:severityLevel,alertState:alertState,monitorIds:monitorIds};queryParamsString=_queryString.default.stringify(params);history.replace(_objectSpread(_objectSpread({},_this.props.location),{},{search:queryParamsString}));httpClient.get("../api/alerting/alerts",{query:params}).then((function(resp){if(resp.ok){var alerts=resp.alerts;var filteredAlerts=_lodash.default.filter(alerts,{trigger_id:triggerID});_this.setState(_objectSpread(_objectSpread({},_this.state),{},{alerts:filteredAlerts,totalAlerts:filteredAlerts.length}))}else{console.log("error getting alerts:",resp);(0,_helpers.backendErrorNotification)(notifications,"get","alerts",resp.err)}_this.setState({tabContent:_this.renderAlertsTable()})}));_this.setState({loading:false});case 8:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"acknowledgeAlerts",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var selectedItems,_this$props2,httpClient,notifications,selectedAlerts,monitorAlerts,_this$state2,page,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:selectedItems=_this.state.selectedItems;_this$props2=_this.props,httpClient=_this$props2.httpClient,notifications=_this$props2.notifications;if(selectedItems.length){_context2.next=4;break}return _context2.abrupt("return");case 4:selectedAlerts=(0,_helpers2.filterActiveAlerts)(selectedItems);monitorAlerts=selectedAlerts.reduce((function(monitorAlerts,alert){var id=alert.id,monitorId=alert.monitor_id;if(monitorAlerts[monitorId])monitorAlerts[monitorId].push(id);else monitorAlerts[monitorId]=[id];return monitorAlerts}),{});Object.entries(monitorAlerts).map((function(_ref3){var _ref4=_slicedToArray(_ref3,2),monitorId=_ref4[0],alerts=_ref4[1];return httpClient.post("../api/alerting/monitors/".concat(monitorId,"/_acknowledge/alerts"),{body:JSON.stringify({alerts:alerts})}).then((function(resp){if(!resp.ok){(0,_helpers.backendErrorNotification)(notifications,"acknowledge","alert",resp.resp)}else{var successfulCount=_lodash.default.get(resp,"resp.success",[]).length;(0,_helpers2.displayAcknowledgedAlertsToast)(notifications,successfulCount)}})).catch((function(error){return error}))}));_this$state2=_this.state,page=_this$state2.page,size=_this$state2.size,search=_this$state2.search,sortField=_this$state2.sortField,sortDirection=_this$state2.sortDirection,severityLevel=_this$state2.severityLevel,alertState=_this$state2.alertState,monitorIds=_this$state2.monitorIds;_context2.next=10;return _this.getAlerts(page*size,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds);case 10:_this.setState({selectedItems:[]});_this.props.refreshDashboard();case 12:case"end":return _context2.stop()}}}),_callee2)}))));_defineProperty(_assertThisInitialized(_this),"onAlertStateChange",(function(e){_this.setState({page:0,alertState:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onPageClick",(function(page){_this.setState({page:page})}));_defineProperty(_assertThisInitialized(_this),"onSearchChange",(function(e){_this.setState({page:0,search:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onSelectionChange",(function(selectedItems){_this.setState({selectedItems:selectedItems})}));_defineProperty(_assertThisInitialized(_this),"onTableChange",(function(_ref5){var _ref5$page=_ref5.page,tablePage=_ref5$page===void 0?{}:_ref5$page,_ref5$sort=_ref5.sort,sort=_ref5$sort===void 0?{}:_ref5$sort;var page=tablePage.index,size=tablePage.size;var sortField=sort.field,sortDirection=sort.direction;_this.setState({page:page,size:size,sortField:sortField,sortDirection:sortDirection});var alerts=_this.props.alerts;_this.setState({alerts:alerts})}));var _this$props3=_this.props,location=_this$props3.location,monitors=_this$props3.monitors,monitor_id=_this$props3.monitor_id;var monitor=_lodash.default.get(_lodash.default.find(monitors,{_id:monitor_id}),"_source");var monitorType=_lodash.default.get(monitor,"monitor_type",_constants2.MONITOR_TYPE.QUERY_LEVEL);var _getURLQueryParams=(0,_helpers2.getURLQueryParams)(location),_alertState=_getURLQueryParams.alertState,_from=_getURLQueryParams.from,_search=_getURLQueryParams.search,_severityLevel=_getURLQueryParams.severityLevel,_size=_getURLQueryParams.size,_sortDirection=_getURLQueryParams.sortDirection,_sortField=_getURLQueryParams.sortField;_this.state={alerts:[],alertState:_alertState,loading:true,monitor:monitor,monitorIds:[monitor_id],monitorType:monitorType,page:Math.floor(_from/_size),search:_search,selectable:true,selectedItems:[],severityLevel:_severityLevel,size:DEFAULT_NUM_FLYOUT_ROWS,sortDirection:_sortDirection,sortField:_sortField,tabContent:undefined,tabId:_findingsUtils.TABLE_TAB_IDS.ALERTS.id,totalAlerts:0};return _this}_createClass(AlertsDashboardFlyoutComponent,[{key:"componentDidMount",value:function componentDidMount(){var _this$state3=this.state,alertState=_this$state3.alertState,page=_this$state3.page,search=_this$state3.search,severityLevel=_this$state3.severityLevel,size=_this$state3.size,sortDirection=_this$state3.sortDirection,sortField=_this$state3.sortField,monitorIds=_this$state3.monitorIds;this.getAlerts(page*size,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var prevQuery=(0,_helpers2.getQueryObjectFromState)(prevState);var currQuery=(0,_helpers2.getQueryObjectFromState)(this.state);if(!_lodash.default.isEqual(prevQuery,currQuery)){var _this$state4=this.state,page=_this$state4.page,size=_this$state4.size,search=_this$state4.search,sortField=_this$state4.sortField,sortDirection=_this$state4.sortDirection,severityLevel=_this$state4.severityLevel,alertState=_this$state4.alertState,monitorIds=_this$state4.monitorIds;this.getAlerts(page*size,size,search,sortField,sortDirection,severityLevel,alertState,monitorIds)}var monitorType=this.state.monitorType;if(monitorType===_constants2.MONITOR_TYPE.DOC_LEVEL&&!_lodash.default.isEqual(prevState.selectedItems,this.state.selectedItems))this.setState({tabContent:this.renderAlertsTable()})}},{key:"getTriggerType",value:function getTriggerType(){var monitorType=this.state.monitorType;switch(monitorType){case _constants2.MONITOR_TYPE.BUCKET_LEVEL:return _constants3.TRIGGER_TYPE.BUCKET_LEVEL;case _constants2.MONITOR_TYPE.DOC_LEVEL:return _constants3.TRIGGER_TYPE.DOC_LEVEL;default:return _constants3.TRIGGER_TYPE.QUERY_LEVEL}}},{key:"renderAlertsTable",value:function renderAlertsTable(){var _this2=this;var _this$props4=this.props,httpClient=_this$props4.httpClient,history=_this$props4.history,location=_this$props4.location,notifications=_this$props4.notifications,trigger_name=_this$props4.trigger_name;var _this$state5=this.state,alerts=_this$state5.alerts,alertState=_this$state5.alertState,loading=_this$state5.loading,monitor=_this$state5.monitor,monitorType=_this$state5.monitorType,page=_this$state5.page,search=_this$state5.search,selectable=_this$state5.selectable,selectedItems=_this$state5.selectedItems,severityLevel=_this$state5.severityLevel,size=_this$state5.size,sortDirection=_this$state5.sortDirection,sortField=_this$state5.sortField,totalAlerts=_this$state5.totalAlerts;var detectorId=_lodash.default.get(monitor,_constants2.MONITOR_INPUT_DETECTOR_ID);var groupBy=_lodash.default.get(monitor,_constants2.MONITOR_GROUP_BY);var getItemId=function getItemId(item){switch(monitorType){case _constants2.MONITOR_TYPE.QUERY_LEVEL:case _constants2.MONITOR_TYPE.CLUSTER_METRICS:case _constants2.MONITOR_TYPE.DOC_LEVEL:return"".concat(item.id,"-").concat(item.version);case _constants2.MONITOR_TYPE.BUCKET_LEVEL:return item.id}};var columnType=function columnType(){var columns;switch(monitorType){case _constants2.MONITOR_TYPE.BUCKET_LEVEL:columns=(0,_helpers2.insertGroupByColumn)(groupBy);break;case _constants2.MONITOR_TYPE.DOC_LEVEL:columns=_lodash.default.cloneDeep(_tableUtils.queryColumns);columns.splice(0,0,(0,_findingsUtils.getAlertsFindingColumn)(httpClient,history,location,notifications));break;default:columns=_tableUtils.queryColumns;break}return(0,_helpers2.removeColumns)(["severity","trigger_name"],columns)};var pagination={pageIndex:page,pageSize:size,totalItemCount:totalAlerts,pageSizeOptions:_constants5.DEFAULT_PAGE_SIZE_OPTIONS};var selection={initialSelected:selectedItems,onSelectionChange:this.onSelectionChange,selectable:function selectable(item){return item.state===_constants2.ALERT_STATE.ACTIVE},selectableMessage:function selectableMessage(selectable){return selectable?undefined:"Only active alerts can be acknowledged."}};var sorting={sort:{direction:sortDirection,field:sortField}};var actions=function actions(){var actions=[_react.default.createElement(_eui.EuiButton,{onClick:_this2.acknowledgeAlerts,disabled:selectedItems.length<=0,"data-test-subj":"flyoutAcknowledgeAlertsButton"},"Acknowledge")];if(!_lodash.default.isEmpty(detectorId)){actions.unshift(_react.default.createElement(_eui.EuiButton,{href:"".concat(_constants2.OPENSEARCH_DASHBOARDS_AD_PLUGIN,"#/detectors/").concat(detectorId),target:"_blank"},"View detector ",_react.default.createElement(_eui.EuiIcon,{type:"popout"})))}return actions};var trimmedAlerts=alerts.slice(page*size,page*size+size);return _react.default.createElement(_ContentPanel.default,{title:"Alerts",titleSize:"s",bodyStyles:{padding:"initial"},actions:actions()},_react.default.createElement(_DashboardControls.default,{activePage:page,pageCount:Math.ceil(totalAlerts/size)||1,search:search,severity:severityLevel,state:alertState,onSearchChange:this.onSearchChange,onStateChange:this.onAlertStateChange,onPageChange:this.onPageClick,isAlertsFlyout:true,monitorType:monitorType}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"}),_react.default.createElement(_eui.EuiBasicTable,{items:loading?[]:trimmedAlerts,itemId:getItemId,columns:columnType(),loading:loading,pagination:pagination,sorting:sorting,isSelectable:selectable,selection:selection,onChange:this.onTableChange,noItemsMessage:loading?"Loading alerts...":"No alerts.","data-test-subj":"alertsDashboardFlyout_table_".concat(trigger_name)}))}},{key:"renderFindingsTable",value:function renderFindingsTable(findingId){var _this$props5=this.props,httpClient=_this$props5.httpClient,history=_this$props5.history,location=_this$props5.location,monitor_id=_this$props5.monitor_id,notifications=_this$props5.notifications;return _react.default.createElement(_FindingsDashboard.default,{findingId:findingId,isAlertsFlyout:true,isPreview:false,monitorId:monitor_id,httpClient:httpClient,location:location,history:history,notifications:notifications})}},{key:"renderTableTabs",value:function renderTableTabs(){var _this3=this;var tabId=this.state.tabId;var tabs=[_objectSpread(_objectSpread({},_findingsUtils.TABLE_TAB_IDS.ALERTS),{},{content:this.renderAlertsTable()}),_objectSpread(_objectSpread({},_findingsUtils.TABLE_TAB_IDS.FINDINGS),{},{content:this.renderFindingsTable()})];return tabs.map((function(tab,index){return _react.default.createElement(_eui.EuiTab,{key:"".concat(tab.id).concat(index),isSelected:tab.id===tabId,onClick:function onClick(){_this3.setState({tabId:tab.id,tabContent:tab.content})}},tab.name)}))}},{key:"render",value:function render(){var _this$props6=this.props,last_notification_time=_this$props6.last_notification_time,loadingMonitors=_this$props6.loadingMonitors,monitor_id=_this$props6.monitor_id,monitor_name=_this$props6.monitor_name,start_time=_this$props6.start_time,triggerID=_this$props6.triggerID,trigger_name=_this$props6.trigger_name;var _this$state6=this.state,loading=_this$state6.loading,monitor=_this$state6.monitor,monitorType=_this$state6.monitorType,tabContent=_this$state6.tabContent;var searchType=_lodash.default.get(monitor,"ui_metadata.search.searchType",_constants2.SEARCH_TYPE.GRAPH);var triggerType=this.getTriggerType(monitorType);var trigger=_lodash.default.get(monitor,"triggers",[]).find((function(trigger){return trigger[triggerType].id===triggerID}));trigger=_lodash.default.get(trigger,triggerType);var severity=_lodash.default.get(trigger,"severity");var groupBy=_lodash.default.get(monitor,_constants2.MONITOR_GROUP_BY);var condition=searchType===_constants2.SEARCH_TYPE.GRAPH&&(monitorType===_constants2.MONITOR_TYPE.BUCKET_LEVEL||monitorType===_constants2.MONITOR_TYPE.DOC_LEVEL)?this.getMultipleGraphConditions(trigger):_lodash.default.get(trigger,"condition.script.source","-");var displayMultipleConditions;switch(monitorType){case _constants2.MONITOR_TYPE.BUCKET_LEVEL:case _constants2.MONITOR_TYPE.DOC_LEVEL:displayMultipleConditions=true;break;default:displayMultipleConditions=false}var filters=monitorType===_constants2.MONITOR_TYPE.BUCKET_LEVEL&&searchType===_constants2.SEARCH_TYPE.GRAPH?this.getBucketLevelGraphFilter(trigger):"-";var bucketValue=_lodash.default.get(monitor,"ui_metadata.search.bucketValue");var bucketUnitOfTime=_lodash.default.get(monitor,"ui_metadata.search.bucketUnitOfTime");_constants4.UNITS_OF_TIME.map((function(entry){if(entry.value===bucketUnitOfTime)bucketUnitOfTime=entry.text}));var timeRangeForLast=bucketValue!==undefined&&!_lodash.default.isEmpty(bucketUnitOfTime)?"".concat(bucketValue," ").concat(bucketUnitOfTime):"-";var displayTableTabs;switch(monitorType){case _constants2.MONITOR_TYPE.DOC_LEVEL:displayTableTabs=true;break;default:displayTableTabs=false;break}return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"m","data-test-subj":"alertsDashboardFlyout_triggerName_".concat(trigger_name)},_react.default.createElement("strong",null,"Trigger name"),_react.default.createElement("p",null,trigger_name))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"m","data-test-subj":"alertsDashboardFlyout_severity_".concat(trigger_name)},_react.default.createElement("strong",null,"Severity"),_react.default.createElement("p",null,this.getSeverityText(severity)||severity||"-")))),_react.default.createElement(_eui.EuiSpacer,{size:"xxl"}),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"m"},_react.default.createElement("strong",null,"Trigger start time"),_react.default.createElement("p",null,(0,_getOverviewStats.getTime)(start_time)))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"m"},_react.default.createElement("strong",null,"Trigger last updated"),_react.default.createElement("p",null,(0,_getOverviewStats.getTime)(last_notification_time))))),_react.default.createElement(_eui.EuiSpacer,{size:"xxl"}),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"m","data-test-subj":"alertsDashboardFlyout_monitor_".concat(trigger_name)},_react.default.createElement("strong",null,"Monitor"),_react.default.createElement("p",null,_react.default.createElement(_eui.EuiLink,{href:"".concat(_constants.PLUGIN_NAME,"#/monitors/").concat(monitor_id)},monitor_name))))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xxl"}),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"m","data-test-subj":"alertsDashboardFlyout_conditions_".concat(trigger_name)},_react.default.createElement("strong",null,displayMultipleConditions?"Conditions":"Condition"),_react.default.createElement("p",{style:{whiteSpace:"pre-wrap"}},loadingMonitors||loading?"Loading conditions...":condition))),monitorType!==_constants2.MONITOR_TYPE.DOC_LEVEL&&_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"m","data-test-subj":"alertsDashboardFlyout_timeRange_".concat(trigger_name)},_react.default.createElement("strong",null,"Time range for the last"),_react.default.createElement("p",null,timeRangeForLast)))),monitorType!==_constants2.MONITOR_TYPE.DOC_LEVEL&&_react.default.createElement("div",null,_react.default.createElement(_eui.EuiSpacer,{size:"xxl"}),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"m","data-test-subj":"alertsDashboardFlyout_filters_".concat(trigger_name)},_react.default.createElement("strong",null,"Filters"),_react.default.createElement("p",null,loadingMonitors||loading?"Loading filters...":filters))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"m","data-test-subj":"alertsDashboardFlyout_groupBy_".concat(trigger_name)},_react.default.createElement("strong",null,"Group by"),_react.default.createElement("p",null,loadingMonitors||loading?"Loading groups...":!_lodash.default.isEmpty(groupBy)?_lodash.default.join(_lodash.default.orderBy(groupBy),", "):"-"))))),_react.default.createElement(_eui.EuiSpacer,{size:"xxl"}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"none"}),_react.default.createElement(_eui.EuiSpacer,{size:displayTableTabs?"l":"xxl"}),displayTableTabs?_react.default.createElement("div",null,_react.default.createElement(_eui.EuiTabs,null,this.renderTableTabs()),tabContent):this.renderAlertsTable(),_react.default.createElement(_eui.EuiSpacer,{size:"l"}))}}]);return AlertsDashboardFlyoutComponent}(_react.Component);exports.default=AlertsDashboardFlyoutComponent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _helper=__webpack_require__(597);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NODE_API_BASE_PATH="/api/notifications";var NODE_API=Object.freeze({GET_CONFIGS:"".concat(NODE_API_BASE_PATH,"/get_configs"),GET_CONFIG:"".concat(NODE_API_BASE_PATH,"/get_config")});var NotificationService=_createClass((function NotificationService(httpClient){var _this=this;_classCallCheck(this,NotificationService);_defineProperty(this,"httpClient",void 0);_defineProperty(this,"getConfigs",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(queryObject){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",_this.httpClient.get(NODE_API.GET_CONFIGS,{query:queryObject}));case 1:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(this,"getConfig",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(id){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",_this.httpClient.get("".concat(NODE_API.GET_CONFIG,"/").concat(id)));case 1:case"end":return _context2.stop()}}}),_callee2)})));return function(_x2){return _ref2.apply(this,arguments)}}());_defineProperty(this,"getChannels",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(queryObject){var response;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.getConfigs(queryObject);case 2:response=_context3.sent;return _context3.abrupt("return",{items:(0,_helper.configListToChannels)(response.config_list),total:response.total_hits||0});case 4:case"end":return _context3.stop()}}}),_callee3)})));return function(_x3){return _ref3.apply(this,arguments)}}());_defineProperty(this,"getChannel",function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(id){var response;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.getConfig(id);case 2:response=_context4.sent;return _context4.abrupt("return",(0,_helper.configToChannel)(response.config_list[0]));case 4:case"end":return _context4.stop()}}}),_callee4)})));return function(_x4){return _ref4.apply(this,arguments)}}());this.httpClient=httpClient}));exports.default=NotificationService;module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.configToChannel=exports.configListToChannels=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var configToChannel=function configToChannel(config){return _objectSpread(_objectSpread({},config.config),{},{config_id:config.config_id,created_time_ms:config.created_time_ms,last_updated_time_ms:config.last_updated_time_ms})};exports.configToChannel=configToChannel;var configListToChannels=function configListToChannels(configs){return(configs===null||configs===void 0?void 0:configs.map((function(config){return configToChannel(config)})))||[]};exports.configListToChannels=configListToChannels},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServicesContext=exports.ServicesConsumer=void 0;var _react=__webpack_require__(5);var ServicesContext=(0,_react.createContext)(null);exports.ServicesContext=ServicesContext;var ServicesConsumer=ServicesContext.Consumer;exports.ServicesConsumer=ServicesConsumer}]]);