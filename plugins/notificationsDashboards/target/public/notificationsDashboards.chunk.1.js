(window["notificationsDashboards_bundle_jsonpfunction"]=window["notificationsDashboards_bundle_jsonpfunction"]||[]).push([[1],{22:function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(23);const decodeComponent=__webpack_require__(24);const splitOnFirst=__webpack_require__(25);const filterObject=__webpack_require__(26);const isNullOrUndefined=value=>value===null||value===undefined;function encoderForArrayFormat(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[",index,"]"].join("")]}return[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[]"].join("")]}return[...result,[encode(key,options),"[]=",encode(value,options)].join("")]};case"comma":case"separator":return key=>(result,value)=>{if(value===null||value===undefined||value.length===0){return result}if(result.length===0){return[[encode(key,options),"=",encode(value,options)].join("")]}return[[result,encode(value,options)].join(options.arrayFormatSeparator)]};default:return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,encode(key,options)]}return[...result,[encode(key,options),"=",encode(value,options)].join("")]}}}function parserForArrayFormat(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key);key=key.replace(/\[\d*\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]={}}accumulator[key][result[1]]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key);key=key.replace(/\[\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]=[value];return}accumulator[key]=[].concat(accumulator[key],value)};case"comma":case"separator":return(key,value,accumulator)=>{const isArray=typeof value==="string"&&value.includes(options.arrayFormatSeparator);const isEncodedArray=typeof value==="string"&&!isArray&&decode(value,options).includes(options.arrayFormatSeparator);value=isEncodedArray?decode(value,options):value;const newValue=isArray||isEncodedArray?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):value===null?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{if(accumulator[key]===undefined){accumulator[key]=value;return}accumulator[key]=[].concat(accumulator[key],value)}}}function validateArrayFormatSeparator(value){if(typeof value!=="string"||value.length!==1){throw new TypeError("arrayFormatSeparator must be single character string")}}function encode(value,options){if(options.encode){return options.strict?strictUriEncode(value):encodeURIComponent(value)}return value}function decode(value,options){if(options.decode){return decodeComponent(value)}return value}function keysSorter(input){if(Array.isArray(input)){return input.sort()}if(typeof input==="object"){return keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key])}return input}function removeHash(input){const hashStart=input.indexOf("#");if(hashStart!==-1){input=input.slice(0,hashStart)}return input}function getHash(url){let hash="";const hashStart=url.indexOf("#");if(hashStart!==-1){hash=url.slice(hashStart)}return hash}function extract(input){input=removeHash(input);const queryStart=input.indexOf("?");if(queryStart===-1){return""}return input.slice(queryStart+1)}function parseValue(value,options){if(options.parseNumbers&&!Number.isNaN(Number(value))&&(typeof value==="string"&&value.trim()!=="")){value=Number(value)}else if(options.parseBooleans&&value!==null&&(value.toLowerCase()==="true"||value.toLowerCase()==="false")){value=value.toLowerCase()==="true"}return value}function parse(query,options){options=Object.assign({decode:true,sort:true,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:false,parseBooleans:false},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const formatter=parserForArrayFormat(options);const ret=Object.create(null);if(typeof query!=="string"){return ret}query=query.trim().replace(/^[?#&]/,"");if(!query){return ret}for(const param of query.split("&")){if(param===""){continue}let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=value===undefined?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options);formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if(typeof value==="object"&&value!==null){for(const k of Object.keys(value)){value[k]=parseValue(value[k],options)}}else{ret[key]=parseValue(value,options)}}if(options.sort===false){return ret}return(options.sort===true?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];if(Boolean(value)&&typeof value==="object"&&!Array.isArray(value)){result[key]=keysSorter(value)}else{result[key]=value}return result},Object.create(null))}exports.extract=extract;exports.parse=parse;exports.stringify=(object,options)=>{if(!object){return""}options=Object.assign({encode:true,strict:true,arrayFormat:"none",arrayFormatSeparator:","},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&isNullOrUndefined(object[key])||options.skipEmptyString&&object[key]==="";const formatter=encoderForArrayFormat(options);const objectCopy={};for(const key of Object.keys(object)){if(!shouldFilter(key)){objectCopy[key]=object[key]}}const keys=Object.keys(objectCopy);if(options.sort!==false){keys.sort(options.sort)}return keys.map(key=>{const value=object[key];if(value===undefined){return""}if(value===null){return encode(key,options)}if(Array.isArray(value)){return value.reduce(formatter(key),[]).join("&")}return encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")};exports.parseUrl=(url,options)=>{options=Object.assign({decode:true},options);const[url_,hash]=splitOnFirst(url,"#");return Object.assign({url:url_.split("?")[0]||"",query:parse(extract(url),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})};exports.stringifyUrl=(object,options)=>{options=Object.assign({encode:true,strict:true},options);const url=removeHash(object.url).split("?")[0]||"";const queryFromUrl=exports.extract(object.url);const parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:false});const query=Object.assign(parsedQueryFromUrl,object.query);let queryString=exports.stringify(query,options);if(queryString){queryString=`?${queryString}`}let hash=getHash(object.url);if(object.fragmentIdentifier){hash=`#${encode(object.fragmentIdentifier,options)}`}return`${url}${queryString}${hash}`};exports.pick=(input,filter,options)=>{options=Object.assign({parseFragmentIdentifier:true},options);const{url:url,query:query,fragmentIdentifier:fragmentIdentifier}=exports.parseUrl(input,options);return exports.stringifyUrl({url:url,query:filterObject(query,filter),fragmentIdentifier:fragmentIdentifier},options)};exports.exclude=(input,filter,options)=>{const exclusionFilter=Array.isArray(filter)?key=>!filter.includes(key):(key,value)=>!filter(key,value);return exports.pick(input,exclusionFilter,options)}},23:function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>`%${x.charCodeAt(0).toString(16).toUpperCase()}`)},24:function(module,exports,__webpack_require__){"use strict";var token="%[a-f0-9]{2}";var singleMatcher=new RegExp("("+token+")|([^%]+?)","gi");var multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(components,split){try{return[decodeURIComponent(components.join(""))]}catch(err){}if(components.length===1){return components}split=split||1;var left=components.slice(0,split);var right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){var tokens=input.match(singleMatcher)||[];for(var i=1;i<tokens.length;i++){input=decodeComponents(tokens,i).join("");tokens=input.match(singleMatcher)||[]}return input}}function customDecodeURIComponent(input){var replaceMap={"%FE%FF":"��","%FF%FE":"��"};var match=multiMatcher.exec(input);while(match){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);if(result!==match[0]){replaceMap[match[0]]=result}}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";var entries=Object.keys(replaceMap);for(var i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}module.exports=function(encodedURI){if(typeof encodedURI!=="string"){throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`")}try{encodedURI=encodedURI.replace(/\+/g," ");return decodeURIComponent(encodedURI)}catch(err){return customDecodeURIComponent(encodedURI)}}},25:function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if(!(typeof string==="string"&&typeof separator==="string")){throw new TypeError("Expected the arguments to be of type `string`")}if(separator===""){return[string]}const separatorIndex=string.indexOf(separator);if(separatorIndex===-1){return[string]}return[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},26:function(module,exports,__webpack_require__){"use strict";module.exports=function(obj,predicate){var ret={};var keys=Object.keys(obj);var isArr=Array.isArray(predicate);for(var i=0;i<keys.length;i++){var key=keys[i];var val=obj[key];if(isArr?predicate.indexOf(key)!==-1:predicate(key,val,obj)){ret[key]=val}}return ret}},27:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return application_renderApp}));var external_osdSharedDeps_React_=__webpack_require__(15);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var external_osdSharedDeps_ReactDom_=__webpack_require__(19);var external_osdSharedDeps_ReactDom_default=__webpack_require__.n(external_osdSharedDeps_ReactDom_);var external_osdSharedDeps_ReactRouterDom_=__webpack_require__(18);var CoreServicesContext=Object(external_osdSharedDeps_React_["createContext"])(null);var CoreServicesConsumer=CoreServicesContext.Consumer;var external_osdSharedDeps_ElasticEui_=__webpack_require__(16);function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ModalContext=Object(external_osdSharedDeps_React_["createContext"])({component:null,props:{},onShow:function onShow(component,props){},onClose:function onClose(){}});var ModalConsumer=ModalContext.Consumer;var Modal_ModalProvider=function(_Component){_inherits(ModalProvider,_Component);var _super=_createSuper(ModalProvider);function ModalProvider(){var _this;_classCallCheck(this,ModalProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"state",{component:null,props:{}});_defineProperty(_assertThisInitialized(_this),"onShow",(function(component,props){_this.setState({component:component,props:props})}));_defineProperty(_assertThisInitialized(_this),"onClose",(function(){_this.setState({component:null,props:{}})}));return _this}_createClass(ModalProvider,[{key:"render",value:function render(){return external_osdSharedDeps_React_default.a.createElement(ModalContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{onShow:this.onShow,onClose:this.onClose})},this.props.children)}}]);return ModalProvider}(external_osdSharedDeps_React_["Component"]);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var ModalRoot_ModalRoot=function ModalRoot(_ref){var services=_ref.services;return external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref2){var Komponent=_ref2.component,props=_ref2.props,onClose=_ref2.onClose;return Komponent?external_osdSharedDeps_React_default.a.createElement(Komponent,_extends({},props,{onClose:onClose,services:services})):null}))};var Modal_ModalRoot=ModalRoot_ModalRoot;var ServicesContext=Object(external_osdSharedDeps_React_["createContext"])(null);var ServicesConsumer=ServicesContext.Consumer;var _Object$freeze;function constants_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DOCUMENTATION_LINK="";var ALERTING_DOCUMENTATION_LINK="https://opensearch.org/docs/monitoring-plugins/alerting/monitors/#authenticate-sender-account";var ROUTES=Object.freeze({NOTIFICATIONS:"/notifications",CHANNELS:"/channels",CHANNEL_DETAILS:"/channel-details",CREATE_CHANNEL:"/create-channel",EDIT_CHANNEL:"/edit-channel",EMAIL_SENDERS:"/email-senders",EMAIL_GROUPS:"/email-recipient-groups",CREATE_SENDER:"/create-smtp-sender",EDIT_SENDER:"/edit-smtp-sender",CREATE_SES_SENDER:"/create-ses-sender",EDIT_SES_SENDER:"/edit-ses-sender",CREATE_RECIPIENT_GROUP:"/create-recipient-group",EDIT_RECIPIENT_GROUP:"/edit-recipient-group"});var BREADCRUMBS=Object.freeze({NOTIFICATIONS:{text:"Notifications",href:"#/"},CHANNELS:{text:"Channels",href:"#".concat(ROUTES.CHANNELS)},CHANNEL_DETAILS:{text:"Channels",href:"#".concat(ROUTES.CHANNEL_DETAILS)},CREATE_CHANNEL:{text:"Create channel",href:"#".concat(ROUTES.CREATE_CHANNEL)},EDIT_CHANNEL:{text:"Edit channel"},EMAIL_SENDERS:{text:"Email senders",href:"#".concat(ROUTES.EMAIL_SENDERS)},EMAIL_GROUPS:{text:"Email recipient groups",href:"#".concat(ROUTES.EMAIL_GROUPS)},CREATE_SENDER:{text:"Create SMTP sender",href:"#".concat(ROUTES.CREATE_SENDER)},EDIT_SENDER:{text:"Edit SMTP sender"},CREATE_SES_SENDER:{text:"Create SES sender",href:"#".concat(ROUTES.CREATE_SENDER)},EDIT_SES_SENDER:{text:"Edit SES sender"},CREATE_RECIPIENT_GROUP:{text:"Create recipient group",href:"#".concat(ROUTES.CREATE_RECIPIENT_GROUP)},EDIT_RECIPIENT_GROUP:{text:"Edit recipient group"}});var BACKEND_CHANNEL_TYPE=Object.freeze({SLACK:"slack",EMAIL:"email",CHIME:"chime",CUSTOM_WEBHOOK:"webhook",SNS:"sns"});var CHANNEL_TYPE=Object.freeze((_Object$freeze={},constants_defineProperty(_Object$freeze,BACKEND_CHANNEL_TYPE.SLACK,"Slack"),constants_defineProperty(_Object$freeze,BACKEND_CHANNEL_TYPE.EMAIL,"Email"),constants_defineProperty(_Object$freeze,BACKEND_CHANNEL_TYPE.CHIME,"Chime"),constants_defineProperty(_Object$freeze,BACKEND_CHANNEL_TYPE.CUSTOM_WEBHOOK,"Custom webhook"),constants_defineProperty(_Object$freeze,BACKEND_CHANNEL_TYPE.SNS,"Amazon SNS"),_Object$freeze));var ENCRYPTION_TYPE=Object.freeze({ssl:"SSL",start_tls:"TLS",none:"None"});var SEVERITY_TYPE=Object.freeze({none:"None",info:"Info",high:"High",critical:"Critical"});var CUSTOM_WEBHOOK_ENDPOINT_TYPE=Object.freeze({WEBHOOK_URL:"Webhook URL",CUSTOM_URL:"Custom attributes URL"});var external_osdSharedDeps_Lodash_=__webpack_require__(17);var external_osdSharedDeps_Lodash_default=__webpack_require__.n(external_osdSharedDeps_Lodash_);function ContentPanel_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function ContentPanel_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ContentPanel_ownKeys(Object(source),!0).forEach((function(key){ContentPanel_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ContentPanel_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function ContentPanel_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ContentPanel_ContentPanel=function ContentPanel(_ref){var _ref$title=_ref.title,title=_ref$title===void 0?"":_ref$title,_ref$titleSize=_ref.titleSize,titleSize=_ref$titleSize===void 0?"l":_ref$titleSize,_ref$total=_ref.total,total=_ref$total===void 0?undefined:_ref$total,_ref$bodyStyles=_ref.bodyStyles,bodyStyles=_ref$bodyStyles===void 0?{}:_ref$bodyStyles,_ref$panelStyles=_ref.panelStyles,panelStyles=_ref$panelStyles===void 0?{}:_ref$panelStyles,_ref$horizontalRuleCl=_ref.horizontalRuleClassName,horizontalRuleClassName=_ref$horizontalRuleCl===void 0?"":_ref$horizontalRuleCl,actions=_ref.actions,children=_ref.children;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{style:ContentPanel_objectSpread({},panelStyles)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{style:{padding:"0px 0px"},justifyContent:"spaceBetween",alignItems:"center"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:titleSize},external_osdSharedDeps_React_default.a.createElement("h3",null,title,total!==undefined?external_osdSharedDeps_React_default.a.createElement("span",{style:{color:"#9f9f9f",fontWeight:300}}," (".concat(total,")")):null))),actions?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},Array.isArray(actions)?actions.map((function(action,idx){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{key:idx},action)})):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,actions))):null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s",className:horizontalRuleClassName}),external_osdSharedDeps_React_default.a.createElement("div",{style:ContentPanel_objectSpread({padding:"0px 10px"},bodyStyles)},children))};var components_ContentPanel_ContentPanel=ContentPanel_ContentPanel;function ContentPanelActions_extends(){ContentPanelActions_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return ContentPanelActions_extends.apply(this,arguments)}var ContentPanelActions_ContentPanelActions=function ContentPanelActions(_ref){var actions=_ref.actions;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},actions.map((function(_ref2,index){var component=_ref2.component,_ref2$flexItemProps=_ref2.flexItemProps,flexItemProps=_ref2$flexItemProps===void 0?{}:_ref2$flexItemProps;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],ContentPanelActions_extends({},flexItemProps,{grow:false,key:index}),component)})))};var ContentPanel_ContentPanelActions=ContentPanelActions_ContentPanelActions;var external_osdSharedDeps_Moment_=__webpack_require__(20);var external_osdSharedDeps_Moment_default=__webpack_require__.n(external_osdSharedDeps_Moment_);var external_osdSharedDeps_MomentTimezone_=__webpack_require__(21);function getErrorMessage(err,defaultMessage){if(defaultMessage)return defaultMessage;if(err&&err.message)console.error(defaultMessage,err);return""}var helpers_renderTime=function renderTime(time){var momentTime=external_osdSharedDeps_Moment_default()(time).local();var timezone=external_osdSharedDeps_Moment_default.a.tz(external_osdSharedDeps_Moment_default.a.tz.guess()).zoneAbbr();if(time&&momentTime.isValid())return"".concat(momentTime.format("MM/DD/YY h:mm a")," ").concat(timezone);return"-"};var DEFAULT_PAGE_SIZE_OPTIONS=[5,10,20,50];var common=__webpack_require__(2);function helper_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function helper_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?helper_ownKeys(Object(source),!0).forEach((function(key){helper_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):helper_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function helper_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var configToChannel=function configToChannel(config){return helper_objectSpread(helper_objectSpread({},config.config),{},{config_id:config.config_id,created_time_ms:config.created_time_ms,last_updated_time_ms:config.last_updated_time_ms})};var configListToChannels=function configListToChannels(configs){return(configs===null||configs===void 0?void 0:configs.map((function(config){return configToChannel(config)})))||[]};var configToSender=function configToSender(config){return{name:config.config.name,description:config.config.description,config_id:config.config_id,created_time_ms:config.created_time_ms,last_updated_time_ms:config.last_updated_time_ms,smtp_account:config.config.smtp_account}};var configListToSenders=function configListToSenders(configs){return(configs===null||configs===void 0?void 0:configs.map((function(config){return configToSender(config)})))||[]};var configToSESSender=function configToSESSender(config){return{name:config.config.name,description:config.config.description,config_id:config.config_id,created_time_ms:config.created_time_ms,last_updated_time_ms:config.last_updated_time_ms,ses_account:config.config.ses_account}};var configListToSESSenders=function configListToSESSenders(configs){return(configs===null||configs===void 0?void 0:configs.map((function(config){return configToSESSender(config)})))||[]};var configToRecipientGroup=function configToRecipientGroup(config){return{name:config.config.name,description:config.config.description,config_id:config.config_id,created_time_ms:config.created_time_ms,last_updated_time_ms:config.last_updated_time_ms,email_group:config.config.email_group}};var configListToRecipientGroups=function configListToRecipientGroups(configs){return(configs===null||configs===void 0?void 0:configs.map((function(config){return configToRecipientGroup(config)})))||[]};var isStatusCodeSuccess=function isStatusCodeSuccess(statusCode){if(!statusCode)return true;return statusCode!=="207"&&/^2\d\d/.test(statusCode)};var eventToNotification=function eventToNotification(event){var success=event.event.status_list.every((function(status){return isStatusCodeSuccess(status.delivery_status.status_code)}));return{status_list:event.event.status_list,event_id:event.event_id,created_time_ms:event.created_time_ms,last_updated_time_ms:event.last_updated_time_ms,success:success}};function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function NotificationService_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function NotificationService_createClass(Constructor,protoProps,staticProps){if(protoProps)NotificationService_defineProperties(Constructor.prototype,protoProps);if(staticProps)NotificationService_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function NotificationService_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function NotificationService_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NotificationService_NotificationService=NotificationService_createClass((function NotificationService(httpClient){var _this=this;NotificationService_classCallCheck(this,NotificationService);NotificationService_defineProperty(this,"httpClient",void 0);NotificationService_defineProperty(this,"createConfig",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(config){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.httpClient.post(common["a"].CREATE_CONFIG,{body:JSON.stringify({config:config})});case 2:response=_context.sent;return _context.abrupt("return",response);case 4:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());NotificationService_defineProperty(this,"updateConfig",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(id,config){var response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.httpClient.put("".concat(common["a"].UPDATE_CONFIG,"/").concat(id),{body:JSON.stringify({config:config})});case 2:response=_context2.sent;return _context2.abrupt("return",response);case 4:case"end":return _context2.stop()}}}),_callee2)})));return function(_x2,_x3){return _ref2.apply(this,arguments)}}());NotificationService_defineProperty(this,"deleteConfigs",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(ids){var response;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.httpClient.delete(common["a"].DELETE_CONFIGS,{query:{config_id_list:ids}});case 2:response=_context3.sent;return _context3.abrupt("return",response);case 4:case"end":return _context3.stop()}}}),_callee3)})));return function(_x4){return _ref3.apply(this,arguments)}}());NotificationService_defineProperty(this,"getConfigs",function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(queryObject){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",_this.httpClient.get(common["a"].GET_CONFIGS,{query:queryObject}));case 1:case"end":return _context4.stop()}}}),_callee4)})));return function(_x5){return _ref4.apply(this,arguments)}}());NotificationService_defineProperty(this,"getConfig",function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(id){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",_this.httpClient.get("".concat(common["a"].GET_CONFIG,"/").concat(id)));case 1:case"end":return _context5.stop()}}}),_callee5)})));return function(_x6){return _ref5.apply(this,arguments)}}());NotificationService_defineProperty(this,"getChannels",function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(queryObject){var response;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _this.getConfigs(queryObject);case 2:response=_context6.sent;return _context6.abrupt("return",{items:configListToChannels(response.config_list),total:response.total_hits||0});case 4:case"end":return _context6.stop()}}}),_callee6)})));return function(_x7){return _ref6.apply(this,arguments)}}());NotificationService_defineProperty(this,"getChannel",function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(id){var response;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _this.getConfig(id);case 2:response=_context7.sent;return _context7.abrupt("return",configToChannel(response.config_list[0]));case 4:case"end":return _context7.stop()}}}),_callee7)})));return function(_x8){return _ref7.apply(this,arguments)}}());NotificationService_defineProperty(this,"getEmailConfigDetails",function(){var _ref8=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(channel){var idMap,ids,senderType,invalidIds;return regeneratorRuntime.wrap((function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(channel.email){_context9.next=2;break}return _context9.abrupt("return",channel);case 2:idMap={};ids=[channel.email.email_account_id].concat(_toConsumableArray(channel.email.email_group_id_list));invalidIds=[];_context9.prev=5;_context9.next=8;return _this.getConfigs({from_index:0,max_items:ids.length,config_id_list:ids,sort_order:external_osdSharedDeps_ElasticEui_["SortDirection"].ASC,sort_field:"name",config_type:["smtp_account","ses_account","email_group"]}).then((function(response){response.config_list.map((function(config){var _channel$email;if(config.config_id===((_channel$email=channel.email)===null||_channel$email===void 0?void 0:_channel$email.email_account_id))senderType=config.config.config_type;idMap[config.config_id]=config.config.name}))})).catch(function(){var _ref9=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(error){return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.error("error fetching email senders and recipients, retrying",error);_context8.next=3;return Promise.all(ids.map((function(config_id){return _this.getConfig(config_id).then((function(response){var _channel$email2;var config=response.config_list[0];if(config.config_id===((_channel$email2=channel.email)===null||_channel$email2===void 0?void 0:_channel$email2.email_account_id))senderType=config.config.config_type;idMap[config_id]=config.config.name})).catch((function(error){invalidIds.push(config_id);console.error("error fetching config id ".concat(config_id,":"),error);idMap[config_id]="(invalid-id)"}))})));case 3:case"end":return _context8.stop()}}}),_callee8)})));return function(_x10){return _ref9.apply(this,arguments)}}());case 8:channel.email.sender_type=senderType||"smtp_account";channel.email.email_account_name=idMap[channel.email.email_account_id];channel.email.email_group_id_map={};channel.email.email_group_id_list.map((function(id){return channel.email.email_group_id_map[id]=idMap[id]}));channel.email.invalid_ids=invalidIds;_context9.next=18;break;case 15:_context9.prev=15;_context9.t0=_context9["catch"](5);console.error("error fetching email senders and recipients",_context9.t0);case 18:return _context9.abrupt("return",channel);case 19:case"end":return _context9.stop()}}}),_callee9,null,[[5,15]])})));return function(_x9){return _ref8.apply(this,arguments)}}());NotificationService_defineProperty(this,"getSenders",function(){var _ref10=_asyncToGenerator(regeneratorRuntime.mark((function _callee10(queryObject){var response;return regeneratorRuntime.wrap((function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return _this.getConfigs(queryObject);case 2:response=_context10.sent;return _context10.abrupt("return",{items:configListToSenders(response.config_list),total:response.total_hits||0});case 4:case"end":return _context10.stop()}}}),_callee10)})));return function(_x11){return _ref10.apply(this,arguments)}}());NotificationService_defineProperty(this,"getSender",function(){var _ref11=_asyncToGenerator(regeneratorRuntime.mark((function _callee11(id){var response;return regeneratorRuntime.wrap((function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _this.getConfig(id);case 2:response=_context11.sent;return _context11.abrupt("return",configToSender(response.config_list[0]));case 4:case"end":return _context11.stop()}}}),_callee11)})));return function(_x12){return _ref11.apply(this,arguments)}}());NotificationService_defineProperty(this,"getSESSenders",function(){var _ref12=_asyncToGenerator(regeneratorRuntime.mark((function _callee12(queryObject){var response;return regeneratorRuntime.wrap((function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return _this.getConfigs(queryObject);case 2:response=_context12.sent;return _context12.abrupt("return",{items:configListToSESSenders(response.config_list),total:response.total_hits||0});case 4:case"end":return _context12.stop()}}}),_callee12)})));return function(_x13){return _ref12.apply(this,arguments)}}());NotificationService_defineProperty(this,"getSESSender",function(){var _ref13=_asyncToGenerator(regeneratorRuntime.mark((function _callee13(id){var response;return regeneratorRuntime.wrap((function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return _this.getConfig(id);case 2:response=_context13.sent;return _context13.abrupt("return",configToSESSender(response.config_list[0]));case 4:case"end":return _context13.stop()}}}),_callee13)})));return function(_x14){return _ref13.apply(this,arguments)}}());NotificationService_defineProperty(this,"getRecipientGroups",function(){var _ref14=_asyncToGenerator(regeneratorRuntime.mark((function _callee14(queryObject){var response;return regeneratorRuntime.wrap((function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return _this.getConfigs(queryObject);case 2:response=_context14.sent;return _context14.abrupt("return",{items:configListToRecipientGroups(response.config_list),total:response.total_hits||0});case 4:case"end":return _context14.stop()}}}),_callee14)})));return function(_x15){return _ref14.apply(this,arguments)}}());NotificationService_defineProperty(this,"getRecipientGroup",function(){var _ref15=_asyncToGenerator(regeneratorRuntime.mark((function _callee15(id){var response;return regeneratorRuntime.wrap((function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return _this.getConfig(id);case 2:response=_context15.sent;return _context15.abrupt("return",configToRecipientGroup(response.config_list[0]));case 4:case"end":return _context15.stop()}}}),_callee15)})));return function(_x16){return _ref15.apply(this,arguments)}}());NotificationService_defineProperty(this,"getServerFeatures",_asyncToGenerator(regeneratorRuntime.mark((function _callee16(){var response,config_type_list,channelTypes,i,channel;return regeneratorRuntime.wrap((function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.prev=0;_context16.next=3;return _this.httpClient.get(common["a"].GET_AVAILABLE_FEATURES);case 3:response=_context16.sent;config_type_list=response.allowed_config_type_list;channelTypes={};i=0;case 7:if(!(i<config_type_list.length)){_context16.next=15;break}channel=config_type_list[i];if(CHANNEL_TYPE[channel]){_context16.next=11;break}return _context16.abrupt("continue",12);case 11:channelTypes[channel]=CHANNEL_TYPE[channel];case 12:i++;_context16.next=7;break;case 15:return _context16.abrupt("return",{availableChannels:channelTypes,availableConfigTypes:config_type_list,tooltipSupport:external_osdSharedDeps_Lodash_default.a.get(response,["plugin_features","tooltip_support"])==="true"});case 18:_context16.prev=18;_context16.t0=_context16["catch"](0);console.error("error fetching available features",_context16.t0);return _context16.abrupt("return",null);case 22:case"end":return _context16.stop()}}}),_callee16,null,[[0,18]])}))));NotificationService_defineProperty(this,"getNotification",function(){var _ref17=_asyncToGenerator(regeneratorRuntime.mark((function _callee17(id){var response;return regeneratorRuntime.wrap((function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return _this.httpClient.get("".concat(common["a"].GET_EVENT,"/").concat(id));case 2:response=_context17.sent;return _context17.abrupt("return",eventToNotification(response.event_list[0]));case 4:case"end":return _context17.stop()}}}),_callee17)})));return function(_x17){return _ref17.apply(this,arguments)}}());NotificationService_defineProperty(this,"sendTestMessage",function(){var _ref18=_asyncToGenerator(regeneratorRuntime.mark((function _callee18(configId){var response,error;return regeneratorRuntime.wrap((function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:_context18.next=2;return _this.httpClient.post("".concat(common["a"].SEND_TEST_MESSAGE,"/").concat(configId));case 2:response=_context18.sent;if(!(response.status_list[0].delivery_status.status_code!=200)){_context18.next=8;break}console.error(response);error=new Error("Failed to send the test message.");error.stack=JSON.stringify(response,null,2);throw error;case 8:return _context18.abrupt("return",response);case 9:case"end":return _context18.stop()}}}),_callee18)})));return function(_x18){return _ref18.apply(this,arguments)}}());this.httpClient=httpClient}));function DeleteChannelModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function DeleteChannelModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){DeleteChannelModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){DeleteChannelModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||DeleteChannelModal_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function DeleteChannelModal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return DeleteChannelModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DeleteChannelModal_arrayLikeToArray(o,minLen)}function DeleteChannelModal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var DeleteChannelModal_DeleteChannelModal=function DeleteChannelModal(props){if(!props.selected.length)return null;var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(""),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var num=props.selected.length;var name=num>=2?"".concat(num," channels"):props.selected[0].name;var message="Delete ".concat(num>=2?"the following channels":name," permanently? Any notify actions will no longer be able to send notifications using ").concat(num>=2?"these channels":"this channel",".");return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:props.onClose,maxWidth:500},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,"Delete ".concat(name,"?"))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,message),num>=2&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),props.selected.map((function(channel,i){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{key:"channel-list-item-".concat(i),style:{marginLeft:20}},external_osdSharedDeps_React_default.a.createElement("li",null,channel.name))}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,"To confirm delete, type ",external_osdSharedDeps_React_default.a.createElement("i",null,"delete")," in the field."),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"delete",value:input,onChange:function onChange(e){return setInput(e.target.value)}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:props.onClose},"Cancel")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"delete-channel-modal-delete-button",color:"danger",onClick:DeleteChannelModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.services.notificationService.deleteConfigs(props.selected.map((function(channel){return channel.config_id}))).then((function(resp){coreContext.notifications.toasts.addSuccess("".concat(props.selected.length>1?props.selected.length+" channels":"Channel "+props.selected[0].name," successfully deleted."));props.onClose();if(props.href)setTimeout((function(){return location.hash=props.href}),common["c"]);else if(props.refresh)setTimeout((function(){return props.refresh()}),common["c"])})).catch((function(error){coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to delete one or more channels."});props.onClose()}));case 1:case"end":return _context.stop()}}}),_callee)}))),disabled:input!=="delete"},"Delete"))))))};function MuteChannelModal_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function MuteChannelModal_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?MuteChannelModal_ownKeys(Object(source),!0).forEach((function(key){MuteChannelModal_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MuteChannelModal_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function MuteChannelModal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function MuteChannelModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function MuteChannelModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){MuteChannelModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){MuteChannelModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var MuteChannelModal_MuteChannelModal=function MuteChannelModal(props){if(props.selected.length!==1)return null;var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:props.onClose,maxWidth:500},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,"Mute ".concat(props.selected[0].name,"?"))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,"This channel will stop sending notifications to its recipients. However, the channel will remain available for selection.")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:props.onClose},"Cancel")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"mute-channel-modal-mute-button",onClick:MuteChannelModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var channel;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:channel=MuteChannelModal_objectSpread(MuteChannelModal_objectSpread({},props.selected[0]),{},{is_enabled:false});_context.next=3;return props.services.notificationService.updateConfig(channel.config_id,channel).then((function(resp){coreContext.notifications.toasts.addSuccess("Channel ".concat(channel.name," successfully muted."));props.setSelected([channel]);if(props.refresh)setTimeout((function(){return props.refresh()}),common["c"])})).catch((function(error){coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to mute channel"})}));case 3:props.onClose();case 4:case"end":return _context.stop()}}}),_callee)})))},"Mute"))))))};function ChannelActions_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function ChannelActions_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ChannelActions_ownKeys(Object(source),!0).forEach((function(key){ChannelActions_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ChannelActions_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function ChannelActions_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ChannelActions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function ChannelActions_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ChannelActions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ChannelActions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ChannelActions_slicedToArray(arr,i){return ChannelActions_arrayWithHoles(arr)||ChannelActions_iterableToArrayLimit(arr,i)||ChannelActions_unsupportedIterableToArray(arr,i)||ChannelActions_nonIterableRest()}function ChannelActions_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ChannelActions_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return ChannelActions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ChannelActions_arrayLikeToArray(o,minLen)}function ChannelActions_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ChannelActions_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function ChannelActions_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ChannelActions(props){var _props$selected$;var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var servicesContext=Object(external_osdSharedDeps_React_["useContext"])(ServicesContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(false),_useState2=ChannelActions_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];var actions=[{label:"Edit",disabled:props.selected.length!==1,href:"#".concat(ROUTES.EDIT_CHANNEL,"/").concat((_props$selected$=props.selected[0])===null||_props$selected$===void 0?void 0:_props$selected$.config_id)},{label:"Delete",disabled:props.selected.length===0,modal:DeleteChannelModal_DeleteChannelModal,modalParams:{refresh:props.refresh}},{label:"Mute",disabled:props.selected.length!==1||!props.selected[0].is_enabled,modal:MuteChannelModal_MuteChannelModal,modalParams:{refresh:props.refresh,setSelected:props.setSelected}},{label:"Unmute",disabled:props.selected.length!==1||props.selected[0].is_enabled,action:function(){var _action=ChannelActions_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var channel;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:channel=ChannelActions_objectSpread(ChannelActions_objectSpread({},props.selected[0]),{},{is_enabled:true});servicesContext.notificationService.updateConfig(channel.config_id,channel).then((function(resp){coreContext.notifications.toasts.addSuccess("Channel ".concat(channel.name," successfully unmuted."));props.setSelected([channel]);setTimeout((function(){return props.refresh()}),common["c"])})).catch((function(error){coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to unmute channel"})}));case 2:case"end":return _context.stop()}}}),_callee)})));function action(){return _action.apply(this,arguments)}return action}()}];return external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref){var onShow=_ref.onShow;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{panelPaddingSize:"none",button:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{iconType:"arrowDown",iconSide:"right",disabled:props.selected.length===0,onClick:function onClick(){return setIsPopoverOpen(!isPopoverOpen)}},"Actions"),isOpen:isPopoverOpen,closePopover:function closePopover(){return setIsPopoverOpen(false)}},actions.map((function(params){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:params.label,disabled:params.disabled,onClick:function onClick(){setIsPopoverOpen(false);if(params.modal){onShow(params.modal,ChannelActions_objectSpread({selected:props.selected},params.modalParams||{}))}if(params.href)location.assign(params.href);if(params.action)params.action()}},params.label)})))}))}function ChannelControls_toConsumableArray(arr){return ChannelControls_arrayWithoutHoles(arr)||ChannelControls_iterableToArray(arr)||ChannelControls_unsupportedIterableToArray(arr)||ChannelControls_nonIterableSpread()}function ChannelControls_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ChannelControls_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function ChannelControls_arrayWithoutHoles(arr){if(Array.isArray(arr))return ChannelControls_arrayLikeToArray(arr)}function ChannelControls_slicedToArray(arr,i){return ChannelControls_arrayWithHoles(arr)||ChannelControls_iterableToArrayLimit(arr,i)||ChannelControls_unsupportedIterableToArray(arr,i)||ChannelControls_nonIterableRest()}function ChannelControls_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ChannelControls_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return ChannelControls_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ChannelControls_arrayLikeToArray(o,minLen)}function ChannelControls_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ChannelControls_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function ChannelControls_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ChannelControls_ChannelControls=function ChannelControls(props){var mainStateContext=Object(external_osdSharedDeps_React_["useContext"])(MainContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(false),_useState2=ChannelControls_slicedToArray(_useState,2),isStatePopoverOpen=_useState2[0],setIsStatePopoverOpen=_useState2[1];var _useState3=Object(external_osdSharedDeps_React_["useState"])([{field:"true",display:"Active",checked:"off"},{field:"false",display:"Muted",checked:"off"}]),_useState4=ChannelControls_slicedToArray(_useState3,2),stateItems=_useState4[0],setStateItems=_useState4[1];var _useState5=Object(external_osdSharedDeps_React_["useState"])(false),_useState6=ChannelControls_slicedToArray(_useState5,2),isTypePopoverOpen=_useState6[0],setIsTypePopoverOpen=_useState6[1];var _useState7=Object(external_osdSharedDeps_React_["useState"])(Object.entries(mainStateContext.availableChannels).map((function(_ref){var _ref2=ChannelControls_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return{field:key,display:value,checked:"off"}}))),_useState8=ChannelControls_slicedToArray(_useState7,2),typeItems=_useState8[0],setTypeItems=_useState8[1];Object(external_osdSharedDeps_React_["useEffect"])((function(){var newItems=typeItems.filter((function(_ref3){var field=_ref3.field;return!!mainStateContext.availableChannels[field]}));if(newItems.length!==typeItems.length)setTypeItems(newItems)}),[mainStateContext.availableChannels]);function updateItem(items,index,type,singleSelect){if(!items[index])return;var newItems=ChannelControls_toConsumableArray(items);if(singleSelect){var checked=newItems[index].checked==="off"?"on":"off";newItems.forEach((function(item,i){return item.checked="off"}));newItems[index].checked=checked}else{newItems[index].checked=newItems[index].checked==="off"?"on":"off"}var newFilters=external_osdSharedDeps_Lodash_default.a.clone(props.filters);var checkedItems=newItems.filter((function(item){return item.checked==="on"})).map((function(item){return item.field}));switch(type){case"state":setStateItems(newItems);newFilters.state=checkedItems[0];break;case"type":setTypeItems(newItems);newFilters.type=checkedItems;break;default:break}props.onFiltersChange(newFilters)}function isItemSelected(items){return items.map((function(item){return item.checked==="on"})).reduce((function(flag,curr){return flag||curr}),false)}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldSearch"],{fullWidth:true,placeholder:"Search",onSearch:props.onSearchChange})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{button:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterButton"],{iconType:"arrowDown",grow:false,onClick:function onClick(){return setIsStatePopoverOpen(!isStatePopoverOpen)}},isItemSelected(stateItems)?external_osdSharedDeps_React_default.a.createElement("b",null,"Status"):"Status"),isOpen:isStatePopoverOpen,closePopover:function closePopover(){return setIsStatePopoverOpen(false)},panelPaddingSize:"none"},stateItems.map((function(item,index){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterSelectItem"],{key:"channel-state-filter-".concat(index),checked:item.checked==="on"?"on":undefined,onClick:function onClick(){updateItem(stateItems,index,"state",true);setIsStatePopoverOpen(false)}},item.display)}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{button:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterButton"],{iconType:"arrowDown",grow:false,onClick:function onClick(){return setIsTypePopoverOpen(!isTypePopoverOpen)}},isItemSelected(typeItems)?external_osdSharedDeps_React_default.a.createElement("b",null,"Type"):"Type"),isOpen:isTypePopoverOpen,closePopover:function closePopover(){return setIsTypePopoverOpen(false)},panelPaddingSize:"none"},typeItems.map((function(item,index){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterSelectItem"],{key:"channel-type-filter-".concat(index),checked:item.checked==="on"?"on":undefined,onClick:function onClick(){return updateItem(typeItems,index,"type")}},item.display)}))))))};function Channels_typeof(obj){"@babel/helpers - typeof";return Channels_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Channels_typeof(obj)}function Channels_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function Channels_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){Channels_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){Channels_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function Channels_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function Channels_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function Channels_createClass(Constructor,protoProps,staticProps){if(protoProps)Channels_defineProperties(Constructor.prototype,protoProps);if(staticProps)Channels_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function Channels_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)Channels_setPrototypeOf(subClass,superClass)}function Channels_setPrototypeOf(o,p){Channels_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return Channels_setPrototypeOf(o,p)}function Channels_createSuper(Derived){var hasNativeReflectConstruct=Channels_isNativeReflectConstruct();return function _createSuperInternal(){var Super=Channels_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=Channels_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return Channels_possibleConstructorReturn(this,result)}}function Channels_possibleConstructorReturn(self,call){if(call&&(Channels_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return Channels_assertThisInitialized(self)}function Channels_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function Channels_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function Channels_getPrototypeOf(o){Channels_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return Channels_getPrototypeOf(o)}function Channels_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Channels_Channels=function(_Component){Channels_inherits(Channels,_Component);var _super=Channels_createSuper(Channels);function Channels(props){var _this;Channels_classCallCheck(this,Channels);_this=_super.call(this,props);Channels_defineProperty(Channels_assertThisInitialized(_this),"columns",void 0);Channels_defineProperty(Channels_assertThisInitialized(_this),"onTableChange",(function(_ref){var tablePage=_ref.page,sort=_ref.sort;var _ref2=tablePage,page=_ref2.index,size=_ref2.size;var _ref3=sort,sortField=_ref3.field,sortDirection=_ref3.direction;_this.setState({from:page*size,size:size,sortField:sortField,sortDirection:sortDirection})}));Channels_defineProperty(Channels_assertThisInitialized(_this),"onSelectionChange",(function(selectedItems){_this.setState({selectedItems:selectedItems})}));Channels_defineProperty(Channels_assertThisInitialized(_this),"onSearchChange",(function(search){_this.setState({from:0,search:search})}));Channels_defineProperty(Channels_assertThisInitialized(_this),"onFiltersChange",(function(filters){_this.setState({from:0,filters:filters})}));_this.state={total:0,from:0,size:10,search:"",filters:{},sortField:"name",sortDirection:external_osdSharedDeps_ElasticEui_["SortDirection"].ASC,items:[],selectedItems:[],loading:true};_this.columns=[{field:"name",name:"Name",sortable:true,truncateText:true,render:function render(name,item){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{href:"#".concat(ROUTES.CHANNEL_DETAILS,"/").concat(item.config_id)},name)}},{field:"is_enabled",name:"Notification status",sortable:true,render:function render(enabled){var color=enabled?"success":"subdued";var label=enabled?"Active":"Muted";return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHealth"],{color:color},label)}},{field:"config_type",name:"Type",sortable:true,truncateText:false,render:function render(type){return external_osdSharedDeps_Lodash_default.a.get(CHANNEL_TYPE,type,"-")}},{field:"description",name:"Description",sortable:true,truncateText:true,render:function render(description){return description||"-"}}];_this.refresh=_this.refresh.bind(Channels_assertThisInitialized(_this));return _this}Channels_createClass(Channels,[{key:"componentDidMount",value:function(){var _componentDidMount=Channels_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.context.chrome.setBreadcrumbs([BREADCRUMBS.NOTIFICATIONS,BREADCRUMBS.CHANNELS]);window.scrollTo(0,0);_context.next=4;return this.refresh();case 4:case"end":return _context.stop()}}}),_callee,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentDidUpdate",value:function(){var _componentDidUpdate=Channels_asyncToGenerator(regeneratorRuntime.mark((function _callee2(prevProps,prevState){var prevQuery,currQuery;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:prevQuery=Channels.getQueryObjectFromState(prevState);currQuery=Channels.getQueryObjectFromState(this.state);if(external_osdSharedDeps_Lodash_default.a.isEqual(prevQuery,currQuery)){_context2.next=5;break}_context2.next=5;return this.refresh();case 5:case"end":return _context2.stop()}}}),_callee2,this)})));function componentDidUpdate(_x,_x2){return _componentDidUpdate.apply(this,arguments)}return componentDidUpdate}()},{key:"refresh",value:function(){var _refresh=Channels_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var queryObject,channels;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.setState({loading:true});_context3.prev=1;queryObject=Channels.getQueryObjectFromState(this.state);_context3.next=5;return this.props.notificationService.getChannels(queryObject);case 5:channels=_context3.sent;this.setState({items:channels.items,total:channels.total});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3["catch"](1);this.context.notifications.toasts.addDanger(getErrorMessage(_context3.t0,"There was a problem loading channels."));case 12:this.setState({loading:false});case 13:case"end":return _context3.stop()}}}),_callee3,this,[[1,9]])})));function refresh(){return _refresh.apply(this,arguments)}return refresh}()},{key:"render",value:function render(){var _this2=this;var filterIsApplied=!!this.state.search;var page=Math.floor(this.state.from/this.state.size);var pagination={pageIndex:page,pageSize:this.state.size,pageSizeOptions:DEFAULT_PAGE_SIZE_OPTIONS,totalItemCount:this.state.total};var sorting={sort:{direction:this.state.sortDirection,field:this.state.sortField}};var selection={selectable:function selectable(){return true},onSelectionChange:this.onSelectionChange};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(components_ContentPanel_ContentPanel,{actions:external_osdSharedDeps_React_default.a.createElement(ContentPanel_ContentPanelActions,{actions:[{component:external_osdSharedDeps_React_default.a.createElement(ChannelActions,{selected:this.state.selectedItems,setSelected:function setSelected(selectedItems){return _this2.setState({selectedItems:selectedItems})},items:this.state.items,setItems:function setItems(items){return _this2.setState({items:items})},refresh:this.refresh})},{component:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,href:"#".concat(ROUTES.CREATE_CHANNEL)},"Create channel")}]}),bodyStyles:{padding:"initial"},title:"Channels",titleSize:"m",total:this.state.total},external_osdSharedDeps_React_default.a.createElement(ChannelControls_ChannelControls,{onSearchChange:this.onSearchChange,filters:this.state.filters,onFiltersChange:this.onFiltersChange}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiBasicTable"],{columns:this.columns,items:this.state.items,itemId:"config_id",isSelectable:true,selection:selection,noItemsMessage:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_osdSharedDeps_React_default.a.createElement("h2",null,"No channels to display"),body:"To send or receive notifications, you will need to create a notification channel.",actions:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{href:"#".concat(ROUTES.CREATE_CHANNEL)},"Create channel")}),onChange:this.onTableChange,pagination:pagination,sorting:sorting,tableLayout:"auto",loading:this.state.loading})))}}],[{key:"getQueryObjectFromState",value:function getQueryObjectFromState(state){var config_type=external_osdSharedDeps_Lodash_default.a.isEmpty(state.filters.type)?Object.keys(CHANNEL_TYPE):state.filters.type;var queryObject={from_index:state.from,max_items:state.size,query:state.search,config_type:config_type,sort_field:state.sortField,sort_order:state.sortDirection};if(state.filters.state!=undefined)queryObject.is_enabled=state.filters.state;return queryObject}}]);return Channels}(external_osdSharedDeps_React_["Component"]);Channels_defineProperty(Channels_Channels,"contextType",CoreServicesContext);function ChannelDetailItems(props){var getPaddedDescriptionList=function getPaddedDescriptionList(list){return list.concat(new Array(Math.ceil(list.length/3)*3-list.length).fill(null)).reduce((function(rows,item,i){if(i%3===0)rows.push([item]);else rows[rows.length-1].push(item);return rows}),[])};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,getPaddedDescriptionList(props.listItems).map((function(row,rowIndex){return external_osdSharedDeps_React_default.a.createElement("div",{key:"channel-description-row-".concat(rowIndex)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],null,row.map((function(item,itemIndex){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{key:"channel-description-item-".concat(itemIndex)},item&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDescriptionList"],{style:{wordBreak:"break-word",whiteSpace:"pre-line"},listItems:[item]}))}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))})))}function ChannelDetailsActions_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function ChannelDetailsActions_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ChannelDetailsActions_ownKeys(Object(source),!0).forEach((function(key){ChannelDetailsActions_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ChannelDetailsActions_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function ChannelDetailsActions_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ChannelDetailsActions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function ChannelDetailsActions_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ChannelDetailsActions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ChannelDetailsActions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ChannelDetailsActions_slicedToArray(arr,i){return ChannelDetailsActions_arrayWithHoles(arr)||ChannelDetailsActions_iterableToArrayLimit(arr,i)||ChannelDetailsActions_unsupportedIterableToArray(arr,i)||ChannelDetailsActions_nonIterableRest()}function ChannelDetailsActions_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ChannelDetailsActions_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return ChannelDetailsActions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ChannelDetailsActions_arrayLikeToArray(o,minLen)}function ChannelDetailsActions_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ChannelDetailsActions_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function ChannelDetailsActions_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ChannelDetailsActions(props){var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var servicesContext=Object(external_osdSharedDeps_React_["useContext"])(ServicesContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(false),_useState2=ChannelDetailsActions_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];var sendTestMessage=function(){var _ref=ChannelDetailsActions_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return servicesContext.notificationService.sendTestMessage(props.channel.config_id);case 3:coreContext.notifications.toasts.addSuccess("Successfully sent a test message.");_context.next=9;break;case 6:_context.prev=6;_context.t0=_context["catch"](0);coreContext.notifications.toasts.addError((_context.t0===null||_context.t0===void 0?void 0:_context.t0.body)||_context.t0,{title:"Failed to send the test message.",toastMessage:"View error details and adjust the channel settings."});case 9:case"end":return _context.stop()}}}),_callee,null,[[0,6]])})));return function sendTestMessage(){return _ref.apply(this,arguments)}}();var actions=[{label:"Edit",href:"#".concat(ROUTES.EDIT_CHANNEL,"/").concat(props.channel.config_id,"?from=details")},{label:"Send test message",disabled:!props.channel.config_id||!props.channel.is_enabled,action:sendTestMessage},{label:"Delete",color:"danger",modal:DeleteChannelModal_DeleteChannelModal,modalParams:{href:"#".concat(ROUTES.CHANNELS)}}];return external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref2){var onShow=_ref2.onShow;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{panelPaddingSize:"none",button:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{iconType:"arrowDown",iconSide:"right",onClick:function onClick(){return setIsPopoverOpen(!isPopoverOpen)}},"Actions"),isOpen:isPopoverOpen,closePopover:function closePopover(){return setIsPopoverOpen(false)}},actions.map((function(params){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:params.label,disabled:params.disabled,onClick:function onClick(){setIsPopoverOpen(false);if(params.modal){onShow(params.modal,ChannelDetailsActions_objectSpread({selected:[props.channel]},params.modalParams||{}))}if(params.href)location.assign(params.href);if(params.action)params.action()}},params.color?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTextColor"],{color:params.color},params.label):params.label)})))}))}function helper_toConsumableArray(arr){return helper_arrayWithoutHoles(arr)||helper_iterableToArray(arr)||helper_unsupportedIterableToArray(arr)||helper_nonIterableSpread()}function helper_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function helper_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function helper_arrayWithoutHoles(arr){if(Array.isArray(arr))return helper_arrayLikeToArray(arr)}function helper_slicedToArray(arr,i){return helper_arrayWithHoles(arr)||helper_iterableToArrayLimit(arr,i)||helper_unsupportedIterableToArray(arr,i)||helper_nonIterableRest()}function helper_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function helper_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return helper_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return helper_arrayLikeToArray(o,minLen)}function helper_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function helper_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function helper_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function utils_helper_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function utils_helper_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?utils_helper_ownKeys(Object(source),!0).forEach((function(key){utils_helper_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):utils_helper_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function utils_helper_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var constructWebhookObject=function constructWebhookObject(webhookTypeIdSelected,webhookURL,customURLType,customURLHost,customURLPort,customURLPath,webhookMethod,webhookParams,webhookHeaders){var url;if(webhookTypeIdSelected==="WEBHOOK_URL"){url=webhookURL}else{url="".concat(customURLType.toLowerCase(),"://").concat(customURLHost.replace(/^https?:\/\//,""));if(customURLPort)url+=":".concat(customURLPort);if(customURLPath)url+="/".concat(customURLPath.replace(/^\//,""));if(webhookParams.length>0){var params=new URLSearchParams(webhookParams.filter((function(_ref){var key=_ref.key,value=_ref.value;return key})).map((function(_ref2){var key=_ref2.key,value=_ref2.value;return[key,value]})));url+="?"+params.toString()}}var header_params=webhookHeaders.filter((function(_ref3){var key=_ref3.key,value=_ref3.value;return key})).reduce((function(prev,curr){return utils_helper_objectSpread(utils_helper_objectSpread({},prev),{},utils_helper_defineProperty({},curr.key,curr.value))}),{});return{url:url,header_params:header_params,method:webhookMethod}};var deconstructWebhookObject=function deconstructWebhookObject(webhook){try{var url=new URL(webhook.url);var customURLType=url.protocol.replace(":","").toUpperCase();var customURLHost=url.hostname;var customURLPort=url.port;var customURLPath=url.pathname.replace(/^\//,"");var webhookParams=[];url.searchParams.forEach((function(value,key){return webhookParams.push({key:key,value:value})}));var webhookHeaders=Object.entries(webhook.header_params).map((function(_ref4){var _ref5=helper_slicedToArray(_ref4,2),key=_ref5[0],value=_ref5[1];return{key:key,value:value}}));return{webhookURL:webhook.url,customURLType:customURLType,customURLHost:customURLHost,customURLPort:customURLPort,customURLPath:customURLPath,webhookMethod:webhook.method,webhookParams:webhookParams,webhookHeaders:webhookHeaders}}catch(error){console.error("Error parsing url:",error);return{webhookURL:webhook.url,customURLType:"HTTPS",customURLHost:"",customURLPort:"",customURLPath:"",webhookMethod:"POST",webhookParams:[],webhookHeaders:[]}}};var constructEmailObject=function constructEmailObject(selectedSenderOptions,selectedRecipientGroupOptions){var customEmailsList=[];var recipientGroupIds=[];for(var i=0;i<selectedRecipientGroupOptions.length;i++){var group=selectedRecipientGroupOptions[i];if(group.value){recipientGroupIds.push(group.value)}else{customEmailsList.push({recipient:group.label})}}return{email_account_id:selectedSenderOptions[0].value,recipient_list:customEmailsList,email_group_id_list:recipientGroupIds}};var helper_deconstructEmailObject=function deconstructEmailObject(email){var selectedSenderOptions=[{label:email.email_account_name||"-",value:email.email_account_id}];var selectedRecipientGroupOptions=[].concat(helper_toConsumableArray(email.email_group_id_list.map((function(groupId){return{label:external_osdSharedDeps_Lodash_default.a.get(email.email_group_id_map,groupId,"-"),value:groupId}}))),helper_toConsumableArray(email.recipient_list.map((function(recipient){return{label:recipient.recipient}}))));return{senderType:email.sender_type,selectedSenderOptions:selectedSenderOptions,selectedRecipientGroupOptions:selectedRecipientGroupOptions}};function DetailsListModal(props){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:props.onClose,maxWidth:800},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,props.header)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xxs"},external_osdSharedDeps_React_default.a.createElement("h1",null,props.title)),props.items.map((function(item,i){return external_osdSharedDeps_React_default.a.createElement("div",{key:"details-list-modal-item-".concat(i)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s"}),external_osdSharedDeps_React_default.a.createElement("p",null,item))}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:props.onClose},"Close")))))}function DetailsTableModal(props){var keyColumn=props.isParameters?"Parameter":"Header";var columns=[{field:"key",name:keyColumn,align:"left",truncateText:false,render:function render(item){return item?item:"-"}},{field:"value",name:"Value",align:"left",truncateText:false,render:function render(item){return item?item:"-"}}];return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:props.onClose,maxWidth:800},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,props.header)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:props.items,columns:columns})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:props.onClose},"Close")))))}function ChannelSettingsDetails(props){if(!props.channel)return null;var settingsList=[];var getModalComponent=function getModalComponent(items,header,title){var separator=arguments.length>3&&arguments[3]!==undefined?arguments[3]:", ";var isParameters=arguments.length>4?arguments[4]:undefined;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement("div",{style:{whiteSpace:"pre-line"}},items.slice(0,5).map((function(item){return typeof item==="string"?item:"".concat(item.key,": ").concat(item.value)})).join(separator)||"-"),items.length>5&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null," ",external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref){var onShow=_ref.onShow;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{onClick:typeof items[0]==="string"?function(){return onShow(DetailsListModal,{header:"".concat(header," (").concat(items.length,")"),title:title,items:items})}:function(){return onShow(DetailsTableModal,{header:"".concat(header," (").concat(items.length,")"),isParameters:isParameters,items:items})}},items.length-5," more")}))))};var type=props.channel.config_type;if(type===BACKEND_CHANNEL_TYPE.SLACK){settingsList.push.apply(settingsList,[{title:"Channel type",description:CHANNEL_TYPE.slack},{title:"Webhook URL",description:props.channel.slack.url||"-"}])}else if(type===BACKEND_CHANNEL_TYPE.CHIME){settingsList.push.apply(settingsList,[{title:"Channel type",description:CHANNEL_TYPE.chime},{title:"Webhook URL",description:props.channel.chime.url||"-"}])}else if(type===BACKEND_CHANNEL_TYPE.EMAIL){var emailObject=helper_deconstructEmailObject(props.channel.email);var recipientsDescription=getModalComponent(emailObject.selectedRecipientGroupOptions.map((function(group){return group.label})),"Default recipients","Recipients");settingsList.push.apply(settingsList,[{title:"Channel type",description:CHANNEL_TYPE.email},{title:"Sender",description:emailObject.selectedSenderOptions[0].label||"-"},{title:"Default recipients",description:recipientsDescription}])}else if(type===BACKEND_CHANNEL_TYPE.CUSTOM_WEBHOOK){var webhookObject=deconstructWebhookObject(props.channel.webhook);var parametersDescription=getModalComponent(webhookObject.webhookParams,"Query parameters",undefined,"\n",true);var headersDescription=getModalComponent(webhookObject.webhookHeaders,"Webhook headers",undefined,"\n",false);settingsList.push.apply(settingsList,[{title:"Channel type",description:CHANNEL_TYPE.webhook},{title:"Method",description:webhookObject.webhookMethod||"-"},{title:"Type",description:webhookObject.customURLType||"-"},{title:"Host",description:webhookObject.customURLHost||"-"},{title:"Port",description:webhookObject.customURLPort||"-"},{title:"Path",description:webhookObject.customURLPath||"-"},{title:"Query parameters",description:parametersDescription},{title:"Webhook headers",description:headersDescription}])}else if(type===BACKEND_CHANNEL_TYPE.SNS){var _props$channel$sns,_props$channel$sns2;settingsList.push.apply(settingsList,[{title:"Channel type",description:CHANNEL_TYPE.sns},{title:"SNS topic ARN",description:((_props$channel$sns=props.channel.sns)===null||_props$channel$sns===void 0?void 0:_props$channel$sns.topic_arn)||"-"},{title:"IAM role ARN",description:((_props$channel$sns2=props.channel.sns)===null||_props$channel$sns2===void 0?void 0:_props$channel$sns2.role_arn)||"-"}])}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(ChannelDetailItems,{listItems:settingsList}))}function ChannelDetails_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function ChannelDetails_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ChannelDetails_ownKeys(Object(source),!0).forEach((function(key){ChannelDetails_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ChannelDetails_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function ChannelDetails_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ChannelDetails_toConsumableArray(arr){return ChannelDetails_arrayWithoutHoles(arr)||ChannelDetails_iterableToArray(arr)||ChannelDetails_unsupportedIterableToArray(arr)||ChannelDetails_nonIterableSpread()}function ChannelDetails_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ChannelDetails_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function ChannelDetails_arrayWithoutHoles(arr){if(Array.isArray(arr))return ChannelDetails_arrayLikeToArray(arr)}function ChannelDetails_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function ChannelDetails_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ChannelDetails_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ChannelDetails_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ChannelDetails_slicedToArray(arr,i){return ChannelDetails_arrayWithHoles(arr)||ChannelDetails_iterableToArrayLimit(arr,i)||ChannelDetails_unsupportedIterableToArray(arr,i)||ChannelDetails_nonIterableRest()}function ChannelDetails_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ChannelDetails_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return ChannelDetails_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ChannelDetails_arrayLikeToArray(o,minLen)}function ChannelDetails_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ChannelDetails_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function ChannelDetails_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ChannelDetails(props){var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var servicesContext=Object(external_osdSharedDeps_React_["useContext"])(ServicesContext);var id=props.match.params.id;var _useState=Object(external_osdSharedDeps_React_["useState"])(),_useState2=ChannelDetails_slicedToArray(_useState,2),channel=_useState2[0],setChannel=_useState2[1];var _useState3=Object(external_osdSharedDeps_React_["useState"])([]),_useState4=ChannelDetails_slicedToArray(_useState3,2),toasts=_useState4[0],setToasts=_useState4[1];Object(external_osdSharedDeps_React_["useEffect"])((function(){coreContext.chrome.setBreadcrumbs([BREADCRUMBS.NOTIFICATIONS,BREADCRUMBS.CHANNELS]);refresh()}),[]);var refresh=function(){var _ref=ChannelDetails_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:servicesContext.notificationService.getChannel(id).then(function(){var _ref2=ChannelDetails_asyncToGenerator(regeneratorRuntime.mark((function _callee(response){var _channel$email,_channel$email$invali,_channel;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(response.config_type==="email")){_context.next=6;break}_context.next=3;return servicesContext.notificationService.getEmailConfigDetails(response);case 3:_channel=_context.sent;if((_channel$email=_channel.email)!==null&&_channel$email!==void 0&&(_channel$email$invali=_channel$email.invalid_ids)!==null&&_channel$email$invali!==void 0&&_channel$email$invali.length){coreContext.notifications.toasts.addDanger("The sender and/or some recipient groups might have been deleted.")}return _context.abrupt("return",_channel);case 6:return _context.abrupt("return",response);case 7:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}()).then((function(response){setChannel(response);coreContext.chrome.setBreadcrumbs([BREADCRUMBS.NOTIFICATIONS,BREADCRUMBS.CHANNELS,{text:(response===null||response===void 0?void 0:response.name)||"",href:"".concat(BREADCRUMBS.CHANNEL_DETAILS.href,"/").concat(id)}])})).catch((function(error){var newToast={id:"channel-not-found-toast",title:"Channel not found",color:"danger",iconType:"alert",text:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s",style:{fontWeight:400,color:"rgb(52, 55, 65)",marginTop:10,marginBottom:20}},"The channel might have been deleted."),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{size:"s",href:"#".concat(ROUTES.NOTIFICATIONS)},"View Notifications dashboard"))))};setToasts([].concat(ChannelDetails_toConsumableArray(toasts),[newToast]))}));case 1:case"end":return _context2.stop()}}}),_callee2)})));return function refresh(){return _ref.apply(this,arguments)}}();var nameList=[{title:"Channel name",description:(channel===null||channel===void 0?void 0:channel.name)||"-"},{title:"Description",description:(channel===null||channel===void 0?void 0:channel.description)||"-"},{title:"Last updated",description:helpers_renderTime((channel===null||channel===void 0?void 0:channel.last_updated_time_ms)||NaN)}];return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiGlobalToastList"],{toasts:toasts,dismissToast:function dismissToast(removedToast){setToasts(toasts.filter((function(toast){return toast.id!==removedToast.id})))},toastLifeTimeMs:6e4}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"m",style:{maxWidth:1316}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"m",alignItems:"flexEnd"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_osdSharedDeps_React_default.a.createElement("h1",null,(channel===null||channel===void 0?void 0:channel.name)||"-"))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:{paddingBottom:5}},(channel===null||channel===void 0?void 0:channel.is_enabled)===undefined?null:channel.is_enabled?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHealth"],{color:"success"},"Active"):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHealth"],{color:"subdued"},"Muted")))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},channel&&external_osdSharedDeps_React_default.a.createElement(ChannelDetailsActions,{channel:channel})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},channel&&external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref3){var onShow=_ref3.onShow;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"channel-details-mute-button",iconType:channel!==null&&channel!==void 0&&channel.is_enabled?"bellSlash":"bell",onClick:function onClick(){if(!channel)return;if(channel.is_enabled){onShow(MuteChannelModal_MuteChannelModal,{selected:[channel],setSelected:function setSelected(selected){return setChannel(selected[0])}})}else{var newChannel=ChannelDetails_objectSpread(ChannelDetails_objectSpread({},channel),{},{is_enabled:true});servicesContext.notificationService.updateConfig(channel.config_id,newChannel).then((function(resp){coreContext.notifications.toasts.addSuccess("Channel ".concat(channel.name," successfully unmuted."));setChannel(newChannel)}))}}},channel!==null&&channel!==void 0&&channel.is_enabled?"Mute channel":"Unmute channel")})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(components_ContentPanel_ContentPanel,{bodyStyles:{padding:"initial"},title:"Name and description",titleSize:"s",panelStyles:{maxWidth:1300}},external_osdSharedDeps_React_default.a.createElement(ChannelDetailItems,{listItems:nameList})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(components_ContentPanel_ContentPanel,{bodyStyles:{padding:"initial"},title:"Configurations",titleSize:"s",panelStyles:{maxWidth:1300}},external_osdSharedDeps_React_default.a.createElement(ChannelSettingsDetails,{channel:channel})))}var query_string=__webpack_require__(22);var query_string_default=__webpack_require__.n(query_string);var validationHelper_validateChannelName=function validateChannelName(name){var errors=[];if(external_osdSharedDeps_Lodash_default.a.trim(name).length===0)errors.push("Channel name cannot be empty.");return errors};var validateWebhookURL=function validateWebhookURL(url){var errors=[];if(url.length===0)errors.push("Webhook URL cannot be empty.");else if(!url.match(/^https?:\/\/.+/))errors.push("Invalid webhook URL.");return errors};var validateWebhookKey=function validateWebhookKey(key){var errors=[];if(key.length===0)errors.push("Key cannot be empty.");return errors};var validateWebhookValue=function validateWebhookValue(value){var errors=[];if(value.length===0)errors.push("Value cannot be empty.");return errors};var validateCustomURLHost=function validateCustomURLHost(host){var errors=[];if(host.length===0)errors.push("Host cannot be empty.");return errors};var validateCustomURLPort=function validateCustomURLPort(port){var errors=[];if(port.length===0)return errors;var portNum=parseInt(port);if(isNaN(portNum)||portNum<0||portNum>65535)errors.push("Invalid port.");return errors};var validateEmailSender=function validateEmailSender(sender){var errors=[];if(sender.length===0)errors.push("Sender cannot be empty.");return errors};var validateRecipients=function validateRecipients(group){var errors=[];if(group.length===0)errors.push("Default recipients cannot be empty.");return errors};var validateArn=function validateArn(arn){var errors=[];if(arn.length===0)errors.push("ARN key cannot be empty.");return errors};function ChannelNamePanel_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function ChannelNamePanel_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ChannelNamePanel_ownKeys(Object(source),!0).forEach((function(key){ChannelNamePanel_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ChannelNamePanel_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function ChannelNamePanel_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ChannelNamePanel(props){var context=Object(external_osdSharedDeps_React_["useContext"])(CreateChannelContext);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(components_ContentPanel_ContentPanel,{bodyStyles:{padding:"initial"},title:"Name and description",titleSize:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Name",error:context.inputErrors.name.join(" "),isInvalid:context.inputErrors.name.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{"data-test-subj":"create-channel-name-input",placeholder:"Enter channel name",value:props.name,onChange:function onChange(e){return props.setName(e.target.value)},isInvalid:context.inputErrors.name.length>0,onBlur:function onBlur(){context.setInputErrors(ChannelNamePanel_objectSpread(ChannelNamePanel_objectSpread({},context.inputErrors),{},{name:validationHelper_validateChannelName(props.name)}))}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_React_default.a.createElement("span",null,"Description - ",external_osdSharedDeps_React_default.a.createElement("i",{style:{fontWeight:"normal"}},"optional"))},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTextArea"],{"data-test-subj":"create-channel-description-input",placeholder:"What is the purpose of this channel?",style:{height:"4.1rem"},value:props.description,onChange:function onChange(e){return props.setDescription(e.target.value)}})))))}function ChimeSettings_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function ChimeSettings_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ChimeSettings_ownKeys(Object(source),!0).forEach((function(key){ChimeSettings_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ChimeSettings_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function ChimeSettings_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ChimeSettings(props){var context=Object(external_osdSharedDeps_React_["useContext"])(CreateChannelContext);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Webhook URL",style:{maxWidth:"700px"},error:context.inputErrors.chimeWebhook.join(" "),isInvalid:context.inputErrors.chimeWebhook.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{fullWidth:true,"data-test-subj":"create-channel-chime-webhook-input",placeholder:"https://hooks.chime.aws/incomingwebhooks/XXXXX...",value:props.chimeWebhook,onChange:function onChange(e){return props.setChimeWebhook(e.target.value)},isInvalid:context.inputErrors.chimeWebhook.length>0,onBlur:function onBlur(){context.setInputErrors(ChimeSettings_objectSpread(ChimeSettings_objectSpread({},context.inputErrors),{},{chimeWebhook:validateWebhookURL(props.chimeWebhook)}))}}))}function WebhookHeaders_toConsumableArray(arr){return WebhookHeaders_arrayWithoutHoles(arr)||WebhookHeaders_iterableToArray(arr)||WebhookHeaders_unsupportedIterableToArray(arr)||WebhookHeaders_nonIterableSpread()}function WebhookHeaders_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function WebhookHeaders_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return WebhookHeaders_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WebhookHeaders_arrayLikeToArray(o,minLen)}function WebhookHeaders_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function WebhookHeaders_arrayWithoutHoles(arr){if(Array.isArray(arr))return WebhookHeaders_arrayLikeToArray(arr)}function WebhookHeaders_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function WebhookHeaders(props){var setHeader=function setHeader(key,value,index){var header=props.headers[index];var newHeaders=WebhookHeaders_toConsumableArray(props.headers);if(key!==null)header.key=key;else if(value!==null)header.value=value;newHeaders.splice(index,1,header);props.setHeaders(newHeaders)};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_osdSharedDeps_React_default.a.createElement("h4",null,props.type==="parameter"?"Query parameters":"Webhook headers")),props.headers.length===0&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s"},"No ".concat(props.type,"s defined."))),props.headers.map((function(header,i){return external_osdSharedDeps_React_default.a.createElement("div",{key:"webhook-".concat(props.type,"-").concat(i)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{style:{maxWidth:639}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Key"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"",value:header.key,onChange:function onChange(e){return setHeader(e.target.value,null,i)},disabled:props.type==="header"&&i===0&&header.key==="Content-Type"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Value"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"",value:header.value,onChange:function onChange(e){return setHeader(null,e.target.value,i)}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{hasEmptyLabelSpace:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){var newHeaders=WebhookHeaders_toConsumableArray(props.headers);newHeaders.splice(i,1);props.setHeaders(newHeaders)},disabled:props.type==="header"&&i===0&&header.key==="Content-Type"},"Remove ".concat(props.type))))))})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){props.setHeaders([].concat(WebhookHeaders_toConsumableArray(props.headers),[{key:"",value:""}]))}},"Add ".concat(props.type)))}function CustomWebhookSettings_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function CustomWebhookSettings_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?CustomWebhookSettings_ownKeys(Object(source),!0).forEach((function(key){CustomWebhookSettings_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):CustomWebhookSettings_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function CustomWebhookSettings_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function CustomWebhookSettings_slicedToArray(arr,i){return CustomWebhookSettings_arrayWithHoles(arr)||CustomWebhookSettings_iterableToArrayLimit(arr,i)||CustomWebhookSettings_unsupportedIterableToArray(arr,i)||CustomWebhookSettings_nonIterableRest()}function CustomWebhookSettings_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CustomWebhookSettings_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return CustomWebhookSettings_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CustomWebhookSettings_arrayLikeToArray(o,minLen)}function CustomWebhookSettings_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function CustomWebhookSettings_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function CustomWebhookSettings_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function CustomWebhookSettings(props){var context=Object(external_osdSharedDeps_React_["useContext"])(CreateChannelContext);var webhookTypeOptions=Object.entries(CUSTOM_WEBHOOK_ENDPOINT_TYPE).map((function(_ref){var _ref2=CustomWebhookSettings_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return{id:key,label:value}}));var renderWebhook=function renderWebhook(){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Webhook URL",error:context.inputErrors.webhookURL.join(" "),isInvalid:context.inputErrors.webhookURL.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"https://name.example.com/XXXXX...","data-test-subj":"custom-webhook-url-input",value:props.webhookURL,onChange:function onChange(e){return props.setWebhookURL(e.target.value)},isInvalid:context.inputErrors.webhookURL.length>0,onBlur:function onBlur(){context.setInputErrors(CustomWebhookSettings_objectSpread(CustomWebhookSettings_objectSpread({},context.inputErrors),{},{webhookURL:validateWebhookURL(props.webhookURL)}))}}))};var renderCustomURL=function renderCustomURL(){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Type"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSuperSelect"],{options:[{value:"HTTPS",inputDisplay:"HTTPS"},{value:"HTTP",inputDisplay:"HTTP"}],valueOfSelected:props.customURLType,onChange:props.setCustomURLType})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Host",error:context.inputErrors.customURLHost.join(" "),isInvalid:context.inputErrors.customURLHost.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"name.example.com","data-test-subj":"custom-webhook-host-input",value:props.customURLHost,onChange:function onChange(e){return props.setCustomURLHost(e.target.value)},isInvalid:context.inputErrors.customURLHost.length>0,onBlur:function onBlur(){context.setInputErrors(CustomWebhookSettings_objectSpread(CustomWebhookSettings_objectSpread({},context.inputErrors),{},{customURLHost:validateCustomURLHost(props.customURLHost)}))}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_React_default.a.createElement("span",null,"Port - ",external_osdSharedDeps_React_default.a.createElement("i",{style:{fontWeight:"normal"}},"optional")),error:context.inputErrors.customURLPort.join(" "),isInvalid:context.inputErrors.customURLPort.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldNumber"],{placeholder:"Enter port","data-test-subj":"custom-webhook-port-input",value:props.customURLPort,onChange:function onChange(e){return props.setCustomURLPort(e.target.value)},isInvalid:context.inputErrors.customURLPort.length>0,onBlur:function onBlur(){context.setInputErrors(CustomWebhookSettings_objectSpread(CustomWebhookSettings_objectSpread({},context.inputErrors),{},{customURLPort:validateCustomURLPort(props.customURLPort)}))}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_React_default.a.createElement("span",null,"Path - ",external_osdSharedDeps_React_default.a.createElement("i",{style:{fontWeight:"normal"}},"optional"))},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"Enter path","data-test-subj":"custom-webhook-path-input",value:props.customURLPath,onChange:function onChange(e){return props.setCustomURLPath(e.target.value)}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(WebhookHeaders,{headers:props.webhookParams,setHeaders:props.setWebhookParams,type:"parameter"}))};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Method",style:{maxWidth:"700px"}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSuperSelect"],{options:[{value:"POST",inputDisplay:"POST"},{value:"PUT",inputDisplay:"PUT"},{value:"PATCH",inputDisplay:"PATCH"}],valueOfSelected:props.webhookMethod,onChange:props.setWebhookMethod})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Define endpoints by",style:{maxWidth:"700px"}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiRadioGroup"],{options:webhookTypeOptions,idSelected:props.webhookTypeIdSelected,onChange:function onChange(id){return props.setWebhookTypeIdSelected(id)}})),props.webhookTypeIdSelected==="WEBHOOK_URL"?renderWebhook():renderCustomURL(),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"xxl"}),external_osdSharedDeps_React_default.a.createElement(WebhookHeaders,{headers:props.webhookHeaders,setHeaders:props.setWebhookHeaders,type:"header"}))}function utils_helper_toConsumableArray(arr){return utils_helper_arrayWithoutHoles(arr)||utils_helper_iterableToArray(arr)||utils_helper_unsupportedIterableToArray(arr)||utils_helper_nonIterableSpread()}function utils_helper_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function utils_helper_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return utils_helper_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return utils_helper_arrayLikeToArray(o,minLen)}function utils_helper_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function utils_helper_arrayWithoutHoles(arr){if(Array.isArray(arr))return utils_helper_arrayLikeToArray(arr)}function utils_helper_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function Emails_utils_helper_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function Emails_utils_helper_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Emails_utils_helper_ownKeys(Object(source),!0).forEach((function(key){Emails_utils_helper_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Emails_utils_helper_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function Emails_utils_helper_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createSenderConfigObject=function createSenderConfigObject(senderName,host,port,encryption,email){return{name:senderName,config_type:"smtp_account",is_enabled:true,smtp_account:{host:host,port:port,method:encryption,from_address:email}}};var createSesSenderConfigObject=function createSesSenderConfigObject(senderName,email,awsRegion,roleArn){return{name:senderName,config_type:"ses_account",is_enabled:true,ses_account:Emails_utils_helper_objectSpread({from_address:email,region:awsRegion},roleArn&&{role_arn:roleArn})}};var createRecipientGroupConfigObject=function createRecipientGroupConfigObject(name,description,selectedEmailOptions){return{name:name,description:description,config_type:"email_group",is_enabled:true,email_group:{recipient_list:selectedEmailOptions.map((function(email){return{recipient:email.label}}))}}};var onComboBoxCreateOption=function onComboBoxCreateOption(searchValue){var flattenedOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var options=arguments.length>2?arguments[2]:undefined;var setOptions=arguments.length>3?arguments[3]:undefined;var selectedOptions=arguments.length>4?arguments[4]:undefined;var setSelectedOptions=arguments.length>5?arguments[5]:undefined;var setInputError=arguments.length>6?arguments[6]:undefined;var normalizedSearchValue=searchValue.trim().toLowerCase();if(!normalizedSearchValue)return;var newOption={label:searchValue};if(flattenedOptions.findIndex((function(option){return option.label.trim().toLowerCase()===normalizedSearchValue}))===-1){setOptions([].concat(utils_helper_toConsumableArray(options),[newOption]))}var newOptions=[].concat(utils_helper_toConsumableArray(selectedOptions),[newOption]);setSelectedOptions(newOptions);setInputError(newOptions)};var validationHelper_validateSenderName=function validateSenderName(name){var errors=[];if(external_osdSharedDeps_Lodash_default.a.trim(name).length===0){errors.push("Sender name cannot be empty.");return errors}if(name.length>50||name.length<2)errors.push("Sender name must contain 2 to 50 characters.");if(!/^[a-z0-9-_]+$/.test(name))errors.push("Sender name contains invalid characters.");return errors};var validateEmail=function validateEmail(email){var errors=[];if(email.length===0)errors.push("Email address cannot be empty.");return errors};var validateHost=function validateHost(host){var errors=[];if(host.length===0)errors.push("Host cannot be empty.");return errors};var validatePort=function validatePort(port){var errors=[];var portNum=parseInt(port);if(port.length===0)errors.push("Port cannot be empty.");else if(isNaN(portNum)||portNum<0||portNum>65535)errors.push("Invalid port.");return errors};var validateRoleArn=function validateRoleArn(roleArn){var errors=[];if(roleArn.length===0)errors.push("IAM role ARN cannot be empty.");return errors};var validateAwsRegion=function validateAwsRegion(region){var errors=[];if(region.length===0)errors.push("AWS region cannot be empty.");return errors};var validationHelper_validateRecipientGroupName=function validateRecipientGroupName(name){var errors=[];if(external_osdSharedDeps_Lodash_default.a.trim(name).length===0){errors.push("Recipient group name cannot be empty.");return errors}if(name.length>50||name.length<2)errors.push("Recipient group name must contain 2 to 50 characters.");return errors};var validateRecipientGroupEmails=function validateRecipientGroupEmails(emails){var errors=[];if(emails.length===0)errors.push("Email addresses cannot be empty.");return errors};function CreateRecipientGroupForm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function CreateRecipientGroupForm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?CreateRecipientGroupForm_ownKeys(Object(source),!0).forEach((function(key){CreateRecipientGroupForm_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):CreateRecipientGroupForm_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function CreateRecipientGroupForm_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function CreateRecipientGroupForm(props){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Name",style:{maxWidth:"650px"},helpText:"The name must contain 2 to 50 characters. Valid characters are A-Z, a-z, 0-9, (_) underscore, (-) hyphen and unicode characters.",error:props.inputErrors.name.join(" "),isInvalid:props.inputErrors.name.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{fullWidth:true,"data-test-subj":"create-recipient-group-form-name-input",placeholder:"Enter recipient group name",value:props.name,onChange:function onChange(e){return props.setName(e.target.value)},isInvalid:props.inputErrors.name.length>0,onBlur:function onBlur(){props.setInputErrors(CreateRecipientGroupForm_objectSpread(CreateRecipientGroupForm_objectSpread({},props.inputErrors),{},{name:validationHelper_validateRecipientGroupName(props.name)}))}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_React_default.a.createElement("span",null,"Description - ",external_osdSharedDeps_React_default.a.createElement("i",{style:{fontWeight:"normal"}},"optional")),style:{maxWidth:"650px"}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},"Describe the purpose of the channel."),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTextArea"],{fullWidth:true,"data-test-subj":"create-recipient-group-form-description-input",placeholder:"What is the purpose of this recipient group?",style:{height:"4.1rem"},value:props.description,onChange:function onChange(e){return props.setDescription(e.target.value)}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Emails",style:{maxWidth:"650px"},error:props.inputErrors.emailOptions.join(" "),isInvalid:props.inputErrors.emailOptions.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},"Select or type in one or more email addresses."),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:"Email addresses","data-test-subj":"create-recipient-group-form-emails-input",fullWidth:true,options:props.emailOptions,selectedOptions:props.selectedEmailOptions,onChange:props.setSelectedEmailOptions,onCreateOption:function onCreateOption(searchValue,flattenedOptions){return onComboBoxCreateOption(searchValue,flattenedOptions,props.emailOptions,props.setEmailOptions,props.selectedEmailOptions,props.setSelectedEmailOptions,(function(options){return props.setInputErrors(CreateRecipientGroupForm_objectSpread(CreateRecipientGroupForm_objectSpread({},props.inputErrors),{},{emailOptions:validateRecipientGroupEmails(options)}))}))},customOptionText:"Add {searchValue} as an email address",isClearable:true,isInvalid:props.inputErrors.emailOptions.length>0,onBlur:function onBlur(){props.setInputErrors(CreateRecipientGroupForm_objectSpread(CreateRecipientGroupForm_objectSpread({},props.inputErrors),{},{emailOptions:validateRecipientGroupEmails(props.selectedEmailOptions)}))}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}function CreateRecipientGroupModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function CreateRecipientGroupModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CreateRecipientGroupModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CreateRecipientGroupModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function CreateRecipientGroupModal_slicedToArray(arr,i){return CreateRecipientGroupModal_arrayWithHoles(arr)||CreateRecipientGroupModal_iterableToArrayLimit(arr,i)||CreateRecipientGroupModal_unsupportedIterableToArray(arr,i)||CreateRecipientGroupModal_nonIterableRest()}function CreateRecipientGroupModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CreateRecipientGroupModal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return CreateRecipientGroupModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CreateRecipientGroupModal_arrayLikeToArray(o,minLen)}function CreateRecipientGroupModal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function CreateRecipientGroupModal_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function CreateRecipientGroupModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function CreateRecipientGroupModal(props){var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(""),_useState2=CreateRecipientGroupModal_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=Object(external_osdSharedDeps_React_["useState"])(""),_useState4=CreateRecipientGroupModal_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=Object(external_osdSharedDeps_React_["useState"])([]),_useState6=CreateRecipientGroupModal_slicedToArray(_useState5,2),selectedEmailOptions=_useState6[0],setSelectedEmailOptions=_useState6[1];var _useState7=Object(external_osdSharedDeps_React_["useState"])([{label:"no-reply@company.com"}]),_useState8=CreateRecipientGroupModal_slicedToArray(_useState7,2),emailOptions=_useState8[0],setEmailOptions=_useState8[1];var _useState9=Object(external_osdSharedDeps_React_["useState"])({name:[],emailOptions:[]}),_useState10=CreateRecipientGroupModal_slicedToArray(_useState9,2),inputErrors=_useState10[0],setInputErrors=_useState10[1];var isInputValid=function isInputValid(){var errors={name:validationHelper_validateRecipientGroupName(name),emailOptions:validateRecipientGroupEmails(emailOptions)};setInputErrors(errors);return!Object.values(errors).reduce((function(errorFlag,error){return errorFlag||error.length>0}),false)};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:props.onClose,style:{width:650}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,"Create recipient group")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(CreateRecipientGroupForm,{name:name,setName:setName,description:description,setDescription:setDescription,selectedEmailOptions:selectedEmailOptions,setSelectedEmailOptions:setSelectedEmailOptions,emailOptions:emailOptions,setEmailOptions:setEmailOptions,inputErrors:inputErrors,setInputErrors:setInputErrors})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:props.onClose},"Cancel"),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"create-recipient-group-modal-create-button",fill:true,onClick:CreateRecipientGroupModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var config;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(isInputValid()){_context.next=3;break}coreContext.notifications.toasts.addDanger("Some fields are invalid. Fix all highlighted error(s) before continuing.");return _context.abrupt("return");case 3:config=createRecipientGroupConfigObject(name,description,selectedEmailOptions);_context.next=6;return props.services.notificationService.createConfig(config).then((function(response){coreContext.notifications.toasts.addSuccess("Recipient group ".concat(name," successfully created. You can select ").concat(name," from the list of recipient groups."));props.addRecipientGroupOptionAndSelect({label:name,value:response.config_id});props.onClose()})).catch((function(error){coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to create sender."})}));case 6:case"end":return _context.stop()}}}),_callee)})))},"Create"))))}function CreateSenderForm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function CreateSenderForm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?CreateSenderForm_ownKeys(Object(source),!0).forEach((function(key){CreateSenderForm_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):CreateSenderForm_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function CreateSenderForm_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function CreateSenderForm_slicedToArray(arr,i){return CreateSenderForm_arrayWithHoles(arr)||CreateSenderForm_iterableToArrayLimit(arr,i)||CreateSenderForm_unsupportedIterableToArray(arr,i)||CreateSenderForm_nonIterableRest()}function CreateSenderForm_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CreateSenderForm_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return CreateSenderForm_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CreateSenderForm_arrayLikeToArray(o,minLen)}function CreateSenderForm_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function CreateSenderForm_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function CreateSenderForm_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function CreateSenderForm(props){var encryptionOptions=Object.entries(ENCRYPTION_TYPE).map((function(_ref){var _ref2=CreateSenderForm_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return{value:key,inputDisplay:value}}));return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Sender name",style:{maxWidth:"650px"},helpText:"Use a unique, descriptive name. The sender name must contain from 2 to 50 characters. Valid characters are lowercase a-z, 0-9, - (hyphen) and _ (underscore).",error:props.inputErrors.senderName.join(" "),isInvalid:props.inputErrors.senderName.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{fullWidth:true,placeholder:"Enter sender name","data-test-subj":"create-sender-form-name-input",value:props.senderName,onChange:function onChange(e){return props.setSenderName(e.target.value)},isInvalid:props.inputErrors.senderName.length>0,onBlur:function onBlur(){props.setInputErrors(CreateSenderForm_objectSpread(CreateSenderForm_objectSpread({},props.inputErrors),{},{senderName:validationHelper_validateSenderName(props.senderName)}))}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",style:{maxWidth:"658px"}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:4},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Email address",error:props.inputErrors.email.join(" "),isInvalid:props.inputErrors.email.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"name@example.com","data-test-subj":"create-sender-form-email-input",value:props.email,onChange:function onChange(e){return props.setEmail(e.target.value)},isInvalid:props.inputErrors.email.length>0,onBlur:function onBlur(){props.setInputErrors(CreateSenderForm_objectSpread(CreateSenderForm_objectSpread({},props.inputErrors),{},{email:validateEmail(props.email)}))}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:4},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Host",error:props.inputErrors.host.join(" "),isInvalid:props.inputErrors.host.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"smtp.example.com","data-test-subj":"create-sender-form-host-input",value:props.host,onChange:function onChange(e){return props.setHost(e.target.value)},isInvalid:props.inputErrors.host.length>0,onBlur:function onBlur(){props.setInputErrors(CreateSenderForm_objectSpread(CreateSenderForm_objectSpread({},props.inputErrors),{},{host:validateHost(props.host)}))}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:2},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Port",error:props.inputErrors.port.join(" "),isInvalid:props.inputErrors.port.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldNumber"],{placeholder:"465","data-test-subj":"create-sender-form-port-input",value:props.port,onChange:function onChange(e){return props.setPort(e.target.value)},isInvalid:props.inputErrors.port.length>0,onBlur:function onBlur(){props.setInputErrors(CreateSenderForm_objectSpread(CreateSenderForm_objectSpread({},props.inputErrors),{},{port:validatePort(props.port)}))}})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Encryption method",style:{maxWidth:"650px"},helpText:external_osdSharedDeps_React_default.a.createElement("div",null,"SSL or TLS is recommended for security. To use either one, you must enter each sender account's credentials to the OpenSearch keystore using the CLI."," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{href:ALERTING_DOCUMENTATION_LINK,target:"_blank",external:true},"Learn more"))},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSuperSelect"],{fullWidth:true,"data-test-subj":"create-sender-form-encryption-input",options:encryptionOptions,valueOfSelected:props.encryption,onChange:props.setEncryption})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}function CreateSenderModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function CreateSenderModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CreateSenderModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CreateSenderModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function CreateSenderModal_slicedToArray(arr,i){return CreateSenderModal_arrayWithHoles(arr)||CreateSenderModal_iterableToArrayLimit(arr,i)||CreateSenderModal_unsupportedIterableToArray(arr,i)||CreateSenderModal_nonIterableRest()}function CreateSenderModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CreateSenderModal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return CreateSenderModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CreateSenderModal_arrayLikeToArray(o,minLen)}function CreateSenderModal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function CreateSenderModal_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function CreateSenderModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function CreateSenderModal(props){var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(""),_useState2=CreateSenderModal_slicedToArray(_useState,2),senderName=_useState2[0],setSenderName=_useState2[1];var _useState3=Object(external_osdSharedDeps_React_["useState"])(""),_useState4=CreateSenderModal_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=Object(external_osdSharedDeps_React_["useState"])(""),_useState6=CreateSenderModal_slicedToArray(_useState5,2),host=_useState6[0],setHost=_useState6[1];var _useState7=Object(external_osdSharedDeps_React_["useState"])(""),_useState8=CreateSenderModal_slicedToArray(_useState7,2),port=_useState8[0],setPort=_useState8[1];var _useState9=Object(external_osdSharedDeps_React_["useState"])(Object.keys(ENCRYPTION_TYPE)[0]),_useState10=CreateSenderModal_slicedToArray(_useState9,2),encryption=_useState10[0],setEncryption=_useState10[1];var _useState11=Object(external_osdSharedDeps_React_["useState"])({senderName:[],email:[],host:[],port:[]}),_useState12=CreateSenderModal_slicedToArray(_useState11,2),inputErrors=_useState12[0],setInputErrors=_useState12[1];var isInputValid=function isInputValid(){var errors={senderName:validationHelper_validateSenderName(senderName),email:validateEmail(email),host:validateHost(host),port:validatePort(port)};setInputErrors(errors);return!Object.values(errors).reduce((function(errorFlag,error){return errorFlag||error.length>0}),false)};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:props.onClose,style:{width:750}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,"Create SMTP sender")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(CreateSenderForm,{senderName:senderName,setSenderName:setSenderName,email:email,setEmail:setEmail,host:host,setHost:setHost,port:port,setPort:setPort,encryption:encryption,setEncryption:setEncryption,inputErrors:inputErrors,setInputErrors:setInputErrors})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:props.onClose},"Cancel"),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"create-sender-modal-create-button",fill:true,onClick:CreateSenderModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var config;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(isInputValid()){_context.next=3;break}coreContext.notifications.toasts.addDanger("Some fields are invalid. Fix all highlighted error(s) before continuing.");return _context.abrupt("return");case 3:config=createSenderConfigObject(senderName,host,port,encryption,email);_context.next=6;return props.services.notificationService.createConfig(config).then((function(response){coreContext.notifications.toasts.addSuccess("Sender ".concat(senderName," successfully created. You can select ").concat(senderName," from the list of senders."));props.addSenderOptionAndSelect({label:senderName,value:response.config_id});props.onClose()})).catch((function(error){coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to create sender."})}));case 6:case"end":return _context.stop()}}}),_callee)})))},"Create"))))}function CreateSESSenderForm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function CreateSESSenderForm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?CreateSESSenderForm_ownKeys(Object(source),!0).forEach((function(key){CreateSESSenderForm_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):CreateSESSenderForm_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function CreateSESSenderForm_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function CreateSESSenderForm(props){var mainStateContext=Object(external_osdSharedDeps_React_["useContext"])(MainContext);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Sender name",style:{maxWidth:"650px"},helpText:"Use a unique, descriptive name. The sender name must contain from 2 to 50 characters. Valid characters are lowercase a-z, 0-9, - (hyphen) and _ (underscore).",error:props.inputErrors.senderName.join(" "),isInvalid:props.inputErrors.senderName.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{fullWidth:true,placeholder:"Enter sender name","data-test-subj":"create-ses-sender-form-name-input",value:props.senderName,onChange:function onChange(e){return props.setSenderName(e.target.value)},isInvalid:props.inputErrors.senderName.length>0,onBlur:function onBlur(){props.setInputErrors(CreateSESSenderForm_objectSpread(CreateSESSenderForm_objectSpread({},props.inputErrors),{},{senderName:validationHelper_validateSenderName(props.senderName)}))}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Email address",style:{maxWidth:"650px"},error:props.inputErrors.email.join(" "),isInvalid:props.inputErrors.email.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{fullWidth:true,placeholder:"name@example.com","data-test-subj":"create-ses-sender-form-email-input",value:props.email,onChange:function onChange(e){return props.setEmail(e.target.value)},isInvalid:props.inputErrors.email.length>0,onBlur:function onBlur(){props.setInputErrors(CreateSESSenderForm_objectSpread(CreateSESSenderForm_objectSpread({},props.inputErrors),{},{email:validateEmail(props.email)}))}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",style:{maxWidth:"658px"}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:6},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:mainStateContext.tooltipSupport?external_osdSharedDeps_React_default.a.createElement("span",null,"IAM Role ARN -"," ",external_osdSharedDeps_React_default.a.createElement("i",{style:{fontWeight:"normal"}},"optional")):"IAM Role ARN",error:props.inputErrors.roleArn.join(" "),isInvalid:props.inputErrors.roleArn.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"ARN key","data-test-subj":"create-ses-sender-form-role-arn-input",value:props.roleArn,onChange:function onChange(e){return props.setRoleArn(e.target.value)},isInvalid:props.inputErrors.roleArn.length>0,onBlur:function onBlur(){if(!mainStateContext.tooltipSupport){props.setInputErrors(CreateSESSenderForm_objectSpread(CreateSESSenderForm_objectSpread({},props.inputErrors),{},{roleArn:validateRoleArn(props.roleArn)}))}}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:4},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"AWS region",error:props.inputErrors.awsRegion.join(" "),isInvalid:props.inputErrors.awsRegion.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"us-east-1","data-test-subj":"create-ses-sender-form-aws-region-input",value:props.awsRegion,onChange:function onChange(e){return props.setAwsRegion(e.target.value)},isInvalid:props.inputErrors.awsRegion.length>0,onBlur:function onBlur(){props.setInputErrors(CreateSESSenderForm_objectSpread(CreateSESSenderForm_objectSpread({},props.inputErrors),{},{awsRegion:validateAwsRegion(props.awsRegion)}))}})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}function CreateSESSenderModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function CreateSESSenderModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CreateSESSenderModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CreateSESSenderModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function CreateSESSenderModal_slicedToArray(arr,i){return CreateSESSenderModal_arrayWithHoles(arr)||CreateSESSenderModal_iterableToArrayLimit(arr,i)||CreateSESSenderModal_unsupportedIterableToArray(arr,i)||CreateSESSenderModal_nonIterableRest()}function CreateSESSenderModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CreateSESSenderModal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return CreateSESSenderModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CreateSESSenderModal_arrayLikeToArray(o,minLen)}function CreateSESSenderModal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function CreateSESSenderModal_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function CreateSESSenderModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function CreateSESSenderModal(props){var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var mainStateContext=Object(external_osdSharedDeps_React_["useContext"])(MainContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(""),_useState2=CreateSESSenderModal_slicedToArray(_useState,2),senderName=_useState2[0],setSenderName=_useState2[1];var _useState3=Object(external_osdSharedDeps_React_["useState"])(""),_useState4=CreateSESSenderModal_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=Object(external_osdSharedDeps_React_["useState"])(""),_useState6=CreateSESSenderModal_slicedToArray(_useState5,2),roleArn=_useState6[0],setRoleArn=_useState6[1];var _useState7=Object(external_osdSharedDeps_React_["useState"])(""),_useState8=CreateSESSenderModal_slicedToArray(_useState7,2),awsRegion=_useState8[0],setAwsRegion=_useState8[1];var _useState9=Object(external_osdSharedDeps_React_["useState"])({senderName:[],email:[],roleArn:[],awsRegion:[]}),_useState10=CreateSESSenderModal_slicedToArray(_useState9,2),inputErrors=_useState10[0],setInputErrors=_useState10[1];var isInputValid=function isInputValid(){var errors={senderName:validationHelper_validateSenderName(senderName),email:validateEmail(email),awsRegion:validateAwsRegion(awsRegion),roleArn:[]};if(!mainStateContext.tooltipSupport){errors.roleArn=validateRoleArn(roleArn)}setInputErrors(errors);return!Object.values(errors).reduce((function(errorFlag,error){return errorFlag||error.length>0}),false)};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:props.onClose,style:{width:750}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,"Create SES sender")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(CreateSESSenderForm,{senderName:senderName,setSenderName:setSenderName,email:email,setEmail:setEmail,roleArn:roleArn,setRoleArn:setRoleArn,awsRegion:awsRegion,setAwsRegion:setAwsRegion,inputErrors:inputErrors,setInputErrors:setInputErrors})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:props.onClose},"Cancel"),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"create-ses-sender-modal-create-button",fill:true,onClick:CreateSESSenderModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var config;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(isInputValid()){_context.next=3;break}coreContext.notifications.toasts.addDanger("Some fields are invalid. Fix all highlighted error(s) before continuing.");return _context.abrupt("return");case 3:config=createSesSenderConfigObject(senderName,email,awsRegion,roleArn);_context.next=6;return props.services.notificationService.createConfig(config).then((function(response){coreContext.notifications.toasts.addSuccess("Sender ".concat(senderName," successfully created. You can select ").concat(senderName," from the list of senders."));props.addSenderOptionAndSelect({label:senderName,value:response.config_id});props.onClose()})).catch((function(error){coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to create sender."})}));case 6:case"end":return _context.stop()}}}),_callee)})))},"Create"))))}function EmailSettings_toConsumableArray(arr){return EmailSettings_arrayWithoutHoles(arr)||EmailSettings_iterableToArray(arr)||EmailSettings_unsupportedIterableToArray(arr)||EmailSettings_nonIterableSpread()}function EmailSettings_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function EmailSettings_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function EmailSettings_arrayWithoutHoles(arr){if(Array.isArray(arr))return EmailSettings_arrayLikeToArray(arr)}function EmailSettings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function EmailSettings_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){EmailSettings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){EmailSettings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function EmailSettings_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function EmailSettings_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?EmailSettings_ownKeys(Object(source),!0).forEach((function(key){EmailSettings_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):EmailSettings_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function EmailSettings_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function EmailSettings_slicedToArray(arr,i){return EmailSettings_arrayWithHoles(arr)||EmailSettings_iterableToArrayLimit(arr,i)||EmailSettings_unsupportedIterableToArray(arr,i)||EmailSettings_nonIterableRest()}function EmailSettings_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function EmailSettings_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return EmailSettings_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EmailSettings_arrayLikeToArray(o,minLen)}function EmailSettings_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function EmailSettings_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function EmailSettings_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function EmailSettings(props){var context=Object(external_osdSharedDeps_React_["useContext"])(CreateChannelContext);var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var servicesContext=Object(external_osdSharedDeps_React_["useContext"])(ServicesContext);var mainStateContext=Object(external_osdSharedDeps_React_["useContext"])(MainContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(true),_useState2=EmailSettings_slicedToArray(_useState,2),smtpAvailable=_useState2[0],setSmtpAvailable=_useState2[1];Object(external_osdSharedDeps_React_["useEffect"])((function(){if(!mainStateContext.availableConfigTypes.includes("smtp_account")){setSmtpAvailable(false);props.setSenderType("ses_account")}}),[]);var _useState3=Object(external_osdSharedDeps_React_["useState"])([]),_useState4=EmailSettings_slicedToArray(_useState3,2),sesSenderOptions=_useState4[0],setSesSenderOptions=_useState4[1];var _useState5=Object(external_osdSharedDeps_React_["useState"])([]),_useState6=EmailSettings_slicedToArray(_useState5,2),smtpSenderOptions=_useState6[0],setSmtpSenderOptions=_useState6[1];var _useState7=Object(external_osdSharedDeps_React_["useState"])([]),_useState8=EmailSettings_slicedToArray(_useState7,2),recipientGroupOptions=_useState8[0],setRecipientGroupOptions=_useState8[1];var getQueryObject=function getQueryObject(config_type,query){return EmailSettings_objectSpread({from_index:0,max_items:1e4,config_type:config_type,sort_field:"name",sort_order:external_osdSharedDeps_ElasticEui_["SortDirection"].ASC},query?{query:query}:{})};var refreshSenders=Object(external_osdSharedDeps_React_["useCallback"])(function(){var _ref=EmailSettings_asyncToGenerator(regeneratorRuntime.mark((function _callee(query){var smtpSenders,sesSenders;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return servicesContext.notificationService.getSenders(getQueryObject("smtp_account",query));case 3:smtpSenders=_context.sent;setSmtpSenderOptions(smtpSenders.items.map((function(sender){return{label:sender.name,value:sender.config_id}})));_context.next=7;return servicesContext.notificationService.getSenders(getQueryObject("ses_account",query));case 7:sesSenders=_context.sent;setSesSenderOptions(sesSenders.items.map((function(sender){return{label:sender.name,value:sender.config_id}})));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context["catch"](0);coreContext.notifications.toasts.addDanger(getErrorMessage(_context.t0,"There was a problem loading senders."));case 14:case"end":return _context.stop()}}}),_callee,null,[[0,11]])})));return function(_x){return _ref.apply(this,arguments)}}(),[]);var refreshRecipientGroups=Object(external_osdSharedDeps_React_["useCallback"])(function(){var _ref2=EmailSettings_asyncToGenerator(regeneratorRuntime.mark((function _callee2(query){var recipientGroups;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return servicesContext.notificationService.getRecipientGroups(getQueryObject("email_group",query));case 3:recipientGroups=_context2.sent;setRecipientGroupOptions(recipientGroups.items.map((function(recipientGroup){return{label:recipientGroup.name,value:recipientGroup.config_id}})));_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](0);coreContext.notifications.toasts.addDanger(getErrorMessage(_context2.t0,"There was a problem loading recipient groups."));case 10:case"end":return _context2.stop()}}}),_callee2,null,[[0,7]])})));return function(_x2){return _ref2.apply(this,arguments)}}(),[]);Object(external_osdSharedDeps_React_["useEffect"])((function(){refreshSenders();refreshRecipientGroups()}),[]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,smtpAvailable&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Sender type"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiRadioGroup"],{options:[{id:"smtp_account",label:"SMTP sender"},{id:"ses_account",label:"SES sender"}],idSelected:props.senderType,onChange:function onChange(id){return props.setSenderType(id)},name:"sender type radio group"})),props.senderType==="ses_account"?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:400}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"SES sender",helpText:'A destination only allows one SMTP or SES sender. Use "Create SES sender" to create a sender with its email address, IAM role, AWS region.',error:context.inputErrors.sesSender.join(" "),isInvalid:context.inputErrors.sesSender.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:"Sender name",fullWidth:true,singleSelection:true,options:sesSenderOptions,selectedOptions:props.selectedSesSenderOptions,onChange:props.setSelectedSesSenderOptions,isClearable:true,isInvalid:context.inputErrors.sesSender.length>0,onBlur:function onBlur(){context.setInputErrors(EmailSettings_objectSpread(EmailSettings_objectSpread({},context.inputErrors),{},{sesSender:validateEmailSender(props.selectedSesSenderOptions)}))}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{hasEmptyLabelSpace:true},external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref3){var onShow=_ref3.onShow;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){return onShow(CreateSESSenderModal,{addSenderOptionAndSelect:function addSenderOptionAndSelect(newOption){setSesSenderOptions([].concat(EmailSettings_toConsumableArray(sesSenderOptions),[newOption]));props.setSelectedSesSenderOptions([newOption]);context.setInputErrors(EmailSettings_objectSpread(EmailSettings_objectSpread({},context.inputErrors),{},{sesSender:validateEmailSender([newOption])}))}})}},"Create SES sender")})))))):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:400}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"SMTP sender",helpText:'A destination only allows one SMTP or SES sender. Use "Create SMTP sender" to create a sender with its email address, host, port, encryption method.',error:context.inputErrors.smtpSender.join(" "),isInvalid:context.inputErrors.smtpSender.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:"Sender name",fullWidth:true,singleSelection:true,options:smtpSenderOptions,selectedOptions:props.selectedSmtpSenderOptions,onChange:props.setSelectedSmtpSenderOptions,isClearable:true,isInvalid:context.inputErrors.smtpSender.length>0,onBlur:function onBlur(){context.setInputErrors(EmailSettings_objectSpread(EmailSettings_objectSpread({},context.inputErrors),{},{smtpSender:validateEmailSender(props.selectedSmtpSenderOptions)}))}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{hasEmptyLabelSpace:true},external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref4){var onShow=_ref4.onShow;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){return onShow(CreateSenderModal,{addSenderOptionAndSelect:function addSenderOptionAndSelect(newOption){setSmtpSenderOptions([].concat(EmailSettings_toConsumableArray(smtpSenderOptions),[newOption]));props.setSelectedSmtpSenderOptions([newOption]);context.setInputErrors(EmailSettings_objectSpread(EmailSettings_objectSpread({},context.inputErrors),{},{smtpSender:validateEmailSender([newOption])}))}})}},"Create SMTP sender")})))))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:400}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Default recipients",helpText:'Add recipient(s) using an email address or pre-created email group. Use "Create email group" to create an email group.',error:context.inputErrors.recipients.join(" "),isInvalid:context.inputErrors.recipients.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:"Email address, recipient group name",fullWidth:true,options:recipientGroupOptions,selectedOptions:props.selectedRecipientGroupOptions,onChange:props.setSelectedRecipientGroupOptions,onCreateOption:function onCreateOption(searchValue,flattenedOptions){return onComboBoxCreateOption(searchValue,flattenedOptions,recipientGroupOptions,setRecipientGroupOptions,props.selectedRecipientGroupOptions,props.setSelectedRecipientGroupOptions,(function(options){return context.setInputErrors(EmailSettings_objectSpread(EmailSettings_objectSpread({},context.inputErrors),{},{recipients:validateRecipients(options)}))}))},customOptionText:"Add {searchValue} as a default recipient",isClearable:true,isInvalid:context.inputErrors.recipients.length>0,onBlur:function onBlur(){context.setInputErrors(EmailSettings_objectSpread(EmailSettings_objectSpread({},context.inputErrors),{},{recipients:validateRecipients(props.selectedRecipientGroupOptions)}))}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{hasEmptyLabelSpace:true},external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref5){var onShow=_ref5.onShow;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){return onShow(CreateRecipientGroupModal,{addRecipientGroupOptionAndSelect:function addRecipientGroupOptionAndSelect(newOption){setRecipientGroupOptions([].concat(EmailSettings_toConsumableArray(recipientGroupOptions),[newOption]));props.setSelectedRecipientGroupOptions([].concat(EmailSettings_toConsumableArray(props.selectedRecipientGroupOptions),[newOption]));context.setInputErrors(EmailSettings_objectSpread(EmailSettings_objectSpread({},context.inputErrors),{},{recipients:validateRecipients([newOption])}))}})}},"Create recipient group")}))))))}function SlackSettings_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function SlackSettings_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?SlackSettings_ownKeys(Object(source),!0).forEach((function(key){SlackSettings_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):SlackSettings_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function SlackSettings_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function SlackSettings(props){var context=Object(external_osdSharedDeps_React_["useContext"])(CreateChannelContext);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Slack webhook URL",style:{maxWidth:"700px"},error:context.inputErrors.slackWebhook.join(" "),isInvalid:context.inputErrors.slackWebhook.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{fullWidth:true,"data-test-subj":"create-channel-slack-webhook-input",placeholder:"https://hooks.slack.com/services/XXXXX/XXXXX/XXXXX...",value:props.slackWebhook,onChange:function onChange(e){return props.setSlackWebhook(e.target.value)},isInvalid:context.inputErrors.slackWebhook.length>0,onBlur:function onBlur(){context.setInputErrors(SlackSettings_objectSpread(SlackSettings_objectSpread({},context.inputErrors),{},{slackWebhook:validateWebhookURL(props.slackWebhook)}))}}))}function SNSSettings_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function SNSSettings_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?SNSSettings_ownKeys(Object(source),!0).forEach((function(key){SNSSettings_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):SNSSettings_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function SNSSettings_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function SNSSettings(props){var context=Object(external_osdSharedDeps_React_["useContext"])(CreateChannelContext);var mainStateContext=Object(external_osdSharedDeps_React_["useContext"])(MainContext);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"SNS topic ARN",error:context.inputErrors.topicArn.join(" "),isInvalid:context.inputErrors.topicArn.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"ARN key","data-test-subj":"sns-settings-topic-arn-input",value:props.topicArn,onChange:function onChange(e){return props.setTopicArn(e.target.value)},isInvalid:context.inputErrors.topicArn.length>0,onBlur:function onBlur(){context.setInputErrors(SNSSettings_objectSpread(SNSSettings_objectSpread({},context.inputErrors),{},{topicArn:validateArn(props.topicArn)}))}})),mainStateContext.tooltipSupport?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_React_default.a.createElement("span",null,"IAM role ARN - ",external_osdSharedDeps_React_default.a.createElement("i",{style:{fontWeight:"normal"}},"optional"))},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},"IAM role ARN can only be used for clusters running on AWS network."),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{"data-test-subj":"sns-settings-role-arn-input",placeholder:"ARN key",value:props.roleArn,onChange:function onChange(e){return props.setRoleArn(e.target.value)}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCallOut"],{title:"Using Amazon SNS outside of AWS",style:{maxWidth:720}},external_osdSharedDeps_React_default.a.createElement("div",null,"If your cluster is not running on AWS, you must configure aws credentials on your OpenSearch cluster."," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{href:DOCUMENTATION_LINK,target:"_blank",external:true},"Learn more")))):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"IAM role ARN",error:context.inputErrors.roleArn.join(" "),isInvalid:context.inputErrors.roleArn.length>0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"ARN key","data-test-subj":"sns-settings-role-arn-input",value:props.roleArn,onChange:function onChange(e){return props.setRoleArn(e.target.value)},isInvalid:context.inputErrors.roleArn.length>0,onBlur:function onBlur(){context.setInputErrors(SNSSettings_objectSpread(SNSSettings_objectSpread({},context.inputErrors),{},{roleArn:validateArn(props.roleArn)}))}})))}function CreateChannel_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function CreateChannel_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?CreateChannel_ownKeys(Object(source),!0).forEach((function(key){CreateChannel_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):CreateChannel_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function CreateChannel_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function CreateChannel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function CreateChannel_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CreateChannel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CreateChannel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function CreateChannel_slicedToArray(arr,i){return CreateChannel_arrayWithHoles(arr)||CreateChannel_iterableToArrayLimit(arr,i)||CreateChannel_unsupportedIterableToArray(arr,i)||CreateChannel_nonIterableRest()}function CreateChannel_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CreateChannel_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return CreateChannel_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CreateChannel_arrayLikeToArray(o,minLen)}function CreateChannel_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function CreateChannel_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function CreateChannel_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var CreateChannelContext=Object(external_osdSharedDeps_React_["createContext"])(null);function CreateChannel(props){var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var servicesContext=Object(external_osdSharedDeps_React_["useContext"])(ServicesContext);var mainStateContext=Object(external_osdSharedDeps_React_["useContext"])(MainContext);var id=props.match.params.id;var prevURL=props.edit&&query_string_default.a.parse(props.location.search).from==="details"?"#".concat(ROUTES.CHANNEL_DETAILS,"/").concat(id):"#".concat(ROUTES.CHANNELS);var _useState=Object(external_osdSharedDeps_React_["useState"])(true),_useState2=CreateChannel_slicedToArray(_useState,2),isEnabled=_useState2[0],setIsEnabled=_useState2[1];var _useState3=Object(external_osdSharedDeps_React_["useState"])(false),_useState4=CreateChannel_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=Object(external_osdSharedDeps_React_["useState"])(""),_useState6=CreateChannel_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=Object(external_osdSharedDeps_React_["useState"])(""),_useState8=CreateChannel_slicedToArray(_useState7,2),description=_useState8[0],setDescription=_useState8[1];var channelTypeOptions=Object.entries(mainStateContext.availableChannels).map((function(_ref){var _ref2=CreateChannel_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return{value:key,inputDisplay:value}}));var _useState9=Object(external_osdSharedDeps_React_["useState"])(channelTypeOptions[0].value),_useState10=CreateChannel_slicedToArray(_useState9,2),channelType=_useState10[0],setChannelType=_useState10[1];var _useState11=Object(external_osdSharedDeps_React_["useState"])(""),_useState12=CreateChannel_slicedToArray(_useState11,2),slackWebhook=_useState12[0],setSlackWebhook=_useState12[1];var _useState13=Object(external_osdSharedDeps_React_["useState"])(""),_useState14=CreateChannel_slicedToArray(_useState13,2),chimeWebhook=_useState14[0],setChimeWebhook=_useState14[1];var _useState15=Object(external_osdSharedDeps_React_["useState"])("smtp_account"),_useState16=CreateChannel_slicedToArray(_useState15,2),senderType=_useState16[0],setSenderType=_useState16[1];var _useState17=Object(external_osdSharedDeps_React_["useState"])([]),_useState18=CreateChannel_slicedToArray(_useState17,2),selectedSmtpSenderOptions=_useState18[0],setSelectedSmtpSenderOptions=_useState18[1];var _useState19=Object(external_osdSharedDeps_React_["useState"])([]),_useState20=CreateChannel_slicedToArray(_useState19,2),selectedSesSenderOptions=_useState20[0],setSelectedSesSenderOptions=_useState20[1];var _useState21=Object(external_osdSharedDeps_React_["useState"])([]),_useState22=CreateChannel_slicedToArray(_useState21,2),selectedRecipientGroupOptions=_useState22[0],setSelectedRecipientGroupOptions=_useState22[1];var _useState23=Object(external_osdSharedDeps_React_["useState"])("WEBHOOK_URL"),_useState24=CreateChannel_slicedToArray(_useState23,2),webhookTypeIdSelected=_useState24[0],setWebhookTypeIdSelected=_useState24[1];var _useState25=Object(external_osdSharedDeps_React_["useState"])(""),_useState26=CreateChannel_slicedToArray(_useState25,2),webhookURL=_useState26[0],setWebhookURL=_useState26[1];var _useState27=Object(external_osdSharedDeps_React_["useState"])("HTTPS"),_useState28=CreateChannel_slicedToArray(_useState27,2),customURLType=_useState28[0],setCustomURLType=_useState28[1];var _useState29=Object(external_osdSharedDeps_React_["useState"])(""),_useState30=CreateChannel_slicedToArray(_useState29,2),customURLHost=_useState30[0],setCustomURLHost=_useState30[1];var _useState31=Object(external_osdSharedDeps_React_["useState"])(""),_useState32=CreateChannel_slicedToArray(_useState31,2),customURLPort=_useState32[0],setCustomURLPort=_useState32[1];var _useState33=Object(external_osdSharedDeps_React_["useState"])(""),_useState34=CreateChannel_slicedToArray(_useState33,2),customURLPath=_useState34[0],setCustomURLPath=_useState34[1];var _useState35=Object(external_osdSharedDeps_React_["useState"])("POST"),_useState36=CreateChannel_slicedToArray(_useState35,2),webhookMethod=_useState36[0],setWebhookMethod=_useState36[1];var _useState37=Object(external_osdSharedDeps_React_["useState"])([]),_useState38=CreateChannel_slicedToArray(_useState37,2),webhookParams=_useState38[0],setWebhookParams=_useState38[1];var _useState39=Object(external_osdSharedDeps_React_["useState"])([{key:"Content-Type",value:"application/json"}]),_useState40=CreateChannel_slicedToArray(_useState39,2),webhookHeaders=_useState40[0],setWebhookHeaders=_useState40[1];var _useState41=Object(external_osdSharedDeps_React_["useState"])(""),_useState42=CreateChannel_slicedToArray(_useState41,2),topicArn=_useState42[0],setTopicArn=_useState42[1];var _useState43=Object(external_osdSharedDeps_React_["useState"])(""),_useState44=CreateChannel_slicedToArray(_useState43,2),roleArn=_useState44[0],setRoleArn=_useState44[1];var _useState45=Object(external_osdSharedDeps_React_["useState"])({name:[],slackWebhook:[],chimeWebhook:[],smtpSender:[],sesSender:[],recipients:[],webhookURL:[],customURLHost:[],customURLPort:[],topicArn:[],roleArn:[]}),_useState46=CreateChannel_slicedToArray(_useState45,2),inputErrors=_useState46[0],setInputErrors=_useState46[1];Object(external_osdSharedDeps_React_["useEffect"])((function(){coreContext.chrome.setBreadcrumbs([BREADCRUMBS.NOTIFICATIONS,BREADCRUMBS.CHANNELS,props.edit?BREADCRUMBS.EDIT_CHANNEL:BREADCRUMBS.CREATE_CHANNEL]);window.scrollTo(0,0);if(props.edit){getChannel()}}),[]);var getChannel=function(){var _ref3=CreateChannel_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var id,response,type,_response$slack,_response$chime,emailObject,webhookObject,_response$sns,_response$sns2;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=props.match.params.id;if(!(typeof id!=="string")){_context2.next=3;break}return _context2.abrupt("return");case 3:_context2.prev=3;_context2.next=6;return servicesContext.notificationService.getChannel(id).then(function(){var _ref4=CreateChannel_asyncToGenerator(regeneratorRuntime.mark((function _callee(response){var _channel$email,_channel$email$invali,channel;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(response.config_type==="email")){_context.next=6;break}_context.next=3;return servicesContext.notificationService.getEmailConfigDetails(response);case 3:channel=_context.sent;if((_channel$email=channel.email)!==null&&_channel$email!==void 0&&(_channel$email$invali=_channel$email.invalid_ids)!==null&&_channel$email$invali!==void 0&&_channel$email$invali.length){coreContext.notifications.toasts.addDanger("The sender and/or some recipient groups might have been deleted.")}return _context.abrupt("return",channel);case 6:return _context.abrupt("return",response);case 7:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref4.apply(this,arguments)}}());case 6:response=_context2.sent;type=response.config_type;setIsEnabled(response.is_enabled);setName(response.name);setDescription(response.description||"");setChannelType(type);if(type===BACKEND_CHANNEL_TYPE.SLACK){setSlackWebhook(((_response$slack=response.slack)===null||_response$slack===void 0?void 0:_response$slack.url)||"")}else if(type===BACKEND_CHANNEL_TYPE.CHIME){setChimeWebhook(((_response$chime=response.chime)===null||_response$chime===void 0?void 0:_response$chime.url)||"")}else if(type===BACKEND_CHANNEL_TYPE.EMAIL){emailObject=helper_deconstructEmailObject(response.email);setSenderType(emailObject.senderType);if(emailObject.senderType==="smtp_account"){setSelectedSmtpSenderOptions(emailObject.selectedSenderOptions)}else{setSelectedSesSenderOptions(emailObject.selectedSenderOptions)}setSelectedRecipientGroupOptions(emailObject.selectedRecipientGroupOptions)}else if(type===BACKEND_CHANNEL_TYPE.CUSTOM_WEBHOOK){webhookObject=deconstructWebhookObject(response.webhook);setWebhookURL(webhookObject.webhookURL);setCustomURLHost(webhookObject.customURLHost);setCustomURLPort(webhookObject.customURLPort);setCustomURLPath(webhookObject.customURLPath);setWebhookMethod(webhookObject.webhookMethod);setWebhookParams(webhookObject.webhookParams);setWebhookHeaders(webhookObject.webhookHeaders)}else if(type===BACKEND_CHANNEL_TYPE.SNS){setTopicArn(((_response$sns=response.sns)===null||_response$sns===void 0?void 0:_response$sns.topic_arn)||"");setRoleArn(((_response$sns2=response.sns)===null||_response$sns2===void 0?void 0:_response$sns2.role_arn)||"")}_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2["catch"](3);coreContext.notifications.toasts.addDanger(getErrorMessage(_context2.t0,"There was a problem loading channel."));case 18:case"end":return _context2.stop()}}}),_callee2,null,[[3,15]])})));return function getChannel(){return _ref3.apply(this,arguments)}}();var isInputValid=function isInputValid(){var errors={name:validationHelper_validateChannelName(name),slackWebhook:[],chimeWebhook:[],smtpSender:[],sesSender:[],recipients:[],webhookURL:[],customURLHost:[],customURLPort:[],topicArn:[],roleArn:[]};if(channelType===BACKEND_CHANNEL_TYPE.SLACK){errors.slackWebhook=validateWebhookURL(slackWebhook)}else if(channelType===BACKEND_CHANNEL_TYPE.CHIME){errors.chimeWebhook=validateWebhookURL(chimeWebhook)}else if(channelType===BACKEND_CHANNEL_TYPE.EMAIL){if(senderType==="smtp_account"){errors.smtpSender=validateEmailSender(selectedSmtpSenderOptions)}else{errors.sesSender=validateEmailSender(selectedSesSenderOptions)}errors.recipients=validateRecipients(selectedRecipientGroupOptions)}else if(channelType===BACKEND_CHANNEL_TYPE.CUSTOM_WEBHOOK){if(webhookTypeIdSelected==="WEBHOOK_URL"){errors.webhookURL=validateWebhookURL(webhookURL)}else{errors.customURLHost=validateCustomURLHost(customURLHost);errors.customURLPort=validateCustomURLPort(customURLPort)}}else if(channelType===BACKEND_CHANNEL_TYPE.SNS){errors.topicArn=validateArn(topicArn);if(!mainStateContext.tooltipSupport)errors.roleArn=validateArn(roleArn)}setInputErrors(errors);return!Object.values(errors).reduce((function(errorFlag,error){return errorFlag||error.length>0}),false)};var createConfigObject=function createConfigObject(){var config={name:name,description:description,config_type:channelType,is_enabled:isEnabled};if(channelType===BACKEND_CHANNEL_TYPE.SLACK){config.slack={url:slackWebhook}}else if(channelType===BACKEND_CHANNEL_TYPE.CHIME){config.chime={url:chimeWebhook}}else if(channelType===BACKEND_CHANNEL_TYPE.CUSTOM_WEBHOOK){config.webhook=constructWebhookObject(webhookTypeIdSelected,webhookURL,customURLType,customURLHost,customURLPort,customURLPath,webhookMethod,webhookParams,webhookHeaders)}else if(channelType===BACKEND_CHANNEL_TYPE.EMAIL){if(senderType==="smtp_account"){config.email=constructEmailObject(selectedSmtpSenderOptions,selectedRecipientGroupOptions)}else{config.email=constructEmailObject(selectedSesSenderOptions,selectedRecipientGroupOptions)}}else if(channelType===BACKEND_CHANNEL_TYPE.SNS){config.sns=CreateChannel_objectSpread({topic_arn:topicArn},roleArn&&{role_arn:roleArn})}return config};var sendTestMessage=function(){var _ref5=CreateChannel_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var config,tempChannelId;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:config=createConfigObject();config.name="temp-"+config.name;_context3.prev=2;_context3.next=5;return servicesContext.notificationService.createConfig(config).then((function(response){console.info("Created temporary channel to test send message:",response);return response.config_id})).catch((function(error){error.message="Failed to create temporary channel for test message. "+error.message;throw error}));case 5:tempChannelId=_context3.sent;_context3.next=8;return servicesContext.notificationService.sendTestMessage(tempChannelId);case 8:coreContext.notifications.toasts.addSuccess("Successfully sent a test message.");_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3["catch"](2);coreContext.notifications.toasts.addError((_context3.t0===null||_context3.t0===void 0?void 0:_context3.t0.body)||_context3.t0,{title:"Failed to send the test message.",toastMessage:"View error details and adjust the channel settings."});case 14:_context3.prev=14;if(tempChannelId){servicesContext.notificationService.deleteConfigs([tempChannelId]).then((function(response){console.info("Deleted temporary channel:",response)})).catch((function(error){coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to delete temporary channel for test message."})}))}return _context3.finish(14);case 17:case"end":return _context3.stop()}}}),_callee3,null,[[2,11,14,17]])})));return function sendTestMessage(){return _ref5.apply(this,arguments)}}();return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(CreateChannelContext.Provider,{value:{edit:props.edit,inputErrors:inputErrors,setInputErrors:setInputErrors}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_osdSharedDeps_React_default.a.createElement("h1",null,"".concat(props.edit?"Edit":"Create"," channel"))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(ChannelNamePanel,{name:name,setName:setName,description:description,setDescription:setDescription}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(components_ContentPanel_ContentPanel,{bodyStyles:{padding:"initial"},title:"Configurations",titleSize:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:"Channel type"},props.edit?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s"},CHANNEL_TYPE[channelType]):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},"Channel type cannot be changed after the channel is created."),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSuperSelect"],{options:channelTypeOptions,valueOfSelected:channelType,onChange:setChannelType,disabled:props.edit}))),channelType===BACKEND_CHANNEL_TYPE.SLACK?external_osdSharedDeps_React_default.a.createElement(SlackSettings,{slackWebhook:slackWebhook,setSlackWebhook:setSlackWebhook}):channelType===BACKEND_CHANNEL_TYPE.CHIME?external_osdSharedDeps_React_default.a.createElement(ChimeSettings,{chimeWebhook:chimeWebhook,setChimeWebhook:setChimeWebhook}):channelType===BACKEND_CHANNEL_TYPE.EMAIL?external_osdSharedDeps_React_default.a.createElement(EmailSettings,{senderType:senderType,setSenderType:setSenderType,selectedSmtpSenderOptions:selectedSmtpSenderOptions,setSelectedSmtpSenderOptions:setSelectedSmtpSenderOptions,selectedSesSenderOptions:selectedSesSenderOptions,setSelectedSesSenderOptions:setSelectedSesSenderOptions,selectedRecipientGroupOptions:selectedRecipientGroupOptions,setSelectedRecipientGroupOptions:setSelectedRecipientGroupOptions}):channelType===BACKEND_CHANNEL_TYPE.CUSTOM_WEBHOOK?external_osdSharedDeps_React_default.a.createElement(CustomWebhookSettings,{webhookTypeIdSelected:webhookTypeIdSelected,setWebhookTypeIdSelected:setWebhookTypeIdSelected,webhookURL:webhookURL,setWebhookURL:setWebhookURL,customURLType:customURLType,setCustomURLType:setCustomURLType,customURLHost:customURLHost,setCustomURLHost:setCustomURLHost,customURLPort:customURLPort,setCustomURLPort:setCustomURLPort,customURLPath:customURLPath,setCustomURLPath:setCustomURLPath,webhookMethod:webhookMethod,setWebhookMethod:setWebhookMethod,webhookParams:webhookParams,setWebhookParams:setWebhookParams,webhookHeaders:webhookHeaders,setWebhookHeaders:setWebhookHeaders}):channelType===BACKEND_CHANNEL_TYPE.SNS?external_osdSharedDeps_React_default.a.createElement(SNSSettings,{topicArn:topicArn,setTopicArn:setTopicArn,roleArn:roleArn,setRoleArn:setRoleArn}):null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"m",justifyContent:"flexEnd"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{href:prevURL},"Cancel")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"create-channel-send-test-message-button",onClick:function onClick(){if(!isInputValid()){coreContext.notifications.toasts.addDanger("Some fields are invalid. Fix all highlighted error(s) before continuing.");return}sendTestMessage()}},"Send test message")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"create-channel-create-button",isLoading:loading,onClick:CreateChannel_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var config,request;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(isInputValid()){_context4.next=3;break}coreContext.notifications.toasts.addDanger("Some fields are invalid. Fix all highlighted error(s) before continuing.");return _context4.abrupt("return");case 3:setLoading(true);config=createConfigObject();request=props.edit?servicesContext.notificationService.updateConfig(id,config):servicesContext.notificationService.createConfig(config);_context4.next=8;return request.then((function(response){coreContext.notifications.toasts.addSuccess("Channel ".concat(name," successfully ").concat(props.edit?"updated":"created","."));setTimeout((function(){return location.hash=prevURL}),common["c"])})).catch((function(error){setLoading(false);coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to ".concat(props.edit?"update":"create"," channel.")})}));case 8:case"end":return _context4.stop()}}}),_callee4)})))},props.edit?"Save":"Create")))))}function CreateRecipientGroup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function CreateRecipientGroup_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CreateRecipientGroup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CreateRecipientGroup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function CreateRecipientGroup_slicedToArray(arr,i){return CreateRecipientGroup_arrayWithHoles(arr)||CreateRecipientGroup_iterableToArrayLimit(arr,i)||CreateRecipientGroup_unsupportedIterableToArray(arr,i)||CreateRecipientGroup_nonIterableRest()}function CreateRecipientGroup_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CreateRecipientGroup_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return CreateRecipientGroup_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CreateRecipientGroup_arrayLikeToArray(o,minLen)}function CreateRecipientGroup_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function CreateRecipientGroup_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function CreateRecipientGroup_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function CreateRecipientGroup(props){var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var servicesContext=Object(external_osdSharedDeps_React_["useContext"])(ServicesContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(false),_useState2=CreateRecipientGroup_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=Object(external_osdSharedDeps_React_["useState"])(""),_useState4=CreateRecipientGroup_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=Object(external_osdSharedDeps_React_["useState"])(""),_useState6=CreateRecipientGroup_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=Object(external_osdSharedDeps_React_["useState"])([]),_useState8=CreateRecipientGroup_slicedToArray(_useState7,2),selectedEmailOptions=_useState8[0],setSelectedEmailOptions=_useState8[1];var _useState9=Object(external_osdSharedDeps_React_["useState"])([{label:"no-reply@company.com"}]),_useState10=CreateRecipientGroup_slicedToArray(_useState9,2),emailOptions=_useState10[0],setEmailOptions=_useState10[1];var _useState11=Object(external_osdSharedDeps_React_["useState"])({name:[],emailOptions:[]}),_useState12=CreateRecipientGroup_slicedToArray(_useState11,2),inputErrors=_useState12[0],setInputErrors=_useState12[1];var isInputValid=function isInputValid(){var errors={name:validationHelper_validateRecipientGroupName(name),emailOptions:validateRecipientGroupEmails(selectedEmailOptions)};setInputErrors(errors);return!Object.values(errors).reduce((function(errorFlag,error){return errorFlag||error.length>0}),false)};Object(external_osdSharedDeps_React_["useEffect"])((function(){coreContext.chrome.setBreadcrumbs([BREADCRUMBS.NOTIFICATIONS,BREADCRUMBS.EMAIL_GROUPS,props.edit?BREADCRUMBS.EDIT_RECIPIENT_GROUP:BREADCRUMBS.CREATE_RECIPIENT_GROUP]);window.scrollTo(0,0);if(props.edit){getRecipientGroup()}}),[]);var getRecipientGroup=function(){var _ref=CreateRecipientGroup_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _props$match$params;var id,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=(_props$match$params=props.match.params)===null||_props$match$params===void 0?void 0:_props$match$params.id;if(!(typeof id!=="string")){_context.next=3;break}return _context.abrupt("return");case 3:_context.prev=3;_context.next=6;return servicesContext.notificationService.getRecipientGroup(id);case 6:response=_context.sent;setName(response.name);setDescription(response.description||"");setSelectedEmailOptions(response.email_group.recipient_list.map((function(recipient){return{label:recipient.recipient}})));_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](3);coreContext.notifications.toasts.addDanger(getErrorMessage(_context.t0,"There was a problem loading recipient group."));case 15:case"end":return _context.stop()}}}),_callee,null,[[3,12]])})));return function getRecipientGroup(){return _ref.apply(this,arguments)}}();return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_osdSharedDeps_React_default.a.createElement("h1",null,"".concat(props.edit?"Edit":"Create"," recipient group"))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(components_ContentPanel_ContentPanel,{bodyStyles:{padding:"initial"},title:"Configure recipient group",titleSize:"s",panelStyles:{maxWidth:1e3}},external_osdSharedDeps_React_default.a.createElement(CreateRecipientGroupForm,{name:name,setName:setName,description:description,setDescription:setDescription,selectedEmailOptions:selectedEmailOptions,setSelectedEmailOptions:setSelectedEmailOptions,emailOptions:emailOptions,setEmailOptions:setEmailOptions,inputErrors:inputErrors,setInputErrors:setInputErrors})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd",style:{maxWidth:1024}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{href:"#".concat(ROUTES.EMAIL_GROUPS)},"Cancel")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,isLoading:loading,onClick:CreateRecipientGroup_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var config,request;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(isInputValid()){_context2.next=3;break}coreContext.notifications.toasts.addDanger("Some fields are invalid. Fix all highlighted error(s) before continuing.");return _context2.abrupt("return");case 3:setLoading(true);config=createRecipientGroupConfigObject(name,description,selectedEmailOptions);request=props.edit?servicesContext.notificationService.updateConfig(props.match.params.id,config):servicesContext.notificationService.createConfig(config);_context2.next=8;return request.then((function(response){coreContext.notifications.toasts.addSuccess("Recipient group ".concat(name," successfully ").concat(props.edit?"updated":"created","."));setTimeout((function(){return location.hash="#".concat(ROUTES.EMAIL_GROUPS)}),common["c"])})).catch((function(error){setLoading(false);coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to ".concat(props.edit?"update":"create"," recipient group.")})}));case 8:case"end":return _context2.stop()}}}),_callee2)})))},props.edit?"Save":"Create"))))}function CreateSender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function CreateSender_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CreateSender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CreateSender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function CreateSender_slicedToArray(arr,i){return CreateSender_arrayWithHoles(arr)||CreateSender_iterableToArrayLimit(arr,i)||CreateSender_unsupportedIterableToArray(arr,i)||CreateSender_nonIterableRest()}function CreateSender_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CreateSender_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return CreateSender_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CreateSender_arrayLikeToArray(o,minLen)}function CreateSender_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function CreateSender_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function CreateSender_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function CreateSender(props){var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var servicesContext=Object(external_osdSharedDeps_React_["useContext"])(ServicesContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(false),_useState2=CreateSender_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=Object(external_osdSharedDeps_React_["useState"])(""),_useState4=CreateSender_slicedToArray(_useState3,2),senderName=_useState4[0],setSenderName=_useState4[1];var _useState5=Object(external_osdSharedDeps_React_["useState"])(""),_useState6=CreateSender_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=Object(external_osdSharedDeps_React_["useState"])(""),_useState8=CreateSender_slicedToArray(_useState7,2),host=_useState8[0],setHost=_useState8[1];var _useState9=Object(external_osdSharedDeps_React_["useState"])(""),_useState10=CreateSender_slicedToArray(_useState9,2),port=_useState10[0],setPort=_useState10[1];var _useState11=Object(external_osdSharedDeps_React_["useState"])(Object.keys(ENCRYPTION_TYPE)[0]),_useState12=CreateSender_slicedToArray(_useState11,2),encryption=_useState12[0],setEncryption=_useState12[1];var _useState13=Object(external_osdSharedDeps_React_["useState"])({senderName:[],email:[],host:[],port:[]}),_useState14=CreateSender_slicedToArray(_useState13,2),inputErrors=_useState14[0],setInputErrors=_useState14[1];Object(external_osdSharedDeps_React_["useEffect"])((function(){coreContext.chrome.setBreadcrumbs([BREADCRUMBS.NOTIFICATIONS,BREADCRUMBS.EMAIL_SENDERS,props.edit?BREADCRUMBS.EDIT_SENDER:BREADCRUMBS.CREATE_SENDER]);window.scrollTo(0,0);if(props.edit){getSender()}}),[]);var getSender=function(){var _ref=CreateSender_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _props$match$params;var id,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=(_props$match$params=props.match.params)===null||_props$match$params===void 0?void 0:_props$match$params.id;if(!(typeof id!=="string")){_context.next=3;break}return _context.abrupt("return");case 3:_context.prev=3;_context.next=6;return servicesContext.notificationService.getSender(id);case 6:response=_context.sent;setSenderName(response.name);setEmail(response.smtp_account.from_address);setHost(response.smtp_account.host);setPort(response.smtp_account.port);setEncryption(response.smtp_account.method);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context["catch"](3);coreContext.notifications.toasts.addDanger(getErrorMessage(_context.t0,"There was a problem loading sender."));case 17:case"end":return _context.stop()}}}),_callee,null,[[3,14]])})));return function getSender(){return _ref.apply(this,arguments)}}();var isInputValid=function isInputValid(){var errors={senderName:validationHelper_validateSenderName(senderName),email:validateEmail(email),host:validateHost(host),port:validatePort(port)};setInputErrors(errors);return!Object.values(errors).reduce((function(errorFlag,error){return errorFlag||error.length>0}),false)};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_osdSharedDeps_React_default.a.createElement("h1",null,"".concat(props.edit?"Edit":"Create"," SMTP sender"))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(components_ContentPanel_ContentPanel,{bodyStyles:{padding:"initial"},title:"Configure sender",titleSize:"s",panelStyles:{maxWidth:1e3}},external_osdSharedDeps_React_default.a.createElement(CreateSenderForm,{senderName:senderName,setSenderName:setSenderName,email:email,setEmail:setEmail,host:host,setHost:setHost,port:port,setPort:setPort,encryption:encryption,setEncryption:setEncryption,inputErrors:inputErrors,setInputErrors:setInputErrors})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd",style:{maxWidth:1024}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{href:"#".concat(ROUTES.EMAIL_SENDERS)},"Cancel")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,isLoading:loading,onClick:CreateSender_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var config,request;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(isInputValid()){_context2.next=3;break}coreContext.notifications.toasts.addDanger("Some fields are invalid. Fix all highlighted error(s) before continuing.");return _context2.abrupt("return");case 3:setLoading(true);config=createSenderConfigObject(senderName,host,port,encryption,email);request=props.edit?servicesContext.notificationService.updateConfig(props.match.params.id,config):servicesContext.notificationService.createConfig(config);_context2.next=8;return request.then((function(response){coreContext.notifications.toasts.addSuccess("Sender ".concat(senderName," successfully ").concat(props.edit?"updated":"created","."));setTimeout((function(){return location.hash="#".concat(ROUTES.EMAIL_SENDERS)}),common["c"])})).catch((function(error){setLoading(false);coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to ".concat(props.edit?"update":"create"," sender.")})}));case 8:case"end":return _context2.stop()}}}),_callee2)})))},props.edit?"Save":"Create"))))}function CreateSESSender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function CreateSESSender_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CreateSESSender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CreateSESSender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function CreateSESSender_slicedToArray(arr,i){return CreateSESSender_arrayWithHoles(arr)||CreateSESSender_iterableToArrayLimit(arr,i)||CreateSESSender_unsupportedIterableToArray(arr,i)||CreateSESSender_nonIterableRest()}function CreateSESSender_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CreateSESSender_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return CreateSESSender_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CreateSESSender_arrayLikeToArray(o,minLen)}function CreateSESSender_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function CreateSESSender_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function CreateSESSender_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function CreateSESSender(props){var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var servicesContext=Object(external_osdSharedDeps_React_["useContext"])(ServicesContext);var mainStateContext=Object(external_osdSharedDeps_React_["useContext"])(MainContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(false),_useState2=CreateSESSender_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=Object(external_osdSharedDeps_React_["useState"])(""),_useState4=CreateSESSender_slicedToArray(_useState3,2),senderName=_useState4[0],setSenderName=_useState4[1];var _useState5=Object(external_osdSharedDeps_React_["useState"])(""),_useState6=CreateSESSender_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=Object(external_osdSharedDeps_React_["useState"])(""),_useState8=CreateSESSender_slicedToArray(_useState7,2),roleArn=_useState8[0],setRoleArn=_useState8[1];var _useState9=Object(external_osdSharedDeps_React_["useState"])(""),_useState10=CreateSESSender_slicedToArray(_useState9,2),awsRegion=_useState10[0],setAwsRegion=_useState10[1];var _useState11=Object(external_osdSharedDeps_React_["useState"])({senderName:[],email:[],roleArn:[],awsRegion:[]}),_useState12=CreateSESSender_slicedToArray(_useState11,2),inputErrors=_useState12[0],setInputErrors=_useState12[1];Object(external_osdSharedDeps_React_["useEffect"])((function(){coreContext.chrome.setBreadcrumbs([BREADCRUMBS.NOTIFICATIONS,BREADCRUMBS.EMAIL_SENDERS,props.edit?BREADCRUMBS.EDIT_SES_SENDER:BREADCRUMBS.CREATE_SES_SENDER]);window.scrollTo(0,0);if(props.edit){getSESSender()}}),[]);var getSESSender=function(){var _ref=CreateSESSender_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _props$match$params;var id,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=(_props$match$params=props.match.params)===null||_props$match$params===void 0?void 0:_props$match$params.id;if(!(typeof id!=="string")){_context.next=3;break}return _context.abrupt("return");case 3:_context.prev=3;_context.next=6;return servicesContext.notificationService.getSESSender(id);case 6:response=_context.sent;setSenderName(response.name);setEmail(response.ses_account.from_address);setRoleArn(response.ses_account.role_arn||"");setAwsRegion(response.ses_account.region);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context["catch"](3);coreContext.notifications.toasts.addDanger(getErrorMessage(_context.t0,"There was a problem loading sender."));case 16:case"end":return _context.stop()}}}),_callee,null,[[3,13]])})));return function getSESSender(){return _ref.apply(this,arguments)}}();var isInputValid=function isInputValid(){var errors={senderName:validationHelper_validateSenderName(senderName),email:validateEmail(email),awsRegion:validateAwsRegion(awsRegion),roleArn:[]};if(!mainStateContext.tooltipSupport){errors.roleArn=validateRoleArn(roleArn)}setInputErrors(errors);return!Object.values(errors).reduce((function(errorFlag,error){return errorFlag||error.length>0}),false)};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_osdSharedDeps_React_default.a.createElement("h1",null,"".concat(props.edit?"Edit":"Create"," SES sender"))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(components_ContentPanel_ContentPanel,{bodyStyles:{padding:"initial"},title:"Configure sender",titleSize:"s",panelStyles:{maxWidth:1e3}},external_osdSharedDeps_React_default.a.createElement(CreateSESSenderForm,{senderName:senderName,setSenderName:setSenderName,email:email,setEmail:setEmail,roleArn:roleArn,setRoleArn:setRoleArn,awsRegion:awsRegion,setAwsRegion:setAwsRegion,inputErrors:inputErrors,setInputErrors:setInputErrors})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd",style:{maxWidth:1024}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{href:"#".concat(ROUTES.EMAIL_SENDERS)},"Cancel")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,isLoading:loading,onClick:CreateSESSender_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var config,request;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(isInputValid()){_context2.next=3;break}coreContext.notifications.toasts.addDanger("Some fields are invalid. Fix all highlighted error(s) before continuing.");return _context2.abrupt("return");case 3:setLoading(true);config=createSesSenderConfigObject(senderName,email,awsRegion,roleArn);request=props.edit?servicesContext.notificationService.updateConfig(props.match.params.id,config):servicesContext.notificationService.createConfig(config);_context2.next=8;return request.then((function(response){coreContext.notifications.toasts.addSuccess("Sender ".concat(senderName," successfully ").concat(props.edit?"updated":"created","."));setTimeout((function(){return location.hash="#".concat(ROUTES.EMAIL_SENDERS)}),common["c"])})).catch((function(error){setLoading(false);coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to ".concat(props.edit?"update":"create"," sender.")})}));case 8:case"end":return _context2.stop()}}}),_callee2)})))},props.edit?"Save":"Create"))))}function DeleteRecipientGroupModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function DeleteRecipientGroupModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){DeleteRecipientGroupModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){DeleteRecipientGroupModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function DeleteRecipientGroupModal_slicedToArray(arr,i){return DeleteRecipientGroupModal_arrayWithHoles(arr)||DeleteRecipientGroupModal_iterableToArrayLimit(arr,i)||DeleteRecipientGroupModal_unsupportedIterableToArray(arr,i)||DeleteRecipientGroupModal_nonIterableRest()}function DeleteRecipientGroupModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function DeleteRecipientGroupModal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return DeleteRecipientGroupModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DeleteRecipientGroupModal_arrayLikeToArray(o,minLen)}function DeleteRecipientGroupModal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function DeleteRecipientGroupModal_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function DeleteRecipientGroupModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var DeleteRecipientGroupModal_DeleteRecipientGroupModal=function DeleteRecipientGroupModal(props){if(!props.recipientGroups.length)return null;var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(""),_useState2=DeleteRecipientGroupModal_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var num=props.recipientGroups.length;var name=num>=2?"".concat(num," recipient groups"):props.recipientGroups[0].name;var message="Delete ".concat(num>=2?"the following recipient groups":name," permanently? Any channels using ").concat(num>=2?"these email recipient groups":"this email recipient group"," will not be able to receive notifications.");return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:props.onClose,maxWidth:500},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,"Delete ".concat(name,"?"))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,message),num>=2&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),props.recipientGroups.map((function(recipientGroup,i){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{key:"recipient-groups-list-item-".concat(i),style:{marginLeft:20}},external_osdSharedDeps_React_default.a.createElement("li",null,recipientGroup.name))}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,"To confirm delete, type ",external_osdSharedDeps_React_default.a.createElement("i",null,"delete")," in the field."),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"delete",value:input,onChange:function onChange(e){return setInput(e.target.value)}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:props.onClose},"Cancel")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"delete-recipient-group-modal-delete-button",fill:true,color:"danger",onClick:DeleteRecipientGroupModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.services.notificationService.deleteConfigs(props.recipientGroups.map((function(recipientGroup){return recipientGroup.config_id}))).then((function(resp){coreContext.notifications.toasts.addSuccess("".concat(props.recipientGroups.length>1?props.recipientGroups.length+" recipient groups":"Recipient group "+props.recipientGroups[0].name," successfully deleted."));props.onClose();setTimeout((function(){return props.refresh()}),common["c"])})).catch((function(error){coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to delete one or more recipient groups."});props.onClose()}));case 1:case"end":return _context.stop()}}}),_callee)}))),disabled:input!=="delete"},"Delete"))))))};function RecipientGroupsTable_typeof(obj){"@babel/helpers - typeof";return RecipientGroupsTable_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},RecipientGroupsTable_typeof(obj)}function RecipientGroupsTable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function RecipientGroupsTable_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){RecipientGroupsTable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){RecipientGroupsTable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function RecipientGroupsTable_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function RecipientGroupsTable_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function RecipientGroupsTable_createClass(Constructor,protoProps,staticProps){if(protoProps)RecipientGroupsTable_defineProperties(Constructor.prototype,protoProps);if(staticProps)RecipientGroupsTable_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function RecipientGroupsTable_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)RecipientGroupsTable_setPrototypeOf(subClass,superClass)}function RecipientGroupsTable_setPrototypeOf(o,p){RecipientGroupsTable_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return RecipientGroupsTable_setPrototypeOf(o,p)}function RecipientGroupsTable_createSuper(Derived){var hasNativeReflectConstruct=RecipientGroupsTable_isNativeReflectConstruct();return function _createSuperInternal(){var Super=RecipientGroupsTable_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=RecipientGroupsTable_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return RecipientGroupsTable_possibleConstructorReturn(this,result)}}function RecipientGroupsTable_possibleConstructorReturn(self,call){if(call&&(RecipientGroupsTable_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return RecipientGroupsTable_assertThisInitialized(self)}function RecipientGroupsTable_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function RecipientGroupsTable_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function RecipientGroupsTable_getPrototypeOf(o){RecipientGroupsTable_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return RecipientGroupsTable_getPrototypeOf(o)}function RecipientGroupsTable_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RecipientGroupsTable_RecipientGroupsTable=function(_Component){RecipientGroupsTable_inherits(RecipientGroupsTable,_Component);var _super=RecipientGroupsTable_createSuper(RecipientGroupsTable);function RecipientGroupsTable(props){var _this;RecipientGroupsTable_classCallCheck(this,RecipientGroupsTable);_this=_super.call(this,props);RecipientGroupsTable_defineProperty(RecipientGroupsTable_assertThisInitialized(_this),"columns",void 0);RecipientGroupsTable_defineProperty(RecipientGroupsTable_assertThisInitialized(_this),"onTableChange",(function(_ref){var tablePage=_ref.page,sort=_ref.sort;var _ref2=tablePage,page=_ref2.index,size=_ref2.size;var _ref3=sort,sortField=_ref3.field,sortDirection=_ref3.direction;_this.setState({from:page*size,size:size,sortField:sortField,sortDirection:sortDirection})}));RecipientGroupsTable_defineProperty(RecipientGroupsTable_assertThisInitialized(_this),"onSelectionChange",(function(selectedItems){_this.setState({selectedItems:selectedItems})}));RecipientGroupsTable_defineProperty(RecipientGroupsTable_assertThisInitialized(_this),"onSearchChange",(function(search){_this.setState({from:0,search:search})}));_this.state={total:0,from:0,size:5,search:"",sortField:"name",sortDirection:external_osdSharedDeps_ElasticEui_["SortDirection"].ASC,items:[],selectedItems:[],loading:true};_this.columns=[{field:"name",name:"Name",sortable:true,truncateText:true,width:"150px"},{field:"email_group.recipient_list",name:"Email addresses",sortable:true,truncateText:true,width:"450px",render:function render(recipient_list){var emails=recipient_list.map((function(recipient){return recipient.recipient}));return external_osdSharedDeps_React_default.a.createElement("div",null,emails.slice(0,5).join(", "),emails.length>5&&external_osdSharedDeps_React_default.a.createElement("span",null," ",external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref4){var onShow=_ref4.onShow;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{onClick:function onClick(){return onShow(DetailsListModal,{header:"Email addresses (".concat(emails.length,")"),title:"Email addresses",items:emails})}},emails.length-5," more")}))))}},{field:"description",name:"Description",sortable:true,truncateText:true,width:"300px",render:function render(description){return description||"-"}}];_this.refresh=_this.refresh.bind(RecipientGroupsTable_assertThisInitialized(_this));return _this}RecipientGroupsTable_createClass(RecipientGroupsTable,[{key:"componentDidMount",value:function(){var _componentDidMount=RecipientGroupsTable_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.refresh();case 2:case"end":return _context.stop()}}}),_callee,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentDidUpdate",value:function(){var _componentDidUpdate=RecipientGroupsTable_asyncToGenerator(regeneratorRuntime.mark((function _callee2(prevProps,prevState){var prevQuery,currQuery;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:prevQuery=RecipientGroupsTable.getQueryObjectFromState(prevState);currQuery=RecipientGroupsTable.getQueryObjectFromState(this.state);if(external_osdSharedDeps_Lodash_default.a.isEqual(prevQuery,currQuery)){_context2.next=5;break}_context2.next=5;return this.refresh();case 5:case"end":return _context2.stop()}}}),_callee2,this)})));function componentDidUpdate(_x,_x2){return _componentDidUpdate.apply(this,arguments)}return componentDidUpdate}()},{key:"refresh",value:function(){var _refresh=RecipientGroupsTable_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var queryObject,recipientGroups;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.setState({loading:true});_context3.prev=1;queryObject=RecipientGroupsTable.getQueryObjectFromState(this.state);_context3.next=5;return this.context.notificationService.getRecipientGroups(queryObject);case 5:recipientGroups=_context3.sent;this.setState({items:recipientGroups.items,total:recipientGroups.total});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3["catch"](1);this.props.coreContext.notifications.toasts.addDanger(getErrorMessage(_context3.t0,"There was a problem loading recipient groups."));case 12:this.setState({loading:false});case 13:case"end":return _context3.stop()}}}),_callee3,this,[[1,9]])})));function refresh(){return _refresh.apply(this,arguments)}return refresh}()},{key:"render",value:function render(){var _this2=this;var page=Math.floor(this.state.from/this.state.size);var pagination={pageIndex:page,pageSize:this.state.size,pageSizeOptions:DEFAULT_PAGE_SIZE_OPTIONS,totalItemCount:this.state.total};var sorting={sort:{direction:this.state.sortDirection,field:this.state.sortField}};var selection={selectable:function selectable(){return true},onSelectionChange:this.onSelectionChange};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(components_ContentPanel_ContentPanel,{actions:external_osdSharedDeps_React_default.a.createElement(ContentPanel_ContentPanelActions,{actions:[{component:external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref5){var onShow=_ref5.onShow;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"recipient-groups-table-delete-button",disabled:_this2.state.selectedItems.length===0,onClick:function onClick(){return onShow(DeleteRecipientGroupModal_DeleteRecipientGroupModal,{recipientGroups:_this2.state.selectedItems,refresh:_this2.refresh})}},"Delete")}))},{component:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"recipient-groups-table-edit-button",disabled:this.state.selectedItems.length!==1,onClick:function onClick(){var _this2$state$selected;return location.assign("#".concat(ROUTES.EDIT_RECIPIENT_GROUP,"/").concat((_this2$state$selected=_this2.state.selectedItems[0])===null||_this2$state$selected===void 0?void 0:_this2$state$selected.config_id))}},"Edit")},{component:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,href:"#".concat(ROUTES.CREATE_RECIPIENT_GROUP)},"Create recipient group")}]}),bodyStyles:{padding:"initial"},title:"Recipient groups",titleSize:"m",total:this.state.total},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldSearch"],{"data-test-subj":"recipient-groups-table-search-input",fullWidth:true,placeholder:"Search",onSearch:this.onSearchChange}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiBasicTable"],{columns:this.columns,items:this.state.items,itemId:"config_id",isSelectable:true,selection:selection,noItemsMessage:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_osdSharedDeps_React_default.a.createElement("h2",null,"No recipient groups to display"),body:"Use an email group to manage a list of email addresses you frequently send at a time. You can select recipient groups when configuring email channels.",actions:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{href:"#".concat(ROUTES.CREATE_RECIPIENT_GROUP)},"Create recipient group")}),onChange:this.onTableChange,pagination:pagination,sorting:sorting})))}}],[{key:"getQueryObjectFromState",value:function getQueryObjectFromState(state){return{from_index:state.from,max_items:state.size,query:state.search,config_type:"email_group",sort_field:state.sortField,sort_order:state.sortDirection}}}]);return RecipientGroupsTable}(external_osdSharedDeps_React_["Component"]);RecipientGroupsTable_defineProperty(RecipientGroupsTable_RecipientGroupsTable,"contextType",ServicesContext);function EmailGroups(props){var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);Object(external_osdSharedDeps_React_["useEffect"])((function(){coreContext.chrome.setBreadcrumbs([BREADCRUMBS.NOTIFICATIONS,BREADCRUMBS.EMAIL_GROUPS]);window.scrollTo(0,0)}),[]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_osdSharedDeps_React_default.a.createElement("h1",null,"Email recipient groups")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(RecipientGroupsTable_RecipientGroupsTable,{coreContext:coreContext}))}function DeleteSenderModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function DeleteSenderModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){DeleteSenderModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){DeleteSenderModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function DeleteSenderModal_slicedToArray(arr,i){return DeleteSenderModal_arrayWithHoles(arr)||DeleteSenderModal_iterableToArrayLimit(arr,i)||DeleteSenderModal_unsupportedIterableToArray(arr,i)||DeleteSenderModal_nonIterableRest()}function DeleteSenderModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function DeleteSenderModal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return DeleteSenderModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DeleteSenderModal_arrayLikeToArray(o,minLen)}function DeleteSenderModal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function DeleteSenderModal_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function DeleteSenderModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var DeleteSenderModal_DeleteSenderModal=function DeleteSenderModal(props){if(!props.senders.length)return null;var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var _useState=Object(external_osdSharedDeps_React_["useState"])(""),_useState2=DeleteSenderModal_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var num=props.senders.length;var name=num>=2?"".concat(num," senders"):props.senders[0].name;var message="Delete ".concat(num>=2?"the following senders":name," permanently? Any channels using ").concat(num>=2?"these email senders":"this email sender"," will not be able to send notifications.");return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:props.onClose,maxWidth:500},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,"Delete ".concat(name,"?"))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,message),num>=2&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),props.senders.map((function(sender,i){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{key:"sender-list-item-".concat(i),style:{marginLeft:20}},external_osdSharedDeps_React_default.a.createElement("li",null,sender.name))}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,"To confirm delete, type ",external_osdSharedDeps_React_default.a.createElement("i",null,"delete")," in the field."),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"delete",value:input,onChange:function onChange(e){return setInput(e.target.value)}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:props.onClose},"Cancel")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"delete-sender-modal-delete-button",fill:true,color:"danger",onClick:DeleteSenderModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.services.notificationService.deleteConfigs(props.senders.map((function(sender){return sender.config_id}))).then((function(resp){coreContext.notifications.toasts.addSuccess("".concat(props.senders.length>1?props.senders.length+" senders":"Sender "+props.senders[0].name," successfully deleted."));props.onClose();setTimeout((function(){return props.refresh()}),common["c"])})).catch((function(error){coreContext.notifications.toasts.addError((error===null||error===void 0?void 0:error.body)||error,{title:"Failed to delete one or more senders."});props.onClose()}));case 1:case"end":return _context.stop()}}}),_callee)}))),disabled:input!=="delete"},"Delete"))))))};function SendersTableControls_toConsumableArray(arr){return SendersTableControls_arrayWithoutHoles(arr)||SendersTableControls_iterableToArray(arr)||SendersTableControls_unsupportedIterableToArray(arr)||SendersTableControls_nonIterableSpread()}function SendersTableControls_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SendersTableControls_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function SendersTableControls_arrayWithoutHoles(arr){if(Array.isArray(arr))return SendersTableControls_arrayLikeToArray(arr)}function SendersTableControls_slicedToArray(arr,i){return SendersTableControls_arrayWithHoles(arr)||SendersTableControls_iterableToArrayLimit(arr,i)||SendersTableControls_unsupportedIterableToArray(arr,i)||SendersTableControls_nonIterableRest()}function SendersTableControls_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SendersTableControls_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return SendersTableControls_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SendersTableControls_arrayLikeToArray(o,minLen)}function SendersTableControls_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function SendersTableControls_iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function SendersTableControls_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var SendersTableControls_SendersTableControls=function SendersTableControls(props){var _useState=Object(external_osdSharedDeps_React_["useState"])(false),_useState2=SendersTableControls_slicedToArray(_useState,2),isEncryptionPopoverOpen=_useState2[0],setIsEncryptionPopoverOpen=_useState2[1];var _useState3=Object(external_osdSharedDeps_React_["useState"])(Object.entries(ENCRYPTION_TYPE).map((function(_ref){var _ref2=SendersTableControls_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return{field:key,display:value,checked:"off"}}))),_useState4=SendersTableControls_slicedToArray(_useState3,2),encryptionItems=_useState4[0],setEncryptionItems=_useState4[1];function updateItem(items,index){if(!items[index])return;var newItems=SendersTableControls_toConsumableArray(items);newItems[index].checked=newItems[index].checked==="off"?"on":"off";var newFilters=external_osdSharedDeps_Lodash_default.a.clone(props.filters);var checkedItems=newItems.filter((function(item){return item.checked==="on"})).map((function(item){return item.field}));setEncryptionItems(newItems);newFilters.encryptionMethod=checkedItems;props.onFiltersChange(newFilters)}function isItemSelected(items){return items.map((function(item){return item.checked==="on"})).reduce((function(flag,curr){return flag||curr}),false)}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldSearch"],{"data-test-subj":"senders-table-search-input",fullWidth:true,placeholder:"Search",onSearch:props.onSearchChange})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{button:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterButton"],{iconType:"arrowDown",grow:false,onClick:function onClick(){return setIsEncryptionPopoverOpen(!isEncryptionPopoverOpen)}},isItemSelected(encryptionItems)?external_osdSharedDeps_React_default.a.createElement("b",null,"Encryption method"):"Encryption method"),isOpen:isEncryptionPopoverOpen,closePopover:function closePopover(){return setIsEncryptionPopoverOpen(false)},panelPaddingSize:"none"},encryptionItems.map((function(item,index){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterSelectItem"],{key:"smtp-sender-encryption-method-filter-".concat(index),checked:item.checked==="on"?"on":undefined,onClick:function onClick(){return updateItem(encryptionItems,index)}},item.display)}))))))};function SendersTable_typeof(obj){"@babel/helpers - typeof";return SendersTable_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SendersTable_typeof(obj)}function SendersTable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function SendersTable_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){SendersTable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){SendersTable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function SendersTable_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function SendersTable_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function SendersTable_createClass(Constructor,protoProps,staticProps){if(protoProps)SendersTable_defineProperties(Constructor.prototype,protoProps);if(staticProps)SendersTable_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function SendersTable_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)SendersTable_setPrototypeOf(subClass,superClass)}function SendersTable_setPrototypeOf(o,p){SendersTable_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return SendersTable_setPrototypeOf(o,p)}function SendersTable_createSuper(Derived){var hasNativeReflectConstruct=SendersTable_isNativeReflectConstruct();return function _createSuperInternal(){var Super=SendersTable_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=SendersTable_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return SendersTable_possibleConstructorReturn(this,result)}}function SendersTable_possibleConstructorReturn(self,call){if(call&&(SendersTable_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return SendersTable_assertThisInitialized(self)}function SendersTable_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function SendersTable_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function SendersTable_getPrototypeOf(o){SendersTable_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return SendersTable_getPrototypeOf(o)}function SendersTable_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SendersTable_SendersTable=function(_Component){SendersTable_inherits(SendersTable,_Component);var _super=SendersTable_createSuper(SendersTable);function SendersTable(props){var _this;SendersTable_classCallCheck(this,SendersTable);_this=_super.call(this,props);SendersTable_defineProperty(SendersTable_assertThisInitialized(_this),"columns",void 0);SendersTable_defineProperty(SendersTable_assertThisInitialized(_this),"onTableChange",(function(_ref){var tablePage=_ref.page,sort=_ref.sort;var _ref2=tablePage,page=_ref2.index,size=_ref2.size;var _ref3=sort,sortField=_ref3.field,sortDirection=_ref3.direction;_this.setState({from:page*size,size:size,sortField:sortField,sortDirection:sortDirection})}));SendersTable_defineProperty(SendersTable_assertThisInitialized(_this),"onSelectionChange",(function(selectedItems){_this.setState({selectedItems:selectedItems})}));SendersTable_defineProperty(SendersTable_assertThisInitialized(_this),"onSearchChange",(function(search){_this.setState({from:0,search:search})}));_this.state={total:0,from:0,size:5,search:"",sortField:"name",sortDirection:external_osdSharedDeps_ElasticEui_["SortDirection"].ASC,items:[],selectedItems:[],loading:true,filters:{encryptionMethod:[]}};_this.columns=[{field:"name",name:"Name",sortable:true,truncateText:true,width:"200px"},{field:"smtp_account.from_address",name:"Outbound email address",sortable:true,truncateText:true,width:"200px"},{field:"smtp_account.host",name:"Host",sortable:true,truncateText:true,width:"200px"},{field:"smtp_account.port",name:"Port",sortable:false,truncateText:true,width:"200px"},{field:"smtp_account.method",name:"Encryption method",sortable:true,truncateText:true,width:"200px",render:function render(method){return external_osdSharedDeps_Lodash_default.a.get(ENCRYPTION_TYPE,method,"-")}}];_this.refresh=_this.refresh.bind(SendersTable_assertThisInitialized(_this));return _this}SendersTable_createClass(SendersTable,[{key:"componentDidMount",value:function(){var _componentDidMount=SendersTable_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.refresh();case 2:case"end":return _context.stop()}}}),_callee,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentDidUpdate",value:function(){var _componentDidUpdate=SendersTable_asyncToGenerator(regeneratorRuntime.mark((function _callee2(prevProps,prevState){var prevQuery,currQuery;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:prevQuery=SendersTable.getQueryObjectFromState(prevState);currQuery=SendersTable.getQueryObjectFromState(this.state);if(external_osdSharedDeps_Lodash_default.a.isEqual(prevQuery,currQuery)){_context2.next=5;break}_context2.next=5;return this.refresh();case 5:case"end":return _context2.stop()}}}),_callee2,this)})));function componentDidUpdate(_x,_x2){return _componentDidUpdate.apply(this,arguments)}return componentDidUpdate}()},{key:"refresh",value:function(){var _refresh=SendersTable_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var queryObject,senders;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.setState({loading:true});_context3.prev=1;queryObject=SendersTable.getQueryObjectFromState(this.state);_context3.next=5;return this.context.notificationService.getSenders(queryObject);case 5:senders=_context3.sent;this.setState({items:senders.items,total:senders.total});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3["catch"](1);this.props.coreContext.notifications.toasts.addDanger(getErrorMessage(_context3.t0,"There was a problem loading SMTP senders."));case 12:this.setState({loading:false});case 13:case"end":return _context3.stop()}}}),_callee3,this,[[1,9]])})));function refresh(){return _refresh.apply(this,arguments)}return refresh}()},{key:"render",value:function render(){var _this2=this;var page=Math.floor(this.state.from/this.state.size);var pagination={pageIndex:page,pageSize:this.state.size,pageSizeOptions:DEFAULT_PAGE_SIZE_OPTIONS,totalItemCount:this.state.total};var sorting={sort:{direction:this.state.sortDirection,field:this.state.sortField}};var selection={selectable:function selectable(){return true},onSelectionChange:this.onSelectionChange};return external_osdSharedDeps_React_default.a.createElement(components_ContentPanel_ContentPanel,{actions:external_osdSharedDeps_React_default.a.createElement(ContentPanel_ContentPanelActions,{actions:[{component:external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref4){var onShow=_ref4.onShow;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"senders-table-delete-button",disabled:_this2.state.selectedItems.length===0,onClick:function onClick(){return onShow(DeleteSenderModal_DeleteSenderModal,{senders:_this2.state.selectedItems,refresh:_this2.refresh})}},"Delete")}))},{component:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"senders-table-edit-button",disabled:this.state.selectedItems.length!==1,onClick:function onClick(){var _this2$state$selected;return location.assign("#".concat(ROUTES.EDIT_SENDER,"/").concat((_this2$state$selected=_this2.state.selectedItems[0])===null||_this2$state$selected===void 0?void 0:_this2$state$selected.config_id))}},"Edit")},{component:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,href:"#".concat(ROUTES.CREATE_SENDER)},"Create SMTP sender")}]}),bodyStyles:{padding:"initial"},title:"SMTP senders",titleSize:"m",total:this.state.total},external_osdSharedDeps_React_default.a.createElement(SendersTableControls_SendersTableControls,{onSearchChange:this.onSearchChange,filters:this.state.filters,onFiltersChange:function onFiltersChange(filters){return _this2.setState({filters:filters})}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiBasicTable"],{columns:this.columns,items:this.state.items,itemId:"config_id",isSelectable:true,selection:selection,noItemsMessage:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_osdSharedDeps_React_default.a.createElement("h2",null,"No SMTP senders to display"),body:"Set up an outbound email server by creating a sender. You will select a sender when configuring email channels.",actions:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{href:"#".concat(ROUTES.CREATE_SENDER)},"Create SMTP sender")}),onChange:this.onTableChange,pagination:pagination,sorting:sorting,loading:this.state.loading}))}}],[{key:"getQueryObjectFromState",value:function getQueryObjectFromState(state){var queryObject={from_index:state.from,max_items:state.size,query:state.search,config_type:"smtp_account",sort_field:state.sortField,sort_order:state.sortDirection};if(state.filters.encryptionMethod.length>0){queryObject["smtp_account.method"]=state.filters.encryptionMethod}return queryObject}}]);return SendersTable}(external_osdSharedDeps_React_["Component"]);SendersTable_defineProperty(SendersTable_SendersTable,"contextType",ServicesContext);function SESSendersTable_typeof(obj){"@babel/helpers - typeof";return SESSendersTable_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SESSendersTable_typeof(obj)}function SESSendersTable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function SESSendersTable_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){SESSendersTable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){SESSendersTable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function SESSendersTable_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function SESSendersTable_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function SESSendersTable_createClass(Constructor,protoProps,staticProps){if(protoProps)SESSendersTable_defineProperties(Constructor.prototype,protoProps);if(staticProps)SESSendersTable_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function SESSendersTable_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)SESSendersTable_setPrototypeOf(subClass,superClass)}function SESSendersTable_setPrototypeOf(o,p){SESSendersTable_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return SESSendersTable_setPrototypeOf(o,p)}function SESSendersTable_createSuper(Derived){var hasNativeReflectConstruct=SESSendersTable_isNativeReflectConstruct();return function _createSuperInternal(){var Super=SESSendersTable_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=SESSendersTable_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return SESSendersTable_possibleConstructorReturn(this,result)}}function SESSendersTable_possibleConstructorReturn(self,call){if(call&&(SESSendersTable_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return SESSendersTable_assertThisInitialized(self)}function SESSendersTable_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function SESSendersTable_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function SESSendersTable_getPrototypeOf(o){SESSendersTable_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return SESSendersTable_getPrototypeOf(o)}function SESSendersTable_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SESSendersTable_SESSendersTable=function(_Component){SESSendersTable_inherits(SESSendersTable,_Component);var _super=SESSendersTable_createSuper(SESSendersTable);function SESSendersTable(props){var _this;SESSendersTable_classCallCheck(this,SESSendersTable);_this=_super.call(this,props);SESSendersTable_defineProperty(SESSendersTable_assertThisInitialized(_this),"columns",void 0);SESSendersTable_defineProperty(SESSendersTable_assertThisInitialized(_this),"onTableChange",(function(_ref){var tablePage=_ref.page,sort=_ref.sort;var _ref2=tablePage,page=_ref2.index,size=_ref2.size;var _ref3=sort,sortField=_ref3.field,sortDirection=_ref3.direction;_this.setState({from:page*size,size:size,sortField:sortField,sortDirection:sortDirection})}));SESSendersTable_defineProperty(SESSendersTable_assertThisInitialized(_this),"onSelectionChange",(function(selectedItems){_this.setState({selectedItems:selectedItems})}));SESSendersTable_defineProperty(SESSendersTable_assertThisInitialized(_this),"onSearchChange",(function(search){_this.setState({from:0,search:search})}));_this.state={total:0,from:0,size:5,search:"",sortField:"name",sortDirection:external_osdSharedDeps_ElasticEui_["SortDirection"].ASC,items:[],selectedItems:[],loading:true};_this.columns=[{field:"name",name:"Name",sortable:true,truncateText:true,width:"200px"},{field:"ses_account.from_address",name:"Outbound email address",sortable:true,truncateText:true},{field:"ses_account.region",name:"AWS region",sortable:true,truncateText:true},{field:"ses_account.role_arn",name:"Role ARN",sortable:false,truncateText:true}];_this.refresh=_this.refresh.bind(SESSendersTable_assertThisInitialized(_this));return _this}SESSendersTable_createClass(SESSendersTable,[{key:"componentDidMount",value:function(){var _componentDidMount=SESSendersTable_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.refresh();case 2:case"end":return _context.stop()}}}),_callee,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentDidUpdate",value:function(){var _componentDidUpdate=SESSendersTable_asyncToGenerator(regeneratorRuntime.mark((function _callee2(prevProps,prevState){var prevQuery,currQuery;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:prevQuery=SESSendersTable.getQueryObjectFromState(prevState);currQuery=SESSendersTable.getQueryObjectFromState(this.state);if(external_osdSharedDeps_Lodash_default.a.isEqual(prevQuery,currQuery)){_context2.next=5;break}_context2.next=5;return this.refresh();case 5:case"end":return _context2.stop()}}}),_callee2,this)})));function componentDidUpdate(_x,_x2){return _componentDidUpdate.apply(this,arguments)}return componentDidUpdate}()},{key:"refresh",value:function(){var _refresh=SESSendersTable_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var queryObject,senders;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.setState({loading:true});_context3.prev=1;queryObject=SESSendersTable.getQueryObjectFromState(this.state);_context3.next=5;return this.context.notificationService.getSESSenders(queryObject);case 5:senders=_context3.sent;this.setState({items:senders.items,total:senders.total});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3["catch"](1);this.props.coreContext.notifications.toasts.addDanger(getErrorMessage(_context3.t0,"There was a problem loading SES senders."));case 12:this.setState({loading:false});case 13:case"end":return _context3.stop()}}}),_callee3,this,[[1,9]])})));function refresh(){return _refresh.apply(this,arguments)}return refresh}()},{key:"render",value:function render(){var _this2=this;var page=Math.floor(this.state.from/this.state.size);var pagination={pageIndex:page,pageSize:this.state.size,pageSizeOptions:DEFAULT_PAGE_SIZE_OPTIONS,totalItemCount:this.state.total};var sorting={sort:{direction:this.state.sortDirection,field:this.state.sortField}};var selection={selectable:function selectable(){return true},onSelectionChange:this.onSelectionChange};return external_osdSharedDeps_React_default.a.createElement(components_ContentPanel_ContentPanel,{actions:external_osdSharedDeps_React_default.a.createElement(ContentPanel_ContentPanelActions,{actions:[{component:external_osdSharedDeps_React_default.a.createElement(ModalConsumer,null,(function(_ref4){var onShow=_ref4.onShow;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"ses-senders-table-delete-button",disabled:_this2.state.selectedItems.length===0,onClick:function onClick(){return onShow(DeleteSenderModal_DeleteSenderModal,{senders:_this2.state.selectedItems,refresh:_this2.refresh})}},"Delete")}))},{component:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"ses-senders-table-edit-button",disabled:this.state.selectedItems.length!==1,onClick:function onClick(){var _this2$state$selected;return location.assign("#".concat(ROUTES.EDIT_SES_SENDER,"/").concat((_this2$state$selected=_this2.state.selectedItems[0])===null||_this2$state$selected===void 0?void 0:_this2$state$selected.config_id))}},"Edit")},{component:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,href:"#".concat(ROUTES.CREATE_SES_SENDER)},"Create SES sender")}]}),bodyStyles:{padding:"initial"},title:"SES senders",titleSize:"m",total:this.state.total},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldSearch"],{"data-test-subj":"ses-senders-table-search-input",fullWidth:true,placeholder:"Search",onSearch:this.onSearchChange}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiBasicTable"],{columns:this.columns,items:this.state.items,itemId:"config_id",isSelectable:true,selection:selection,noItemsMessage:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_osdSharedDeps_React_default.a.createElement("h2",null,"No SES senders to display"),body:"Set up an outbound email server by creating a sender. You will select a sender when configuring email channels.",actions:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{href:"#".concat(ROUTES.CREATE_SES_SENDER)},"Create SES sender")}),onChange:this.onTableChange,pagination:pagination,sorting:sorting,loading:this.state.loading,tableLayout:"auto"}))}}],[{key:"getQueryObjectFromState",value:function getQueryObjectFromState(state){return{from_index:state.from,max_items:state.size,query:state.search,config_type:"ses_account",sort_field:state.sortField,sort_order:state.sortDirection}}}]);return SESSendersTable}(external_osdSharedDeps_React_["Component"]);SESSendersTable_defineProperty(SESSendersTable_SESSendersTable,"contextType",ServicesContext);function EmailSenders(props){var coreContext=Object(external_osdSharedDeps_React_["useContext"])(CoreServicesContext);var mainStateContext=Object(external_osdSharedDeps_React_["useContext"])(MainContext);Object(external_osdSharedDeps_React_["useEffect"])((function(){coreContext.chrome.setBreadcrumbs([BREADCRUMBS.NOTIFICATIONS,BREADCRUMBS.EMAIL_SENDERS]);window.scrollTo(0,0)}),[]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_osdSharedDeps_React_default.a.createElement("h1",null,"Email senders")),mainStateContext.availableConfigTypes.includes("smtp_account")&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(SendersTable_SendersTable,{coreContext:coreContext})),mainStateContext.availableConfigTypes.includes("ses_account")&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(SESSendersTable_SESSendersTable,{coreContext:coreContext})))}function Main_typeof(obj){"@babel/helpers - typeof";return Main_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Main_typeof(obj)}function Main_extends(){Main_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return Main_extends.apply(this,arguments)}function Main_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function Main_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){Main_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){Main_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function Main_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function Main_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function Main_createClass(Constructor,protoProps,staticProps){if(protoProps)Main_defineProperties(Constructor.prototype,protoProps);if(staticProps)Main_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function Main_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)Main_setPrototypeOf(subClass,superClass)}function Main_setPrototypeOf(o,p){Main_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return Main_setPrototypeOf(o,p)}function Main_createSuper(Derived){var hasNativeReflectConstruct=Main_isNativeReflectConstruct();return function _createSuperInternal(){var Super=Main_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=Main_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return Main_possibleConstructorReturn(this,result)}}function Main_possibleConstructorReturn(self,call){if(call&&(Main_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return Main_assertThisInitialized(self)}function Main_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function Main_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function Main_getPrototypeOf(o){Main_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return Main_getPrototypeOf(o)}function Main_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Navigation;(function(Navigation){Navigation["Notifications"]="Notifications";Navigation["Channels"]="Channels";Navigation["EmailSenders"]="Email senders";Navigation["EmailGroups"]="Email recipient groups"})(Navigation||(Navigation={}));var Pathname;(function(Pathname){Pathname["Channels"]="/channels"})(Pathname||(Pathname={}));var MainContext=Object(external_osdSharedDeps_React_["createContext"])(null);var Main_Main=function(_Component){Main_inherits(Main,_Component);var _super=Main_createSuper(Main);function Main(props){var _this;Main_classCallCheck(this,Main);_this=_super.call(this,props);_this.state={availableChannels:CHANNEL_TYPE,availableConfigTypes:[],tooltipSupport:false};return _this}Main_createClass(Main,[{key:"componentDidMount",value:function(){var _componentDidMount=Main_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var serverFeatures;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.context.notificationService.getServerFeatures();case 2:serverFeatures=_context.sent;if(serverFeatures!=null){this.setState({availableChannels:serverFeatures.availableChannels,availableConfigTypes:serverFeatures.availableConfigTypes,tooltipSupport:serverFeatures.tooltipSupport})}else{this.setState({availableChannels:CHANNEL_TYPE,availableConfigTypes:["slack","chime","webhook","email","sns","smtp_account","ses_account","email_group"],tooltipSupport:serverFeatures.tooltipSupport})}case 4:case"end":return _context.stop()}}}),_callee,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"render",value:function render(){var _this2=this;var pathname=this.props.location.pathname;var sideNav=[{name:Navigation.Notifications,id:0,href:"#".concat(Pathname.Channels),items:[{name:Navigation.Channels,id:2,href:"#".concat(Pathname.Channels),isSelected:pathname===Pathname.Channels},{name:Navigation.EmailSenders,id:3,href:"#".concat(ROUTES.EMAIL_SENDERS),isSelected:pathname===ROUTES.EMAIL_SENDERS},{name:Navigation.EmailGroups,id:4,href:"#".concat(ROUTES.EMAIL_GROUPS),isSelected:pathname===ROUTES.EMAIL_GROUPS}]}];return external_osdSharedDeps_React_default.a.createElement(CoreServicesConsumer,null,(function(core){return core&&external_osdSharedDeps_React_default.a.createElement(ServicesConsumer,null,(function(services){return services&&external_osdSharedDeps_React_default.a.createElement(MainContext.Provider,{value:_this2.state},external_osdSharedDeps_React_default.a.createElement(Modal_ModalProvider,null,external_osdSharedDeps_React_default.a.createElement(Modal_ModalRoot,{services:services}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPage"],null,pathname!==ROUTES.CREATE_CHANNEL&&!pathname.startsWith(ROUTES.EDIT_CHANNEL)&&!pathname.startsWith(ROUTES.CHANNEL_DETAILS)&&pathname!==ROUTES.CREATE_SENDER&&!pathname.startsWith(ROUTES.EDIT_SENDER)&&pathname!==ROUTES.CREATE_SES_SENDER&&!pathname.startsWith(ROUTES.EDIT_SES_SENDER)&&pathname!==ROUTES.CREATE_RECIPIENT_GROUP&&!pathname.startsWith(ROUTES.EDIT_RECIPIENT_GROUP)&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPageSideBar"],{style:{minWidth:155}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSideNav"],{style:{width:155},items:sideNav})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPageBody"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Switch"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:ROUTES.CREATE_CHANNEL,render:function render(props){return external_osdSharedDeps_React_default.a.createElement(CreateChannel,props)}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:"".concat(ROUTES.EDIT_CHANNEL,"/:id"),render:function render(props){return external_osdSharedDeps_React_default.a.createElement(CreateChannel,Main_extends({},props,{edit:true}))}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:"".concat(ROUTES.CHANNEL_DETAILS,"/:id"),render:function render(props){return external_osdSharedDeps_React_default.a.createElement(ChannelDetails,props)}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:ROUTES.CHANNELS,render:function render(props){return external_osdSharedDeps_React_default.a.createElement(Channels_Channels,Main_extends({},props,{notificationService:services.notificationService}))}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:ROUTES.EMAIL_SENDERS,render:function render(props){return external_osdSharedDeps_React_default.a.createElement(EmailSenders,props)}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:ROUTES.EMAIL_GROUPS,render:function render(props){return external_osdSharedDeps_React_default.a.createElement(EmailGroups,props)}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:ROUTES.CREATE_SENDER,render:function render(props){return external_osdSharedDeps_React_default.a.createElement(CreateSender,props)}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:"".concat(ROUTES.EDIT_SENDER,"/:id"),render:function render(props){return external_osdSharedDeps_React_default.a.createElement(CreateSender,Main_extends({},props,{edit:true}))}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:ROUTES.CREATE_SES_SENDER,render:function render(props){return external_osdSharedDeps_React_default.a.createElement(CreateSESSender,props)}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:"".concat(ROUTES.EDIT_SES_SENDER,"/:id"),render:function render(props){return external_osdSharedDeps_React_default.a.createElement(CreateSESSender,Main_extends({},props,{edit:true}))}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:ROUTES.CREATE_RECIPIENT_GROUP,render:function render(props){return external_osdSharedDeps_React_default.a.createElement(CreateRecipientGroup,props)}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:"".concat(ROUTES.EDIT_RECIPIENT_GROUP,"/:id"),render:function render(props){return external_osdSharedDeps_React_default.a.createElement(CreateRecipientGroup,Main_extends({},props,{edit:true}))}}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Redirect"],{from:"/",to:ROUTES.CHANNELS}))))))}))}))}}]);return Main}(external_osdSharedDeps_React_["Component"]);Main_defineProperty(Main_Main,"contextType",ServicesContext);var pages_Main=Main_Main;var application_renderApp=function renderApp(coreStart,params){var http=coreStart.http;var notificationService=new NotificationService_NotificationService(http);var services={notificationService:notificationService};external_osdSharedDeps_ReactDom_default.a.render(external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["HashRouter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{render:function render(props){return external_osdSharedDeps_React_default.a.createElement(ServicesContext.Provider,{value:services},external_osdSharedDeps_React_default.a.createElement(CoreServicesContext.Provider,{value:coreStart},external_osdSharedDeps_React_default.a.createElement(pages_Main,props)))}})),params.element);return function(){return external_osdSharedDeps_ReactDom_default.a.unmountComponentAtNode(params.element)}}}}]);